<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Miya is not enough for our communication. | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Miya is not enough for our communication.</h1>
<p>
  <small class="text-secondary">
  
  
  Feb 13, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/natural-language-processing"> natural language processing</a></code></small>


<small><code><a href="https://memotut.com/tags/nlp"> NLP</a></code></small>


<small><code><a href="https://memotut.com/tags/news-item"> news item</a></code></small>


<small><code><a href="https://memotut.com/tags/cotoha"> COTOHA</a></code></small>

</p>
<pre><code>#TL;DR
</code></pre>
<p>By using the COTOHA API, we have proposed a poem that is close to what you want to convey from the Hyakunin Isshu.
As a gateway to more &ldquo;elegant&rdquo; communication, you can bridge between engineers and non-engineers. (May be)</p>
<p>| What I want to convey | Proposed Waka | Meaning |
|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- &mdash;&mdash;&mdash;|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;|
| I feel very lonely to hear that I will be transferred. If you compare to the heart after seeing you, you will be sick of things in the old days | Compared to the painful love you have had since you met me like this, the pain of the old love you wanted to meet Is the same as if you didn&rsquo;t think about anything. |
| | <strong>Yamazato is lonely in winter I can&rsquo;t see the eyes and grass <strong>|</strong> Yamazato is lonely in any season, but I feel particularly lonely in winter. People who ask me are lost and comforting I think the grass will also die.</strong> |
| | I wonder if it&rsquo;s a long struggle from your regret to praying for life | My life was not regrettable to meet you, but now that I&rsquo;ve been able to meet you, I&rsquo;ll live forever I want to stay. |</p>
<p>I will propose about three Waka songs like this. (Bold is subjectively the last Japanese poem that seems to be the best)</p>
<p>#Introduction</p>
<h2 id="are-you-all-miya">Are you all &ldquo;Miya&rdquo;?</h2>
<p>You say natural language processing, natural language processing, but what is the purpose of natural language in the first place?
I think it&rsquo;s for communication. And when I think about communication, I think that modern Japanese forget important things.
so,</p>
<p><strong>Miyabi</strong></p>
<p>is. In the old days, elegant communication through waka was performed, but this is being lost. deplorable.
However, it is impossible to ask modern people to suddenly regain their heart. Therefore, this time, by proposing a Japanese poem to be quoted at the end of the sentence, it is an attempt to regain the sense of elegance for modern people.</p>
<h1 id="cotoha-api">COTOHA API</h1>
<p>COTOHA API is a natural language processing API by NTT that allows you to easily use complicated functions such as advanced and preparation.</p>
<p>The great thing is that you can hit 1000 times a day even with a free account.
Registration is from â†“
<a href="https://api.ce-cotoha.com/contents/index.html">COTOHA registration page COTOHA API PORTAL</a></p>
<p>This time, we will use the semantic equivalence judgment of this COTOHA API to suggest the best Waka song.</p>
<p>#data
This time, I borrowed the semantic data of Hyakunin Isshu from <a href="https://hyakunin.stardust31.com/gendaiyaku.html">this site</a>.
Actually, I wish I could translate and distribute the data myself, but I didn&rsquo;t have much time&hellip;</p>
<h1 id="use-cotoha-api">Use COTOHA API.</h1>
<p>After registering, I will explain the flow after registration.
Well, as you can see from the official Getting started, just in case.
I use the requests library because I did it in Python.</p>
<h2 id="get-access-token">Get access token</h2>
<p>After registration, hit post based on the token acquisition id, client id, client secret.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">url <span style="color:#f92672">=</span> [URL <span style="color:#66d9ef">for</span> issuing api]
head <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;Content-Type&#34;</span>:<span style="color:#e6db74">&#34;application/json&#34;</span>}
params <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;grantType&#34;</span>: <span style="color:#e6db74">&#34;client_credentials&#34;</span>,
  <span style="color:#e6db74">&#34;clientId&#34;</span>: [clientid],
  <span style="color:#e6db74">&#34;clientSecret&#34;</span>: [clientSecret]}
r <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>post(url,headers<span style="color:#f92672">=</span>head,data<span style="color:#f92672">=</span>json<span style="color:#f92672">.</span>dumps(params))
</code></pre></div><p>If you do this, you will receive an access token. Once every 24 hours? It needs to be updated, so hit this when you can&rsquo;t connect.</p>
<p>hit ##api</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">header <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;Content-Type&#34;</span>:<span style="color:#e6db74">&#34;application/json&#34;</span>,
    <span style="color:#e6db74">&#34;Authorization&#34;</span>:<span style="color:#e6db74">&#34;Bearer &#34;</span><span style="color:#f92672">+</span> [token]
}

datas <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;sentence&#34;</span>: <span style="color:#e6db74">&#34;The dog walks.&#34;</span>
}

r <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>post(api_base<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;nlp/v1/parse&#34;</span>,headers<span style="color:#f92672">=</span>header,data<span style="color:#f92672">=</span>json<span style="color:#f92672">.</span>dumps(datas))
</code></pre></div><p>Api_base here is the base url for hitting the api you get when you register.
The &ldquo;nlp/v1/parse&rdquo; part is the api type you want to use, and you can check it from <a href="https://api.ce-cotoha.com/contents/reference/apireference.html#">Reference here</a>.Some(3) APIs are limited to paid accounts, but most can be used. Parse the return value to json and do the rest.</p>
<p>#Get the most meaningful waka
Simply hit the similarity between each meaning sentence of the Hyakunin Isshu waka and the sentence you want to target, and propose about three waka songs in descending order of similarity. Click here for implementation</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">suggest_waka</span>(txt,issyu):
    buf <span style="color:#f92672">=</span> []
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">100</span>):
        waka <span style="color:#f92672">=</span> issyu[i][<span style="color:#ae81ff">1</span>]

        header <span style="color:#f92672">=</span> {
            <span style="color:#e6db74">&#34;Content-Type&#34;</span>:<span style="color:#e6db74">&#34;application/json;charset=UTF-8&#34;</span>,
            <span style="color:#e6db74">&#34;Authorization&#34;</span>:<span style="color:#e6db74">&#34;Bearer &#34;</span><span style="color:#f92672">+</span> [token]
        }

        datas <span style="color:#f92672">=</span> {
            <span style="color:#e6db74">&#34;s1&#34;</span>:txt,
            <span style="color:#e6db74">&#34;s2&#34;</span>:waka,
        }

        r <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>post(api_base<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;nlp/v1/similarity&#34;</span>,headers<span style="color:#f92672">=</span>header,data<span style="color:#f92672">=</span>json<span style="color:#f92672">.</span>dumps(datas))
        parsed <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(r<span style="color:#f92672">.</span>text)
        buf<span style="color:#f92672">.</span>append([i,parsed[<span style="color:#e6db74">&#34;result&#34;</span>][<span style="color:#e6db74">&#34;score&#34;</span>]])
        time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">0.3</span>)
    <span style="color:#66d9ef">return</span> buf
</code></pre></div><p>txt is the sentence you want to target, issyu is a Hyakunin Isshu array, and it is an array of [Waka, Interpretation].
With this, the similarity is returned for each waka, so sort it in order of similarity and bring about 3 from the highest to complete.</p>
<p>#result</p>
<p>| What I want to convey | Proposed Waka | Meaning |
|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- &mdash;&mdash;&mdash;|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;|
| I feel very lonely to hear that I will be transferred. If you compare to the heart after seeing you, you will be sick of things in the old days | Compared to the painful love you have had since you met me like this, the pain of the old love you wanted to meet Is the same as if you didn&rsquo;t think about anything. |
| | <strong>Yamazato is lonely in winter I can&rsquo;t see the eyes and grass <strong>|</strong> Yamazato is lonely in any season, but I feel particularly lonely in winter. People who ask me are lost and comforting I think the grass will also die.</strong> |
| | I wonder if it&rsquo;s a long struggle from your regret to praying for life | My life was not regrettable to meet you, but now that I&rsquo;ve been able to meet you, I&rsquo;ll live forever I want to stay. |</p>
<p>| What I want to convey | Proposed Waka | Meaning ||&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- &mdash;|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- &mdash;&mdash;&mdash;&mdash;&mdash;-|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash; &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-|
I look forward to seeing you soon. I wonder if a pitiful person should not be thoughtful and distracting. | (Abandoned by you) I can&rsquo;t even think of a person who would turn me in pity. (I love you as it is) I can&rsquo;t do anything but just wait for the day when I lose myself vainly. |
| | <strong>If you abalone, you will be the same Namba now, but I think I will not meet you ** |</strong> (I can&rsquo;t meet you) If I live like this, It&rsquo;s the same as if I had left myself. Better yet, I would like to see you even if I left this body, just like that Namba.
| | Shinobu Mozuri in Mutsu, who&rsquo;s messing around without messing up | My heart is disturbing (because of love) like the disorderly pattern of Shinobu Mochi in Oshu, but for whom I&rsquo;m confused like this. (It must be your fault) |</p>
<p>How about that. I hate being too dramatic, but don&rsquo;t you feel that you have regained your &ldquo;Miya&rdquo; heart?</p>
<h1 id="from-the-morning-its-completely-pompony-and-the-squeeze-is-deep-so-ill-leave-it-for-a-day-if-i-can-go-tomorrow-ill-be-the-man-to-go-neta">From the morning, it&rsquo;s completely pompony and the squeeze is deep, so I&rsquo;ll leave it for a day. If I can go tomorrow, I&rsquo;ll be the man to go! (Neta)</h1>
<p>If you add a poem to a sentence like this, it&rsquo;s like this.</p>
<pre><code>From the morning, it's completely pomponized and the squeeze is deep, so I'll leave it for a day. If I can go tomorrow, I'll be the man to go!

If you don't want to forget the end of the line
Remembering it forever is very difficult in the distant future (better than seeing your change of mind), and even better, I want my life to end today.
</code></pre><p>What do you think of it as a very special attitude? (Unreasonable)</p>
<p>#in conclusion</p>
<p>I&rsquo;m a little sad that the result is not what I expected.</p>
<p>**Holding people and making people happy without thinking, thinking about the world
It is to the self-indulgent, self-impressed (though scary) that a person seems to be loved and resentful.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
