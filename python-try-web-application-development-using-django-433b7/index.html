<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>(Python) Try Web application development using Django | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>(Python) Try Web application development using Django</h1>
<p>
  <small class="text-secondary">
  
  
  Dec 29, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/django">Django</a></code></small>


<small><code><a href="https://memotut.com/tags/web-application">web application</a></code></small>

</p>
<pre><code>#Introduction
</code></pre>
<p>I would like to see the API execution result in HTML.
So, first I ran the API on localhost to see if I could display the results in HTML in a browser.
As a result, I was told to study <code>Django</code>, so I will try it for the time being.</p>
<h1 id="django">Django</h1>
<p>A brief explanation of Django.</p>
<ul>
<li>
<p>A full stack framework written in Python.
-You have everything you need.
-Templates don&rsquo;t bring that, DB access doesn&rsquo;t.
-There are modules to extend, but the basics are complete with Django.</p>
</li>
<li>
<p>ORM-Object Relational Mapping Object relational mapping is excellent.</p>
</li>
<li>
<p>Low learning cost
-Raw HTML, Javascript, CSS are basic, but it&rsquo;s simple as a web framework of choice.</p>
</li>
</ul>
<h1 id="development-flow">Development flow</h1>
<p>Since this is the first development using <code>Django</code>, I will create a book list as a sample application.
Development proceeds according to the following flow.</p>
<ol>
<li>Install <code>Django</code> and create a project.</li>
<li>Set up the database.</li>
<li>Start the development server.</li>
<li>Create the application.</li>
<li>Install Bootstrap.</li>
<li>Create views and URL scheme.</li>
<li>Create HTML.</li>
</ol>
<p>#Environment
The execution environment is as follows</p>
<pre><code>$ sw_vers
ProductName: Mac OS X
ProductVersion: 10.15.1
BuildVersion: 19B88

$ python --version
Python 3.7.4
</code></pre><p>Use <code>venv</code> as a virtual development environment.</p>
<h1 id="1-install-django-and-create-a-project">1. Install Django and create a project</h1>
<p>I want to use the stable version this time, so specify the version and install.</p>
<pre><code>$ pip install django==2.1.5
</code></pre><p>Then create a project.
This time, create a project called mybook.</p>
<pre><code>$ django-admin.py startproject mybook
</code></pre><p>A project is created with the following structure.</p>
<pre><code>mybook/
    manage.py
    mybook/
        __init__.py
        settings.py
        urls.py
        wsgi.py
</code></pre><p>Now move to the <code>mybook</code> directory.</p>
<pre><code>$ cd mybook
</code></pre><h1 id="2-set-up-the-database">2. Set up the database</h1>
<p>Database settings can be done in <code>mybook/settings.py</code>.
This time, use the initial setting <code>SQlite3</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-settings.py" data-lang="settings.py"><span style="color:#75715e"># Build paths inside the project like this: os.path.join(BASE_DIR, ...)</span>
BASE_DIR <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>dirname(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>dirname(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>abspath(__file__)))

    :

<span style="color:#75715e"># Database</span>
<span style="color:#75715e"># https://docs.djangoproject.com/en/1.9/ref/settings/#databases</span>

DATABASES <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#39;default&#39;</span>: {
        <span style="color:#e6db74">&#39;ENGINE&#39;</span>:<span style="color:#e6db74">&#39;django.db.backends.sqlite3&#39;</span>,
        <span style="color:#e6db74">&#39;NAME&#39;</span>: os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(BASE_DIR,<span style="color:#e6db74">&#39;db.sqlite3&#39;</span>),
    }
}
</code></pre></div><p>When you enter the command to migrate the database, a file called <code>db.sqlite3</code> will be created in the directory directly under the project.</p>
<pre><code>$ python manage.py migrate
</code></pre><p>At the same time, create a super user.</p>
<pre><code>$python manage.py createsuperuser
Username (leave blank to use'hoge'): admin
Email address: admin@example.com
Password: hogefuga
Password (again): hogefuga
Superuser created successfully.
</code></pre><p>On the way, answer the following questions.</p>
<ul>
<li>Username: admin</li>
<li>Email address: <a href="mailto:admin@example.com">admin@example.com</a> *Appropriate</li>
<li>Password: hogefuga</li>
<li>Password (re-enter): hogefuga</li>
</ul>
<h1 id="3-start-the-development-server">3. Start the development server</h1>
<p>Start the development server with the command <code>python manage.py runserver</code> and check if the project works.</p>
<pre><code>$ python manage.py runserver
</code></pre><p>Access http://127.0.0.1:8000/ with a browser.
<img width="1172" alt="Screenshots 2019-12-29 20.04.26.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/472784/a444b84f-c51a-277f-ff98-500180c4549d.png">
To terminate the development server, use <code>control + c</code>.</p>
<h1 id="4-create-the-application">4. Create the application</h1>
<p>Create an application called <code>cms</code> under the project.
Create it with the following command.</p>
<pre><code>$ python manage.py startapp cms
</code></pre><p>The following files are created under the mybook project directory.</p>
<pre><code>mybook/
    cms/
        __init__.py
        admin.py
        apps.py
        migrations/
            __init__.py
        models.py
        tests.py
        views.py
    manage.py
    mybook/
       :
       :
</code></pre><p>Define the data model you want to define in the database in <code>cms/models.py</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-models.py" data-lang="models.py"><span style="color:#f92672">from</span> django.db <span style="color:#f92672">import</span> models


<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Book</span>(models<span style="color:#f92672">.</span>Model):
    <span style="color:#e6db74">&#34;&#34;&#34;Books&#34;&#34;&#34;</span>
    name <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>CharField(<span style="color:#e6db74">&#39;book title&#39;</span>, max_length<span style="color:#f92672">=</span><span style="color:#ae81ff">255</span>)
    publisher <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>CharField(<span style="color:#e6db74">&#39;Publisher&#39;</span>, max_length<span style="color:#f92672">=</span><span style="color:#ae81ff">255</span>, blank<span style="color:#f92672">=</span>True)
    page <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>IntegerField(<span style="color:#e6db74">&#39;number of pages&#39;</span>, blank<span style="color:#f92672">=</span>True, default<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)

    <span style="color:#66d9ef">def</span> __str__(self):
        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>name
</code></pre></div><p>Add <code>cms</code> to the end of INSTALLED_APPS in <code>mybook/settings.py</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-settings.py" data-lang="settings.py">INSTALLED_APPS <span style="color:#f92672">=</span> [
    <span style="color:#e6db74">&#39;django.contrib.admin&#39;</span>,
    <span style="color:#e6db74">&#39;django.contrib.auth&#39;</span>,
    <span style="color:#e6db74">&#39;django.contrib.contenttypes&#39;</span>,
    <span style="color:#e6db74">&#39;django.contrib.sessions&#39;</span>,
    <span style="color:#e6db74">&#39;django.contrib.messages&#39;</span>,
    <span style="color:#e6db74">&#39;django.contrib.staticfiles&#39;</span>,
    <span style="color:#e6db74">&#39;cms&#39;</span>, <span style="color:#75715e"># add</span>

]
</code></pre></div><p>Use the following command to pick up the changes in <code>models.py</code> and create a migration file.</p>
<pre><code>$ python manage.py sqlmigrate cms 0001
</code></pre><p>Use the following command to reflect the migrated files that have not been reflected in the database to the database.</p>
<pre><code>python manage.py migrate cms
</code></pre><p>At this point, the database is ready.</p>
<p>#5. Introduce Bootstrap
From here, we will create with Foron.
This time, we use CSS framework Bootstrap.
Download from below, including jQuery required for Bootstrap.</p>
<ul>
<li>Bootstrap-http://getbootstrap.com/</li>
<li>jQuery-http://jquery.com/</li>
</ul>
<p>Create a directory called <code>mybook/cms/static/cms/</code> for the downloaded file and place it as follows.</p>
<pre><code>mybook
└── cms
    └── static
        └── cms
            ├── css
            │ ├── bootstrap.min.css
            │ └── bootstrap.min.css.map
            └── js
                ├── bootstrap.bundle.min.js
                ├── bootstrap.bundle.min.js.map
                └── jquery-3.4.1.min.js
</code></pre><h1 id="6-create-views-and-url-scheme">6. Create views and URL scheme</h1>
<p>Create the function in <code>cms/views.py</code> since the functions in the list are required.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-views.py" data-lang="views.py"><span style="color:#f92672">from</span> django.shortcuts <span style="color:#f92672">import</span> render
<span style="color:#f92672">from</span> django.http <span style="color:#f92672">import</span> HttpResponse


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">book_list</span>(request):
    <span style="color:#e6db74">&#34;&#34;&#34;List of books&#34;&#34;&#34;</span>
    books <span style="color:#f92672">=</span> Book<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>order_by(<span style="color:#e6db74">&#39;id&#39;</span>)
    <span style="color:#66d9ef">return</span> render(request,
                  <span style="color:#e6db74">&#39;cms/book_list.html&#39;</span>, <span style="color:#75715e"># Template to use</span>
                  {<span style="color:#e6db74">&#39;books&#39;</span>: books}) <span style="color:#75715e">#Data to pass to the template</span>
</code></pre></div><p>Then create a URL scheme.
The file <code>cms/urls.py</code> does not exist, so create it.
In this, link the URL and the view function.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cms/urls.py" data-lang="cms/urls.py"><span style="color:#f92672">from</span> django.urls <span style="color:#f92672">import</span> path
<span style="color:#f92672">from</span> cms <span style="color:#f92672">import</span> views

app_name <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cms&#39;</span>
urlpatterns <span style="color:#f92672">=</span> [
    <span style="color:#75715e">#Books</span>
    path(<span style="color:#e6db74">&#39;book/&#39;</span>, views<span style="color:#f92672">.</span>book_list, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;book_list&#39;</span>), <span style="color:#75715e">#list</span>
]
</code></pre></div><p>Then include <code>cms/urls.py</code> in your project-wide <code>mybook/urls.py</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mybook/urls.py" data-lang="mybook/urls.py"><span style="color:#f92672">from</span> django.contrib <span style="color:#f92672">import</span> adminfrom django<span style="color:#f92672">.</span>urls <span style="color:#f92672">import</span> path<span style="color:#f92672">,</span> include <span style="color:#75715e"># ←, add include</span>

urlpatterns <span style="color:#f92672">=</span> [
    path(<span style="color:#e6db74">&#39;cms/&#39;</span>, include(<span style="color:#e6db74">&#39;cms.urls&#39;</span>)), <span style="color:#75715e"># ← add here</span>
    path(<span style="color:#e6db74">&#39;admin/&#39;</span>, admin<span style="color:#f92672">.</span>site<span style="color:#f92672">.</span>urls),
]
</code></pre></div><p>The final URL looks like this:</p>
<pre><code>http://127.0.0.1:8000/cms/book/
</code></pre><h1 id="7-create-html">7. Create HTML</h1>
<p>Create a template called <code>book_list.html</code> used in cms application of mybook project.
First, create a template called <code>base.html</code> which is the inheritance source.</p>
<pre><code>mybook/cms/templates/cms/base.html
</code></pre><p>The contents of <code>base.html</code> are as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-base.html" data-lang="base.html">{% load i18n static %}
<span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>{% get_current_language as LANGUAGE_CODE %}
&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ LANGUAGE_CODE|default:&#34;</span><span style="color:#a6e22e">en-us</span><span style="color:#960050;background-color:#1e0010">&#34;</span> <span style="color:#960050;background-color:#1e0010">}}&#34;</span>&gt;
&lt;<span style="color:#f92672">head</span>&gt;
&lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>&gt;
&lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;viewport&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width=device-width, initial-scale=1, shrink-to-fit=no&#34;</span>&gt;
&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% static&#39;cms/css/bootstrap.min.css&#39; %}&#34;</span>&gt;
{% block extra_css %}{% endblock %}
&lt;<span style="color:#f92672">title</span>&gt;{% block title %}My books{% endblock %}&lt;/<span style="color:#f92672">title</span>&gt;
&lt;/<span style="color:#f92672">head</span>&gt;
&lt;<span style="color:#f92672">body</span>&gt;
  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container&#34;</span>&gt;
    {% block content %}
      {{ content }}
    {% endblock %}
  &lt;/<span style="color:#f92672">div</span>&gt;
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% static&#39;cms/js/jquery-3.3.1.min.js&#39; %}&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% static&#39;cms/js/bootstrap.bundle.min.js&#39; %}&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
{% block extra_js %}{% endblock %}
&lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p>Now, inherit this <code>base_html</code> and create <code>mybook/cms/templates/cms/book_list.html</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-book_list.html" data-lang="book_list.html">{% extends &#34;cms/base.html&#34; %}

{% block title %} List of books {% endblock title %}

{% block content %}
    &lt;<span style="color:#f92672">h4</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mt-4 border-bottom&#34;</span>&gt;List of books&lt;/<span style="color:#f92672">h4</span>&gt;
    &lt;<span style="color:#f92672">table</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;table table-striped table-bordered&#34;</span>&gt;
      &lt;<span style="color:#f92672">thead</span>&gt;
        &lt;<span style="color:#f92672">tr</span>&gt;
          &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;ID&lt;/<span style="color:#f92672">th</span>&gt;
          &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Book name&lt;/<span style="color:#f92672">th</span>&gt;
          &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Publisher&lt;/<span style="color:#f92672">th</span>&gt;
          &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Number of pages&lt;/<span style="color:#f92672">th</span>&gt;
        &lt;/<span style="color:#f92672">tr</span>&gt;
      &lt;/<span style="color:#f92672">thead</span>&gt;
      &lt;<span style="color:#f92672">tbody</span>&gt;
        {% for book in books %}
        &lt;<span style="color:#f92672">tr</span>&gt;
          &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row&#34;</span>&gt;{{ book.id }}&lt;/<span style="color:#f92672">th</span>&gt;
          &lt;<span style="color:#f92672">td</span>&gt;{{ book.name }}&lt;/<span style="color:#f92672">td</span>&gt;
          &lt;<span style="color:#f92672">td</span>&gt;{{ book.publisher }}&lt;/<span style="color:#f92672">td</span>&gt;
          &lt;<span style="color:#f92672">td</span>&gt;{{ book.page }}&lt;/<span style="color:#f92672">td</span>&gt;
        &lt;/<span style="color:#f92672">tr</span>&gt;
        {% endfor %}
      &lt;/<span style="color:#f92672">tbody</span>&gt;
    &lt;/<span style="color:#f92672">table</span>&gt;
{% endblock content %}
</code></pre></div><p>Check with your browser.
Since there is no data, only the header.</p>
<pre><code>http://127.0.0.1:8000/cms/book/
</code></pre><img width="1194" alt="Screenshots 2019-12-29 21.01.09.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/472784/fffb536a-744d-9695-4c78-526ebd6fa973.png">
<h1 id="at-the-end">At the end</h1>
<p>For the time being, I was able to display HTML.
After that, if you can call the API from <code>views.py</code> and execute it, the purpose can be achieved.
I used the Python framework for the first time, but I was able to proceed to display it without stumbling.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
