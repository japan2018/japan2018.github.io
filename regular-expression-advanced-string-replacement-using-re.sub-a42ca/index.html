<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Regular expression] Advanced string replacement using re.sub | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Regular expression] Advanced string replacement using re.sub</h1>
<p>
  <small class="text-secondary">
  
  
  Dec 1, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/regular-expression"> regular expression</a></code></small>

</p>
<pre><code># table of contents
</code></pre>
<ul>
<li><a href="#Conclusion">Conclusion</a></li>
<li><a href="Whatis#resub">What is re.sub</a></li>
<li><a href="#Whentouse">When to use</a></li>
<li><a href="#Passfunctiontoreplacementtarget-repl-">Pass character string to replacement target repl</a>
-<a href="#Commentary">Commentary</a></li>
<li><a href="Whatis#AdvancedReplacement">What is Advanced Replacement</a>
-<a href="#Passfunctiontoreplacementtarget-repl-">Pass function to replacement target repl</a>
-<a href="#Passfunctionwithtwoormoreargumentstoreplacementtarget-repl-">Pass function with two or more arguments to replacement target repl</a>
-<a href="#Advancedstringreplacementexample">Advanced string replacement example</a>
-<a href="#Supplementaladvancedstringreplacementwithoutusingresub">[Supplement] Advanced string replacement without using re.sub</a></li>
</ul>
<p>#Conclusion</p>
<ul>
<li>You can pass a function to the repl replacement target repl</li>
<li>You can pass <code>a function with two or more arguments</code> to the replacement target repl of re.sub.</li>
<li>When passing a function with two or more arguments to the replacement target repl of re.sub, it is necessary to wrap it with a lambda expression</li>
</ul>
<p>What is #re.sub</p>
<ul>
<li><a href="https://docs.python.org/ja/3/library/re.html#re.sub">6.2. re.sub() — Regular expression operation — Python 3.8.0 documentation</a></li>
</ul>
<blockquote>
<p><code>re.sub(pattern, repl, string, count=0, flags=0)</code>
Returns the string obtained by replacing the leftmost non-overlapping pattern found in string with the replacement repl. If the pattern is not found then string is returned unchanged. repl is a string or function. If repl is a string, all backslash escapes in it are processed. \n is converted to a newline character, \r is converted to a carriage return, and so on. Unknown ASCII character escapes are reserved for future use and are treated as errors. Any other unknown escapes such as &amp; are left.</p>
</blockquote>
<h1 id="when-to-use">When to use</h1>
<p>When you want to <code>retain</code> the original string but replace only the string that matches the regular expression pattern</p>
<blockquote>
<p>Chikan
[Replacement]
&laquo;Names, etc.&raquo; Replacing one thing with another.</p>
</blockquote>
<h2 id="pass-a-string-to-the-replacement-target-repl">Pass a string to the replacement target repl</h2>
<p>I don&rsquo;t use it much because I can only do simple replacements.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#f92672">import</span> re
<span style="color:#f92672">&gt;&gt;&gt;</span> s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34; By replacing the leftmost non-overlapping pattern in string with the replacement repl
</span><span style="color:#e6db74">Returns the resulting string. If the pattern is not found then string is returned unchanged.
</span><span style="color:#e6db74">repl is a string or function. If repl is a string, all of the
</span><span style="color:#e6db74">Backslash escapes are processed. </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> is converted to a single newline character, </span><span style="color:#ae81ff">\r</span><span style="color:#e6db74"> is a carriage
</span><span style="color:#e6db74">Converted to returns, and so on. Unknown ASCII character escapes are reserved for future use.
</span><span style="color:#e6db74">And is treated as an error. Any other unknown escapes such as \&amp; are left. </span><span style="color:#ae81ff">\6</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Such back references are replaced with the substring matched by group 6 of the pattern. &#34;&#34;&#34;</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> s
<span style="color:#e6db74">&#39;By replacing the leftmost non-overlapping pattern in string with the replacement repl</span>
Returns the resulting string<span style="color:#f92672">.</span> If the pattern <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> found then string <span style="color:#f92672">is</span> returned unchanged<span style="color:#f92672">.</span>
repl <span style="color:#f92672">is</span> a string <span style="color:#f92672">or</span> function<span style="color:#f92672">.</span> If repl <span style="color:#f92672">is</span> a string, all of the
Backslash escapes are processed<span style="color:#f92672">.</span> \n <span style="color:#f92672">is</span> converted to a single newline character, \r <span style="color:#f92672">is</span> a carriage
Converted to returns, <span style="color:#f92672">and</span> so on<span style="color:#f92672">.</span> Unknown ASCII character escapes are reserved <span style="color:#66d9ef">for</span> future use<span style="color:#f92672">.</span>
And <span style="color:#f92672">is</span> treated <span style="color:#66d9ef">as</span> an error<span style="color:#f92672">.</span> Any other unknown escapes such <span style="color:#66d9ef">as</span> \\<span style="color:#f92672">&amp;</span> are left<span style="color:#f92672">.</span> \x06
Such back references are replaced <span style="color:#66d9ef">with</span> the substring matched by group <span style="color:#ae81ff">6</span> of the pattern<span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> md_s <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>sub(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(?P&lt;arg&gt;[pattern|repl|string]+)&#39;</span>, <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;`\g&lt;arg&gt;`&#39;</span>, s) <span style="color:#75715e"># matches the string pattern [] Make strings inline in Markdown code</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> md_s
By replacing the leftmost non<span style="color:#f92672">-</span>overlapping <span style="color:#e6db74">`pattern`</span> that appears <span style="color:#f92672">in</span> the <span style="color:#e6db74">``</span>string<span style="color:#e6db74">` with the replacement `</span>repl<span style="color:#960050;background-color:#1e0010">`</span>
Returns the resulting string<span style="color:#f92672">.</span> If no pattern <span style="color:#f92672">is</span> found, <span style="color:#e6db74">`string`</span> <span style="color:#f92672">is</span> returned unchanged<span style="color:#f92672">.</span>
<span style="color:#e6db74">`repl`</span> <span style="color:#f92672">is</span> a string <span style="color:#f92672">or</span> a function<span style="color:#f92672">.</span> If <span style="color:#e6db74">`repl`</span> <span style="color:#f92672">is</span> a string, then all
Backslash escapes are processed<span style="color:#f92672">.</span> \n <span style="color:#f92672">is</span> converted to a single newline character, \r <span style="color:#f92672">is</span> a carriage
Converted to returns, <span style="color:#f92672">and</span> so on<span style="color:#f92672">.</span> Unknown ASCII character escapes are reserved <span style="color:#66d9ef">for</span> future use<span style="color:#f92672">.</span>
And <span style="color:#f92672">is</span> treated <span style="color:#66d9ef">as</span> an error<span style="color:#f92672">.</span> Any other unknown escapes such <span style="color:#66d9ef">as</span> \\<span style="color:#f92672">&amp;</span> are left<span style="color:#f92672">.</span> \x06
Such back references are replaced <span style="color:#66d9ef">with</span> the substring matched by group <span style="color:#ae81ff">6</span> of the pattern<span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;</span>
</code></pre></div><h1 id="what-is-advanced-substitution">What is advanced substitution?</h1>
<p>I want to change the character string to be replaced according to the <code>character string that matches the regular expression pattern</code>.
Consider the case where a character string is replaced according to a variable (eg, #LAST_NAME) starting with # in the following text file (variable s).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
txt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;#LAST_NAME #FIRST_NAME
</span><span style="color:#e6db74">Thank you for using the xx ticket.
</span><span style="color:#e6db74">Regarding the following lottery application that you applied the other day,
</span><span style="color:#e6db74">As a result of the strict drawing, we prepared a ticket with the following contents.
</span><span style="color:#e6db74">Below you will find important information such as payment methods and payment methods.
</span><span style="color:#e6db74">Please be sure to check until the end.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- ----
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">■Name kana
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#LAST_NAME_KATAKANA #FIRST_NAME_KATAKANA
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">■ Phone number
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#PHONE_NUMBER
</span><span style="color:#e6db74"> 
</span><span style="color:#e6db74">■ Email address
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#EMAIL
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- ----
</span><span style="color:#e6db74">■Reception number
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#RECEIPT_NUMBER
</span><span style="color:#e6db74"> 
</span><span style="color:#e6db74">■Reception date
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">March 23, 2019 18:07
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- --------------
</span><span style="color:#e6db74">[Winning content]
</span><span style="color:#e6db74">■ Event name: 《Preceding》 Keyakizaka 46 3rd YEAR ANNIVERSARY LIVE [Tokyo performance]
</span><span style="color:#e6db74">■Reception name: ◇ Advance lottery [Keyakizaka46FC]
</span><span style="color:#e6db74">&lt;First choice&gt;
</span><span style="color:#e6db74">Performance name: (5/9 (Thursday)) Keyakizaka 46 3rd YEAR ANNIVERSARY LIVE
</span><span style="color:#e6db74">Performance Date: Thursday, May 9, 2019 18:30
</span><span style="color:#e6db74">Venue: Nippon Budokan
</span><span style="color:#e6db74">Application details
</span><span style="color:#e6db74">Reserved seat ¥7,800 x 2
</span><span style="color:#e6db74">Ticket price total: ¥15,600
</span><span style="color:#e6db74">System usage fee: ¥432 (tax included)
</span><span style="color:#e6db74">■ Payment
</span><span style="color:#e6db74">Payment method: Credit card payment (lottery)
</span><span style="color:#e6db74">*Settlement fee: ¥0/per sheet
</span><span style="color:#e6db74">&lt;For those who pay by credit card&gt;
</span><span style="color:#e6db74">The specified amount of money has been settled with the specified credit card.
</span><span style="color:#e6db74">Total settlement amount: ¥16,464 (tax included)
</span><span style="color:#e6db74">*If you win, the payment will be completed with the registered credit card.
</span><span style="color:#e6db74">(It will be settled in full including the collection fee) &#34;&#34;&#34;</span>
</code></pre></div><h2 id="pass-a-function-to-the-replacement-target-repl">Pass a function to the replacement target repl</h2>
<ul>
<li><a href="https://docs.python.org/ja/3/library/re.html#re.sub">6.2. re.sub() — Regular expression operation — Python 3.8.0 documentation</a></li>
</ul>
<blockquote>
<p>repl is a string or a <code>function</code>.</p>
</blockquote>
<h3 id="explanation">Explanation</h3>
<p>When you pass a function to repl, the match object is passed as the first argument of the function to call.</p>
<ul>
<li><a href="https://docs.python.org/ja/3/library/re.html#re.sub">6.2. re.sub() — Regular expression operation — Python 3.8.0 documentation</a></li>
</ul>
<blockquote>
<p>If repl is a function, it will be called every time a unique pattern is encountered. This function takes a single match object argument and returns the replacement string.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
txt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;#LAST_NAME #FIRST_NAME
</span><span style="color:#e6db74">Thank you for using the xx ticket.
</span><span style="color:#e6db74">Regarding the following lottery application that you applied the other day,
</span><span style="color:#e6db74">As a result of the strict drawing, we prepared a ticket with the following contents.
</span><span style="color:#e6db74">Below you will find important information such as payment methods and payment methods.
</span><span style="color:#e6db74">Please be sure to check until the end.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- ----
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">■Name kana
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#LAST_NAME_KATAKANA #FIRST_NAME_KATAKANA
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">■ Phone number
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#PHONE_NUMBER
</span><span style="color:#e6db74"> 
</span><span style="color:#e6db74">■ Email address
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#EMAIL
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- ----
</span><span style="color:#e6db74">■Reception number
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#RECEIPT_NUMBER
</span><span style="color:#e6db74"> 
</span><span style="color:#e6db74">■Reception date
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">March 23, 2019 18:07
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- --------------
</span><span style="color:#e6db74">[Winning content]
</span><span style="color:#e6db74">■ Event name: 《Preceding》 Keyakizaka 46 3rd YEAR ANNIVERSARY LIVE [Tokyo performance]
</span><span style="color:#e6db74">■Reception name: ◇ Advance lottery [Keyakizaka46FC]
</span><span style="color:#e6db74">&lt;First choice&gt;
</span><span style="color:#e6db74">Performance name: (5/9 (Thursday)) Keyakizaka 46 3rd YEAR ANNIVERSARY LIVE
</span><span style="color:#e6db74">Performance Date: Thursday, May 9, 2019 18:30
</span><span style="color:#e6db74">Venue: Nippon Budokan
</span><span style="color:#e6db74">Application details
</span><span style="color:#e6db74">Reserved seat ¥7,800 x 2
</span><span style="color:#e6db74">Ticket price total: ¥15,600
</span><span style="color:#e6db74">System usage fee: ¥432 (tax included)
</span><span style="color:#e6db74">■ Payment
</span><span style="color:#e6db74">Payment method: Credit card payment (lottery)
</span><span style="color:#e6db74">*Settlement fee: ¥0/per sheet
</span><span style="color:#e6db74">&lt;For those who pay by credit card&gt;
</span><span style="color:#e6db74">The specified amount of money has been settled with the specified credit card.
</span><span style="color:#e6db74">Total settlement amount: ¥16,464 (tax included)
</span><span style="color:#e6db74">*If you win, the payment will be completed with the registered credit card.
</span><span style="color:#e6db74">(It will be settled in full including the collection fee) &#34;&#34;&#34;</span>
REG_VARIABLE <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;#(?P&lt;variable&gt;[A-Z|_]+)&#34;</span>)


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">replace_variable</span>(match):
    m <span style="color:#f92672">=</span> match<span style="color:#f92672">.</span>group(<span style="color:#e6db74">&#34;variable&#34;</span>)
    wakabayashi <span style="color:#f92672">=</span> {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Wakabayashi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Masaki&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Wakabayashi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Masayas&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;masayasu.wakabayashi&#34;</span>,
    }
    <span style="color:#66d9ef">if</span> m <span style="color:#f92672">in</span> wakabayashi:
        <span style="color:#66d9ef">return</span> wakabayashi[m]


inserted_text <span style="color:#f92672">=</span> REG_VARIABLE<span style="color:#f92672">.</span>sub(replace_variable, txt) <span style="color:#75715e"># Pass the function to the replacement target repl</span>
<span style="color:#66d9ef">print</span>(inserted_text)
<span style="color:#f92672">&gt;&gt;&gt;</span><span style="color:#e6db74">&#39;Masayasu Wakabayashi</span>
Thank you <span style="color:#66d9ef">for</span> using the xx ticket<span style="color:#f92672">.</span>
Regarding the following lottery application that you applied the other day,
As a result of the strict drawing, we prepared a ticket <span style="color:#66d9ef">with</span> the following contents<span style="color:#f92672">.</span>
Below you will find important information such <span style="color:#66d9ef">as</span> payment methods <span style="color:#f92672">and</span> payment methods<span style="color:#f92672">.</span>
Please be sure to check until the end<span style="color:#f92672">.</span>

<span style="color:#f92672">-</span> <span style="color:#f92672">----</span>

<span style="color:#960050;background-color:#1e0010">■</span>Name kana

Wakabayashi Masaya

<span style="color:#960050;background-color:#1e0010">■</span> Phone number



<span style="color:#960050;background-color:#1e0010">■</span> Email address

masayasu<span style="color:#f92672">.</span>wakabayashi

<span style="color:#f92672">-</span> <span style="color:#f92672">----</span><span style="color:#960050;background-color:#1e0010">■</span>Reception number



<span style="color:#960050;background-color:#1e0010">■</span>Reception date

March <span style="color:#ae81ff">23</span>, <span style="color:#ae81ff">2019</span> <span style="color:#ae81ff">18</span>:<span style="color:#ae81ff">07</span>

<span style="color:#f92672">-</span> <span style="color:#f92672">--------------</span>
[Winning content]
<span style="color:#960050;background-color:#1e0010">■</span> Event name: <span style="color:#960050;background-color:#1e0010">《</span>Preceding<span style="color:#960050;background-color:#1e0010">》</span> Keyakizaka <span style="color:#ae81ff">46</span> <span style="color:#ae81ff">3</span>rd YEAR ANNIVERSARY LIVE [Tokyo performance]
<span style="color:#960050;background-color:#1e0010">■</span>Reception name: <span style="color:#960050;background-color:#1e0010">◇</span> Advance lottery [Keyakizaka46FC]
<span style="color:#f92672">&lt;</span>First choice<span style="color:#f92672">&gt;</span>
Performance name: (<span style="color:#ae81ff">5</span><span style="color:#f92672">/</span><span style="color:#ae81ff">9</span> (Thursday)) Keyakizaka <span style="color:#ae81ff">46</span> <span style="color:#ae81ff">3</span>rd YEAR ANNIVERSARY LIVE
Performance Date: Thursday, May <span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">2019</span> <span style="color:#ae81ff">18</span>:<span style="color:#ae81ff">30</span>
Venue: Nippon Budokan
Application details
Reserved seat <span style="color:#960050;background-color:#1e0010">¥</span><span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">800</span> x <span style="color:#ae81ff">2</span>
Ticket price total: <span style="color:#960050;background-color:#1e0010">¥</span><span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">600</span>
System usage fee: <span style="color:#960050;background-color:#1e0010">¥</span><span style="color:#ae81ff">432</span> (tax included)
<span style="color:#960050;background-color:#1e0010">■</span> Payment
Payment method: Credit card payment (lottery)
<span style="color:#f92672">*</span>Settlement fee: <span style="color:#960050;background-color:#1e0010">¥</span><span style="color:#ae81ff">0</span><span style="color:#f92672">/</span>per sheet
<span style="color:#f92672">&lt;</span>For those who pay by credit card<span style="color:#f92672">&gt;</span>
The specified amount of money has been settled <span style="color:#66d9ef">with</span> the specified credit card<span style="color:#f92672">.</span>
Total settlement amount: <span style="color:#960050;background-color:#1e0010">¥</span><span style="color:#ae81ff">16</span>,<span style="color:#ae81ff">464</span> (tax included)
<span style="color:#f92672">*</span>If you win, the payment will be completed <span style="color:#66d9ef">with</span> the registered credit card<span style="color:#f92672">.</span>
(Full payment including the collection fee)
</code></pre></div><h2 id="pass-a-function-with-two-or-more-arguments-to-the-replacement-target-repl">Pass a function with two or more arguments to the replacement target repl</h2>
<p>Due to the implementation of re.sub, the function to be passed can take only one argument, and the match object is passed to that argument.</p>
<ul>
<li><a href="https://docs.python.org/ja/3/library/re.html#re.sub">6.2. re.sub() — Regular expression operation — Python 3.8.0 documentation</a></li>
</ul>
<blockquote>
<p>If repl is a function, it will be called every time a unique pattern is encountered. This function takes a single match object argument and returns the replacement string.</p>
</blockquote>
<p>However, there is a way to pass two or more arguments to a function that takes only one argument, as shown below.
In conclusion, you can pass a function with two or more arguments by wrapping the function in a lambda expression.</p>
<ul>
<li><a href="https://stackoverflow.com/questions/26496119/passing-two-arguments-to-replace-function-for-re-sub/26503399?stw=2#26503399">python-Passing two arguments to replace function for Re.sub-Stack Overflow</a></li>
</ul>
<blockquote>
<p>As has been mentioned, when re.sub calls your function, it only passes one argument to it.The docs indicate this is a match object (presumably the line variable?)</p>
</blockquote>
<blockquote>
<p>If you want to pass additional arguments, you should wrap your function up in a lambda expression.</p>
</blockquote>
<p>If you pass it as follows, an error will occur.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">replace_variable</span>(match: Match, customer: Dict[str, str]):
    <span style="color:#e6db74">&#34;&#34;&#34;Function to be called by repl that is the replacement target of re.sub
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
inserted_text <span style="color:#f92672">=</span> REG_VARIABLE<span style="color:#f92672">.</span>sub(replace_variable(customer), s)
<span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#a6e22e">TypeError</span>: replace_variable() missing <span style="color:#ae81ff">1</span> required positional argument:<span style="color:#e6db74">&#39;customer&#39;</span>
</code></pre></div><p>No error occurs when wrapped in a lambda expression and passed as shown below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">inserted_text <span style="color:#f92672">=</span> REG_VARIABLE<span style="color:#f92672">.</span>sub(<span style="color:#66d9ef">lambda</span> wrapper: replace_variable(wrapper, customer), s)
</code></pre></div><h2 id="advanced-string-replacement-example">Advanced string replacement example</h2>
<p>When the following python file is executed, the following character strings are output for each person.</p>
<pre><code>&quot;&quot;&quot; Wakabayashi Masayasu
Thank you for using the xx ticket.
Regarding the following lottery application that you applied the other day,
As a result of the strict drawing, we prepared a ticket with the following contents.
Below you will find important information such as payment methods and payment methods.
Please be sure to check until the end.

- ----

■Name kana

Wakabayashi Masaya

■ Phone number

297-2150-4740
 
■ Email address

masayasu.wakabayashi@example.com

- ----
■Reception number

06475050
 
■Reception date

March 23, 2019 18:07

- --------------
[Winning content]
■ Event name: 《Preceding》 Keyakizaka 46 3rd YEAR ANNIVERSARY LIVE [Tokyo performance]
■Reception name: ◇ Advance lottery [Keyakizaka46FC]
&lt;First choice&gt;
Performance name: (5/9 (Thursday)) Keyakizaka 46 3rd YEAR ANNIVERSARY LIVE
Performance Date: Thursday, May 9, 2019 18:30
Venue: Nippon Budokan
Application details
Reserved seat ¥7,800 x 2
Ticket price total: ¥15,600
System usage fee: ¥432 (tax included)
■ Payment
Payment method: Credit card payment (lottery)
*Settlement fee: ¥0/per sheet
&lt;For those who pay by credit card&gt;
The specified amount of money has been settled with the specified credit card.
Total settlement amount: ¥16,464 (tax included)
*If you win, the payment will be completed with the registered credit card.
(It will be settled in full including the collection fee) &quot;&quot;&quot;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> random
<span style="color:#f92672">import</span> re
<span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> Dict, Pattern, List, Match

REG_VARIABLE: Pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;#(?P&lt;variable&gt;[A-Z|_]+)&#34;</span>)
HINATAZAKA <span style="color:#f92672">=</span> [
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Iguchi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Masao&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Iguchi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Mao&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;mao.iguchi&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;tide&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Sarina&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Ushio&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Mao&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;sarina.ushio&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kageyama&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Yuka&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kageyama&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Yuka&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;yuka.kageyama&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kato&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Hiho&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kato&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Shiho&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;shiho,kato&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Saito&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kyoko&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Saito&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kyoko&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;kyoko.saito&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Sasaki&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kumi&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Sasaki&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kumi&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;kumi,sasaki&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Sasaki&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Mirei&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Sasaki&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Mirei&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;mirei.sasaki&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Takase&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Aina&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Takase&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Mana&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;mana.takase&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Takamoto&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Saika&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Takamoto&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Ayaka&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;ayaka.takamoto&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Higashimura&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Mei&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Higashimura&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;May&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;mei.higashimura&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kanemura&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Miku&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kanemura&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Miku&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;miku.kanemura&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kawada&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Hina&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kawata&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Hina&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;hina.kawata&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kosaka&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Nao&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kosaka&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Nao&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;nao.kosaka&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Tomita&#34;</span>,<span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Suzuka&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Tomita&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Suzuki&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;suzuka.tomita&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Nyu&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Akari&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;nib&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Akari&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;akari.nibu&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Hamagishi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Hiyori&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Hamagishi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Hiyori&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;hiyori.hamagishi&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Matsuda&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Hana&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Mazda&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Konoka&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;konoka.matsuda&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Miyata&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Aimo&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Miyata&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Manamo&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;manamo.miyata&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Watanabe&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Miho&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Watanabe&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Miho&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;miho.watanabe&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Uemura&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Hinano&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kamimura&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Hinano&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;hinano.kamimura&#34;</span>,
    },
]
AUDREY <span style="color:#f92672">=</span> [
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kasuga&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Toshiaki&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kasuga&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Toshiaki&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;toshiaki.kasuga&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Wakabayashi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Masaki&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Wakabayashi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Masayas&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;masayasu.wakabayashi&#34;</span>,
    },
]
s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34; #LAST_NAME #FIRST_NAME
</span><span style="color:#e6db74">Thank you for using the xx ticket.
</span><span style="color:#e6db74">Regarding the following lottery application that you applied the other day,
</span><span style="color:#e6db74">As a result of the strict drawing, we prepared a ticket with the following contents.
</span><span style="color:#e6db74">Below you will find important information such as payment methods and payment methods.
</span><span style="color:#e6db74">Please be sure to check until the end.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- ----
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">■Name kana
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#LAST_NAME_KATAKANA #FIRST_NAME_KATAKANA
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">■ Phone number
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#PHONE_NUMBER
</span><span style="color:#e6db74"> 
</span><span style="color:#e6db74">■ Email address
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#EMAIL
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- ----
</span><span style="color:#e6db74">■Reception number
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#RECEIPT_NUMBER
</span><span style="color:#e6db74"> 
</span><span style="color:#e6db74">■Reception date
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">March 23, 2019 18:07
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- --------------
</span><span style="color:#e6db74">[Winning content]
</span><span style="color:#e6db74">■ Event name: 《Preceding》 Keyakizaka 46 3rd YEAR ANNIVERSARY LIVE [Tokyo performance]
</span><span style="color:#e6db74">■Reception name: ◇ Advance lottery [Keyakizaka46FC]
</span><span style="color:#e6db74">&lt;First choice&gt;
</span><span style="color:#e6db74">Performance name: (5/9 (Thursday)) Keyakizaka 46 3rd YEAR ANNIVERSARY LIVE
</span><span style="color:#e6db74">Performance Date: Thursday, May 9, 2019 18:30
</span><span style="color:#e6db74">Venue: Nippon Budokan
</span><span style="color:#e6db74">Application details
</span><span style="color:#e6db74">Reserved seat ¥7,800 x 2
</span><span style="color:#e6db74">Ticket price total: ¥15,600
</span><span style="color:#e6db74">System usage fee: ¥432 (tax included)
</span><span style="color:#e6db74">■ Payment
</span><span style="color:#e6db74">Payment method: Credit card payment (lottery)
</span><span style="color:#e6db74">*Settlement fee: ¥0/per sheet
</span><span style="color:#e6db74">&lt;For those who pay by credit card&gt;
</span><span style="color:#e6db74">The specified amount of money has been settled with the specified credit card.
</span><span style="color:#e6db74">Total settlement amount: ¥16,464 (tax included)
</span><span style="color:#e6db74">*If you win, the payment will be completed with the registered credit card.
</span><span style="color:#e6db74">(It will be settled in full including the collection fee) &#34;&#34;&#34;</span>


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">create_customer_list</span>(customer_info: List[Dict[str, str]]) <span style="color:#f92672">-&gt;</span> List[Dict[str, str]]:
    customer_list <span style="color:#f92672">=</span> [
        {
            <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: customer_dict[<span style="color:#e6db74">&#34;LAST_NAME&#34;</span>],
            <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: customer_dict[<span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>],
            <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: customer_dict[<span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>],
            <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: customer_dict[<span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>],
            <span style="color:#e6db74">&#34;PHONE_NUMBER&#34;</span>: f<span style="color:#e6db74">&#34;{random.randint(0, 999):0^3}-{random.randint(0, 999):0^4}-{random.randint(0, 999):0^4} &#34;</span>,
            <span style="color:#e6db74">&#34;EMAIL&#34;</span>: f<span style="color:#e6db74">&#34;{customer_dict[&#39;EMAIL&#39;]}@example.com&#34;</span>,
            <span style="color:#e6db74">&#34;RECEIPT_NUMBER&#34;</span>: f<span style="color:#e6db74">&#34;{random.randint(0, 1000000):0^8}&#34;</span>,
        }
        <span style="color:#66d9ef">for</span> customer_dict <span style="color:#f92672">in</span> customer_info
    ]
    <span style="color:#66d9ef">return</span> customer_list


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">replace_variable</span>(match: Match, customer: Dict[str, str]):
    m <span style="color:#f92672">=</span> match<span style="color:#f92672">.</span>group(<span style="color:#e6db74">&#34;variable&#34;</span>)
    columns <span style="color:#f92672">=</span> create_customer_list(
        [
            {
                <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            },
        ]
    )[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>keys()
    <span style="color:#66d9ef">for</span> column <span style="color:#f92672">in</span> columns:
        <span style="color:#66d9ef">if</span> m <span style="color:#f92672">==</span> column:
            <span style="color:#66d9ef">return</span> f<span style="color:#e6db74">&#34;{customer[column]}&#34;</span>


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
    customer_list <span style="color:#f92672">=</span> create_customer_list(HINATAZAKA <span style="color:#f92672">+</span> AUDREY)
    <span style="color:#66d9ef">for</span> customer <span style="color:#f92672">in</span> customer_list:
        inserted_text <span style="color:#f92672">=</span> REG_VARIABLE<span style="color:#f92672">.</span>sub(
            <span style="color:#66d9ef">lambda</span> wrapper: replace_variable(wrapper, customer), s
        )
        <span style="color:#66d9ef">print</span>(inserted_text)


<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
    main()
</code></pre></div><h3 id="supplement-how-to-perform-advanced-string-replacement-without-using-resub">[Supplement] How to perform advanced string replacement without using re.sub</h3>
<ol>
<li>Convert a string into a list.</li>
<li>Get the matched string and position with re.finditer</li>
<li>Insert the inserted string and the missing empty character at the position of the original string in the list during iteration</li>
<li>Convert it to the original string with ``.join (list) (empty string is deleted by join)</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#f92672">import</span> random
<span style="color:#f92672">import</span> re
<span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> Dict, Pattern, List, Match

REG_VARIABLE: Pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;#(?P&lt;variable&gt;[A-Z|_]+)&#34;</span>)
HINATAZAKA <span style="color:#f92672">=</span> [
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Iguchi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Masao&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Iguchi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Mao&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;mao.iguchi&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;tide&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Sarina&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Ushio&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Mao&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;sarina.ushio&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kageyama&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Yuka&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kageyama&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Yuka&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;yuka.kageyama&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kato&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Hiho&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kato&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Shiho&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;shiho,kato&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Saito&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kyoko&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Saito&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kyoko&#34;</span>,<span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;kyoko.saito&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Sasaki&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kumi&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Sasaki&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kumi&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;kumi,sasaki&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Sasaki&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Mirei&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Sasaki&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Mirei&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;mirei.sasaki&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Takase&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Aina&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Takase&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Mana&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;mana.takase&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Takamoto&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Saika&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Takamoto&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Ayaka&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;ayaka.takamoto&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Higashimura&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Mei&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Higashimura&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;May&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;mei.higashimura&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kanemura&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Miku&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kanemura&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Miku&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;miku.kanemura&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kawada&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Hina&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kawata&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Hina&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;hina.kawata&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kosaka&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Nao&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kosaka&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Nao&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;nao.kosaka&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Tomita&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Suzuka&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Tomita&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Suzuki&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;suzuka.tomita&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Nyu&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Akari&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;nib&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Akari&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;akari.nibu&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Hamagishi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Hiyori&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Hamagishi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Hiyori&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;hiyori.hamagishi&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Matsuda&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Hana&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Mazda&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Konoka&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;konoka.matsuda&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Miyata&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Aimo&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Miyata&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Manamo&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;manamo.miyata&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Watanabe&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Miho&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Watanabe&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Miho&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;miho.watanabe&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Uemura&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Hinano&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kamimura&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Hinano&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;hinano.kamimura&#34;</span>,
    },
]
AUDREY <span style="color:#f92672">=</span> [
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Kasuga&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Toshiaki&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Kasuga&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Toshiaki&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;toshiaki.kasuga&#34;</span>,
    },
    {
        <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Wakabayashi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;Masaki&#34;</span>,
        <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Wakabayashi&#34;</span>,
        <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;Masayas&#34;</span>,
        <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;masayasu.wakabayashi&#34;</span>,
    },
]
s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34; #LAST_NAME #FIRST_NAME
</span><span style="color:#e6db74">Thank you for using the xx ticket.
</span><span style="color:#e6db74">Regarding the following lottery application that you applied the other day,
</span><span style="color:#e6db74">As a result of the strict drawing, we prepared a ticket with the following contents.
</span><span style="color:#e6db74">Below you will find important information such as payment methods and payment methods.
</span><span style="color:#e6db74">Please be sure to check until the end.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- ----
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">■Name kana
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#LAST_NAME_KATAKANA #FIRST_NAME_KATAKANA
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">■ Phone number
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#PHONE_NUMBER
</span><span style="color:#e6db74"> 
</span><span style="color:#e6db74">■ Email address
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#EMAIL
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- ----
</span><span style="color:#e6db74">■Reception number
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#RECEIPT_NUMBER
</span><span style="color:#e6db74"> 
</span><span style="color:#e6db74">■Reception date
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">March 23, 2019 18:07
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- --------------
</span><span style="color:#e6db74">[Winning content]
</span><span style="color:#e6db74">■ Event name: 《Preceding》 Keyakizaka 46 3rd YEAR ANNIVERSARY LIVE [Tokyo performance]
</span><span style="color:#e6db74">■Reception name: ◇ Advance lottery [Keyakizaka46FC]
</span><span style="color:#e6db74">&lt;First choice&gt;
</span><span style="color:#e6db74">Performance name: (5/9 (Thursday)) Keyakizaka 46 3rd YEAR ANNIVERSARY LIVE
</span><span style="color:#e6db74">Performance Date: Thursday, May 9, 2019 18:30
</span><span style="color:#e6db74">Venue: Nippon Budokan
</span><span style="color:#e6db74">Application details
</span><span style="color:#e6db74">Reserved seat ¥7,800 x 2
</span><span style="color:#e6db74">Ticket price total: ¥15,600
</span><span style="color:#e6db74">System usage fee: ¥432 (tax included)
</span><span style="color:#e6db74">■ Payment
</span><span style="color:#e6db74">Payment method: Credit card payment (lottery)
</span><span style="color:#e6db74">*Settlement fee: ¥0/per sheet
</span><span style="color:#e6db74">&lt;For those who pay by credit card&gt;
</span><span style="color:#e6db74">The specified amount of money has been settled with the specified credit card.
</span><span style="color:#e6db74">Total settlement amount: ¥16,464 (tax included)
</span><span style="color:#e6db74">*If you win, the payment will be completed with the registered credit card.
</span><span style="color:#e6db74">(It will be settled in full including the collection fee) &#34;&#34;&#34;</span>


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">create_customer_list</span>(customer_info: List[Dict[str, str]]) <span style="color:#f92672">-&gt;</span> List[Dict[str, str]]:
    customer_list <span style="color:#f92672">=</span> [
        {
            <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: customer_dict[<span style="color:#e6db74">&#34;LAST_NAME&#34;</span>],
            <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: customer_dict[<span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>],
            <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: customer_dict[<span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>],
            <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: customer_dict[<span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>],
            <span style="color:#e6db74">&#34;PHONE_NUMBER&#34;</span>: f<span style="color:#e6db74">&#34;{random.randint(0, 999):0^3}-{random.randint(0, 999):0^4}-{random.randint(0, 999):0^4} &#34;</span>,
            <span style="color:#e6db74">&#34;EMAIL&#34;</span>: f<span style="color:#e6db74">&#34;{customer_dict[&#39;EMAIL&#39;]}@example.com&#34;</span>,
            <span style="color:#e6db74">&#34;RECEIPT_NUMBER&#34;</span>: f<span style="color:#e6db74">&#34;{random.randint(0, 1000000):0^8}&#34;</span>,
        }
        <span style="color:#66d9ef">for</span> customer_dict <span style="color:#f92672">in</span> customer_info
    ]
    <span style="color:#66d9ef">return</span> customer_list


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert_text</span>(content: str, customer: Dict[str, str], columns: List[str]) <span style="color:#f92672">-&gt;</span> str:
    lst_content <span style="color:#f92672">=</span> list(content)
    <span style="color:#66d9ef">for</span> m <span style="color:#f92672">in</span> REG_VARIABLE<span style="color:#f92672">.</span>finditer(content):
        match_variable <span style="color:#f92672">=</span> m<span style="color:#f92672">.</span>group(<span style="color:#e6db74">&#34;variable&#34;</span>)
        match_location <span style="color:#f92672">=</span> m<span style="color:#f92672">.</span>span()
        start, end <span style="color:#f92672">=</span> match_location[<span style="color:#ae81ff">0</span>], match_location[<span style="color:#ae81ff">1</span>]
        inserted_txt <span style="color:#f92672">=</span> replace_variable(match_variable, customer, columns)
        len_inserted_txt <span style="color:#f92672">=</span> len(inserted_txt)
        length <span style="color:#f92672">=</span> end<span style="color:#f92672">-</span>startlst_content[start : start <span style="color:#f92672">+</span> len_inserted_txt] <span style="color:#f92672">=</span> inserted_txt
        lst_content[match_location[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> len_inserted_txt : match_location[<span style="color:#ae81ff">1</span>]] <span style="color:#f92672">=</span> [
            <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(length <span style="color:#f92672">-</span> len_inserted_txt)
        ]
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">.</span>join(lst_content)


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">replace_variable</span>(match: Match, customer: Dict[str, str], columns: List[str]):
    <span style="color:#66d9ef">for</span> column <span style="color:#f92672">in</span> columns:
        <span style="color:#66d9ef">if</span> match <span style="color:#f92672">==</span> column:
            <span style="color:#66d9ef">return</span> customer[column]


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
    columns <span style="color:#f92672">=</span> create_customer_list(
        [
            {
                <span style="color:#e6db74">&#34;LAST_NAME&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                <span style="color:#e6db74">&#34;FIRST_NAME&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                <span style="color:#e6db74">&#34;LAST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                <span style="color:#e6db74">&#34;FIRST_NAME_KATAKANA&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                <span style="color:#e6db74">&#34;EMAIL&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            },
        ]
    )[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>keys()
    customer_list <span style="color:#f92672">=</span> create_customer_list(HINATAZAKA <span style="color:#f92672">+</span> AUDREY)
    <span style="color:#66d9ef">for</span> customer <span style="color:#f92672">in</span> customer_list:
        inserted_text <span style="color:#f92672">=</span> insert_text(s, customer, columns)
        <span style="color:#66d9ef">print</span>(inserted_text)


<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
    main()
</code></pre></div>
    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
