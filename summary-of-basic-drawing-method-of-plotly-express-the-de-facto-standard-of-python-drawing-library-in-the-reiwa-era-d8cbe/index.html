<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Summary of basic drawing method of Plotly Express, the de facto standard of Python drawing library in the Reiwa era | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Summary of basic drawing method of Plotly Express, the de facto standard of Python drawing library in the Reiwa era</h1>
<p>
  <small class="text-secondary">
  
  
  Nov 4, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/matplotlib">matplotlib</a></code></small>


<small><code><a href="https://memotut.com/tags/seaborn">seaborn</a></code></small>


<small><code><a href="https://memotut.com/tags/plotly">plotly</a></code></small>


<small><code><a href="https://memotut.com/tags/plotlyexpress">PlotlyExpress</a></code></small>

</p>
<pre><code># at first
</code></pre>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/6898f6f5-e49a-3526-b03a-bafe26e54221.png" alt="plotly (1).png"></p>
<p>A library called <a href="https://plot.ly/python/plotly-express/">Plotly Express (official site)</a> that allows you to easily draw interactive operations based on javascript was released a while ago. I found.
Since I felt a potential of a dimension that was clearly different from the static drawing that I have used so far, I have summarized the method of drawing a basic visualization method also as a memo.
For reference, I am comparing it with the pattern that I wrote a similar figure in matplotlib+seaborn.</p>
<p>The &ldquo;basic visualization method&rdquo; is based on the previously written <a href="https://qiita.com/hanon/items/33488ed4fc4ece7e1aec">[How to select and draw the correct visualization method in exploratory data analysis]</a>.</p>
<p>What is #Plotly Express
Plotly Express is a group of plotly high-level APIs released in March 2019.
The feature is that interactive and complicated drawing can be easily written.</p>
<p>Official site: <a href="https://plot.ly/python/plotly-express/">https://plot.ly/python/plotly-express/</a>
API reference: <a href="https://www.plotly.express/plotly_express/#plotly_express.line">https://www.plotly.express/plotly_express/#plotly_express.line</a>
Github (part of plotly): <a href="https://github.com/plotly/plotly.py">https://github.com/plotly/plotly.py</a></p>
<p>Speaking of Wrapper for writing Matplotlib easily, there is Seaborn, but I will compare Plotly Express and Seaborn which one is better.
Roughly</p>
<ul>
<li>seaborn is a matplotlib-based library for easy static drawing</li>
<li>Plotly Express is a javascript based library for easy dynamic drawing.</li>
</ul>
<p>It is a contrasting structure.
(Reference) <a href="https://www.anaconda.com/python-data-visualization-2018-why-so-many-libraries/">Summary of 2018 drawing libraries organized by Anaconda</a></p>
<p>What is #plotly</p>
<h2 id="overview">Overview</h2>
<p>plotly is an open source, interactive data visualization tool.
It can be used in R and javascript as well as Python.
The version of plotly.py has been increased to 4 from 2019/11/11.
MIT license.
Github: <a href="https://github.com/plotly/plotly.py">https://github.com/plotly/plotly.py</a></p>
<p>Until plotly3, it seems that the graph that I made had a commercial odor, such as that the graphs I created were processed and published &ldquo;online&rdquo;.
The &ldquo;offline mode&rdquo; is now the default in plotly4, which expands what you can do within the free frame and makes it easier to use.
Plotly 4.0.0 announcement: <a href="https://community.plot.ly/t/introducing-plotly-py-4-0-0/25639">https://community.plot.ly/t/introducing-plotly-py-4-0-0/25639</a></p>
<h2 id="reference-product-group-of-plotly">(Reference) product group of plotly</h2>
<p><strong>FREE</strong>
plotly: javascript based visualization module for interactive operations</p>
<p><strong>Paid (partial)</strong>
Chart Studio: A service created by disconnecting the online mode of plotly? Visualization system
DASH: Create a dashboard app with Python or R without needing javascript knowledge</p>
<h1 id="module-installation">Module installation</h1>
<p>Assuming that mac and jupyter lab are included
Some settings are required to support jupyter lab</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pip install plotly

<span style="color:#75715e"># Avoid &#34;JavaScript heap out of memory&#34; errors during extension installation</span>
<span style="color:#75715e"># (OS X/Linux)</span>
export NODE_OPTIONS<span style="color:#f92672">=</span>--max-old-space-size<span style="color:#f92672">=</span><span style="color:#ae81ff">4096</span>

<span style="color:#75715e"># Jupyter widgets extension</span>
jupyter labextension install @jupyter-widgets/jupyterlab-manager@1.0 --no-build

<span style="color:#75715e"># FigureWidget support</span>
jupyter labextension install plotlywidget@1.2.0 --no-build

<span style="color:#75715e"># and jupyterlab renderer support</span>
jupyter labextension install jupyterlab-plotly@1.2.0 --no-build

<span style="color:#75715e"># JupyterLab chart editor support (optional)</span>
jupyter labextension install jupyterlab-chart-editor@1.2 --no-build

<span style="color:#75715e"># Build extensions (must be done to activate extensions since --no-build is used above)</span>
jupyter lab build

<span style="color:#75715e"># Unset NODE_OPTIONS environment variable</span>
<span style="color:#75715e"># (OS X/Linux)</span>
unset NODE_OPTIONS
</code></pre></div><p>See the install page on the official website for details.</p>
<p>#Import library</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> seaborn <span style="color:#f92672">as</span> sns
<span style="color:#f92672">import</span> plotly.express <span style="color:#f92672">as</span> px
<span style="color:#f92672">from</span> plotly.subplots <span style="color:#f92672">import</span> make_subplots
<span style="color:#f92672">import</span> plotly.figure_factory <span style="color:#f92672">as</span> ff
<span style="color:#f92672">import</span> plotly.graph_objects <span style="color:#f92672">as</span> go
<span style="color:#f92672">import</span> plotly.io <span style="color:#f92672">as</span> pio
<span style="color:#f92672">import</span> japanize_matplotlib
<span style="color:#f92672">import</span> datetime
<span style="color:#f92672">from</span> matplotlib.dates <span style="color:#f92672">import</span> MonthLocator
<span style="color:#f92672">from</span> IPython.display <span style="color:#f92672">import</span> HTML

sns<span style="color:#f92672">.</span>set_style(<span style="color:#e6db74">&#39;darkgrid&#39;</span>)
pio<span style="color:#f92672">.</span>templates<span style="color:#f92672">.</span>default <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;seaborn&#39;</span>
plt<span style="color:#f92672">.</span>rcParams[<span style="color:#e6db74">&#39;font.family&#39;</span>] <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;IPAexGothic&#39;</span>

<span style="color:#f92672">%</span>matplotlib inline
<span style="color:#f92672">%</span>config InlineBackend<span style="color:#f92672">.</span>figure_formats <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;png&#39;</span>,<span style="color:#e6db74">&#39;retina&#39;</span>}

<span style="color:#f92672">import</span> matplotlib
<span style="color:#f92672">import</span> plotly
<span style="color:#66d9ef">print</span>(matplotlib<span style="color:#f92672">.</span>__version__) <span style="color:#75715e"># 3.1.1</span>
<span style="color:#66d9ef">print</span>(sns<span style="color:#f92672">.</span>__version__) <span style="color:#75715e"># 0.9.0</span>
<span style="color:#66d9ef">print</span>(plotly<span style="color:#f92672">.</span>__version__) <span style="color:#75715e"># 4.2.1</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
use <span style="color:#75715e">#iris dataset</span>
iris <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>load_dataset(<span style="color:#e6db74">&#39;iris&#39;</span>)
iris<span style="color:#f92672">.</span>head()
</code></pre></div><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sepal_length</th>
      <th>sepal_width</th>
      <th>petal_length</th>
      <th>petal_width</th>
      <th>species</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>5.1</td>
      <td>3.5</td>
      <td>1.4</td>
      <td>0.2</td>
      <td>setosa</td>
    </tr>
    <tr>
      <th>1</th>
      <td>4.9</td>
      <td>3.0</td>
      <td>1.4</td>
      <td>0.2</td>
      <td>setosa</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4.7</td>
      <td>3.2</td>
      <td>1.3</td>
      <td>0.2</td>
      <td>setosa</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4.6</td>
      <td>3.1</td>
      <td>1.5</td>
      <td>0.2</td>
      <td>setosa</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5.0</td>
      <td>3.6</td>
      <td>1.4</td>
      <td>0.2</td>
      <td>setosa</td>
    </tr>
  </tbody>
</table>
<p>#Histogram</p>
<h2 id="matplotlibseaborn">matplotlib+seaborn</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig, axes <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(ncols<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">16</span>, <span style="color:#ae81ff">4</span>))
sns<span style="color:#f92672">.</span>distplot(iris[<span style="color:#e6db74">&#39;sepal_length&#39;</span>], bins<span style="color:#f92672">=</span>np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">0.25</span>), kde<span style="color:#f92672">=</span>False, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;all&#39;</span>, ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">0</span>])
sns<span style="color:#f92672">.</span>distplot(iris<span style="color:#f92672">.</span>query(<span style="color:#e6db74">&#39;species==&#34;setosa&#34;&#39;</span>)[<span style="color:#e6db74">&#39;sepal_length&#39;</span>], kde<span style="color:#f92672">=</span>False,
             bins<span style="color:#f92672">=</span>np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">0.25</span>), label<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;setosa&#39;</span>, hist_kws<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;alpha&#39;</span>:<span style="color:#ae81ff">0.3</span>}, ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">1</span>])
sns<span style="color:#f92672">.</span>distplot(iris<span style="color:#f92672">.</span>query(<span style="color:#e6db74">&#39;species==&#34;versicolor&#34;&#39;</span>)[<span style="color:#e6db74">&#39;sepal_length&#39;</span>], kde<span style="color:#f92672">=</span>False,
             bins<span style="color:#f92672">=</span>np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">0.25</span>), label<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;versicolor&#39;</span>, hist_kws<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;alpha&#39;</span>:<span style="color:#ae81ff">0.3</span>}, ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">1</span>])
sns<span style="color:#f92672">.</span>distplot(iris<span style="color:#f92672">.</span>query(<span style="color:#e6db74">&#39;species==&#34;virginica&#34;&#39;</span>)[<span style="color:#e6db74">&#39;sepal_length&#39;</span>], kde<span style="color:#f92672">=</span>False,
             bins<span style="color:#f92672">=</span>np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">0.25</span>), label<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;virginica&#39;</span>, hist_kws<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;alpha&#39;</span>:<span style="color:#ae81ff">0.3</span>}, ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">1</span>])axes[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#34;Spacing length histogram (cm)&#34;</span>)
axes[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#34;Spacing histogram of each product type (cm)&#34;</span>)
axes[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>legend()
plt<span style="color:#f92672">.</span>show()
</code></pre></div><img width="927" alt="hist_seaborn.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/37fc282e-d48d-d957-eee2-56c28b932486.png">
<h2 id="plotly-express">Plotly Express</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">You can<span style="color:#e6db74">&#39;t explicitly specify the width of #bin, but changing the size of nbins makes it nicer width</span>
<span style="color:#75715e"># plotly express produces fig</span>
If you want to store the figure <span style="color:#f92672">in</span> <span style="color:#75715e"># subplots, you can extract and store the trace from each fig.data.</span>
If <span style="color:#75715e"># specifies marginal, the position of marginal collapses, so leave it once</span>
fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>histogram(iris, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sepal_length&#39;</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>,
                           nbins<span style="color:#f92672">=</span><span style="color:#ae81ff">19</span>, range_x<span style="color:#f92672">=</span>[<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">8</span>], width<span style="color:#f92672">=</span><span style="color:#ae81ff">600</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">350</span>,
                           opacity<span style="color:#f92672">=</span><span style="color:#ae81ff">0.4</span>, marginal<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;box&#39;</span>)
If you specify range_y when drawing <span style="color:#75715e"># histogram, the drawing position of the marginal boxplot collapses</span>
fig<span style="color:#f92672">.</span>update_layout(barmode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;overlay&#39;</span>)
fig<span style="color:#f92672">.</span>update_yaxes(range<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">20</span>],row<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, col<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
Save <span style="color:#66d9ef">as</span> <span style="color:#75715e">#html</span>
<span style="color:#75715e"># fig.write_html(&#39;histogram_with_boxplot.html&#39;, auto_open=False)</span>
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/df57c898-d948-346d-6c10-3fff3816f370.png" alt="newplot (3).png">
Click here for a working link: <a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/histogram_with_boxplot_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/histogram_with_boxplot_px.html</a></p>
<p>Various information will pop up when you mouse over.
marginal plot is easy to apply.
You can see only that by double-clicking the item you want to see from the item on the right.</p>
<h2 id="plotly">plotly</h2>
<p>I will draw using the function of plotly body</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig <span style="color:#f92672">=</span> make_subplots(rows<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, cols<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, subplot_titles<span style="color:#f92672">=</span>(<span style="color:#e6db74">&#39;seal piece length (cm)&#39;</span>,<span style="color:#e6db74">&#39;seal piece length for each variety (cm)&#39;</span>))
fig<span style="color:#f92672">.</span>add_trace(go<span style="color:#f92672">.</span>Histogram(x<span style="color:#f92672">=</span>iris[<span style="color:#e6db74">&#39;sepal_length&#39;</span>], xbins<span style="color:#f92672">=</span>dict(start<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>,end<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>,size<span style="color:#f92672">=</span><span style="color:#ae81ff">0.25</span>), hovertemplate<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;%{x}cm: %{y} pieces&#34;</span>, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;all types&#34;</span>), row<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, col<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
<span style="color:#66d9ef">for</span> species <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#39;setosa&#39;</span>,<span style="color:#e6db74">&#39;versicolor&#39;</span>,<span style="color:#e6db74">&#39;virginica&#39;</span>]:
    fig<span style="color:#f92672">.</span>add_trace(go<span style="color:#f92672">.</span>Histogram(x<span style="color:#f92672">=</span>iris<span style="color:#f92672">.</span>query(f<span style="color:#e6db74">&#39;species==&#34;{species}&#34;&#39;</span>)[<span style="color:#e6db74">&#39;sepal_length&#39;</span>],
                           xbins<span style="color:#f92672">=</span>dict(start<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>,end<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>,size<span style="color:#f92672">=</span><span style="color:#ae81ff">0.25</span>), hovertemplate<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;%{x}cm: %{y}&#34;</span>, name<span style="color:#f92672">=</span>species), row<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, col<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
fig<span style="color:#f92672">.</span>update_layout(barmode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;overlay&#39;</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">900</span>)
fig<span style="color:#f92672">.</span>update_traces(opacity<span style="color:#f92672">=</span><span style="color:#ae81ff">0.3</span>, row<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, col<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
fig<span style="color:#f92672">.</span>update_xaxes(tickvals<span style="color:#f92672">=</span>np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">0.5</span>), title_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sepal_length&#39;</span>)
fig<span style="color:#f92672">.</span>update_yaxes(title_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Frequency&#39;</span>)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/histogram_with_boxplot_plotly.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/c4cb3064-800c-ab37-938a-4ef76bf10bfd.png" alt="newplot (4).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/histogram_with_boxplot_plotly.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/histogram_with_boxplot_plotly.html</a></p>
<p>#Box plot</p>
<h2 id="matplotlibseaborn-1">matplotlib+seaborn</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig, ax <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">3</span>))
sns<span style="color:#f92672">.</span>boxplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sepal_length&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>, data<span style="color:#f92672">=</span>iris, order<span style="color:#f92672">=</span>(<span style="color:#e6db74">&#39;setosa&#39;</span>,<span style="color:#e6db74">&#39;versicolor&#39;</span>,<span style="color:#e6db74">&#39;virginica&#39;</span>), ax<span style="color:#f92672">=</span>ax)
ax<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;A box-and-whisker chart of the length of the sepal for each breed (cm)&#39;</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/d31c07ce-4b64-9ce4-8957-9bb694f0e241.png" alt="image.png"></p>
<h2 id="plotly-express-1">Plotly Express</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>box(iris, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sepal_length&#39;</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>, orientation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;h&#39;</span>,
       category_orders<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;species&#39;</span>: [<span style="color:#e6db74">&#39;setosa&#39;</span>,<span style="color:#e6db74">&#39;versicolor&#39;</span>,<span style="color:#e6db74">&#39;virginica&#39;</span>]},
       title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;A box and whisker plot of the sepal length of each variety (cm)&#39;</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">600</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>)
fig<span style="color:#f92672">.</span>update_layout(showlegend<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/boxplot_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/fb5801d0-1cda-df44-bc75-1e646520f2ed.png" alt="newplot (21).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/boxplot_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/boxplot_px.html</a>
For example, hovering over an outlier point will pop up information.
It&rsquo;s a little not beautiful to not ride on the horizontal line for each variety&hellip;</p>
<h2 id="plotly-1">plotly</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Figure()
<span style="color:#66d9ef">for</span> species <span style="color:#f92672">in</span> iris[<span style="color:#e6db74">&#39;species&#39;</span>]<span style="color:#f92672">.</span>unique():
    fig<span style="color:#f92672">.</span>add_trace(go<span style="color:#f92672">.</span>Box(x<span style="color:#f92672">=</span>iris<span style="color:#f92672">.</span>query(f<span style="color:#e6db74">&#39;species==&#34;{species}&#34;&#39;</span>)[<span style="color:#e6db74">&#39;sepal_length&#39;</span>], name<span style="color:#f92672">=</span>species))
fig<span style="color:#f92672">.</span>update_layout(height<span style="color:#f92672">=</span><span style="color:#ae81ff">300</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">600</span>, showlegend<span style="color:#f92672">=</span>False, title_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;A box-and-whisker plot (cm) of sepal length for each variety&#39;</span>)
fig<span style="color:#f92672">.</span>update_xaxes(title_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sepal_length&#39;</span>)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/boxplot_plotly.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/b50e0987-dc55-88a4-160b-c36796538077.png" alt="newplot (5).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/boxplot_plotly.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/boxplot_plotly.html</a>
Here, the box plot is on the line.</p>
<p>#Bar chart</p>
<h2 id="matplotlib--seaborn">matplotlib + seaborn</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig, ax <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">3</span>))
sns<span style="color:#f92672">.</span>barplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sepal_length&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>, order<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;setosa&#39;</span>,<span style="color:#e6db74">&#39;versicolor&#39;</span>,<span style="color:#e6db74">&#39;virginica&#39;</span>], ci<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sd&#39;</span>, data<span style="color:#f92672">=</span>iris, ax<span style="color:#f92672">=</span>ax)
ax<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;Average length of sepals for each variety (cm)&#39;</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/33c0ee7b-879e-7d17-f168-6c9b9965e803.png" alt="image.png"></p>
<h2 id="plotly-express-2">Plotly Express</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#Plotly doesn&#39;t calculate the mean or standard deviation of the length, unlike Seaborn.</span>
agg_iris <span style="color:#f92672">=</span> iris<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;species&#39;</span>])[[<span style="color:#e6db74">&#39;sepal_length&#39;</span>]]<span style="color:#f92672">.</span>agg([np<span style="color:#f92672">.</span>mean, np<span style="color:#f92672">.</span>std,<span style="color:#e6db74">&#39;count&#39;</span>])<span style="color:#f92672">.</span>reset_index()
agg_iris<span style="color:#f92672">.</span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;species&#39;</span>,<span style="color:#e6db74">&#39;sepal_length&#39;</span>,<span style="color:#e6db74">&#39;std&#39;</span>,<span style="color:#e6db74">&#39;count&#39;</span>]
fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>bar(agg_iris, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sepal_length&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>, category_orders<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;species&#39;</span>: [<span style="color:#e6db74">&#39;setosa&#39;</span>,<span style="color:#e6db74">&#39;versicolor&#39;</span>,<span style="color:#e6db74">&#39;virginica&#39;</span>]},
       error_x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;std&#39;</span>, orientation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;h&#39;</span>, hover_data<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;count&#39;</span>], height<span style="color:#f92672">=</span><span style="color:#ae81ff">300</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">600</span>, title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Average length of sepals by product type (cm)&#39;</span>)
fig<span style="color:#f92672">.</span>update_layout(showlegend<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/barplot_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/66eb1483-b65c-9139-a8cb-bf2b7a1d8b3a.png" alt="newplot (6).png"><a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/barplot_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/barplot_px.html</a></p>
<h3 id="reference-if-you-want-to-use-facet-to-see-ggplot">(Reference) If you want to use facet to see ggplot</h3>
<p>Useful when there are multiple comparison axes</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">tips <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>data<span style="color:#f92672">.</span>tips()
fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>histogram(tips, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sex&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tip&#34;</span>, histfunc<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;avg&#34;</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;smoker&#34;</span>, barmode<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;group&#34;</span>,
             facet_row<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;time&#34;</span>, facet_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;day&#34;</span>, category_orders<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;day&#34;</span>: [<span style="color:#e6db74">&#34;Thur&#34;</span>, <span style="color:#e6db74">&#34;Fri&#34;</span>, <span style="color:#e6db74">&#34;Sat&#34;</span>, <span style="color:#e6db74">&#34;Sun&#34;</span>],
                                                                <span style="color:#e6db74">&#34;time&#34;</span>: [<span style="color:#e6db74">&#34;Lunch&#34;</span>, <span style="color:#e6db74">&#34;Dinner&#34;</span>]},
                  height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/boxplot_with_facet_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/b3389197-249c-29bf-9639-fbbaa45b61dd.png" alt="newplot (7).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/boxplot_with_facet_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/boxplot_with_facet_px.html</a></p>
<h1 id="stacked-bar-chart">Stacked bar chart</h1>
<p>Preprocessing</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">iris[<span style="color:#e6db74">&#39;sepal_length_rank&#39;</span>] <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>cut(iris[<span style="color:#e6db74">&#39;sepal_length&#39;</span>], [<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">8</span>], labels<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;short&#39;</span>,<span style="color:#e6db74">&#39;medium&#39;</span>,<span style="color:#e6db74">&#39;long&#39;</span>])
agg_iris <span style="color:#f92672">=</span> iris<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;sepal_length_rank&#39;</span>,<span style="color:#e6db74">&#39;species&#39;</span>])<span style="color:#f92672">.</span>size()<span style="color:#f92672">.</span>reset_index()
agg_iris<span style="color:#f92672">.</span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;sepal_length_rank&#39;</span>,<span style="color:#e6db74">&#39;species&#39;</span>,<span style="color:#e6db74">&#39;count&#39;</span>]
pivot_iris <span style="color:#f92672">=</span> agg_iris<span style="color:#f92672">.</span>pivot(index<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sepal_length_rank&#39;</span>, columns<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>, values<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;count&#39;</span>)
</code></pre></div><h2 id="matplotlibseaborn-pandas-plot">matplotlib+<del>seaborn</del> Pandas Plot</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># seaborn has no function corresponding to stacked=True, so write it in Pandas plot</span>
fig, ax <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">3</span>))
pivot_iris<span style="color:#f92672">.</span>plot<span style="color:#f92672">.</span>barh(y<span style="color:#f92672">=</span>pivot_iris<span style="color:#f92672">.</span>columns, stacked<span style="color:#f92672">=</span>True, ax<span style="color:#f92672">=</span>ax)
ax<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;Scalp length length by rank and breakdown breakdown&#39;</span>)
ax<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;frequency&#39;</span>)
ax<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;Rank of sepal length&#39;</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/ead38ddc-1197-43e0-fc73-a52cce731e4b.png" alt="image.png"></p>
<h2 id="plotly-express-3">Plotly Express</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>bar(agg_iris, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sepal_length_rank&#39;</span>, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;count&#39;</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>, orientation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;h&#39;</span>, barmode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;relative&#39;</span>,
      height<span style="color:#f92672">=</span><span style="color:#ae81ff">300</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">600</span>, title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Scalp length length by rank and breakdown breakdown&#39;</span>)
fig<span style="color:#f92672">.</span>update_xaxes(title_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Frequency&#39;</span>)
fig<span style="color:#f92672">.</span>update_yaxes(title_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Scalp length rank&#39;</span>)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/stacked_barplot_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/d248fb71-1a7c-356e-9cd1-934baca2704b.png" alt="newplot (8).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/stacked_barplot_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/stacked_barplot_px.html</a>
You can select and stack any element</p>
<h1 id="scatter-plot">Scatter plot</h1>
<h2 id="matplotlib--seaborn-1">matplotlib + seaborn</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># When you want to see the correlation of two variables</span>
fig, ax <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">4</span>))
sns<span style="color:#f92672">.</span>scatterplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sepal_length&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;petal_length&#39;</span>, hue<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>, data<span style="color:#f92672">=</span>iris, ax<span style="color:#f92672">=</span>ax)
ax<span style="color:#f92672">.</span>legend(loc<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lower right&#39;</span>)
ax<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;Scaple length and petal length scatterplot (cm)&#39;</span>)
ax<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;Strip length (cm)&#39;</span>)
ax<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;petal length (cm)&#39;</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/d0140692-933e-1e1d-5016-f3e3bbd0fbd1.png" alt="image.png"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#When you want to see the correlation of multiple variables</span>
g <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>pairplot(iris, hue<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>)
plt<span style="color:#f92672">.</span>subplots_adjust(top<span style="color:#f92672">=</span><span style="color:#ae81ff">0.95</span>)
g<span style="color:#f92672">.</span>fig<span style="color:#f92672">.</span>suptitle (<span style="color:#e6db74">&#39;Scatter matrix for each variety&#39;</span>)
g<span style="color:#f92672">.</span>fig<span style="color:#f92672">.</span>set_size_inches(<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">6</span>)
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/ae65fae7-89fb-1134-63cd-2c348877e8c8.png" alt="image.png"></p>
<h2 id="plotly-express-4">Plotly Express</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>scatter(px<span style="color:#f92672">.</span>data<span style="color:#f92672">.</span>iris(), x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sepal_length&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;petal_length&#39;</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>, symbol<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>,
                 marginal_x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;box&#39;</span>, marginal_y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;histogram&#39;</span>, trendline<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ols&#39;</span>,
           hover_data<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;species_id&#39;</span>], width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">600</span>, title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Scaple length and petal length scatterplot (cm)&#39;</span>)
If <span style="color:#75715e">#range is not specified individually in the scatter, it will be reflected in the marginal figure and the marginal figure will not be visible</span>
fig<span style="color:#f92672">.</span>update_xaxes(title_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Scaple length (cm)&#39;</span>, range<span style="color:#f92672">=</span>[<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">8</span>], row<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, col<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
fig<span style="color:#f92672">.</span>update_yaxes(title_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;petal length (cm)&#39;</span>, range<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0.5</span>,<span style="color:#ae81ff">8</span>], row<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, col<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/scatterplot_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/8618742b-0017-2d2b-6707-4f87caa8ccbc.png" alt="newplot (9).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/scatterplot_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/scatterplot_px.html</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>scatter_matrix(iris, dimensions<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;sepal_length&#39;</span>,<span style="color:#e6db74">&#39;sepal_width&#39;</span>,<span style="color:#e6db74">&#39;petal_length&#39;</span>,<span style="color:#e6db74">&#39;petal_width&#39;</span>],
                 (color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>, size_max<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Scatter diagram matrix for each product type&#39;</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">600</span>)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/scattermatrix_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/d41000bc-50f0-db07-f441-b846443f6a51.png" alt="newplot (10).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/scattermatrix_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/scattermatrix_px.html</a>
If you enclose some data using the lasso tool in the upper right, only the data corresponding to that data will be highlighted in all figures
When &ldquo;Toggle Spike Lines&rdquo; is turned on, the x and y coordinate auxiliary lines are output.</p>
<h1 id="reference-parallel-coordinates">(Reference) parallel coordinates</h1>
<p>If you have too many variables, it is better to use parallel coordinates rather than looking at the scatterplot matrix</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">You can interactively change the order of <span style="color:#75715e"># axes.</span>
<span style="color:#75715e"># You can also filter on each axis, click the axis value to adjust the width shown</span>
<span style="color:#75715e"># It is better to look at this equilibrium coordinate because it is possible to consider multiple axes rather than looking at each correlation with a scatterplot matrix</span>
fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>parallel_coordinates(px<span style="color:#f92672">.</span>data<span style="color:#f92672">.</span>iris(),
                              color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species_id&#39;</span>,
                              dimensions<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;sepal_length&#39;</span>,<span style="color:#e6db74">&#39;sepal_width&#39;</span>,<span style="color:#e6db74">&#39;petal_length&#39;</span>,<span style="color:#e6db74">&#39;petal_width&#39;</span>,<span style="color:#e6db74">&#39;species_id&#39;</span>],
                              color_continuous_scale<span style="color:#f92672">=</span>px<span style="color:#f92672">.</span>colors<span style="color:#f92672">.</span>diverging<span style="color:#f92672">.</span>Portland,
                             height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/parallel_coordinates_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/32031699-787e-3ad9-815f-2e92d0192c3b.png" alt="newplot (11).png"><a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/parallel_coordinates_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/parallel_coordinates_px.html</a>
You can sort the axes
Selecting a value in the axis will filter only data that passes that value.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># If the categorical variable is on the axis you can do something like this</span>
fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>parallel_categories(iris, dimensions<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;species&#39;</span>,<span style="color:#e6db74">&#39;sepal_length_rank&#39;</span>], color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sepal_length&#39;</span>,
                             labels<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;species&#39;</span>:<span style="color:#e6db74">&#39;Ayame varieties&#39;</span>,<span style="color:#e6db74">&#39;sepal_length_rank&#39;</span>:<span style="color:#e6db74">&#39;Scaple length grade&#39;</span>},
                            height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">600</span>)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/parallel_categories_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/c622111e-2590-f36f-4322-48c558b6c7b9.png" alt="newplot (12).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/parallel_categories_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/parallel_categories_px.html</a></p>
<p>#Heat map
Preprocessing</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">flights <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>load_dataset(<span style="color:#e6db74">&#34;flights&#34;</span>)
<span style="color:#75715e">#Cross tabulation</span>
crossed_flights <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>pivot_table(flights, values<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;passengers&#34;</span>, index<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;month&#34;</span>, columns<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;year&#34;</span>, aggfunc<span style="color:#f92672">=</span>np<span style="color:#f92672">.</span>mean)
<span style="color:#75715e"># pd.crosstab(flights[&#34;month&#34;], flights[&#34;year&#34;], values=flights[&#34;passengers&#34;], aggfunc=np.mean)</span>
</code></pre></div><h2 id="matplotlibseaborn-2">matplotlib+seaborn</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#Heat map</span>
fig, ax <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">6</span>))
sns<span style="color:#f92672">.</span>heatmap(crossed_flights,annot<span style="color:#f92672">=</span>True, cmap<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Oranges&#34;</span>, fmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;.5g&#39;</span>, ax<span style="color:#f92672">=</span>ax)
ax<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;Passenger Heat Map&#39;</span>);
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/e1f25f06-991f-248b-a213-0c86349470b9.png" alt="image.png">
Somehow the numbers will stick out of the frame&hellip;
It didn&rsquo;t happen in the past, but it&rsquo;s a mystery</p>
<h2 id="plotly-express-5">Plotly Express</h2>
<p>There is no corresponding function in Plotly Express, so I will use the function of plotly body</p>
<h2 id="plotly-2">plotly</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Figure()
fig<span style="color:#f92672">.</span>add_trace(go<span style="color:#f92672">.</span>Heatmap(z<span style="color:#f92672">=</span>crossed_flights, x<span style="color:#f92672">=</span>crossed_flights<span style="color:#f92672">.</span>columns, y<span style="color:#f92672">=</span>crossed_flights<span style="color:#f92672">.</span>index,
                        hovertemplate<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;%{x}-%{y}: %{z} passengers&#39;</span>, colorscale<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Oranges&#39;</span>))
fig<span style="color:#f92672">.</span>update_layout(height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">600</span>, title_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;heat map of number of passengers (with hover and no annotation)&#39;</span>)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/heatmap_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/e977119f-a1f5-0efd-04f6-1161799dbe13.png" alt="newplot (13).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/heatmap_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/heatmap_px.html</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># heatmap is easier to see when hover is OFF</span>
fig <span style="color:#f92672">=</span> ff<span style="color:#f92672">.</span>create_annotated_heatmap(z<span style="color:#f92672">=</span>crossed_flights<span style="color:#f92672">.</span>values, x<span style="color:#f92672">=</span>list(crossed_flights<span style="color:#f92672">.</span>columns),
                                  y<span style="color:#f92672">=</span>list(crossed_flights<span style="color:#f92672">.</span>index), colorscale<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Oranges&#39;</span>,
                                  hoverinfo<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;none&#39;</span>)
fig<span style="color:#f92672">.</span>update_layout(height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">600</span>, showlegend<span style="color:#f92672">=</span>False, title_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;heat map of passengers (with annotate without hover)&#39;</span>)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/heatmap_with_annotate_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/048987c1-c159-40c7-a780-dec76f9f2f9a.png" alt="newplot (14).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/heatmap_with_annotate_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/heatmap_with_annotate_px.html</a></p>
<h1 id="line-graph">Line graph</h1>
<p>Preprocessing</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">Prepare <span style="color:#75715e">#datetime type column</span>
datetimes <span style="color:#f92672">=</span> []
<span style="color:#66d9ef">for</span> i, j <span style="color:#f92672">in</span> enumerate(flights<span style="color:#f92672">.</span>itertuples()):
    datetimes<span style="color:#f92672">.</span>append(datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>strptime(f<span style="color:#e6db74">&#39;{j[1]}-{j[2]}&#39;</span>,<span style="color:#e6db74">&#39;%Y-%B&#39;</span>))
flights[<span style="color:#e6db74">&#39;datetime&#39;</span>] <span style="color:#f92672">=</span> datetimes
</code></pre></div><h2 id="matplotlibseaborn-3">matplotlib+seaborn</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig, ax <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">4</span>))
sns<span style="color:#f92672">.</span>lineplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;datetime&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;passengers&#39;</span>, data<span style="color:#f92672">=</span>flights, ax<span style="color:#f92672">=</span>ax)
ax<span style="color:#f92672">.</span>xaxis<span style="color:#f92672">.</span>set_major_locator(MonthLocator(interval<span style="color:#f92672">=</span><span style="color:#ae81ff">6</span>))
ax<span style="color:#f92672">.</span>tick_params(labelrotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
ax<span style="color:#f92672">.</span>set_xlim(datetime<span style="color:#f92672">.</span>datetime(<span style="color:#ae81ff">1949</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>),datetime<span style="color:#f92672">.</span>datetime(<span style="color:#ae81ff">1961</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>))
ax<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;Line chart of passenger number transition (by month)&#39;</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/939276dd-527e-505f-f51f-5d57f32cc932.png" alt="image.png"></p>
<h2 id="plotly-express-6">Plotly Express</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>line(flights, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;datetime&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;passengers&#39;</span>,
              height<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Line chart of changes in the number of passengers (by month)&#39;</span>)
fig<span style="color:#f92672">.</span>update_layout(xaxis_range<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;1949-01-01&#39;</span>, <span style="color:#e6db74">&#39;1961-01-01&#39;</span>], <span style="color:#75715e"># May be specified with datetime.datetime</span>
                 xaxis_rangeslider_visible<span style="color:#f92672">=</span>True)
fig<span style="color:#f92672">.</span>update_xaxes(tickformat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;%Y-%m&#39;</span>, tickangle<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/lineplot_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/7d88be76-7a06-8b85-917a-3e41ad849028.png" alt="newplot (15).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/lineplot_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/lineplot_px.html</a>
You can check the line graph in the range specified with the slider below.
When comparing multiple line charts, you can later select only the items you want to compare</p>
<h1 id="other-interesting-graphs">Other interesting graphs</h1>
<p>Looking at <a href="https://plot.ly/python/plotly-express/">https://plot.ly/python/plotly-express/</a> I tried to arrange interesting figures</p>
<h2 id="polar-coordinates">Polar Coordinates</h2>
<p>In the bar graph, you can only compare univariate lengths, but it can be used when you want to compare scores on multiple axes such as test results</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">melted_iris <span style="color:#f92672">=</span> iris<span style="color:#f92672">.</span>melt(id_vars<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;species&#39;</span>], value_vars<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;sepal_length&#39;</span>,<span style="color:#e6db74">&#39;sepal_width&#39;</span>,<span style="color:#e6db74">&#39;petal_length&#39;</span>,<span style="color:#e6db74">&#39;petal_width&#39;</span>],
                       var_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;variable&#39;</span>, value_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;value&#39;</span>)
melted_iris <span style="color:#f92672">=</span> melted_iris<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;species&#39;</span>,<span style="color:#e6db74">&#39;variable&#39;</span>])<span style="color:#f92672">.</span>mean()<span style="color:#f92672">.</span>reset_index()
fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>line_polar(melted_iris, r<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;value&#39;</span>, theta<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;variable&#39;</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;species&#39;</span>, line_close<span style="color:#f92672">=</span>True,
                   height<span style="color:#f92672">=</span><span style="color:#ae81ff">500</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">500</span>, title<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;length and width of sepals and petals for each iris variety&#39;</span>)
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/line_polar_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/2e997fc8-6313-9830-10bb-67cc0e5e49e0.png" alt="newplot (16).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/line_polar_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/line_polar_px.html</a>
Especially the shape of the flower of setosa seems to be different</p>
<h2 id="distribution">Distribution</h2>
<pre><code class="language-pythonfig" data-lang="pythonfig">fig.add_trace(px.density_contour(iris, x=&quot;sepal_width&quot;, y=&quot;sepal_length&quot;).data[0],row=1, col=1)
fig2 = px.density_contour(iris, x=&quot;sepal_width&quot;, y=&quot;sepal_length&quot;, color='species')
[fig.add_trace(fig2.data[i], row=1, col=2) for i in range(len(fig2.data))] # Store all fig2 traces in fig
fig.write_html('../output/densityplot_px.html', auto_open=False)
fig.show()
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/2c1cb2b9-6bf2-fd52-e3e1-63f60b925ac6.png" alt="newplot (17).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/densityplot_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/densityplot_px.html</a>
Cool
You can check the height of each contour line with the mouse</p>
<h2 id="animation">Animation</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">gapminder <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>data<span style="color:#f92672">.</span>gapminder()
fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>scatter(gapminder, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;gdpPercap&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;lifeExp&#34;</span>, animation_frame<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;year&#34;</span>, animation_group<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;country&#34;</span>,
           size<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;pop&#34;</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;continent&#34;</span>, hover_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;country&#34;</span>, facet_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;continent&#34;</span>,
           log_x<span style="color:#f92672">=</span>True, size_max<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>, range_x<span style="color:#f92672">=</span>[<span style="color:#ae81ff">100</span>,<span style="color:#ae81ff">100000</span>], range_y<span style="color:#f92672">=</span>[<span style="color:#ae81ff">25</span>,<span style="color:#ae81ff">90</span>])
fig<span style="color:#f92672">.</span>write_html(<span style="color:#e6db74">&#39;../output/scatter_animation_px.html&#39;</span>, auto_open<span style="color:#f92672">=</span>False)
fig<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/aec967dd-7733-0ca2-bc12-ff520191863a.png" alt="newplot (22).png"></p>
<p><a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/scatter_animation_px.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/scatter_animation_px.html</a>
I think this is interesting if you click the URL and actually move it</p>
<h1 id="general-comment">General comment</h1>
<p>Summarize the results of comparing Plotly Express and seaborn (matplotlib) with dogmatism and prejudice
◎: Recommended for use
○: No particular problem
△: Dissatisfied
×: No mounting</p>
<table>
<thead>
<tr>
<th>Graph</th>
<th>Plotly Express</th>
<th>matplotlib <br> seaborn</th>
<th>Reasons</th>
</tr>
</thead>
<tbody>
<tr>
<td>Histogram</td>
<td>◎</td>
<td>○</td>
<td>seaborn is sufficient, but it is an advantage to be able to see only by selecting the distribution of the varieties you want to see.</td>
</tr>
<tr>
<td>Box plot</td>
<td>○</td>
<td>○</td>
<td>There is not enough information to select specific varieties and add them by hover <br> Plotly Express makes the figure a little broken <br> If you are interested, please use Plotly itself It&rsquo;s okay for now</td>
</tr>
<tr>
<td>Bar chart</td>
<td>○(※◎)</td>
<td>◎</td>
<td>Seaborn calculates the mean and standard deviation, but Plotly Express needs to be calculated in advance. <br> (*Create a bar graph with two or more axes. If you want, you can use facet Plotly Express option)</td>
</tr>
<tr>
<td>Stacked bar graph</td>
<td>◎</td>
<td>×</td>
<td>Plotly Express can change stacking elements later <br> seaborn does not have a stacked bar graph function</td>
</tr>
<tr>
<td>Scatter plot</td>
<td>◎</td>
<td>○</td>
<td>Regression line can be entered for each group <br> Meta information such as slope of regression line can be checked by hover <br> Marginal plot can be easily incorporated <br> Specific part of scatter plot You can zoom in and out.<br> You can hover meta information such as identification number of individual data.<br> Specifying specific data of a figure in the scatterplot matrix emphasizes only the same data in all other figures. br&gt; When grouping data, you can draw by selecting a specific group</td>
</tr>
<tr>
<td>Parallel coordinates</td>
<td>◎</td>
<td>?</td>
<td>Corresponds to categorical variables that can rearrange axes or filter by a specific axis. <br> Parallel coordinates exert their true power by various trial and error after drawing.</td>
</tr>
<tr>
<td>Heat Map</td>
<td>○</td>
<td>△</td>
<td>Especially if you don&rsquo;t need to hover additional information, seaborn should be enough<br>, but seaborn&rsquo;s figure collapsed because of bad environment at hand</td>
</tr>
<tr>
<td>Line graph</td>
<td>◎</td>
<td>○</td>
<td>Toggle to intuitively understand the position of coordinates even at a point away from the x-axis or y-axis <br> You can draw any range with a slider <br> There were multiple line lines In this case (for example, population changes in 47 prefectures), you can select the prefectures you want to compare and plot</td>
</tr>
</tbody>
</table>
<p>Plotly Express&rsquo;s victory
There were many other drawings that would be interesting if used well, such as radar charts, density distributions, and animations.
If you can use Slider well, it will look really cool.
<a href="https://plot.ly/python/sliders/">https://plot.ly/python/sliders/</a>
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/175024/d8011318-3300-5143-1af3-3799416dad84.png" alt="newplot (20).png">
<a href="https://uchidehiroki.github.io/plotly_folders/Basic_Charts/histogram_with_slider.html">https://uchidehiroki.github.io/plotly_folders/Basic_Charts/histogram_with_slider.html</a></p>
<h2 id="aside-from-part-1-notes-on-using-plotly-express">(Aside from Part 1) Notes on using Plotly Express</h2>
<ul>
<li><strong>Data is retained in the document</strong>
*Be careful when publishing because it is embedded in json format in script tag</li>
<li>Larger amount of data makes it heavier</li>
<li>Browser + machine dependent</li>
<li>To be processed on the client side</li>
</ul>
<p>From <a href="https://kazutan.github.io/kazutanR/plotly_intro.html">kazutan.R</a></p>
<p>It&rsquo;s a lot of work compared to image files, but it seems easier to put the html file locally or host it online before referencing it.
It&rsquo;s better to host online, especially when sharing with multiple people</p>
<h2 id="aside-2-how-to-refer-to-the-html-file-later">(Aside 2) How to refer to the html file later</h2>
<p>Compared to png and jpeg image files, displaying an html file requires some tips.
<strong>For offline display</strong>
You can draw by specifying the path of the html file</p>
<p><strong>For online viewing</strong>
Plotly style: use chart_studio
You can draw by hosting the html file on the plotly server and referencing the issued url
However, a free account cannot issue secret links or be hosted in a private environment (rather plotly makes money there).
The public host of the html file supports up to 100 sheets in total.</p>
<p>So I will use github pages.
Put the html file in the repository of github, select <code>master branch</code> in <code>Settings</code> → <code>GitHub Pages</code> → <code>Source</code> and press the <code>Save</code> button
After that, you can access <code>username.github.io/path/to/html/files</code>.
It&rsquo;s easy to manage html files because it&rsquo;s github
Official site: <a href="https://pages.github.com/">https://pages.github.com/</a>
Reference: <a href="https://www.tam-tam.co.jp/tipsnote/html_css/post11245.html">https://www.tam-tam.co.jp/tipsnote/html_css/post11245.html</a></p>
<p>It seems that you can publish Github pages themselves even in a private repository.
If you analyze with data that you do not want to publish publicly, it seems that the drawing html file is saved in a private repository and only the URL is shared</p>
<h2 id="aside-from-3-html-file-reference-in-jupyter-lab">(Aside from 3) HTML file reference in jupyter lab</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># html file can be referenced and embedded</span>
HTML(filename<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;../output/histogram_with_boxplot_px.html&#39;</span>)
<span style="color:#75715e"># You can also refer to the static html that you put online</span>
HTML(url<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;https://uchidehiroki.github.io/plotly_folders/Basic_Charts/barplot_px.html&#39;</span>)
</code></pre></div><h1 id="at-the-end">At the end</h1>
<p>I used to be a seaborn entertainer, but I don&rsquo;t need to use it much.
It&rsquo;s a bit lonely, but I&rsquo;m going to keep up with the times.
We hope that the number of users of Plotly Express will increase.
It&rsquo;s been a long time, but thank you for your relationship.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
