<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] What is the ETL processing framework cliboa? | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] What is the ETL processing framework cliboa?</h1>
<p>
  <small class="text-secondary">
  
  
  Dec 14, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/framework">framework</a></code></small>


<small><code><a href="https://memotut.com/tags/workflow">Workflow</a></code></small>


<small><code><a href="https://memotut.com/tags/etl">ETL</a></code></small>

</p>
<pre><code>What is #ETL processing?
</code></pre>
<p>ETL is a term that connects the initials of extract, transform, and load. Extract, transform, and load are translated into Japanese for extraction, processing, and loading.
The ETL processing is to perform processing indicated by ETL on some data (text file, csv file, etc.).</p>
<p>What is #cliboa
<a href="https://www.brainpad.co.jp/">BrainPad</a> We designed and implemented the common base part of the ETL processing function that was developed and operated in-house as an application framework. The fixed one is clivoa.</p>
<p>GitHub
<a href="https://github.com/BrainPad/cliboa">https://github.com/BrainPad/cliboa</a></p>
<p>PyPI
<a href="https://pypi.org/project/cliboa/">https://pypi.org/project/cliboa/</a></p>
<h2 id="definition-of-etl-processing-in-cliboa">Definition of ETL processing in cliboa</h2>
<p>In cliboa, extract is defined as downloading data from some box, transform is processing the downloaded data, and load is extracting and uploading the processed data to one of the boxes. is doing. The conceptual diagram is shown below.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/55214/a55ff3d5-2d89-8ff6-9345-3af107009930.png" alt="image.png"></p>
<h2 id="cliboa-features">cliboa features</h2>
<ul>
<li>Implemented in Python.</li>
<li>It is possible to run a simple ETL process just by writing a Yaml file.</li>
<li>Additional implementation by Python is possible.</li>
</ul>
<h1 id="quick-start">quick start</h1>
<h2 id="required-environment">Required environment</h2>
<p>Works on Linux OS such as Debian, Ubuntu, CentOS.</p>
<h2 id="how-to-install">How to install</h2>
<p>After preparing python version3.0 or above, install it by pip command.</p>
<pre><code>sudo pip3 install cliboa
</code></pre><p>After the installation is complete, you can execute the command cliboadmin. Run cliboadmin in any directory.</p>
<pre><code>$ cd /usr/local
$ cliboadmin init sample
$ cd sample
$ cliboadmin create simple-etl
</code></pre><h2 id="program-structure">Program structure</h2>
<p>The program configuration initialized by cliboadmin is as follows.</p>
<pre><code>sample
|-- bin
| `-- clibomanager.py
|-- common
| |-- __init__.py
| |-- environment.py
| |-- scenario
| `-- scenario.yml
|-- conf
|-- logs
|-- project
| `-- simple-etl
| |-- scenario
| `-- scenario.yml
`-- requirements.txt
</code></pre><h2 id="install-pypi-package">Install PyPI package</h2>
<p>Since a set of python packages required to move cliboa is defined in requirements.txt, specify it with the pip command and install it.</p>
<pre><code>$ cd sample
$ pip3 install -r requirements.txt
</code></pre><h2 id="write-a-scenario-for-etl-processing">Write a scenario for ETL processing</h2>
<p>Write the following process in project/simple-etl/scenario.yml as an example.</p>
<p>Processing content
Download test.csv.gz from sftp server, unzip the downloaded file, upload unzipped test.csv to sftp server</p>
<pre><code>scenario:
- step:
  class: SftpDownload
  arguments:
    host: localhost
    user: root
    password: pass
    src_dir: /usr/local
    src_pattern: test.csv.gz
    dest_dir: /tmp
- step: FileDecompress
  arguments:
    src_dir: /tmp
    src_pattern: test.*\.csv.*\.gz
- step:
  class: SftpUpload
  arguments:
    host: localhost
    user: root
    password: pass
    src_dir: /tmp
    src_pattern: test.*\.csv
    dest_dir: /usr/local
</code></pre><h2 id="execute">execute</h2>
<p>Prepare the following before execution</p>
<ul>
<li>Change localhost to sftp server</li>
<li>Login to sftp server with id=root, password=pass</li>
<li>Prepare test.csv.gz under /usr/local</li>
</ul>
<p>Execute with the command below</p>
<pre><code>cd sample
bin/clibomanager.py simple-etl
</code></pre><p>After execution, it is successful if the following is done</p>
<ul>
<li>test.csv.gz placed under /usr/local is expanded under /tmp and becomes test.csv.</li>
<li>test.csv exists under /usr/local</li>
</ul>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
