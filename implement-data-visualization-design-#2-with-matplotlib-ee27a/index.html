<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Implement Data Visualization Design #2 with matplotlib | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Implement Data Visualization Design #2 with matplotlib</h1>
<p>
  <small class="text-secondary">
  
  
  Dec 3, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/matplotlib">matplotlib</a></code></small>


<small><code><a href="https://memotut.com/tags/pandas">pandas</a></code></small>


<small><code><a href="https://memotut.com/tags/visualization">Visualization</a></code></small>

</p>
<pre><code># What is the design of data visualization?
</code></pre>
<p>Go Ando of THE GUILD, which is famous for its services that focus on UX and UI, has published a note on the points of data visualization.</p>
<p><a href="https://note.mu/goando/n/n4a2735c3d69d">https://note.mu/goando/n/n4a2735c3d69d</a></p>
<h1 id="1">#1?</h1>
<ul>
<li>See below for #1</li>
</ul>
<p><a href="https://qiita.com/skotaro/items/cdb0732ad1ad2a4b6236">https://qiita.com/skotaro/items/cdb0732ad1ad2a4b6236</a></p>
<h1 id="notes">Notes</h1>
<ul>
<li>Regarding fonts, it works on mac, but probably not on other OS, so specify a different font.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">plt<span style="color:#f92672">.</span>rcParams[<span style="color:#e6db74">&#39;font.family&#39;</span>] <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Hiragino Sans&#39;</span>
</code></pre></div><p>Is the part.</p>
<h1 id="8-do-not-use-the-second-axis">8. Do not use the second axis</h1>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/196857/a1e7dbfe-60e7-0750-8b89-6420903af77f.png" alt="picture_pc_35cbe51d3cf1f3331ad189ac806eae85.png"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Library import</span>
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt
<span style="color:#f92672">import</span> matplotlib.dates <span style="color:#f92672">as</span> mdates
<span style="color:#f92672">from</span> matplotlib.ticker <span style="color:#f92672">import</span> MultipleLocator


<span style="color:#75715e"># data</span>
mau <span style="color:#f92672">=</span> [<span style="color:#ae81ff">450</span>,<span style="color:#ae81ff">480</span>,<span style="color:#ae81ff">500</span>,<span style="color:#ae81ff">470</span>,<span style="color:#ae81ff">520</span>,<span style="color:#ae81ff">550</span>,<span style="color:#ae81ff">530</span>,<span style="color:#ae81ff">580</span>,<span style="color:#ae81ff">620</span>,<span style="color:#ae81ff">700</span>,<span style="color:#ae81ff">690</span>,<span style="color:#ae81ff">720</span>]
g_rate <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">9</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">12</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">8</span>]
g_rate <span style="color:#f92672">=</span> [one<span style="color:#f92672">/</span><span style="color:#ae81ff">100</span> <span style="color:#66d9ef">for</span> one <span style="color:#f92672">in</span> g_rate]
timeindex <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;2019/1&#39;</span>, periods<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>, freq<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;MS&#39;</span>)
mau <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series(mau, index<span style="color:#f92672">=</span>timeindex, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;MAU(M)&#39;</span>)
g_rate <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series(g_rate,index<span style="color:#f92672">=</span>timeindex,name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Last month growth rate&#39;</span>)

For error avoidance <span style="color:#66d9ef">with</span> <span style="color:#75715e">#pandas</span>
<span style="color:#f92672">from</span> pandas.plotting <span style="color:#f92672">import</span> register_matplotlib_converters
register_matplotlib_converters()

<span style="color:#75715e"># Font setting</span>
plt<span style="color:#f92672">.</span>rcParams[<span style="color:#e6db74">&#39;font.family&#39;</span>] <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Hiragino Sans&#39;</span>
plt<span style="color:#f92672">.</span>rcParams[<span style="color:#e6db74">&#39;font.weight&#39;</span>] <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;heavy&#39;</span>

<span style="color:#75715e"># Split up and down</span>
fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">5</span>))
ax1 <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>)
ax2 <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>)

<span style="color:#75715e"># 1. Change the color and width of the bar</span>
ax1<span style="color:#f92672">.</span>plot(g_rate<span style="color:#f92672">.</span>index, g_rate,linewidth<span style="color:#f92672">=</span><span style="color:#ae81ff">5.</span>,color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;saddlebrown&#34;</span>)
ax2<span style="color:#f92672">.</span>bar(mau<span style="color:#f92672">.</span>index, mau, width<span style="color:#f92672">=</span><span style="color:#ae81ff">20.</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;darkorange&#39;</span>, zorder<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, align<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>)

<span style="color:#75715e"># 2. Display y-axis label, specify color and font size</span>
ax1<span style="color:#f92672">.</span>set_ylabel(g_rate<span style="color:#f92672">.</span>name,color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;saddlebrown&#34;</span>,fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">14</span>,fontweight<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bold&#39;</span>)
ax2<span style="color:#f92672">.</span>set_ylabel(mau<span style="color:#f92672">.</span>name, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;gray&#39;</span>,fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">14</span>,fontweight<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bold&#39;</span>)

<span style="color:#75715e"># 3. Change the y-axis tick position</span>
ax1<span style="color:#f92672">.</span>yaxis<span style="color:#f92672">.</span>set_major_locator(MultipleLocator(<span style="color:#ae81ff">500</span>))
ax2<span style="color:#f92672">.</span>yaxis<span style="color:#f92672">.</span>set_major_locator(MultipleLocator(<span style="color:#ae81ff">500</span>))

<span style="color:#75715e"># 4. Erase tick on x-axis and y-axis, in the above graph, erase all x-axis</span>
ax1<span style="color:#f92672">.</span>tick_params(labelbottom<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;off&#34;</span>,bottom<span style="color:#f92672">=</span>False, left<span style="color:#f92672">=</span>False)
ax1<span style="color:#f92672">.</span>set_xticklabels([])
ax2<span style="color:#f92672">.</span>tick_params(bottom<span style="color:#f92672">=</span>False, left<span style="color:#f92672">=</span>False)

<span style="color:#75715e"># 5. Change the color of tick label on x-axis and y-axis</span>
ax1<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;y&#39;</span>, colors<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dimgray&#39;</span>)
ax2<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;x&#39;</span>, colors<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dimgray&#39;</span>)
ax2<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;y&#39;</span>, colors<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dimgray&#39;</span>)

<span style="color:#75715e"># 6. Show the y-axis grid, use black for the above graph</span>
ax1<span style="color:#f92672">.</span>grid(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;y&#39;</span>,color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;black&#34;</span>)
ax2<span style="color:#f92672">.</span>grid(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;y&#39;</span>)

<span style="color:#75715e"># 7. Erase the right frame</span>
ax1<span style="color:#f92672">.</span>spines[<span style="color:#e6db74">&#39;right&#39;</span>]<span style="color:#f92672">.</span>set_visible(False)
ax2<span style="color:#f92672">.</span>spines[<span style="color:#e6db74">&#39;right&#39;</span>]<span style="color:#f92672">.</span>set_visible(False)

<span style="color:#75715e"># 8. Change the frame color</span>
ax1<span style="color:#f92672">.</span>spines[<span style="color:#e6db74">&#39;bottom&#39;</span>]<span style="color:#f92672">.</span>set_color(<span style="color:#e6db74">&#39;dimgray&#39;</span>)
ax1<span style="color:#f92672">.</span>spines[<span style="color:#e6db74">&#39;top&#39;</span>]<span style="color:#f92672">.</span>set_color(<span style="color:#e6db74">&#39;dimgray&#39;</span>)
ax1<span style="color:#f92672">.</span>spines[<span style="color:#e6db74">&#39;left&#39;</span>]<span style="color:#f92672">.</span>set_color(<span style="color:#e6db74">&#39;dimgray&#39;</span>)
ax2<span style="color:#f92672">.</span>spines[<span style="color:#e6db74">&#39;bottom&#39;</span>]<span style="color:#f92672">.</span>set_color(<span style="color:#e6db74">&#39;dimgray&#39;</span>)
ax2<span style="color:#f92672">.</span>spines[<span style="color:#e6db74">&#39;top&#39;</span>]<span style="color:#f92672">.</span>set_color(<span style="color:#e6db74">&#39;dimgray&#39;</span>)
ax2<span style="color:#f92672">.</span>spines[<span style="color:#e6db74">&#39;left&#39;</span>]<span style="color:#f92672">.</span>set_color(<span style="color:#e6db74">&#39;dimgray&#39;</span>)

<span style="color:#75715e"># 9. Make tick label on x-axis only month</span>
<span style="color:#75715e">#&#39;%-m&#39; is strftime leading zero without month</span>
ax2<span style="color:#f92672">.</span>xaxis<span style="color:#f92672">.</span>set_major_formatter(mdates<span style="color:#f92672">.</span>DateFormatter(<span style="color:#e6db74">&#39;%-m&#39;</span>))

<span style="color:#75715e"># 10. Make tick position on x-axis every month</span>
ax2<span style="color:#f92672">.</span>xaxis<span style="color:#f92672">.</span>set_major_locator(mdates<span style="color:#f92672">.</span>MonthLocator())
ax2<span style="color:#f92672">.</span>xaxis<span style="color:#f92672">.</span>set_tick_params(labelsize<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>)

<span style="color:#75715e"># The position of major tick is not updated unless you draw the fig once</span>
fig<span style="color:#f92672">.</span>canvas<span style="color:#f92672">.</span>draw()

<span style="color:#75715e"># 11. Specify the range of the vertical axis</span>
ax1<span style="color:#f92672">.</span>set_ylim(<span style="color:#f92672">-</span><span style="color:#ae81ff">0.20</span>,<span style="color:#ae81ff">0.20</span>)
ax2<span style="color:#f92672">.</span>set_ylim(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">800</span>)
    
<span style="color:#75715e"># 12. Change vertical axis tick</span>
vals_1 <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">0.2</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0.2</span>]
ax1<span style="color:#f92672">.</span>set_yticks(vals_1)
ax1<span style="color:#f92672">.</span>set_yticklabels([<span style="color:#e6db74">&#39;{:,.0%}&#39;</span><span style="color:#f92672">.</span>format(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> vals_1],color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;saddlebrown&#34;</span>,fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>,fontweight<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bold&#39;</span>)
vals_2 <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">400</span>,<span style="color:#ae81ff">800</span>]
ax2<span style="color:#f92672">.</span>set_yticks(vals_2)
ax2<span style="color:#f92672">.</span>set_yticklabels([<span style="color:#e6db74">&#39;{}&#39;</span><span style="color:#f92672">.</span>format(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> vals_2] ,fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>,fontweight<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bold&#39;</span>)

<span style="color:#75715e"># 13. Align ylabel</span>
axs <span style="color:#f92672">=</span> [ax1,ax2]
fig<span style="color:#f92672">.</span>align_ylabels(axs)
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/196857/fe4aa9e3-edc2-bba1-c457-9f510bb62780.png" alt="temp_5.png"></p>
<p>Regarding the method of making the vertical axis in #12%, I referred to the answer of stackoverflow <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.
#13 is based on the official matplotlib doc <sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>.
In addition, y-labels can be written vertically by line-feeding one character at a time, but I did not do this because the code is unwieldy.
(Please tell me if there is a smart way)</p>
<h1 id="9-reduce-elements-to-a-minimum">9. Reduce elements to a minimum</h1>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/196857/004f108f-cba8-4b05-254a-e2122fe09476.png" alt="picture_pc_a37bd978a068d0840f04250ca5b05a3a.png"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># data</span>
shipment_n <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame([<span style="color:#ae81ff">52217</span>, <span style="color:#ae81ff">9113</span>, <span style="color:#ae81ff">4078</span>],
                           index<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;iPhone&#39;</span>,<span style="color:#e6db74">&#39;iPad&#39;</span>,<span style="color:#e6db74">&#39;Mac&#39;</span>],
                           columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;amount&#39;</span>])

fig, ax <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">3</span>))
ax<span style="color:#f92672">.</span>bar(shipment_n<span style="color:#f92672">.</span>index,shipment_n[<span style="color:#e6db74">&#34;amount&#34;</span>])

<span style="color:#75715e"># 1. Erase all but the bottom frame</span>
sides <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;left&#39;</span>,<span style="color:#e6db74">&#39;right&#39;</span>,<span style="color:#e6db74">&#39;top&#39;</span>]
[ax<span style="color:#f92672">.</span>spines[side]<span style="color:#f92672">.</span>set_visible(False) <span style="color:#66d9ef">for</span> side <span style="color:#f92672">in</span> sides]

<span style="color:#75715e"># 2. Change the bottom frame color to gray</span>
ax<span style="color:#f92672">.</span>spines[<span style="color:#e6db74">&#39;bottom&#39;</span>]<span style="color:#f92672">.</span>set_color(<span style="color:#e6db74">&#34;dimgray&#34;</span>)

<span style="color:#75715e"># 3. turn off the tick on the y-axis</span>
ax<span style="color:#f92672">.</span>tick_params(left<span style="color:#f92672">=</span>False, labelleft<span style="color:#f92672">=</span>False)

<span style="color:#75715e"># 4. Increase x-axis label size and color to gray</span>
ax<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;x&#39;</span>, labelsize<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;xx-large&#39;</span>,color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dimgray&#34;</span>,labelcolor<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dimgray&#34;</span>)

<span style="color:#75715e"># 5. Show the actual value above the bar</span>
vmax <span style="color:#f92672">=</span> shipment_n[<span style="color:#e6db74">&#39;amount&#39;</span>]<span style="color:#f92672">.</span>max()
<span style="color:#66d9ef">for</span> i, value <span style="color:#f92672">in</span> enumerate(shipment_n[<span style="color:#e6db74">&#39;amount&#39;</span>]):
    ax<span style="color:#f92672">.</span>text(i, value<span style="color:#f92672">+</span>vmax<span style="color:#f92672">*</span><span style="color:#ae81ff">0.06</span>, f<span style="color:#e6db74">&#39;{value:,}&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;xx-large&#39;</span>, va<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;C0&#39;</span>)
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/196857/81aa94cc-6713-9563-05eb-7a5879acbfc2.png" alt="tmp6.png"></p>
<p>#4. is realized by offsetting using vmax.</p>
<h1 id="10-write-the-key-message-the-largest">10. Write the key message the largest</h1>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/196857/a16f64d7-7c25-3a76-0446-931dd1819cf6.png" alt="picture_pc_c0ccda82a2e6153a56d22b40e1f7d12b.png"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#Color</span>
ori_blue <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#3674b3&#34;</span>
ori_lightblue <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#b3daff&#34;</span>


<span style="color:#75715e"># 1. Color the whole</span>
plt<span style="color:#f92672">.</span>rcParams[<span style="color:#e6db74">&#34;axes.facecolor&#34;</span>] <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">0</span>)

<span style="color:#75715e"># 2. Blue backgroundfig, ax = plt.subplots(figsize=(6, 4),facecolor=ori_blue)</span>

<span style="color:#75715e"># 3. Title</span>
fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#34;iPhone accounts for 80</span><span style="color:#e6db74">% o</span><span style="color:#e6db74">f the shipment&#34;</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;white&#34;</span>,size<span style="color:#f92672">=</span><span style="color:#ae81ff">24</span>,fontweight<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bold&#39;</span>,ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>)

<span style="color:#75715e"># 4. Plot in light blue</span>
ax<span style="color:#f92672">.</span>bar(shipment_n<span style="color:#f92672">.</span>index,shipment_n[<span style="color:#e6db74">&#34;amount&#34;</span>],color<span style="color:#f92672">=</span>ori_lightblue)

<span style="color:#75715e"># 5. Add description</span>
ax<span style="color:#f92672">.</span>text(<span style="color:#f92672">-</span><span style="color:#ae81ff">0.4</span>,shipment_n[<span style="color:#e6db74">&#34;amount&#34;</span>]<span style="color:#f92672">.</span>max()<span style="color:#f92672">*</span><span style="color:#ae81ff">1.2</span>,<span style="color:#e6db74">&#34;Chart: 2017 Apple devices shipped&#34;</span>,color<span style="color:#f92672">=</span>ori_lightblue,fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>)

<span style="color:#75715e">#6.Delete all frames except bottom</span>
sides <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;left&#39;</span>,<span style="color:#e6db74">&#39;right&#39;</span>,<span style="color:#e6db74">&#39;top&#39;</span>]
[ax<span style="color:#f92672">.</span>spines[side]<span style="color:#f92672">.</span>set_visible(False) <span style="color:#66d9ef">for</span> side <span style="color:#f92672">in</span> sides]

<span style="color:#75715e"># 7. Bottom frame color setting</span>
ax<span style="color:#f92672">.</span>spines[<span style="color:#e6db74">&#39;bottom&#39;</span>]<span style="color:#f92672">.</span>set_color(ori_lightblue)

<span style="color:#75715e"># 8. Setting the y-axis range</span>
ax<span style="color:#f92672">.</span>set_ylim(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">80000</span>)

<span style="color:#75715e"># 9. Delete the tick label on the y-axis</span>
ax<span style="color:#f92672">.</span>tick_params(left<span style="color:#f92672">=</span>False, labelleft<span style="color:#f92672">=</span>False)
    
<span style="color:#75715e"># 10. Set x-axis label</span>
ax<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;x&#39;</span>, labelsize<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;xx-large&#39;</span>,color<span style="color:#f92672">=</span>ori_lightblue,labelcolor<span style="color:#f92672">=</span>ori_lightblue)

<span style="color:#75715e"># 11. Show the actual value above the bar</span>
vmax <span style="color:#f92672">=</span> shipment_n[<span style="color:#e6db74">&#39;amount&#39;</span>]<span style="color:#f92672">.</span>max()
<span style="color:#66d9ef">for</span> i, value <span style="color:#f92672">in</span> enumerate(shipment_n[<span style="color:#e6db74">&#39;amount&#39;</span>]):
    ax<span style="color:#f92672">.</span>text( i,value<span style="color:#f92672">+</span>vmax<span style="color:#f92672">*</span><span style="color:#ae81ff">0.06</span>, f<span style="color:#e6db74">&#39;{value:,}&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;xx-large&#39;</span>, va<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, color<span style="color:#f92672">=</span>ori_lightblue)

<span style="color:#75715e">#When saving</span>
plt<span style="color:#f92672">.</span>savefig(<span style="color:#e6db74">&#34;savefig_with_facecolor.png&#34;</span>,facecolor<span style="color:#f92672">=</span>fig<span style="color:#f92672">.</span>get_facecolor())
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/196857/b860a097-5307-49aa-9911-82e06c923777.png" alt="tmp8.png"></p>
<p>About the color, I set it somehow.
In the original family, the corners of the background were rounded, but this could not be reproduced. (It didn&rsquo;t come out even after some research&hellip;)
Also, when saving with plt.savefig(), it is necessary to specify the background color with facecolor= <sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>.</p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p><a href="https://stackoverflow.com/questions/31357611/format-y-axis-as-percent">https://stackoverflow.com/questions/31357611/format-y-axis-as-percent</a> <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p><a href="https://matplotlib.org/3.1.1/gallery/pyplots/align_ylabels.html">https://matplotlib.org/3.1.1/gallery/pyplots/align_ylabels.html</a> <a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p><a href="https://stackoverflow.com/questions/4804005/matplotlib-figure-facecolor-background-color">https://stackoverflow.com/questions/4804005/matplotlib-figure-facecolor-background-color</a> <a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
