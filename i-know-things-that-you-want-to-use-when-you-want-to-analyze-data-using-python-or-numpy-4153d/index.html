<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>I know? Things that you want to use when you want to analyze data using Python or numpy | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>I know? Things that you want to use when you want to analyze data using Python or numpy</h1>
<p>
  <small class="text-secondary">
  
  
  Dec 3, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/pandas"> pandas</a></code></small>


<small><code><a href="https://memotut.com/tags/data-analysis"> data analysis</a></code></small>

</p>
<pre><code>Codes that I want to reach when I want it mainly in Pandas
</code></pre>
<p><strong>I tried to make it like Advent Calender, but I couldn&rsquo;t make it in time</strong></p>
<p>Will be added soon</p>
<p>Hereafter, add an alias as follows</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt
</code></pre></div><h1 id="do-not-omit-columns-and-rows-when-displaying">Do not omit columns and rows when displaying</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pd<span style="color:#f92672">.</span>set_option(<span style="color:#e6db74">&#39;display.max_columns&#39;</span>, <span style="color:#ae81ff">100</span>)
pd<span style="color:#f92672">.</span>set_option(<span style="color:#e6db74">&#39;display.max_rows&#39;</span>, <span style="color:#ae81ff">500</span>)
</code></pre></div><p>#describe() is also used for lines other than numbers</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">DF<span style="color:#f92672">.</span>desctibe(include<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;all&#39;</span>)
</code></pre></div><h1 id="data-in-chronological-order">Data in chronological order</h1>
<p>I referred to here
<a href="https://note.nkmk.me/python-pandas-time-series-resample-asfreq/">https://note.nkmk.me/python-pandas-time-series-resample-asfreq/</a></p>
<h2 id="create-date-data">Create date data</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;data&#39;</span> :range(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">2</span>)},
                 index<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>date_range(start<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;2018/1/1&#39;</span>, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;2018/1/30&#39;</span>, freq<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;2D&#39;</span>))
</code></pre></div><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/e4baa9be-66c6-97de-7ab2-d6f5ee36b982.png" width=100>
<h2 id="extract-data-at-regular-intervals">Extract data at regular intervals</h2>
<p>For example, if you want to extract data every 3 days, use asfreq(). Dates that have no data originally are None.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df<span style="color:#f92672">.</span>asfreq(freq<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;3D&#39;</span>)
</code></pre></div><table>
<thead>
<tr>
<th align="center">before</th>
<th align="center">after</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/e4baa9be-66c6-97de-7ab2-d6f5ee36b982.png" width=100></td>
<td align="center">&lt; img src=&quot;https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/d319568d-3c42-ecbf-cc26-b42e176ae3d6.png&rdquo; width=100&gt;</td>
</tr>
</tbody>
</table>
<p>If you want to extract every Wednesday and fill the None part with the previous data, use asfreq(freq='W-WED&rsquo;, method='pad&rsquo;).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df<span style="color:#f92672">.</span>asfreq(freq<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;W-WED&#39;</span>, method<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pad&#39;</span>)
</code></pre></div><table>
<thead>
<tr>
<th align="center">before</th>
<th align="center">after</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/e4baa9be-66c6-97de-7ab2-d6f5ee36b982.png" width=100></td>
<td align="center">&lt; img src=&quot;https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/10b60ace-8931-e130-896a-d8525addaedd.png&rdquo; width=100&gt;</td>
</tr>
</tbody>
</table>
<p>Conversely, use asfreq(method='bfill&rsquo;) to fill in the last value.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df<span style="color:#f92672">.</span>asfreq(freq<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;W-WED&#39;</span>, method<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bfill&#39;</span>)
</code></pre></div><table>
<thead>
<tr>
<th align="center">before</th>
<th align="center">after</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/e4baa9be-66c6-97de-7ab2-d6f5ee36b982.png" width=100></td>
<td align="center">&lt; img src=&quot;https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/1676f55e-22ad-77bf-02ed-2188b5173e75.png&rdquo; width=100&gt;</td>
</tr>
</tbody>
</table>
<h2 id="with-date-data-add-up-every-week">With date data, add up every week</h2>
<p>use resample()</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df<span style="color:#f92672">.</span>resample(<span style="color:#e6db74">&#39;W&#39;</span>)<span style="color:#f92672">.</span>sum()
</code></pre></div><table>
<thead>
<tr>
<th align="center">before</th>
<th align="center">after</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/e4baa9be-66c6-97de-7ab2-d6f5ee36b982.png" width=100></td>
<td align="center">&lt; img src=&quot;https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/c080d74a-7726-9cab-7fc3-fe0fa6f82129.png&rdquo; width=150&gt;</td>
</tr>
</tbody>
</table>
<h2 id="sum-data-by-date-with-same-date">Sum data by date with same date</h2>
<p>The data looks like this</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df2 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;data&#39;</span>: range(<span style="color:#ae81ff">17</span>)},
                    index<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;2018-08-01&#39;</span>, <span style="color:#e6db74">&#39;2018-08-05&#39;</span>, freq<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;6H&#39;</span>))
</code></pre></div><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/6d0542fd-7e49-0bbb-fd28-fa3dd1de52c7.png" width=200>
<p>Use resample(&lsquo;D&rsquo;).sum() to get the daily total.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df2<span style="color:#f92672">.</span>resample(<span style="color:#e6db74">&#39;D&#39;</span>)<span style="color:#f92672">.</span>sum()
</code></pre></div><table>
<thead>
<tr>
<th align="center">before</th>
<th align="center">after</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/6d0542fd-7e49-0bbb-fd28-fa3dd1de52c7.png" width=200></td>
<td align="center">&lt; img src=&quot;https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/efa76db9-46f4-7c8c-111c-56ecc5d2108d.png&rdquo; width=150&gt;</td>
</tr>
</tbody>
</table>
<p>For average, use resample(&lsquo;D&rsquo;).mean().</p>
<table>
<thead>
<tr>
<th align="center">before</th>
<th align="center">after</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/6d0542fd-7e49-0bbb-fd28-fa3dd1de52c7.png" width=200></td>
<td align="center">&lt; img src=&quot;https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/33b8f272-eca5-47dc-fd00-bfabb715ab7b.png&rdquo; width=150&gt;</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="visualization-day">Visualization (day)</h2>
<p>Prepare virtual data from January 1, 2018 to December 31, 2018</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>seed(<span style="color:#ae81ff">0</span>)
df3 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame((<span style="color:#e6db74">&#39;data&#39;</span>:
                    np<span style="color:#f92672">.</span>maximum(<span style="color:#ae81ff">0</span>, np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">365</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">182</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">365</span>), <span style="color:#ae81ff">182</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>floor(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span> normal(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">365</span>)))},
                    index<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;2018-01-01&#39;</span>, <span style="color:#e6db74">&#39;2018-12-31&#39;</span>))
</code></pre></div><p>If you visualize this,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">6</span>), facecolor<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;white&#39;</span>)
plt<span style="color:#f92672">.</span>plot(df3<span style="color:#f92672">.</span>index, df3[<span style="color:#e6db74">&#39;data&#39;</span>], marker<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;o&#39;</span>)
plt<span style="color:#f92672">.</span>xticks(rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">90</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><table>
<thead>
<tr>
<th align="center">graph</th>
<th align="center">data</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/d59bbe52-ee4d-24f8-a396-de1a7862f23e.png" alt="image.png"></td>
<td align="center"><img src ="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/dff54b8c-d0c3-8ae1-100c-5d9a76ee45fe.png" width=100></td>
</tr>
</tbody>
</table>
<h2 id="visualization-every-week">Visualization (every week)</h2>
<p>Visualize every Monday</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>seed(<span style="color:#ae81ff">0</span>)
df3 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame((<span style="color:#e6db74">&#39;data&#39;</span>:
                    np<span style="color:#f92672">.</span>maximum(<span style="color:#ae81ff">0</span>, np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">365</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">182</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">365</span>), <span style="color:#ae81ff">182</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>floor(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span> normal(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">365</span>)))},
                    index<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;2018-01-01&#39;</span>, <span style="color:#e6db74">&#39;2018-12-31&#39;</span>))

_df <span style="color:#f92672">=</span> df3<span style="color:#f92672">.</span>asfreq(<span style="color:#e6db74">&#39;W-MON&#39;</span>)
plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">6</span>), facecolor<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;white&#39;</span>)
plt<span style="color:#f92672">.</span>plot(_df<span style="color:#f92672">.</span>index, _df[<span style="color:#e6db74">&#39;data&#39;</span>], marker<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;o&#39;</span>)
plt<span style="color:#f92672">.</span>xticks(rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">90</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><table>
<thead>
<tr>
<th align="center">graph</th>
<th align="center">data</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/33f99f9b-f20c-f373-ecab-11539fbbdaab.png" alt="image.png"></td>
<td align="center"><img src ="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/950ec9a7-9ad8-21ff-656b-d506b5f9d089.png" width=100></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="visualization-monthly">Visualization (monthly)</h2>
<p>Visualize at the end of the month</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>seed(<span style="color:#ae81ff">0</span>)
df3 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame((<span style="color:#e6db74">&#39;data&#39;</span>:np<span style="color:#f92672">.</span>maximum(<span style="color:#ae81ff">0</span>, np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">365</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">182</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">365</span>), <span style="color:#ae81ff">182</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>floor(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>normal(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">365</span>)))},
                    index<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;2018-01-01&#39;</span>, <span style="color:#e6db74">&#39;2018-12-31&#39;</span>))

_df <span style="color:#f92672">=</span> df3<span style="color:#f92672">.</span>asfreq(<span style="color:#e6db74">&#39;1M&#39;</span>)
plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">6</span>), facecolor<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;white&#39;</span>)
plt<span style="color:#f92672">.</span>plot(_df<span style="color:#f92672">.</span>index, _df[<span style="color:#e6db74">&#39;data&#39;</span>])
plt<span style="color:#f92672">.</span>xticks(rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">90</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><table>
<thead>
<tr>
<th align="center">graph</th>
<th align="center">data</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/ad78d351-2798-6801-29c0-1ea2f18e696d.png" alt="image.png"></td>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/5af8863c-e418-878c-e4a7-3b432117dca1.png" width=100></td>
</tr>
</tbody>
</table>
<p>asfreq(&lsquo;1M&rsquo;)は月の終わり日になる</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df3<span style="color:#f92672">.</span>asfreq(<span style="color:#e6db74">&#39;1M&#39;</span>)
</code></pre></div><p>月始め日は</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>seed(<span style="color:#ae81ff">0</span>)
df3 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;data&#39;</span>: 
                    np<span style="color:#f92672">.</span>maximum(<span style="color:#ae81ff">0</span>, np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">365</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">182</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">365</span>), <span style="color:#ae81ff">182</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>floor(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>normal(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">365</span>)))},
                    index<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;2018-01-01&#39;</span>, <span style="color:#e6db74">&#39;2018-12-31&#39;</span>))

_df <span style="color:#f92672">=</span> df3<span style="color:#f92672">.</span>asfreq(<span style="color:#e6db74">&#39;1MS&#39;</span>)
plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">6</span>), facecolor<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;white&#39;</span>)
plt<span style="color:#f92672">.</span>plot(_df<span style="color:#f92672">.</span>index, _df[<span style="color:#e6db74">&#39;data&#39;</span>])
plt<span style="color:#f92672">.</span>xticks(rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">90</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><table>
<thead>
<tr>
<th align="center">graph</th>
<th align="center">data</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/9b4a5756-2405-4df7-e33a-0dd92d4def1b.png" alt="image.png"></td>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/5451ac89-9d73-55b6-54ba-fe6d5b46f2fe.png" width=100></td>
</tr>
</tbody>
</table>
<p>asfreq(&lsquo;1MS&rsquo;)は月始め日になる</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df3<span style="color:#f92672">.</span>asfreq(<span style="color:#e6db74">&#39;1MS&#39;</span>)
</code></pre></div><h2 id="可視化１クオーター">可視化（１クオーター）</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>seed(<span style="color:#ae81ff">0</span>)
df3 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;data&#39;</span>: 
                    np<span style="color:#f92672">.</span>maximum(<span style="color:#ae81ff">0</span>, np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">365</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">182</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">365</span>), <span style="color:#ae81ff">182</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>floor(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>normal(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">365</span>)))},
                    index<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;2018-01-01&#39;</span>, <span style="color:#e6db74">&#39;2018-12-31&#39;</span>))

_df <span style="color:#f92672">=</span> df3<span style="color:#f92672">.</span>asfreq(<span style="color:#e6db74">&#39;1QS&#39;</span>)
plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">6</span>), facecolor<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;white&#39;</span>)
plt<span style="color:#f92672">.</span>plot(_df<span style="color:#f92672">.</span>index, _df[<span style="color:#e6db74">&#39;data&#39;</span>], marker<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;o&#39;</span>)
plt<span style="color:#f92672">.</span>xticks(rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">90</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><table>
<thead>
<tr>
<th align="center">graph</th>
<th align="center">data</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/9714e1d8-ae5e-bc7c-ab9f-26eefbbbf91b.png" alt="image.png"></td>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/cf810156-c7ba-63a7-1dbf-43dc2076a3c7.png" alt="image.png"></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="可視化1週間の合計">可視化（1週間の合計）</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>seed(<span style="color:#ae81ff">0</span>)
df3 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;data&#39;</span>: 
                    np<span style="color:#f92672">.</span>maximum(<span style="color:#ae81ff">0</span>, np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">365</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">182</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">365</span>), <span style="color:#ae81ff">182</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>floor(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>normal(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">365</span>)))},
                    index<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;2018-01-01&#39;</span>, <span style="color:#e6db74">&#39;2018-12-31&#39;</span>))

_df <span style="color:#f92672">=</span> df3<span style="color:#f92672">.</span>resample(<span style="color:#e6db74">&#39;W&#39;</span>)<span style="color:#f92672">.</span>sum()
plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">6</span>), facecolor<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;white&#39;</span>)
plt<span style="color:#f92672">.</span>plot(_df<span style="color:#f92672">.</span>index, _df[<span style="color:#e6db74">&#39;data&#39;</span>], marker<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;o&#39;</span>)
plt<span style="color:#f92672">.</span>xticks(rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">90</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><table>
<thead>
<tr>
<th align="center">graph</th>
<th align="center">data</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/0f3c50f8-7fa5-8fb4-a0e4-ccfd5fcf53f4.png" alt="image.png"></td>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/75d382b6-e909-83d3-7e27-f675b355b6b6.png" width=100></td>
</tr>
</tbody>
</table>
<h2 id="可視化１ヶ月の合計">可視化（１ヶ月の合計）</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>seed(<span style="color:#ae81ff">0</span>)
df3 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;data&#39;</span>: 
                    np<span style="color:#f92672">.</span>maximum(<span style="color:#ae81ff">0</span>, np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">365</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">182</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">365</span>), <span style="color:#ae81ff">182</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>floor(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>normal(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">365</span>)))},
                    index<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;2018-01-01&#39;</span>, <span style="color:#e6db74">&#39;2018-12-31&#39;</span>))

_df <span style="color:#f92672">=</span> df3<span style="color:#f92672">.</span>resample(<span style="color:#e6db74">&#39;MS&#39;</span>)<span style="color:#f92672">.</span>sum()
plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">6</span>), facecolor<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;white&#39;</span>)
plt<span style="color:#f92672">.</span>plot(_df<span style="color:#f92672">.</span>index, _df[<span style="color:#e6db74">&#39;data&#39;</span>], marker<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;o&#39;</span>)
plt<span style="color:#f92672">.</span>xticks(rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">90</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><table>
<thead>
<tr>
<th align="center">graph</th>
<th align="center">data</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/bb856482-05ab-cc10-91d7-bdaab4323a73.png" alt="image.png"></td>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/cb366bb5-fd74-fdc7-10c1-0c28ca94b3cf.png" width=100></td>
</tr>
</tbody>
</table>
<h1 id="時系列補間">時系列補間</h1>
<p>よく職業柄使うのが、時系列補間</p>
<p>これはasfreq()を上手く使うことでできる。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;data&#39;</span> : range(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">2</span>)},
                 index<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>date_range(start<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;2018/1/1&#39;</span>, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;2018/1/30&#39;</span>, freq<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;2D&#39;</span>))

df2 <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>asfreq(<span style="color:#e6db74">&#39;1D&#39;</span>)
</code></pre></div><table>
<thead>
<tr>
<th align="center">before</th>
<th align="center">after</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/ee95cefb-ae34-11e0-6d49-ea0370a0980a.png" width=110></td>
<td align="center"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/192361/2d2f88a4-3717-78dd-0406-9db11e0aca3f.png" width=100></td>
</tr>
</tbody>
</table>
<h1 id="日付曜日">日付→曜日</h1>
<p>datatimeのSeriesに対して、weekday か dayofweek を使う</p>
<p>0が月曜、6が日曜らしい</p>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DatetimeIndex.weekday.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DatetimeIndex.weekday.html</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>seed(<span style="color:#ae81ff">0</span>)
df3 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;data&#39;</span>: 
                    np<span style="color:#f92672">.</span>maximum(<span style="color:#ae81ff">0</span>, np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">365</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">182</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>minimum(np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">365</span>), <span style="color:#ae81ff">182</span>) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>floor(np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>normal(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">365</span>)))},
                    index<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;2018-01-01&#39;</span>, <span style="color:#e6db74">&#39;2018-12-31&#39;</span>))
df3<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>weekday
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Int64Index<span style="color:#f92672">([</span>0, 1, 2, 3, 4, 5, 6, 0, 1, 2,
            ...
            5, 6, 0, 1, 2, 3, 4, 5, 6, 0<span style="color:#f92672">]</span>,
           dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;int64&#39;</span>, length<span style="color:#f92672">=</span>365<span style="color:#f92672">)</span>
</code></pre></div>
    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
