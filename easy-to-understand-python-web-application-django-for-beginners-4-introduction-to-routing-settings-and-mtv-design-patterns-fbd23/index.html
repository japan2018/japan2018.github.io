<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] Easy to understand Python web application (Django) for beginners (4) [Introduction to routing settings and MTV design patterns] | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] Easy to understand Python web application (Django) for beginners (4) [Introduction to routing settings and MTV design patterns]</h1>
<p>
  <small class="text-secondary">
  
  
  Nov 11, 2016
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/html">HTML</a></code></small>


<small><code><a href="https://memotut.com/tags/django">Django</a></code></small>


<small><code><a href="https://memotut.com/tags/sqlite3">SQLite3</a></code></small>


<small><code><a href="https://memotut.com/tags/web">Web</a></code></small>

</p>
<pre><code>#Composition of commentary articles
</code></pre>
<table>
<thead>
<tr>
<th align="center">No.</th>
<th align="left">Title</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1</td>
<td align="left"><a href="http://qiita.com/carat_yoshizaki/items/f3c79e38b802c7fc8863">Python Web application (Django) is easy to understand even for beginners (1) [Environment]</a></td>
<td></td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><a href="http://qiita.com/carat_yoshizaki/items/926f702198bdfe8c6bd2">Python web application (Django) is easy to understand for beginners (2) [Project creation]</a></td>
<td></td>
</tr>
<tr>
<td align="center">3</td>
<td align="left"><a href="http://qiita.com/carat_yoshizaki/items/c9a5299b77b99ff07e4a">Python web application (Django) is easy to understand even for beginners (3) [Application creation/DB setting]</a></td>
<td></td>
</tr>
<tr>
<td align="center">4</td>
<td align="left"><a href="http://qiita.com/carat_yoshizaki/items/fbd235008d7484089270">Python Web application (Django) is easy to understand for beginners (4) [Introduction to routing settings and MTV design patterns]</a></td>
<td align="center">←</td>
</tr>
<tr>
<td align="center">5</td>
<td align="left"><a href="http://qiita.com/carat_yoshizaki/items/8c57144dfd37e005fb17#_reference-8f82e1176420484c2fdd">Python Web application (Django) is easy to understand for beginners (5) [Introduction to DB operation with Django shell]</a></td>
<td></td>
</tr>
<tr>
<td align="center">6</td>
<td align="left"><a href="http://qiita.com/carat_yoshizaki/items/f0b4f7d7fa3899f2d424">Explanation of Python Web application (Django) for beginners (6) [MTV design pattern completion]</a></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="development-environment">Development environment</h1>
<ul>
<li>OS: Mac OS Sierra (10.12)</li>
<li>Python 3.5.2</li>
</ul>
<p>Let&rsquo;s proceed with the assumption of a Mac environment.</p>
<p>The version confirmation of Python is as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$python3 --version
Python 3.5.2
</code></pre></div><p>#Create web page</p>
<h2 id="routing-settings">Routing settings</h2>
<p>Configure the administration screen (admin) and routing (URL) for blog in <code>mysite/urls.py</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py:mysite/urls.py" data-lang="py:mysite/urls.py"><span style="color:#f92672">from</span> django.conf.urls <span style="color:#f92672">import</span> include, url
<span style="color:#f92672">from</span> django.contrib <span style="color:#f92672">import</span> admin

urlpatterns <span style="color:#f92672">=</span> [
    url(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;^admin/&#39;</span>, include(admin<span style="color:#f92672">.</span>site<span style="color:#f92672">.</span>urls)),
    url(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;&#39;</span>, include(<span style="color:#e6db74">&#39;blog.urls&#39;</span>)),
]
</code></pre></div><p>As for <code>admin</code>, Django admin sets it automatically, but since we have not created anything yet for blog, we will set it.</p>
<p>Create an empty file called <code>blog/urls.py</code> and edit it as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py:blog/urls.py" data-lang="py:blog/urls.py"><span style="color:#f92672">from</span> django.conf.urls <span style="color:#f92672">import</span> url
<span style="color:#f92672">from</span> .import views

urlpatterns <span style="color:#f92672">=</span> [
    url(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;^$&#39;</span>, views<span style="color:#f92672">.</span>post_list),
]
</code></pre></div><p>``urlpatterns``` is excerpted from <a href="https://djangogirlsjapan.gitbooks.io/workshop_tutorialjp/content/django_urls/">Django Girls Tutorial</a>.</p>
<blockquote>
<p>This means you have assigned a URL with the pattern ^$ to the view post_list.
What does ^$ mean?
That&rsquo;s the magic of regular expressions :) Let&rsquo;s break it down:</p>
</blockquote>
<ul>
<li>^ In regular expression means &ldquo;start of string&rdquo;. Start pattern matching from here.</li>
<li>$ Means &ldquo;end of string&rdquo;, where pattern matching ends.</li>
</ul>
<blockquote>
</blockquote>
<p>The pattern that puts these two symbols together matches, yes, an empty string. However, Django&rsquo;s URL name resolution matches the pattern except for&rsquo;http://127.0.0.1:8000/&rsquo;, so this pattern means&rsquo;http://127.0.0.1:8000/&rsquo; itself. I will. In other words, it is specified to return <code>views.post_list</code> to the users who access the URL&rsquo;http://127.0.0.1:8000/&rsquo;.</p>
<p>In short, the current state of ``urlpattern<code>is to declare</code>post_list<code>for URLs (root directories) that have no strings. Of course, we can't access it because we haven't created the view of</code>post_list``` yet.</p>
<h1 id="django-design-pattern">Django design pattern</h1>
<p>Then, we will create a display screen corresponding to the URL you set, but first you need to know how the screen and database displayed in Django are managed.</p>
<p>Before we talk about Django, let&rsquo;s take a look at MVC, a typical design pattern.
If you understand MVC, it will be highly versatile in the future, and I think that you can easily understand the MTV design pattern adopted by Django.</p>
<h2 id="mvc-design-pattern-adopted-by-ruby-on-rails-etc">MVC design pattern adopted by Ruby on Rails etc.</h2>
<p>Web applications are often managed as MVC design patterns.
MVC is an abbreviation of Model View Controller, and each role is as follows.
Isn&rsquo;t Ruby on Rails a classic example of this MVC design pattern?</p>
<p><img src="https://blog.chattyhive.com/wp-content/uploads/2014/01/mvc_detailed-full.png" alt=""></p>
<p>Based on the information accessed from the user, the Controller acts as an intermediary, pulls out the necessary information from the Model and View, and returns it to the user as a whole.
Roughly speaking, View is HTML, Model is DB, and Controller is its manager.
Once you get used to such a standard MVC design pattern, it is very easy to understand and handle.</p>
<h2 id="django-is-an-mtv-design-pattern">Django is an MTV design pattern</h2>
<p>It seems that Django manages with a design pattern called MTV design pattern instead of MVC.</p>
<ul>
<li>Is this a kind of religious dispute?</li>
</ul>
<p>MTV is an abbreviation for Model Template View.</p>
<p><img src="http://blog.easylearning.guru/wordpress/wp-content/uploads/2015/08/MVC-Vs-MTV-300x178.png" alt=""></p>
<p>I think there are various reasons, but my personal feeling is that the MVC design pattern is fine.
Basically, there is a one-to-one correspondence between MVC and MTV, so be sure to convert MVC to MTV in your head.</p>
<h2 id="mtv-reference-article">MTV reference article</h2>
<ul>
<li><a href="http://mimumimu.net/blog/2011/11/21/python-django-%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F%E3%80%82-mtv-model-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/">I tried Python + Django. About MTV Model</a></li>
<li><a href="https://www.google.co.jp/url?sa=i&amp;rct=j&amp;q=&amp;esrc=s&amp;source=images&amp;cd=&amp;ved=0ahUKEwiQ--nhgaDQAhVLfLwKHW23BWEQjhwIBQ&amp;url=http%3A%2F%2Fblog.easylearning.guru%2Fimplementing-mtv-model-in-python-django%2F&amp;psig=AFQjCNFX3N_Iwfe29CaOZ8djG0oa6V4_2A&amp;ust=1478929512330040">Implementing MTV model in Python Django</a></li>
</ul>
<h1 id="view-settings">View settings</h1>
<p>It is View that controls which template is read from the set URL and what information is passed to the template.</p>
<ul>
<li>This is called Controller in MVC design patterns such as Ruby on Rails.</li>
</ul>
<p>Create <code>blog/views.py</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py:blog/views.py" data-lang="py:blog/views.py"><span style="color:#f92672">from</span> django.shortcuts <span style="color:#f92672">import</span> render

<span style="color:#75715e"># Create your views here.</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">post_list</span>(request):
    <span style="color:#66d9ef">return</span> render(request,<span style="color:#e6db74">&#39;blog/post_list.html&#39;</span>, {})
</code></pre></div><p>Since the URL above was set to access the method called <code>post_list</code>, define <code>def post_list</code> and take <code>request</code> as an argument in it. I am.
In the <code>render</code> method, a template file called <code>blog/post_list.html</code> is used to output the contents of the <code>request</code> received as an argument.
Management is easy if the method name and the template file name match.</p>
<ul>
<li>Ruby on Rails basically doesn&rsquo;t bother writing the <code>render</code>, assuming that the method name and the template file name match.</li>
</ul>
<p>Creating a # Template</p>
<p>Now let&rsquo;s create a template file.
First, create a directory for Template.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir blog/templates
$ mkdir blog/templates/blog
</code></pre></div><p>In this, create <code>post_list.html</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html:blog/templates/blog/post_list.html" data-lang="html:blog/templates/blog/post_list.html">&lt;<span style="color:#f92672">html</span>&gt;
    &lt;<span style="color:#f92672">p</span>&gt;Hi there!&lt;/<span style="color:#f92672">p</span>&gt;
    &lt;<span style="color:#f92672">p</span>&gt;It works!&lt;/<span style="color:#f92672">p</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p>After saving this, if you access http://127.0.0.1:8000/, the template will be loaded and run as follows.</p>
<img width="217" alt=" screenshot 2016-11-11 3.35.33.png" src="https://qiita-image-store.s3.amazonaws.com/0/130181/0c6a7ba6-5f56-dc7b-d455-d5d1920605d9.png">
<p>There are many other references on how to write HTML, so I will leave the explanation there.</p>
<p>Now you can display the web page for the original template with the URL.</p>
<h1 id="next-commentary-articlepython-web-application-django-is-easy-to-understand-even-for-beginners-5-introduction-to-db-operation-with-django-shellhttpqiitacomcarat_yoshizakiitems8c57144dfd37e005fb17_reference-8f82e1176420484c2fdd">Next commentary article<a href="http://qiita.com/carat_yoshizaki/items/8c57144dfd37e005fb17#_reference-8f82e1176420484c2fdd">Python web application (Django) is easy to understand even for beginners (5) [Introduction to DB operation with Django shell]</a></h1>
<h1 id="references">References</h1>
<ul>
<li><a href="https://www.djangoproject.com/">Django</a></li>
<li><a href="https://djangogirlsjapan.gitbooks.io/workshop_tutorialjp/content/django_urls/">Django Girls Tutorial &ldquo;What is Django urls?&quot;</a></li>
<li><a href="https://djangogirlsjapan.gitbooks.io/workshop_tutorialjp/content/django_views/">Django Girls Tutorial &ldquo;What is Django Views?&quot;</a></li>
</ul>
<h1 id="bonus">bonus</h1>
<p>We are waiting for you to follow!</p>
<ul>
<li>Qiita: <a href="http://qiita.com/carat_yoshizaki">Carat Yoshizaki</a></li>
<li>twitter: <a href="https://twitter.com/carat_yoshizaki">@carat_yoshizaki</a></li>
<li>Hatena Blog: <a href="http://carat-tech.hatenablog.com/">Carat COO Blog</a></li>
<li>Home page: <a href="http://caratinc.jp">Carat</a></li>
</ul>
<p>Service introduction
If you are interested in &ldquo;<a href="https://kikagaku.net">Kikagaku</a>&rdquo;, a one-to-one tutor service for machine learning, you can learn &ldquo;math → programming → web application&rdquo; at once. Please feel free to contact us.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
