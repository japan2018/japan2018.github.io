<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Try GUI programming with Hy | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Try GUI programming with Hy</h1>
<p>
  <small class="text-secondary">
  
  
  Dec 16, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/lisp"> lisp</a></code></small>


<small><code><a href="https://memotut.com/tags/hy"> hy</a></code></small>

</p>
<pre><code>This article is from the 16th day of [Lisp Advent Calendar 2019](https://qiita.com/advent-calendar/2019/lisp).
</code></pre>
<h1 id="summary-of-this-article">Summary of this article</h1>
<p>As an introduction to GUI programming in Hy, generative art using <a href="https://docs.python.org/ja/3/library/tkinter.html">tkinter</a>, a GUI library included in the Python standard library. Implement</p>
<p>It is a specification that you can change the parameter by key input in the figure drawing using the trigonometric function like this.
<img width="402" alt="2019-12-15_23h18_53.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/543140/e8b79276-8ca5-6397-4920-7fa995f1aae1.png"></p>
<h1 id="target-audience">Target audience</h1>
<ul>
<li>People who want to do GUI programming with Hy</li>
</ul>
<h1 id="environment">Environment</h1>
<p>The author&rsquo;s environment is as follows.</p>
<ul>
<li>Windows 10</li>
<li>Python 3.7.2 (64bit)</li>
</ul>
<h2 id="building-a-virtual-environment-and-installing-modules">Building a virtual environment and installing modules</h2>
<p>The GUI library tkinter is the Python standard library, so Hy is the only third-party module to install in a virtual environment.
Hy installed the latest version as of 12/10 (<a href="https://github.com/hylang/hy/tree/39c150d8299d9ff8f47bb78415e22a9fe976d7e5">https://github.com/hylang/hy/tree/39c150d8299d9ff8f47bb78415e22a9fe976d7e5</a> ).</p>
<pre><code>cd %USERPROFILE$\.virtualenvs
py -3 -m venv venv_hy_geometric_pattern
cd venv_hy_geometric_pattern
Scripts\activate.bat
pip install --upgrade pip
pip install git+https://github.com/hylang/hy.git
deactivate
</code></pre><p>#Specifications
Create a Canvas in the window created as a tk.Tk() instance and draw a shape there.
Redraw the Canvas at approximately 60 fps for animation.
The coordinates of a point at a certain time are calculated by the following formula. Create an array of points by changing $\theta$ by $\mathrm{d} \theta$.</p>
<pre><code class="language-math" data-lang="math">\left\{ \begin{array}{}
x(\theta ,t) = x_{\mathrm{center}} + r \cos \theta + a \cos (\phi \left( t \right) + c \theta) \\

y(\theta ,t) = y_{\mathrm{center}} + r \sin \theta + a \sin (\phi \left( t \right) + c \theta)
\end{array} \right.
</code></pre><pre><code class="language-math" data-lang="math">0 \leq \theta &lt;2 \pi \\
0 \leq \phi &lt;2 \pi \\
0 \leq c &lt;2 \pi \\
0 &lt;r + a &lt;\min(x_{\mathrm{center}}, y_{\mathrm{center}}) \\
</code></pre><p>$\left( x_{\mathrm{center}}, y_{\mathrm{center}} \right)$ is the center coordinate of Canvas.
$\phi$ causes $0 \leq \phi &lt;2 \pi$ to loop over time.</p>
<p>Allows keystrokes to change the step size $\mathrm{d} \theta$ of $r, a, c$ and $\theta$ above.
The key assignments are shown in the table below.
Also, set the q key to close and close the window.</p>
<table>
<thead>
<tr>
<th align="left">Variable</th>
<th align="left">Decrease key</th>
<th align="left">Increase key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">$r$</td>
<td align="left">z</td>
<td align="left">a</td>
</tr>
<tr>
<td align="left">$a$</td>
<td align="left">x</td>
<td align="left">s</td>
</tr>
<tr>
<td align="left">$c$</td>
<td align="left">c</td>
<td align="left">d</td>
</tr>
<tr>
<td align="left">$\mathrm{d} \theta$</td>
<td align="left">v</td>
<td align="left">f</td>
</tr>
</tbody>
</table>
<h1 id="package-structure">Package structure</h1>
<p>Assume that the <code>hy</code> directory has been added to PYTHONPATH.
The contents of __init__.hy is empty, and we will implement the function in gui.hy.
Call geometric_pattern.gui from geometric_pattern.bat and execute it.</p>
<pre><code>hy ─┬─ geometric_pattern ─┬─ __init__.hy
    │ │ │
    │ └─ gui.hy
    │
    └─ geometric_pattern.bat
</code></pre><h1 id="implementation">Implementation</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-hy:gui.hy" data-lang="hy:gui.hy">(<span style="color:#66d9ef">import </span>[math [sin cos radians]])
(<span style="color:#66d9ef">import </span>sys)
(<span style="color:#66d9ef">import </span>[tkinter <span style="color:#e6db74">:as</span> tk])

<span style="color:#75715e">; Canvas size</span>
(<span style="color:#66d9ef">setv </span>*width* <span style="color:#ae81ff">800</span>)
(<span style="color:#66d9ef">setv </span>*height* <span style="color:#ae81ff">600</span>)


(<span style="color:#66d9ef">defclass </span>GeometricPattern []
  (<span style="color:#66d9ef">setv </span>*d-theta-max* <span style="color:#ae81ff">20</span>)
  (<span style="color:#66d9ef">setv </span>*deg* <span style="color:#ae81ff">360</span>)
  (<span style="color:#66d9ef">setv </span>*d-phi* <span style="color:#ae81ff">1</span>)

  (<span style="color:#66d9ef">defn </span>--init-- [self <span style="color:#f92672">&amp;</span>optional [center-x <span style="color:#ae81ff">0</span>] [center-y <span style="color:#ae81ff">0</span>]]
    <span style="color:#e6db74">&#34;Initialize parameters and get list of points&#34;</span>
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self center-x) center-x)
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self center-y) center-y)

    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self r)
          (int (<span style="color:#66d9ef">-&gt; </span><span style="color:#ae81ff">0.8</span>
                   (<span style="color:#a6e22e">*</span> (min (<span style="color:#a6e22e">.</span> self center-x) (<span style="color:#a6e22e">.</span> self center-y)))
                   (<span style="color:#a6e22e">/</span> <span style="color:#ae81ff">3</span>))))
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self a)
          (int (<span style="color:#66d9ef">-&gt; </span><span style="color:#ae81ff">0.8</span>
                   (<span style="color:#a6e22e">*</span> <span style="color:#ae81ff">2</span> (min (<span style="color:#a6e22e">.</span> self center-x) (<span style="color:#a6e22e">.</span> self center-y)))
                   (<span style="color:#a6e22e">/</span> <span style="color:#ae81ff">3</span>))))
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self phi) <span style="color:#ae81ff">0</span>)
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self c) <span style="color:#ae81ff">104</span>)

    <span style="color:#75715e">;; Step size when changing theta</span>
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self d-theta) <span style="color:#ae81ff">1</span>)

    ((<span style="color:#a6e22e">.</span> self fetch-points)))
  
  (<span style="color:#66d9ef">defn </span>dec-r [self event]
    <span style="color:#e6db74">&#34;decrease r&#34;</span>
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self r) (dec (<span style="color:#a6e22e">.</span> self r)))
    (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">&lt;</span> (<span style="color:#a6e22e">.</span> self r) <span style="color:#ae81ff">1</span>)
        (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self r) <span style="color:#ae81ff">1</span>)))

  (<span style="color:#66d9ef">defn </span>inc-r [self event]
    <span style="color:#e6db74">&#34;Increase r. The upper limit is specified so that it does not extend beyond the short side of the Canvas.&#34;</span>
    (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">&lt;</span> (<span style="color:#a6e22e">+</span> (<span style="color:#a6e22e">.</span> self r) (<span style="color:#a6e22e">.</span> self a))
           (min (<span style="color:#a6e22e">.</span> self center-x) (<span style="color:#a6e22e">.</span> self center-y)))
        (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self r) (inc (<span style="color:#a6e22e">.</span> self r)))))
  
  (<span style="color:#66d9ef">defn </span>dec-a [self event]
    <span style="color:#e6db74">&#34;decrease a&#34;</span>
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self a) (dec (<span style="color:#a6e22e">.</span> self a)))
    (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">&lt;</span> (<span style="color:#a6e22e">.</span> self a) <span style="color:#ae81ff">1</span>)
        (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self a) <span style="color:#ae81ff">1</span>)))
  
  (<span style="color:#66d9ef">defn </span>inc-a [self event]
    <span style="color:#e6db74">&#34;Increase a. The upper limit is specified so that it does not run off the short side of the Canvas.&#34;</span>
    (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">&lt;</span> (<span style="color:#a6e22e">+</span> (<span style="color:#a6e22e">.</span> self r) (<span style="color:#a6e22e">.</span> self a))
           (min (<span style="color:#a6e22e">.</span> self center-x) (<span style="color:#a6e22e">.</span> self center-y)))
        (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self a) (inc (<span style="color:#a6e22e">.</span> self a)))))
  
  (<span style="color:#66d9ef">defn </span>dec-d-theta [self event]
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self d-theta) (dec (<span style="color:#a6e22e">.</span> self d-theta)))
    (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">&lt;</span> (<span style="color:#a6e22e">.</span> self d-theta) <span style="color:#ae81ff">1</span>)
        (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self d-theta) <span style="color:#ae81ff">1</span>)))
  
  (<span style="color:#66d9ef">defn </span>inc-d-theta [self event]
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self d-theta) (inc (<span style="color:#a6e22e">.</span> self d-theta)))
    (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">&gt;</span> (<span style="color:#a6e22e">.</span> self d-theta) (<span style="color:#a6e22e">.</span> GeometricPattern *d-theta-max*))
        (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self d-theta) (<span style="color:#a6e22e">.</span> GeometricPattern *d-theta-max*))))
  
  (<span style="color:#66d9ef">defn </span>dec-c [self event]
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self c) (dec (<span style="color:#a6e22e">.</span> self c)))
    (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">&lt;</span> (<span style="color:#a6e22e">.</span> self c) <span style="color:#ae81ff">0</span>)
        (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self c) (<span style="color:#a6e22e">%</span> (<span style="color:#a6e22e">.</span> self c) (<span style="color:#a6e22e">.</span> GeometricPattern *deg*))))))
  
  (<span style="color:#66d9ef">defn </span>inc-c [self event]
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self c) (inc (<span style="color:#a6e22e">.</span> self c)))
    (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">&gt;=</span> (<span style="color:#a6e22e">.</span> self c) (<span style="color:#a6e22e">.</span> GeometricPattern *deg*))
        (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self c) (<span style="color:#a6e22e">%</span> (<span style="color:#a6e22e">.</span> self c) (<span style="color:#a6e22e">.</span> GeometricPattern *deg*))))))

  (<span style="color:#66d9ef">defn </span>inc-phi [self]
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self phi) (inc (<span style="color:#a6e22e">.</span> self phi)))
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self phi) (<span style="color:#a6e22e">%</span> (<span style="color:#a6e22e">.</span> self phi) (<span style="color:#a6e22e">.</span> GeometricPattern *deg*))))
  
  (<span style="color:#66d9ef">defn </span>fetch-points [self]
    <span style="color:#e6db74">&#34;Get the coordinates of a point&#34;</span>
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self points)
          (<span style="color:#a6e22e">lfor</span> theta (range <span style="color:#ae81ff">0</span> (<span style="color:#a6e22e">.</span> GeometricPattern *deg*) (<span style="color:#a6e22e">.</span> self d-theta)))
                (, (<span style="color:#a6e22e">+</span> (<span style="color:#a6e22e">+</span> (<span style="color:#a6e22e">.</span> self center-x) (<span style="color:#a6e22e">*</span> (<span style="color:#a6e22e">.</span> self r) (<span style="color:#a6e22e">cos</span> (<span style="color:#a6e22e">radians</span> theta)))))
                      (<span style="color:#a6e22e">*</span> (<span style="color:#a6e22e">.</span> self a) (<span style="color:#a6e22e">cos</span> (<span style="color:#a6e22e">radians</span> (<span style="color:#a6e22e">+</span> (<span style="color:#a6e22e">.</span> self phi) (<span style="color:#a6e22e">*</span> (<span style="color:#a6e22e">.</span> self c) theta)))))))
                   (<span style="color:#a6e22e">+</span> (<span style="color:#a6e22e">+</span> (<span style="color:#a6e22e">.</span> self center-y) (<span style="color:#a6e22e">*</span> (<span style="color:#a6e22e">.</span> self r) (<span style="color:#a6e22e">sin</span> (<span style="color:#a6e22e">radians</span> theta)))))(<span style="color:#a6e22e">*</span> (<span style="color:#a6e22e">.</span> self a) (<span style="color:#a6e22e">sin</span> (<span style="color:#a6e22e">radians</span> (<span style="color:#a6e22e">+</span> (<span style="color:#a6e22e">.</span> self phi) (<span style="color:#a6e22e">*</span> (<span style="color:#a6e22e">.</span> self c) theta))))))))))

    <span style="color:#75715e">;; add the first point to the end of the list to close the path</span>
    ((<span style="color:#a6e22e">.</span> self points append) (<span style="color:#a6e22e">.</span> self points [<span style="color:#ae81ff">0</span>]))))


(<span style="color:#66d9ef">defclass </span>Simulator []
  (<span style="color:#66d9ef">setv </span>*ms* <span style="color:#ae81ff">16</span>)
  
  (<span style="color:#66d9ef">defn </span>--init-- [self width height]
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self width) width)
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self height) height)

    <span style="color:#75715e">;; Window and canvas initialization</span>
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self window) ((<span style="color:#a6e22e">.</span> tk Tk)))
    ((<span style="color:#a6e22e">.</span> self window title) <span style="color:#e6db74">:string</span> <span style="color:#e6db74">&#34;Sample Trig Function on Tkinter&#34;</span>)
    ((<span style="color:#a6e22e">.</span> self window resizable) <span style="color:#e6db74">:width</span> False <span style="color:#e6db74">:height</span> False)
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self canvas)
          ((<span style="color:#a6e22e">.</span> tk Canvas) (<span style="color:#a6e22e">.</span> self window)
                         <span style="color:#e6db74">:width</span> (<span style="color:#a6e22e">.</span> self width)
                         <span style="color:#e6db74">:height</span> (<span style="color:#a6e22e">.</span> self height)))

    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self center-x) (<span style="color:#a6e22e">/</span> width <span style="color:#ae81ff">2</span>))
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self center-y) (<span style="color:#a6e22e">/</span> height <span style="color:#ae81ff">2</span>))

    <span style="color:#75715e">;; Coordinates of characters to display</span>
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self quit-x) <span style="color:#ae81ff">20</span>)
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self quit-y) <span style="color:#ae81ff">30</span>)
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self r-x) (<span style="color:#a6e22e">-</span> width <span style="color:#ae81ff">20</span>))
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self r-y) (<span style="color:#a6e22e">-</span> height <span style="color:#ae81ff">120</span>))
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self a-x) (<span style="color:#a6e22e">-</span> width <span style="color:#ae81ff">20</span>))
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self a-y) (<span style="color:#a6e22e">-</span> height <span style="color:#ae81ff">90</span>))
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self c-x) (<span style="color:#a6e22e">-</span> width <span style="color:#ae81ff">20</span>))
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self c-y) (<span style="color:#a6e22e">-</span> height <span style="color:#ae81ff">60</span>))
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self d-theta-x) (<span style="color:#a6e22e">-</span> width <span style="color:#ae81ff">20</span>))
    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self d-theta-y) (<span style="color:#a6e22e">-</span> height <span style="color:#ae81ff">30</span>))

    (<span style="color:#66d9ef">setv </span>(<span style="color:#a6e22e">.</span> self gp) (<span style="color:#a6e22e">GeometricPattern</span> (<span style="color:#a6e22e">.</span> self center-x) (<span style="color:#a6e22e">.</span> self center-y)))

    <span style="color:#75715e">;; Fill canvas with background color (black)</span>
    ((<span style="color:#a6e22e">.</span> self canvas create-rectangle) <span style="color:#ae81ff">0</span>
                                      <span style="color:#ae81ff">0</span>
                                      (<span style="color:#a6e22e">.</span> self width)
                                      (<span style="color:#a6e22e">.</span> self height)
                                      <span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;black&#34;</span>)
    ((<span style="color:#a6e22e">.</span> self draw))
    ((<span style="color:#a6e22e">.</span> self canvas pack))

    <span style="color:#75715e">;; Key binding settings</span>
    ((<span style="color:#a6e22e">.</span> self window bind) <span style="color:#e6db74">&#34;&lt;KeyPress-q&gt;&#34;</span> (<span style="color:#a6e22e">.</span> self quit))
    ((<span style="color:#a6e22e">.</span> self window bind) <span style="color:#e6db74">&#34;&lt;KeyPress-z&gt;&#34;</span> (<span style="color:#a6e22e">.</span> self gp dec-r))
    ((<span style="color:#a6e22e">.</span> self window bind) <span style="color:#e6db74">&#34;&lt;KeyPress-a&gt;&#34;</span> (<span style="color:#a6e22e">.</span> self gp inc-r))
    ((<span style="color:#a6e22e">.</span> self window bind) <span style="color:#e6db74">&#34;&lt;KeyPress-x&gt;&#34;</span> (<span style="color:#a6e22e">.</span> self gp dec-a))
    ((<span style="color:#a6e22e">.</span> self window bind) <span style="color:#e6db74">&#34;&lt;KeyPress-s&gt;&#34;</span> (<span style="color:#a6e22e">.</span> self gp inc-a))
    ((<span style="color:#a6e22e">.</span> self window bind) <span style="color:#e6db74">&#34;&lt;KeyPress-c&gt;&#34;</span> (<span style="color:#a6e22e">.</span> self gp dec-c))
    ((<span style="color:#a6e22e">.</span> self window bind) <span style="color:#e6db74">&#34;&lt;KeyPress-d&gt;&#34;</span> (<span style="color:#a6e22e">.</span> self gp inc-c))
    ((<span style="color:#a6e22e">.</span> self window bind) <span style="color:#e6db74">&#34;&lt;KeyPress-v&gt;&#34;</span> (<span style="color:#a6e22e">.</span> self gp dec-d-theta))
    ((<span style="color:#a6e22e">.</span> self window bind) <span style="color:#e6db74">&#34;&lt;KeyPress-f&gt;&#34;</span> (<span style="color:#a6e22e">.</span> self gp inc-d-theta))))
  
  (<span style="color:#66d9ef">defn </span>quit [self event]
    ((<span style="color:#a6e22e">.</span> self window destroy)))
  
  (<span style="color:#66d9ef">defn </span>draw [self]

    <span style="color:#75715e">;; Drawing a shape</span>
    ((<span style="color:#a6e22e">.</span> self canvas create-line) (<span style="color:#a6e22e">.</span> self gp points) <span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;white&#34;</span> <span style="color:#e6db74">:tag</span> <span style="color:#e6db74">&#34;sample&#34;</span>)
    
    <span style="color:#75715e">;; Drawing characters</span>
    ((<span style="color:#a6e22e">.</span> self canvas create-text) (<span style="color:#a6e22e">.</span> self quit-x)
                                 (<span style="color:#a6e22e">.</span> self quit-y)
                                 <span style="color:#e6db74">:text</span> <span style="color:#e6db74">&#34;Quit: q&#34;</span>
                                 <span style="color:#e6db74">:tag</span> <span style="color:#e6db74">&#34;sample&#34;</span>
                                 <span style="color:#e6db74">:font</span> (, <span style="color:#e6db74">&#34;Arial&#34;</span> <span style="color:#ae81ff">12</span>)
                                 <span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;white&#34;</span>
                                 <span style="color:#e6db74">:anchor</span> (<span style="color:#a6e22e">.</span> tk W))
    ((<span style="color:#a6e22e">.</span> self canvas create-text) (<span style="color:#a6e22e">.</span> self r-x)
                                 (<span style="color:#a6e22e">.</span> self r-y)
                                 <span style="color:#e6db74">:text</span> ((<span style="color:#a6e22e">.</span> <span style="color:#e6db74">&#34;r: Z &lt;{0:03d} &gt;A&#34;</span> format) (<span style="color:#a6e22e">.</span> self gp r))
                                 <span style="color:#e6db74">:tag</span> <span style="color:#e6db74">&#34;sample&#34;</span>
                                 <span style="color:#e6db74">:font</span> (, <span style="color:#e6db74">&#34;Arial&#34;</span> <span style="color:#ae81ff">12</span>)
                                 <span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;white&#34;</span>
                                 <span style="color:#e6db74">:anchor</span> (<span style="color:#a6e22e">.tk</span> E))
    ((<span style="color:#a6e22e">.</span> self canvas create-text) (<span style="color:#a6e22e">.</span> self a-x)
                                 (<span style="color:#a6e22e">.</span> self a-y)
                                 <span style="color:#e6db74">:text</span> ((<span style="color:#a6e22e">.</span> <span style="color:#e6db74">&#34;a: X &lt;{0:03d} &gt;S&#34;</span> format) (<span style="color:#a6e22e">.</span> self gp a))
                                 <span style="color:#e6db74">:tag</span> <span style="color:#e6db74">&#34;sample&#34;</span>
                                 <span style="color:#e6db74">:font</span> (, <span style="color:#e6db74">&#34;Arial&#34;</span> <span style="color:#ae81ff">12</span>)
                                 <span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;white&#34;</span>
                                 <span style="color:#e6db74">:anchor</span> (<span style="color:#a6e22e">.tk</span> E))
    ((<span style="color:#a6e22e">.</span> self canvas create-text) (<span style="color:#a6e22e">.</span> self c-x)
                                 (<span style="color:#a6e22e">.</span> self c-y)
                                 <span style="color:#e6db74">:text</span> ((<span style="color:#a6e22e">.</span> <span style="color:#e6db74">&#34;c: C &lt;{0:03d} &gt;D&#34;</span> format) (<span style="color:#a6e22e">.</span> self gp c))
                                 <span style="color:#e6db74">:tag</span> <span style="color:#e6db74">&#34;sample&#34;</span>
                                 <span style="color:#e6db74">:font</span> (, <span style="color:#e6db74">&#34;Arial&#34;</span> <span style="color:#ae81ff">12</span>)
                                 <span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;white&#34;</span>
                                 <span style="color:#e6db74">:anchor</span> (<span style="color:#a6e22e">.tk</span> E))
    ((<span style="color:#a6e22e">.</span> self canvas create-text) (<span style="color:#a6e22e">.</span> self d-theta-x)
                                 (<span style="color:#a6e22e">.</span> self d-theta-y)
                                 <span style="color:#e6db74">:text</span> ((<span style="color:#a6e22e">.</span> <span style="color:#e6db74">&#34;d-theta: V &lt;{0:03d} &gt;F&#34;</span> format) (<span style="color:#a6e22e">.</span> self gp d-theta))
                                 <span style="color:#e6db74">:tag</span> <span style="color:#e6db74">&#34;sample&#34;</span>
                                 <span style="color:#e6db74">:font</span> (, <span style="color:#e6db74">&#34;Arial&#34;</span> <span style="color:#ae81ff">12</span>)
                                 <span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;white&#34;</span>
                                 <span style="color:#e6db74">:anchor</span> (<span style="color:#a6e22e">.tk</span> E)))
  
  (<span style="color:#66d9ef">defn </span>delete [self]
    <span style="color:#e6db74">&#34;Delete elements with sample tag&#34;</span>
    ((<span style="color:#a6e22e">.</span> self canvas delete) <span style="color:#e6db74">&#34;sample&#34;</span>))
  
  (<span style="color:#66d9ef">defn </span>loop [self]
    <span style="color:#75715e">;; Clear the previous screen</span>
    ((<span style="color:#a6e22e">.</span> self delete))

    <span style="color:#75715e">;; Get new state and draw</span>
    ((<span style="color:#a6e22e">.</span> self gp inc-phi))
    ((<span style="color:#a6e22e">.</span> self gp fetch-points))
    ((<span style="color:#a6e22e">.</span> self draw))

    <span style="color:#75715e">;; Execute loop after about 16ms</span>
    ((<span style="color:#a6e22e">.</span> self window after) (<span style="color:#a6e22e">.</span> Simulator *ms*) (<span style="color:#a6e22e">.</span> self loop))))


(<span style="color:#66d9ef">defn </span>main []
  (<span style="color:#66d9ef">setv </span>simulator (<span style="color:#a6e22e">Simulator</span> *width* *height*))
  ((<span style="color:#a6e22e">.</span> simulator loop))
  ((<span style="color:#a6e22e">.</span> simulator window mainloop))
  <span style="color:#ae81ff">0</span>)


(<span style="color:#66d9ef">when </span>(<span style="color:#a6e22e">=</span> --name-- <span style="color:#e6db74">&#34;__main__&#34;</span>)
      ((<span style="color:#a6e22e">.</span> sys exit) (<span style="color:#a6e22e">main</span>)))
</code></pre></div><p>Create a batch file to call and execute the above geometric_pattern.gui module.
<code>activate</code>&rsquo; the virtual environment and put the path to the <code>hy</code> command and hy module.
Then run the geometric_pattern.gui module using the <code>hy</code> command.
With the -m option, you can specify the modules in the package in dotted notation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-geometric_pattern.bat" data-lang="geometric_pattern.bat">@<span style="color:#66d9ef">ECHO</span> OFF
SETLOCALSET THISDIR=%~dp0
<span style="color:#66d9ef">SET</span> PYTHONPATH=%THISDIR%;%PYTHONPATH%
<span style="color:#66d9ef">SET</span> ACTIVATE=%USERPROFILE%\.virtualenvs\venv_hy_geometric_pattern\Scripts\activate.bat

<span style="color:#66d9ef">CALL</span> %ACTIVATE%
hy -m geometric_pattern.gui
<span style="color:#66d9ef">SET</span> STATUS=%ERRORLEVEL%
<span style="color:#66d9ef">CALL</span> deactivate

<span style="color:#66d9ef">IF</span> %STATUS%<span style="color:#f92672">==</span>0 (
  <span style="color:#66d9ef">ECHO</span> Done.
  <span style="color:#66d9ef">PAUSE</span>
  <span style="color:#66d9ef">EXIT</span> /b 0
) <span style="color:#66d9ef">ELSE</span> (
  <span style="color:#66d9ef">ECHO</span> Error.
  <span style="color:#66d9ef">PAUSE</span>
  <span style="color:#66d9ef">EXIT</span> /b 1
)
</code></pre></div><h1 id="実行">実行</h1>
<p>それではやっていきましょう。</p>
<img width="402" alt="2019-12-16_15h26_49.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/543140/8f052551-ffc2-9964-ea33-a3b64ac0fa70.png">
<img width="402" alt="2019-12-16_15h26_58.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/543140/f67a2ab5-df4d-3040-c3a2-2e181905a9f3.png">
<img width="402" alt="2019-12-16_15h27_25.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/543140/4bf6c809-521f-5ec1-b803-cfa8422d6d0f.png">
<img width="402" alt="2019-12-16_15h27_30.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/543140/fefba46b-4255-76df-ea72-b97e640b1c99.png">
<p>はい。
パスの色や太さを変えてみたり、別の数式に変えてみると楽しいかもしれません。</p>
<h1 id="まとめ補足">まとめ・補足</h1>
<ul>
<li>Python の標準ライブラリには tkinter という GUI ライブラリがあり、Hy からも利用可能です。</li>
<li>GUI ライブラリには、他にもサードパーティー製モジュールの Qt for Python (PySide2) などがあります。</li>
</ul>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
