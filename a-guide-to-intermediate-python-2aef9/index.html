<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>A guide to intermediate Python | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>A guide to intermediate Python</h1>
<p>
  <small class="text-secondary">
  
  
  Nov 3, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/python3">Python3</a></code></small>

</p>
<pre><code>## Introduction
</code></pre>
<p>Are you programming in Python?
For those who understand the basic grammar of Python to some extent, but want to learn more about it, I will explain intermediate techniques and writing methods.</p>
<p>If you master this article, could you become an intermediate Python person tomorrow?
So let&rsquo;s get started.</p>
<h2 id="regarding-variable-assignment">Regarding variable assignment</h2>
<p>In Python, multiple variables can be defined in one line.</p>
<p>If you substitute normally:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">x <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
y <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>
z <span style="color:#f92672">=</span> <span style="color:#ae81ff">35</span>

<span style="color:#66d9ef">print</span>(x, y, z) <span style="color:#75715e"># 10 12 35</span>
</code></pre></div><p>When substituting in one line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">x, y, z <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">35</span>

<span style="color:#66d9ef">print</span>(x, y, z) <span style="color:#75715e"># 10 12 35</span>
</code></pre></div><p>As mentioned above, it is possible to make the variable definition in one line.
Readability is reduced if all the variables are defined in one line, but readability is improved if the definitions of variables that are related to some extent are completed in one line.</p>
<p>If you want to assign the same value to multiple variables, you can also write as follows.
This is the assignment method, but be careful when using a mutable (mutable) object.
For details, shiracamus carefully explained in the comment section of this article, so please refer to that.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">x <span style="color:#f92672">=</span> y <span style="color:#f92672">=</span> z <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>

<span style="color:#66d9ef">print</span>(x, y, z) <span style="color:#75715e"># 10 10 10</span>
</code></pre></div><h2 id="swap-variables">Swap variables</h2>
<p>I think it&rsquo;s common to use temp variables etc. when exchanging the contents of variables, but in Python, it is easier to write.</p>
<p>To swap variables normally:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">x, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">23</span>
tmp <span style="color:#f92672">=</span> x
x <span style="color:#f92672">=</span> y
y <span style="color:#f92672">=</span> tmp
<span style="color:#66d9ef">print</span>(x, y) <span style="color:#75715e"># 23 10</span>
</code></pre></div><p>When exchanging variables in one line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">x, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">23</span>
x, y <span style="color:#f92672">=</span> y, x
<span style="color:#66d9ef">print</span>(x, y) <span style="color:#75715e"># 23 10</span>
</code></pre></div><p>I&rsquo;m surprised that you can change variables in this way. ..</p>
<h2 id="variable-expansion">Variable expansion</h2>
<p>In Python, arrays and dictionaries can be expanded using the * (asterisk) symbol.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]

<span style="color:#66d9ef">print</span>([test, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>]) <span style="color:#75715e"># [[1, 2, 3], 4, 5]</span>
<span style="color:#66d9ef">print</span>([<span style="color:#f92672">*</span>test, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>]) <span style="color:#75715e"># [1, 2, 3, 4, 5]</span>
</code></pre></div><p>The above code uses an asterisk to expand and assign the array. If you don&rsquo;t use an asterisk, the array will be assigned in a nested state.</p>
<p>For dictionaries, use two asterisks.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;apple&#39;</span>:<span style="color:#e6db74">&#39;red&#39;</span>,<span style="color:#e6db74">&#39;remon&#39;</span>:<span style="color:#e6db74">&#39;yellow&#39;</span>}

<span style="color:#66d9ef">print</span>({<span style="color:#f92672">**</span>test,<span style="color:#e6db74">&#39;cherrie&#39;</span>:<span style="color:#e6db74">&#39;pink&#39;</span>}) <span style="color:#75715e"># {&#39;apple&#39;:&#39;red&#39;,&#39;remon&#39;:&#39;yellow&#39;,&#39;cherrie&#39;:&#39;pink&#39;}</span>
</code></pre></div><h2 id="true-and-false-comparison">True and false comparison</h2>
<p>I think that there are many cases where an IF statement determines whether a variable is 0 or None. But writing the logic that actually determines the boolean value isn&rsquo;t Pasonic code.</p>
<blockquote>
<p>Pythonic is &ldquo;how to write simple and easy-to-read code that is typical of Python&rdquo;</p>
</blockquote>
<p>To determine 0 normally:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>

<span style="color:#66d9ef">if</span> test <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;NG&#39;</span>)
<span style="color:#66d9ef">else</span>:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;OK&#39;</span>)
</code></pre></div><p>How to write conditions like Python:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>

<span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> test:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;NG&#39;</span>)
<span style="color:#66d9ef">else</span>:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;OK&#39;</span>)
</code></pre></div><p>In the pythonic code, the ones that are determined to be false are decided in advance, so the decision logic is not written explicitly for those that are decided.
The following items are judged to be false.
<a href="https://docs.python.org/ja/3/library/stdtypes.html?#truth-value-testing">Built-in type truth value judgment</a></p>
<ul>
<li>Constants defined to be false: None and False</li>
<li>Zero in numeric type: 0, 0.0, 0j, Decimal(0), Fraction(0, 1)</li>
<li>Empty sequence or collection:'&rsquo;, (), [], {}, set(), range(0)</li>
</ul>
<h2 id="comparison-with-none-is-operator">Comparison with None, is operator</h2>
<p>Python comparison operators include <code>==</code> and <code>is</code>, both of which can be used to check if the variables being compared are the same.
However, if you do not understand both meanings correctly, you may create an unexpected bug, so be careful.</p>
<p>Q. Should I use is for comparison with None?
A. Yes. But unless you&rsquo;re in the wrong position, you get the same result as using <code>==</code></p>
<p>First, I will explain the operation of the is operator. The is operator checks if the variables being compared have the same ID. What is the variable ID is the reference destination (pointer) of the variable.
For example, if the referent values are the same, but the referents (pointers) are different, the is operator determines that they are false.</p>
<p>If the variable references are the same:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;my name is taro&#39;</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;.&#39;</span>
test2 <span style="color:#f92672">=</span> test
<span style="color:#66d9ef">print</span>(id(test)) <span style="color:#75715e"># 140643210401160</span>
<span style="color:#66d9ef">print</span>(id(test2)) <span style="color:#75715e"># 140643210401160</span>
</code></pre></div><p>In the above case, the variable test is assigned to test2, so test and test2 point to the same reference. Therefore, when comparing with the is operator, test and test2 are judged to be the same.
Similarly, let&rsquo;s check the None ID (ID may vary depending on the environment)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> None
test2 <span style="color:#f92672">=</span> None
<span style="color:#66d9ef">print</span>(id(test)) <span style="color:#75715e"># 9107296</span>
<span style="color:#66d9ef">print</span>(id(test2)) <span style="color:#75715e"># 9107296</span>
</code></pre></div><p>None refers to the same object no matter where it is defined. Therefore, if you want to compare whether or not None, you can check if the comparison target is really None by using the is operator. In the case of == operator, the behavior of the operator itself can be changed by using a function called operator overload, so it may not be possible to accurately determine whether it is None. (Without operator overload, the comparison of None is the same for both is operator and == operator.)</p>
<p>Q. Should I use is for comparisons other than None?
A. Yes. Using is for comparisons other than None can lead to unexpected bugs.</p>
<p>In particular, it is dangerous to use the is operator a lot because it may behave unexpectedly when comparing string variables.
For example, consider the following code.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;my name is taro&#39;</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;.&#39;</span>
test2 <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;my name is taro&#39;</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;.&#39;</span>
<span style="color:#66d9ef">print</span>(id(test)) <span style="color:#75715e"># 140196053288256</span>
<span style="color:#66d9ef">print</span>(id(test2)) <span style="color:#75715e"># 140196053288328</span>

<span style="color:#66d9ef">print</span>(test) <span style="color:#75715e"># my name is taro.</span>
<span style="color:#66d9ef">print</span>(test2) <span style="color:#75715e"># my name is taro.</span>

<span style="color:#66d9ef">if</span> test <span style="color:#f92672">is</span> test2:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;same&#39;</span>)
<span style="color:#66d9ef">else</span>:
    <span style="color:#75715e"># This is output</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;not same&#39;</span>)
    
<span style="color:#66d9ef">if</span> test <span style="color:#f92672">==</span> test2:
    <span style="color:#75715e"># This is output</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;same&#39;</span>)
<span style="color:#66d9ef">else</span>:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;not same&#39;</span>)

</code></pre></div><p>Although test and test2 contain the same character strings, they are referenced differently. Therefore, when comparing with the is operator, the two variables are judged as different things, and it is judged that they are the same as the == operator. The == operator has the demerit that the processing speed is slower than the is operator because it judges by checking the contents in the variable, but the use of the is operator is confusing for comparisons other than None. So I don&rsquo;t recommend it.
However, in exceptional cases, using the is operator may make the code cleaner. (Please refer to righteous&rsquo;s comment in the comment section)</p>
<h2 id="short-circuit-evaluation">Short circuit evaluation</h2>
<p>Other languages have an evaluation method called short-circuit evaluation, but Python also has one.
If you make good use of short-circuit evaluation, you can write the logic of the IF statement smartly.</p>
<p>For example, consider the following code.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;age&#39;</span>: <span style="color:#ae81ff">20</span>}

<span style="color:#66d9ef">if</span><span style="color:#e6db74">&#39;age&#39;</span> <span style="color:#f92672">in</span> test:
    <span style="color:#66d9ef">if</span> test[<span style="color:#e6db74">&#39;age&#39;</span>] <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">20</span>:
        <span style="color:#66d9ef">print</span> (<span style="color:#e6db74">&#39;I&#39;</span>m an adult<span style="color:#e6db74">&#39;)</span>
</code></pre></div><p>First, the first IF statement checks whether the test variable has the attribute age. This is to prevent an error when accessing an attribute that does not exist. The second IF statement checks if the value of the age attribute is 20 or more.</p>
<p>Now let&rsquo;s rewrite using short-circuit evaluation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;age&#39;</span>: <span style="color:#ae81ff">20</span>}

<span style="color:#66d9ef">if</span><span style="color:#e6db74">&#39;age&#39;</span> <span style="color:#f92672">in</span> test <span style="color:#f92672">and</span> test[<span style="color:#e6db74">&#39;age&#39;</span>] <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">20</span>:
    <span style="color:#66d9ef">print</span> (<span style="color:#e6db74">&#39;I&#39;</span>m an adult<span style="color:#e6db74">&#39;)</span>
</code></pre></div><p>You might think that you just connected IF statements with the and operator. However, if you switch the left and right sides of the and operator, the behavior that it means changes.
The exact behavior of short-circuit evaluation (and and or operators) is that if the first condition is true (or operator) or false (and operator), the next process is not performed. Become.
In the above case, if the evaluation result of <code>'age' in test</code> is false, <code>test['age'] &gt;= 20</code> will not be evaluated. So, it is possible to achieve the condition that <code>test['age'] &gt;= 20</code> is evaluated only when the test variable has an age attribute.</p>
<h2 id="combination-of-comparison-operators">Combination of comparison operators</h2>
<p>I think there are many ways to compare numbers as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">x <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
<span style="color:#66d9ef">if</span> x <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> x <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">20</span>:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;OK&#39;</span>)
<span style="color:#66d9ef">else</span>:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;NG&#39;</span>)
</code></pre></div><p>But for Python, you can write:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">x <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
<span style="color:#66d9ef">if</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&lt;=</span> x <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">20</span>:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;OK&#39;</span>)
<span style="color:#66d9ef">else</span>:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;NG&#39;</span>)
</code></pre></div><h2 id="ternary-operator">Ternary operator</h2>
<p>When assigning a value to a variable, I think there are many situations where you want to change the assigned value depending on the condition.
For example, if the variable is None, or if it is a particular key.
At that time, you can describe smartly by using the ternary operator to assign variables.
The description method of the ternary operator in Python is as follows.</p>
<pre><code>(Variable) = (value when condition is true) if (conditional expression) else (value when condition is false)
</code></pre><p>Code without ternary operator</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> <span style="color:#ae81ff">15</span>

<span style="color:#66d9ef">if</span> test <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>:message <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;a positive number or 0&#39;</span>
<span style="color:#66d9ef">else</span>:
    message <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;is a negative number&#39;</span>
<span style="color:#66d9ef">print</span>(message)
</code></pre></div><p>Code when using ternary operator</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> <span style="color:#ae81ff">15</span>

message <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;a positive number or 0&#39;</span><span style="color:#66d9ef">if</span> test <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">else</span><span style="color:#e6db74">&#39;a negative number&#39;</span>
<span style="color:#66d9ef">print</span>(message)
</code></pre></div><p>As described above, it is possible to describe the IF statement part in one line, so the substituting part becomes one line, and the readability of the code is improved. Note that in the ternary operator, if you branch with multiple conditions (if you want to use elif), you need to nest the ternary operator. However, nesting ternary operators significantly reduces the readability of your code and is not recommended.
If the condition is complicated, the IF statement may be used instead of the ternary operator.</p>
<h2 id="embed-the-variable-value-in-the-string">Embed the variable value in the string</h2>
<p>I think there are four ways to embed a variable value in a string in Python.</p>
<ul>
<li>Concatenate strings with + operator</li>
<li>use f string</li>
<li>use the format function</li>
<li>How to use%</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">name <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;taro&#39;</span>

Concatenate <span style="color:#75715e"># strings with + operator</span>
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;I am&#39;</span> <span style="color:#f92672">+</span> name <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;)</span>

<span style="color:#75715e"># Use f string</span>
<span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#39;I&#39;</span>m {name}<span style="color:#e6db74">&#39;)</span>

Use the <span style="color:#75715e">#format function</span>
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;I am {}&#39;</span><span style="color:#f92672">.</span>format(name))

How to use <span style="color:#75715e">#%</span>
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;I&#39;</span>m <span style="color:#f92672">%</span>s<span style="color:#e6db74">&#39; %name)</span>
</code></pre></div><p>We do not recommend the method of <code>connecting strings with + operator</code> because the readability of the code is low and the editability of the code is low. (The + operator used for concatenation has no meaning in the first place, and you must write the + operator when adding a new one)
I&rsquo;m wondering if both <code>using the f string</code> and <code>using the format function</code> are honest. However, I don&rsquo;t want both statements to be used in the project code. We believe that either should be unified.</p>
<h2 id="array-for-statement">array FOR statement</h2>
<p>I think there are many cases where an array is processed with a FOR statement.
Here are some useful techniques to use.</p>
<h3 id="for-each">FOR EACH</h3>
<p>When using a normal FOR statement:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">16</span>]

<span style="color:#66d9ef">for</span> index <span style="color:#f92672">in</span> range(len(test)):
    <span style="color:#66d9ef">print</span>(test[index], end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>) <span style="color:#75715e"># 1 10 15 16</span>
</code></pre></div><p>When using FOR EACH:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">16</span>]

<span style="color:#66d9ef">for</span> value <span style="color:#f92672">in</span> test:
    <span style="color:#66d9ef">print</span>(value, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>) <span style="color:#75715e"># 1 10 15 16</span>
</code></pre></div><p>When FOR EACH is used, the object to be looped by the FOR statement will be from the index to the array element.
Therefore, if the requirement is to process the elements of the array one by one, using the FOR EACH syntax will improve the readability of the code.</p>
<p>Also, I often encounter when I want to use an index in FOR EACH.
In that case, you can get both the array element and the index by doing the following, so you can write smartly.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">16</span>]

<span style="color:#66d9ef">for</span> index, value <span style="color:#f92672">in</span> enumerate(test):
    <span style="color:#75715e"># index: 0 value: 1 ,index: 1 value: 10 ,index: 2 value: 15 ,index: 3 value: 16,</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;index:&#39;</span>, index,<span style="color:#e6db74">&#39;value:&#39;</span>, value,<span style="color:#e6db74">&#39;,&#39;</span>, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>)
</code></pre></div><h3 id="get-array-elements-in-reverse-order">Get array elements in reverse order</h3>
<p>It&rsquo;s a rare occurrence, but I&rsquo;ll also mention when you want to get the elements of an array in reverse order.</p>
<p>To get the array elements normally in reverse order:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">16</span>]

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(test)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
    <span style="color:#66d9ef">print</span>(test[i], end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>) <span style="color:#75715e"># 16 15 10 1</span>
</code></pre></div><p>When using the reversed function:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">16</span>]

<span style="color:#66d9ef">for</span> value <span style="color:#f92672">in</span> reversed(test):
    <span style="color:#66d9ef">print</span>(value, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>) <span style="color:#75715e"># 16 15 10 1</span>
</code></pre></div><p>Besides using the reversed function, you can also use slices to reverse the elements of the array. For more details, please refer to c-yan&rsquo;s comment.</p>
<p>To do smart programming in Python, it is important to have some understanding of built-in functions.
It describes the range function, len function, reversed function, etc. used in this article.
<a href="https://docs.python.org/ja/3/library/functions.html">Built-in Functions</a></p>
<h2 id="dictionary-for-statement">Dictionary FOR statement</h2>
<p>I think that you often process a dictionary with a FOR statement.
There are many ways to write a FOR statement in a dictionary, but basically there is no problem if you learn how to use the items function.</p>
<p>If you normally process a dictionary with a FOR statement:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;apple&#39;</span>:<span style="color:#e6db74">&#39;red&#39;</span>,<span style="color:#e6db74">&#39;remon&#39;</span>:<span style="color:#e6db74">&#39;yellow&#39;</span>}

<span style="color:#66d9ef">for</span> key <span style="color:#f92672">in</span> test:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;key:&#39;</span>, key,<span style="color:#e6db74">&#39;value:&#39;</span>, test[key],<span style="color:#e6db74">&#39;,&#39;</span>, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>) <span style="color:#75715e"># key: apple value: red ,key: remon value: yellow,</span>
</code></pre></div><p>When using the items function:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;apple&#39;</span>:<span style="color:#e6db74">&#39;red&#39;</span>,<span style="color:#e6db74">&#39;remon&#39;</span>:<span style="color:#e6db74">&#39;yellow&#39;</span>}

<span style="color:#66d9ef">for</span> key,value <span style="color:#f92672">in</span> test<span style="color:#f92672">.</span>items():
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;key:&#39;</span>, key,<span style="color:#e6db74">&#39;value:&#39;</span>, value,<span style="color:#e6db74">&#39;,&#39;</span>, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>)
</code></pre></div><h2 id="remove-duplicate-array">Remove duplicate array</h2>
<p>I don&rsquo;t have many encounters, but I think I will encounter them several times.
You can check the contents of the array and create a function that eliminates duplicates yourself, but you can remove duplicates more conveniently.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">1</span>]
test2 <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#e6db74">&#39;b&#39;</span>,<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#e6db74">&#39;d&#39;</span>,<span style="color:#e6db74">&#39;aa&#39;</span>]

<span style="color:#66d9ef">print</span>(list(set(test))) <span style="color:#75715e"># [1, 2, 3, 5]</span>
<span style="color:#66d9ef">print</span>(list(set(test2))) <span style="color:#75715e"># [&#39;a&#39;,&#39;d&#39;,&#39;b&#39;,&#39;aa&#39;]</span>
</code></pre></div><p>Miso can automatically eliminate duplicates by converting it to Set type. After converting to Set type, it is returned to List type again.</p>
<h2 id="array-sort">Array sort</h2>
<p>We do not implement our own sorting of arrays.
Sorting can be achieved using existing functions.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> [<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">25</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">69</span>]
<span style="color:#66d9ef">print</span>(sorted(test)) <span style="color:#75715e"># [4, 10, 25, 69, 100]</span>
<span style="color:#66d9ef">print</span>(sorted(test, reverse<span style="color:#f92672">=</span>True)) <span style="color:#75715e"># [100, 69, 25, 10, 4]</span>
</code></pre></div><p>It is also possible to explicitly specify what you want to use as a key for sorting.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">25</span>], [<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">100</span>], [<span style="color:#ae81ff">69</span>, <span style="color:#ae81ff">71</span>]]
<span style="color:#66d9ef">print</span>(sorted(test, key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> item: item[<span style="color:#ae81ff">1</span>])) <span style="color:#75715e"># [[10, 25], [69, 71], [4, 100]]</span>
</code></pre></div><p>In the above code, the second element in the array is the key for sorting.</p>
<blockquote>
<p>sorted The function sort is not very fast. If you run into speed issues, we recommend using a library such as numpy.</p>
</blockquote>
<h2 id="dictionary-array-sort">Dictionary array sort</h2>
<p>You may want to sort the dictionary array.
In that case, you can deal with it by explicitly specifying the key as shown below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> [{<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;taro&#39;</span>,<span style="color:#e6db74">&#39;age&#39;</span>: <span style="color:#ae81ff">18</span>}, {<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;jiro&#39;</span>,<span style="color:#e6db74">&#39;age&#39;</span>: <span style="color:#ae81ff">12</span>}]

<span style="color:#75715e"># [{&#39;name&#39;:&#39;jiro&#39;,&#39;age&#39;: 12}, {&#39;name&#39;:&#39;taro&#39;,&#39;age&#39;: 18}]</span>
<span style="color:#66d9ef">print</span>(sorted(test, key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> item: item[<span style="color:#e6db74">&#39;age&#39;</span>]))
</code></pre></div><h2 id="list-comprehension">List comprehension</h2>
<p>List comprehension is a very convenient and fast processing method, so it&rsquo;s a writing method you should learn.
The list comprehension is described as follows.</p>
<pre><code>[(Value to add to array) for (one element of iterator object) in (iterator object)]
</code></pre><p>To create an even list normally:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> []
<span style="color:#66d9ef">for</span> index <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
    test<span style="color:#f92672">.</span>append(index <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
<span style="color:#66d9ef">print</span>(test) <span style="color:#75715e"># [0, 2, 4, 6, 8]</span>
</code></pre></div><p>To create a list in list comprehension:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># [0, 2, 4, 6, 8]</span>
<span style="color:#66d9ef">print</span>([index <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#66d9ef">for</span> index <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>)])
</code></pre></div><p>I was able to write it in one line.
You can also narrow down the conditions using the IF statement (postfix IF).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">Create an even array <span style="color:#66d9ef">with</span> no multiples of <span style="color:#75715e">#10</span>
<span style="color:#75715e"># [2, 4, 6, 8, 12, 14, 16, 18, 22, 24, 26, 28, 32, 34, 36, 38]</span>
<span style="color:#66d9ef">print</span>((index <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#66d9ef">for</span> index <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">if</span> (index <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">%</span><span style="color:#ae81ff">10</span>])
</code></pre></div><p>In list comprehension notation, it is also possible to branch the condition with IF,ELSE.
Similarly, the dictionary has a comprehension notation, but I will omit it this time.</p>
<h2 id="all-and-any-functions">all and any functions</h2>
<p>Python has an all function that determines if all elements are True and an any function that determines if any element is True.
By making good use of all and any functions, you can write smart programs.</p>
<p>For example, suppose you write a program that determines whether the contents of an array are all 0 or more.</p>
<p>For normal implementation:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">2</span>]
judge <span style="color:#f92672">=</span> True
<span style="color:#66d9ef">for</span> value <span style="color:#f92672">in</span> test:
    <span style="color:#66d9ef">if</span> value <span style="color:#f92672">&lt;</span><span style="color:#ae81ff">0</span>:
        judge <span style="color:#f92672">=</span> False
result <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;all contents are greater than or equal to 0&#39;</span><span style="color:#66d9ef">if</span> judge <span style="color:#66d9ef">else</span><span style="color:#e6db74">&#39; contains a negative number&#39;</span>
<span style="color:#66d9ef">print</span>(result)
</code></pre></div><p>When using the all function:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">2</span>]
judge <span style="color:#f92672">=</span> all(map(<span style="color:#66d9ef">lambda</span> item: item <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>, test))
result <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;all contents are greater than or equal to 0&#39;</span><span style="color:#66d9ef">if</span> judge <span style="color:#66d9ef">else</span><span style="color:#e6db74">&#39; contains a negative number&#39;</span>
<span style="color:#66d9ef">print</span>(result) <span style="color:#75715e"># contains a negative number</span>
</code></pre></div><p>I was able to write 3 lines in 1 line.
Now, let&rsquo;s move on to the explanation of the program.First, the map function is a function that can be applied to each element of an array.
When <code>map(lambda item: item &gt;= 0, test)</code> is applied, a new map object that determines whether each element is 0 or more is created. That is, a <code>False, True, True</code> map object is created.
And, it becomes the flow that all the elements judge whether all the elements are True.
One caveat, the all function returns an empty array as True, so you&rsquo;ll have to write a separate branch to determine if the array is empty. (Thank you for the comment of marmalade_boy)</p>
<blockquote>
<p>Returns True if all elements of iterable are true (or if iterable is empty)</p>
</blockquote>
<p><a href="https://docs.python.org/ja/3/library/functions.html#all">Built-in functions all</a></p>
<h2 id="context-manager-and-with-block">Context manager and with block</h2>
<p>We won&rsquo;t go into detail about the context manager, but it&rsquo;s a good idea to know some about with blocks.</p>
<p>For example, consider opening a file.
Enclose it in a try clause and finally close the file to handle situations where the file is not closed due to an exception while processing the file.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fd <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#34;filename&#34;</span>, <span style="color:#e6db74">&#34;r&#34;</span>)
<span style="color:#66d9ef">try</span>:
    file_content <span style="color:#f92672">=</span> file<span style="color:#f92672">.</span>read()
    <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#39;test&#39;</span>)
<span style="color:#66d9ef">finally</span>:
   fd<span style="color:#f92672">.</span>close()
</code></pre></div><p>However, it&rsquo;s bothersome to write a try clause and close the file each time, so I use a with block.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#34;filename&#34;</span>, <span style="color:#e6db74">&#34;r&#34;</span>) <span style="color:#66d9ef">as</span> fd:
  file_content <span style="color:#f92672">=</span> file<span style="color:#f92672">.</span>read()
  <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#39;test&#39;</span>)
</code></pre></div><p>By writing as above, even if an exception occurs in the with block, the file will be closed automatically.</p>
<h2 id="finally">Finally</h2>
<p>Thank you for reading the long sentence.
Python is still a deep language, so the above are just a few.
However, I hope that it will be useful for everyone.
Then (^^♪</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
