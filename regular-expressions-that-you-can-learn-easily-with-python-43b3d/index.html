<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Regular expressions that you can learn easily with Python | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Regular expressions that you can learn easily with Python</h1>
<p>
  <small class="text-secondary">
  
  
  Mar 23, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/regular-expression"> regular expression</a></code></small>


<small><code><a href="https://memotut.com/tags/python3"> Python3</a></code></small>


<small><code><a href="https://memotut.com/tags/regex"> regex</a></code></small>


<small><code><a href="https://memotut.com/tags/regularexpression"> regularexpression</a></code></small>

</p>
<pre><code>Although there are some cases where regular expressions are usually needed, I have not studied it systematically, so I will organize and summarize it. The language is Python.
</code></pre>
<p>It&rsquo;s quite long. If you read this, you shouldn&rsquo;t get angry even if you tweet &ldquo;<a href="https://togetter.com/li/1268851">I fully understand Python regular expressions</a>&rdquo;.</p>
<h1 id="what-is-a-regular-expression-in-the-first-place">What is a regular expression in the first place?</h1>
<p>Regular Expression is in English. This is an expression (processing) that performs various processing by specifying a specific pattern when performing special operations related to character strings.</p>
<p>There are cases in which regular expression can be used to easily handle character string operations that are troublesome (or difficult to handle) with ordinary built-in functions and modules related to character strings.</p>
<p>It is mainly used for the following purposes.</p>
<ul>
<li>Special search of character strings (eg ambiguous search, typographical errors included, etc.)</li>
<li>Validation of input value (Example: Check if the input email address is a valid value etc.)</li>
<li>Extraction and replacement of fixed pattern character strings (eg: CSS color code extraction, numerical value extraction from zip code, etc.)</li>
</ul>
<h1 id="a-brief-history-of-regular-expressions">A brief history of regular expressions</h1>
<p>The first appearance of the concept itself is a paper of 1943 (<a href="https://link.springer.com/article/10.1007/BF02478259">A logical calculus of the ideas immanent in nervous activity</a>)(Thenumberofcitationsisalittlelessthan20,000atthetimeofwritingthisarticle&hellip;).</p>
<p>It seems to be famous not only as regular expressions but also as a classic paper on neural networks. At the time of this paper, the word regular expression has not yet appeared.</p>
<p>The word regex was first defined in a 1956 paper (<a href="https://www.rand.org/pubs/research_memoranda/RM704.html">Representation of Events in Nerve Nets and Finite Automata</a>). It seems that the words regular sets and regular expression came out here.</p>
<p>It&rsquo;s a little strange that the papers that seem to be related to machine learning and population life (ALife) are the basis of regular expressions.</p>
<p>After that, Mr. Ken Thompson, who is famous for UNIX, B language, Go, etc., greatly developed regular expressions around 1968, and became widely popular by the implementation by Perl.</p>
<p>Reference: [Ken Thompson-Wikipedia](<a href="https://en.wikipedia.org/wiki/%E3%82%B1%E3%83%B3%E3%83%BB%E3%83%88%E3%83(%B3%E3%83%97%E3%82%BD%E3%83%B3)">https://en.wikipedia.org/wiki/%E3%82%B1%E3%83%B3%E3%83%BB%E3%83%88%E3%83(%B3%E3%83%97%E3%82%BD%E3%83%B3)</a></p>
<p>This Perl implementation will be used in many other languages as well, and &ldquo;Perl-like&rdquo; regular expressions will be implemented in each language. The Python regular expression re module, described below, is also a Perl-like implementation.</p>
<p>At the time of writing this article, it&rsquo;s kind of amazing to think that it has a history of about 80 years.</p>
<p><strong>Additional details:</strong> We shared the details of the addition around here in the comments from @ryuta69 and @k-takata&hellip;! Thank you: bow: (Please check the comments for details)</p>
<h1 id="things-to-use">Things to use</h1>
<ul>
<li>Python 3.7.3 (Anaconda)</li>
<li>Windows10</li>
<li>Python built-in re module</li>
<li>Jupyter notebook (including magic command)</li>
</ul>
<p>*Regular expression libraries that can be additionally installed with pip (eg: <a href="https://pypi.org/project/regex/">regex</a>) are not covered in this article.</p>
<p>#Regular expression module</p>
<p>The Python built-in uses the re module (it stands for <strong>r</strong>egular <strong>e</strong>xpression).</p>
<p>You can import it as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">import</span> re
</code></pre></div><h1 id="re-module-first-step">re module first step</h1>
<p>In many cases, you&rsquo;ll need two, a regular expression pattern and a string that reflects that pattern.
For example, if you want to search for the character &ldquo;cat&rdquo; from a specific sentence, you can use the search function as follows (* If this is the only case, you can use the functions related to character strings without using the re module. , Use the re module as a sample).</p>
<p>Specify the regular expression pattern in the pattern argument and the character string to be reflected in the string argument.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat, no name yet.&#39;</span>)
</code></pre></div><p>In the seach function, if the regular expression pattern is hit, a Match class object is returned. The Match object stores the matched part, the position of the character, etc. (the position where span hits, the character string where match hits the pattern).</p>
<pre><code>&lt;re.Match object; span=(3, 4), match='cat'&gt;
</code></pre><p>About the <code>r</code> notation before the # pattern string</p>
<p>Like the code above, pattern strings often have the letter r in front of the quotes.</p>
<p>This is the notation that a string is treated as a &ldquo;raw string&rdquo; (r in raw string).</p>
<p>By using this, the escape sequence (<code>\</code> symbol) relation in a string that has a special behavior becomes just a string.</p>
<p>For example, if you use the <code>\n</code> notation to represent a line break in a Python string, it will be displayed with the line break included when it is actually printed.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;I am </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">a cat.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">I have no name yet.&#39;</span>)

I
It<span style="color:#e6db74">&#39;s a cat.</span>
I have no name yet<span style="color:#f92672">.</span>
</code></pre></div><p>By prefixing the string with the r symbol instead, the behavior of <code>\n</code> is ignored and the string is output as is.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am \na cat.\nI have no name yet.&#39;</span>)

I<span style="color:#e6db74">&#39;m a \Ncat. </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> I have no name yet.</span>
</code></pre></div><p>Why use raw strings in regular expression patterns? However, let&rsquo;s think about a Windows path such as <code>C:\Windows\py.exe</code>.</p>
<p>To handle the string <code>\</code> in a Python string, write it as <code>\\</code> (the character of <code>\</code> itself is escaped).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;C:</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">Windows</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">py.exe&#39;</span>)

C:\Windows\py<span style="color:#f92672">.</span>exe
</code></pre></div><p>If you try to search this with a regular expression, if you leave it as it is, the pattern of <code>\\</code> is expressed, but the pattern side also needs to be escaped, so you need to overlap four with <code>\\\\</code>. There is.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\\\\</span><span style="color:#e6db74">py.exe&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;C:</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">Windows</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">py.exe&#39;</span>)

<span style="color:#f92672">&lt;</span>re<span style="color:#f92672">.</span>Match object; span<span style="color:#f92672">=</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">17</span>), match<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">py.exe&#39;</span><span style="color:#f92672">&gt;</span>
</code></pre></div><p>If there are 2 on the character string, 4 on the pattern, 1 on the actual display, etc., it will be quite confusing, or it will be a mistake. If possible, it would be easier if you could use the same character string and pattern.</p>
<p>The solution is to match the pattern with the contents of the string by specifying the raw string with the r symbol.
By using a raw character string as shown below, both the pattern and the character string to be searched can be expressed in the notation of <code>\\</code>, which makes it easier to understand.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">py.exe&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;C:</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">Windows</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">py.exe&#39;</span>)

<span style="color:#f92672">&lt;</span>re<span style="color:#f92672">.</span>Match object; span<span style="color:#f92672">=</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">17</span>), match<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">py.exe&#39;</span><span style="color:#f92672">&gt;</span>
</code></pre></div><p>I think there are various opinions (only the r symbol should be given to the pattern that contains the escape sequence, or the regular expression pattern should be given the r symbol to prevent mistakes etc.), In this article, the r symbol is added to the pattern character strings.</p>
<h1 id="or-condition-single-character">OR condition (single character)</h1>
<p>To use an OR conditional pattern that hits any part of a character string, use the brackets of <code>[]</code> (It is called a set of characters. In English, character class etc. ).</p>
<p>For example, the condition pattern such as &ldquo;a specific character part hits either &ldquo;cat&rdquo; or &ldquo;dog&rdquo;&rdquo; can be set as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am [cat dog]. &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 8), match='I am a cat. '&gt;
</code></pre><p>Even dogs will hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am [cat dog]. &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a dog. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 8), match='I am a dog. '&gt;
</code></pre><p>Others won&rsquo;t hit, of course (return value is None instead of Match object).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am [cat dog]. &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a rabbit. I have no name yet. &#39;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#66d9ef">print</span>(match)

None
</code></pre></div><p>The number of conditions is not limited to two, but you can increase more and more.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am a [cat dog rabbit]. &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a rabbit. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 8), match='I am a rabbit. '&gt;
</code></pre><h1 id="or-condition-string">OR condition (string)</h1>
<p>Earlier I tried the OR condition of a single character by using the brackets of <code>[]</code>. If you want to set the OR condition of a character string instead of a single character, enclose the condition range in parentheses of <code>()</code> and put <code>|</code> between the character strings (Alternation in English).</p>
<p>For example, if you want to set an OR condition with the character strings <code>being a cat</code> and <code>being a dog</code>, use the following format. Cat dog hits on both strings.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am (a cat | a dog). &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 8), match='I am a cat. '&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am (a cat | a dog). &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a dog. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 7), match='I am a dog. '&gt;
</code></pre><p>As with the case of single character, if you want to set three or more OR conditions, you can deal with it by increasing the number of splits with the <code>|</code> symbol.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am (a cat | a dog | a rabbit). &#39;</span>,string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a rabbit. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 7), match='I am a rabbit. '&gt;
</code></pre><p>#OR condition according to rules of specific character range</p>
<p>For example, writing <code>[0123456789]</code> is complicated when setting a condition such that any numerical value is OK.
In such a case, you can handle it by setting a hyphen <code>-</code> symbol between the ranges.</p>
<p>For example, if you want to set anything in the range of 3 to 5, you can express it by using a hyphen symbol as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[3-5] cats&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I saw 3 cats on my way home. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(4, 8), match='3 cats'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[3-5] cats&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I saw 5 cats on my way home. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(4, 8), match='5 cats'&gt;
</code></pre><p>If you try to specify a value outside the range, you can confirm that the return value is None.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[3-5] cats&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I saw 6 cats on my way home. &#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>You can use not only half-width but also full-width numbers.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[3-5] cats&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I saw 3 cats on my way home. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(4, 8), match='3 cats'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[3-5] cats&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I saw 5 cats on my way home. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(4, 8), match='5 cats'&gt;
</code></pre><p>What should I do if I want to support both half-width and full-width?
In such a case, the range can be specified continuously, such as <code>[3-53-5]</code>.</p>
<p>The sample below will hit you in either half-width or full-width.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[3-53-5] cats&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I saw 3 cats on my way home. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(4, 8), match='3 cats'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[3-53-5] cats&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I saw 3 cats on my way home. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(4, 8), match='3 cats'&gt;
</code></pre><p>Next is the alphabet. Like numbers, you can use expressions such as <code>a-z</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[b-d]at&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='cat'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[b-d]at&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='bat'&gt;
</code></pre><p>You can set capital letters and full-width cases in the same way as numbers.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[B-D]at&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='Cat'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[BD]AT&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;CAT&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='CAT'&gt;
</code></pre><p>It is also possible to set each combination such as numerical value and alphabet.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[a-zA-Z0-9]&#39;</span> on paper,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;D was written on the paper. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 4), match='D on paper'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[a-zA-Z0-9]&#39;</span> on paper,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;It was written as 8 on the paper. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 4), match='8 on paper'&gt;
</code></pre><h1 id="hiragana-range-setting">Hiragana range setting</h1>
<p>Hiragana can be specified by specifying a Unicode code number.</p>
<p>In Python, characters with Unicode code numbers can be represented as <code>\u&lt;Unicode number&gt;</code>.
For example, &ldquo;a&rdquo; can be expressed as <code>\u3042</code>, and &ldquo;ka&rdquo; can be expressed as <code>\u304B</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\u3042</span><span style="color:#e6db74">&#39;</span>)

Ah

<span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\u304B</span><span style="color:#e6db74">&#39;</span>)

Or
</code></pre></div><p>The definition of each Unicode code and the hiragana allocation range are summarized in Wikipedia.
<a href="https://en.wikipedia.org/wiki/%E5%B9%B3%E4%BB%AE%E5%90%8D_(Unicode%E3%81%AE%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF)">Hiragana (Unicode block)-Wikipedia</a></p>
<p>When specifying the range, you can correspond by specifying a pattern such as <code>[\u3040]-[\u309F]</code>. However, if you treat it as a raw character (r symbol), it will not be recognized (the code number will be set as it is), so you need to insert the Unicode code with format or <code>%</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;&#34;[{hiragana_start}-{hiragana_end}]&#34; on paper&#39;</span><span style="color:#f92672">.</span>format(
    hiragana_start<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\u3040</span><span style="color:#e6db74">&#39;</span>,
    hiragana_end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\u309F</span><span style="color:#e6db74">&#39;</span>,
)
<span style="color:#66d9ef">print</span>(pattern)
</code></pre></div><pre><code>&quot;[぀-ゟ]&quot; on the paper
</code></pre><ul>
<li>The range of hiragana is from <code>\u3040</code> to <code>\u309F</code>, but it seems that <code>\u3040</code> is unallocated and is displayed with a symbol (so-called tofu) that is displayed when garbled characters such as <code>぀</code>. Will be done. There is no actual harm.</li>
</ul>
<p><a href="http://www.standby-media.jp/news/000074">What is the garbled phenomenon &ldquo;tofu&rdquo;? </a></p>
<p>When I try it, it surely recognizes the hiragana part.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span>pattern,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;The character &#34;ka&#34; was written on the paper. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 6), match='is' on paper'&gt;
</code></pre><p>It is also possible to directly specify the characters without specifying the Unicode code in the pattern.
For example, if you want to specify the range of &ldquo;aaaaaaaueo&rdquo;, you can do as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;&#34;[aa-o]&#34;&#34; on paper&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;The letter &#34;U&#34; was written on the paper. &#39;</span>)
</code></pre></div><p>*The Unicode order is <code>a→a→i→i→...→o</code>.</p>
<p>You can confirm that it will not hit properly if you specify something outside the range.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;&#34;[aa-o]&#34;&#34; on paper&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;The character &#34;ka&#34; was written on the paper. &#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><h1 id="katakana-range-setting">Katakana range setting</h1>
<p>Katakana can be set in the same way as hiragana just by changing the Unicode code range.</p>
<p>The range of katakana is from <code>\u30A0</code> to <code>\u30FF</code>.</p>
<p><a href="https://en.wikipedia.org/wiki/%E7%89%87%E4%BB%AE%E5%90%8D_(Unicode%E3%81%AE%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF)">Katakana (Unicode block)</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;&#34;[{katakana_start}-{katakana_end}]&#34; on paper&#39;</span><span style="color:#f92672">.</span>format(
    katakana_start<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\u30A0</span><span style="color:#e6db74">&#39;</span>,
    katakana_end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\u30FF</span><span style="color:#e6db74">&#39;</span>,
)

re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span>pattern,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;The letter &#34;ga&#34; was written on the paper. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 6), match='Paper on paper'&gt;
</code></pre><p>#Kanji range setting</p>
<p>Unicode includes more than 60,000 Kanji characters in total.
There are various ranges to specify, so it is more complicated than hiragana and katakana.</p>
<p>In terms of handling only Japanese, it seems to be good to cover the definition of CJK integrated Kanji when covering the main Kanji.</p>
<blockquote>
<p>In CJK integrated kanji, among kanji used in Chinese, Japanese, and Korean, those that have similar glyphs and meanings are treated as the same kanji. For this reason, it has been pointed out that there is an inconvenience when it is desired to mix Chinese into Japanese sentences. In Unicode, 65,536 kinds of characters can be assigned in total, but CJK integrated Kanji uses 20,902 of these characters.
<a href="https://kotobank.jp/word/CJK%E7%B5%B1%E5%90%88%E6%BC%A2%E5%AD%97-3928">CJK Integrated Kanji</a></p>
</blockquote>
<p>The range of CJK integrated kanji Unicode is <code>\u4E00</code> to <code>\u9FFF</code> (Reference: <a href="https://en.wikipedia.org/wiki/CJK%E7%B5%B1%E5%90%88%E6%BC%A2%E5%AD%97">CJK integrated kanji-Wikipedia</a>).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;&#34;[{kanji_start}-{kanji_end}]&#34;&#39;</span><span style="color:#f92672">.</span>format(
    kanji_start<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\u4E00</span><span style="color:#e6db74">&#39;</span>,
    kanji_end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\u9FFF</span><span style="color:#e6db74">&#39;</span>,
)

re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span>pattern,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;The letter &#34;cat&#34; was written on the paper. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 6), match='Paper on paper'&gt;
</code></pre><p>It seems to be as follows when all the kanji related items are combined. Oita is long.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#e6db74">&#39;[</span><span style="color:#ae81ff">\u2E80</span><span style="color:#e6db74">-</span><span style="color:#ae81ff">\u2FDF\u3005</span><span style="color:#e6db74">-</span><span style="color:#ae81ff">\u3007\u3400</span><span style="color:#e6db74">-</span><span style="color:#ae81ff">\u4DBF\u4E00</span><span style="color:#e6db74">-</span><span style="color:#ae81ff">\u9FFF\uF900</span><span style="color:#e6db74">-</span><span style="color:#ae81ff">\uFAFF\U00020000</span><span style="color:#e6db74">-</span><span style="color:#ae81ff">\U0002EBEF</span><span style="color:#e6db74">]+&#39;</span>
<span style="color:#e6db74">``</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#f92672">*</span> Quoted <span style="color:#f92672">from</span> [Judge, extract, <span style="color:#f92672">and</span> count kanji, hiragana, katakana, <span style="color:#f92672">and</span> alphanumeric characters using Python regular expressions](https:<span style="color:#f92672">//</span>note<span style="color:#f92672">.</span>nkmk<span style="color:#f92672">.</span>me<span style="color:#f92672">/</span>python<span style="color:#f92672">-</span>re<span style="color:#f92672">-</span>regex<span style="color:#f92672">-</span>character<span style="color:#f92672">-</span>type<span style="color:#f92672">/</span>)<span style="color:#f92672">.</span>


OR condition <span style="color:#66d9ef">with</span> specific character range rule using <span style="color:#75715e"># negation</span>

Now let<span style="color:#e6db74">&#39;s consider the negative condition.</span>
In the case of a single character pattern <span style="color:#66d9ef">with</span> brackets of <span style="color:#e6db74">`[]`</span>, you can set it by putting a <span style="color:#e6db74">`^`</span> symbol (caret symbol) after <span style="color:#e6db74">`[`</span><span style="color:#f92672">.</span>

Below <span style="color:#f92672">is</span> a sample that does <span style="color:#f92672">not</span> hit <span style="color:#66d9ef">with</span> <span style="color:#e6db74">`dog`</span> <span style="color:#f92672">and</span> <span style="color:#e6db74">`rabbit`</span>, but hits when a character <span style="color:#f92672">not</span> specified <span style="color:#f92672">in</span> the pattern (<span style="color:#e6db74">`cat`</span> this time) <span style="color:#f92672">is</span> specified<span style="color:#f92672">.</span>

<span style="color:#e6db74">``</span><span style="color:#960050;background-color:#1e0010">`</span>py
match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am [^Inu Usagi]. &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 8), match='I am a cat. '&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am [^Inu Usagi]. &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a rabbit. I have no name yet. &#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><h1 id="make-any-character-hit-dot-symbol-">Make any character hit: dot symbol <code>.</code></h1>
<p>You can use the dot symbol in the pattern to hit any single character (default is except line breaks).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am. &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 8), match='I am a cat. '&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am. &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a dog. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 8), match='I am a dog. '&gt;
</code></pre><p>The same applies to other range specifications, etc., but by writing them in succession, the number of characters will be hit. For example, if you write <code>...</code>, you can hit with any 3 characters.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am... &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a stray cat. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 10), match='I am a stray cat. '&gt;
</code></pre><p>If the number of characters does not match, there will be no hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am... &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>By default, newlines (<code>\n</code>, etc.) do not hit with dots.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am a cat. &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I&#39;</span>m a cat<span style="color:#f92672">.</span> I have no name yet<span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;)</span>

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>However, it is possible to adjust the line breaks by adjusting the flag settings described later.</p>
<h1 id="numeric-range-alternatives-d-and-d">Numeric range alternatives: <code>\d</code> and <code>\D</code></h1>
<p>If you use the notation <code>\d</code> instead of the notation <code>[0-90-9]</code> in the pattern, it will hit the numeric characters. The description is simpler than specifying by range.</p>
<p>Both half-width and full-width hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d cats&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;3 cats were sleeping in the park. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 4), match='3 cats'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d cats&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Three cats were sleeping in the park. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 4), match='3 cats'&gt;
</code></pre><p>It will not hit if it is not a value.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d cats&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Three cats were sleeping in the park. &#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>When I was expressing it in the brackets of <code>[]</code>, I could express the negative pattern in the form of <code>[^345]</code> using the caret symbol <code>^</code>.
If you want to express a pattern other than a number with a writing method like <code>\d</code> notation, use uppercase <code>\D</code>.</p>
<p>Contrary to the above, hit with Kanji etc. as shown below, and the numerical value will not hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\D cats&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Three cats were sleeping in the park. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 4), match='Three cats'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\D cats&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;3 cats were sleeping in the park. &#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><h1 id="handle-spaces-line-breaks-tabs-etc-collectively-s-and-s">Handle spaces, line breaks, tabs, etc. collectively: <code>\s</code> and <code>\S</code></h1>
<p>Characters such as spaces, line breaks, tabs and spaces can be handled collectively by using the notation <code>\s</code> in the pattern.</p>
<p><strong>Half-width space case:</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I&#39;</span>m \s a cat<span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;,</span>
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 9), match='I am a cat. '&gt;
</code></pre><p><strong>Full-width space case :</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I&#39;</span>m \s a cat<span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;,</span>
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 9), match='I am a \u3000 cat. '&gt;
</code></pre><p>** Case of line breaks: **</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I&#39;</span>m \s a cat<span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;,</span>
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I&#39;</span>m a cat<span style="color:#f92672">.</span> I have no name yet<span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;)</span>
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 9), match='I am a cat. '&gt;
</code></pre><p>** Tab case :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I&#39;</span>m \s a cat<span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;,</span>
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 9), match='I am \t a cat. '&gt;
</code></pre><p>As with the numerical case, you can use the uppercase <code>\S</code> instead of <code>\s</code> for the negative expression.</p>
<p>** Case where half-width space etc. does not hit :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am a \Scat. &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am a \Scat. &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a kitten. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 9), match='I am a kitten. '&gt;
</code></pre><p>#Letters, numbers, and underscore range alternatives: <code>\w</code> and <code>\W</code></p>
<p>If you write <code>\w</code> in the pattern, you can hit any letter, number, or underscore.</p>
<p><strong>Cases that hit numerically :</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;&#34;\w&#34; on paper&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;The paper said &#34;3&#34;. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 6), match='3 on paper'&gt;
</code></pre><p><strong>Cases that hit the alphabet :</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;all \w&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;all become F&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 5), match='Everything is F'&gt;
</code></pre><p>You can hit full-width.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;To be or \w\w\w&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;To be or not to be, that is the question.&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 12), match='To\u3000be\u3000or\u3000not'&gt;
</code></pre><p>In the article on the net, <code>\w</code> was defined as hitting with alphanumeric characters, and it was written in the regular expression book, but strictly speaking, the following definition seems to be correct, so be careful.</p>
<blockquote>
<p><code>\w</code> letters, numbers and underscores
<a href="https://hibiki-press.tech/learn_prog/python/regex_pattern/1099">[Python] Summary of regular expression notation (re module)</a></p>
</blockquote>
<p>Therefore, even non-alphanumeric characters such as <code>cat</code> will normally hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am \w. &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 8), match='I am a cat. '&gt;
</code></pre><p>In addition, it also hits the underscore (underline).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;python\wand\wjavascript&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;python_and_javascript&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 21), match='python_and_javascript'&gt;
</code></pre><p>No other symbols will hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\wsimonritchie_sd&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;My Twitter account ID is @simonritchie_sd. &#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>White space characters such as spaces will not be hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\wand javascript&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;python and javascript&#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>Negation is the same as others, and you can handle it by capitalizing it, such as <code>\W</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\Wand javascript&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;python and javascript&#39;</span>)
</code></pre></div><pre><code class="language-<re.Match" data-lang="<re.Match"></code></pre><p>#Regular quantifier</p>
<p>When you want to specify a condition such as &ldquo;3 arbitrary characters&rdquo;, you can also write it as <code>\d\d\d</code>.</p>
<p>However, the description may be a little complicated depending on the number of items, such as conditions like &ldquo;arbitrary number in the range of n to m times&rdquo; and &ldquo;matching as many times as there are no times&rdquo; Can not correspond to.</p>
<p>In such a case, the regular expression quantifier can be used.</p>
<p><strong>Definition of quantifier :</strong></p>
<blockquote>
<p>In general, part-of-speech is used as adjectives and nouns, as well as adverbs (or equivalent phrases) related to verbs and adjectives such as “how many times” and “multiples”.
<a href="https://ja.wikipedia.org/wiki/%E6%95%B0%E9%87%8F%E8%A9%9E">Quantifier-Wikipedia</a></p>
</blockquote>
<p>In English, it is Quantifier.</p>
<p>We will touch on quantifiers in the following sections.</p>
<p>Option specification of # character</p>
<p>If you want to set the condition &ldquo;OK with or without&rdquo; for a specific character in the pattern, add the quantifier of &ldquo;?&rdquo; after the target character.</p>
<p>For example, if you want to use either <code>cat dog</code> or <code>cat dog rabbit</code> (OK with or without the rabbit character), specify as <code>cat dog rabbit?</code> in the pattern.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat dog rabbit?&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog rabbit&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='cat dog rabbit'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat dog rabbit?&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 2), match='cat dog'&gt;
</code></pre><h1 id="repeat-0-or-more-times-">Repeat 0 or more times: <code>*</code></h1>
<p>Use the asterisk quantifier when you want to match n (non-fixed) repeated parts of a particular string.</p>
<p>For example, if you want to search for consecutive &ldquo;cat&rdquo; characters, set as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat *&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat cat cat dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 5), match='cat cat cat cat cat'&gt;
</code></pre><p>Please note that the definition is &ldquo;0 or more times&rdquo;. For example, even if the character <code>cat</code> is not included as shown below, it will be judged as &ldquo;matched&rdquo; and a Match object will be returned instead of None (the matching part will be an empty string).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat *&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Inu Usagi Usagi&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 0), match=''&gt;
</code></pre><h1 id="repeat-any-number-of-times-more-than-once-">Repeat any number of times more than once: <code>+</code></h1>
<p>It is quite similar in nature to the quantifier with an asterisk (<code>*</code>), but if you want to set the condition &ldquo;more than once&rdquo; instead of 0 or more, use the plus sign quantifier &ldquo;+&rdquo;. At least one does not match without the target character.</p>
<p>As shown below, when an asterisk returns a Match object, None will be returned.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat+&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Inu Usagi Usagi&#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>The behavior when there is one or more target strings is the same as for the quantifier of asterisk.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat+&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat cat cat dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 5), match='cat cat cat cat cat'&gt;
</code></pre><p>#Specify a specific character range</p>
<p>If you want to specify the range from n times to m times, call <code>{n,m}</code>
It&rsquo;s like a slice of an array in Python.</p>
<p>For example, if you want to write a pattern that hits only the characters that are repeated 2 to 4 times, set the pattern as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {2,4}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat cat cat dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 4), match='cat cat cat cat'&gt;
</code></pre><p>As you can see from the Match object of the result, it is set to 2 times or more and 4 times or less, so the match part of the result is up to 4 characters.</p>
<p>Since it is specified more than once, it will not hit if there is only one character.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {2,4}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog&#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>Please note that if you put a space after the comma like <code>{2, 4}</code> like when writing the code of the dictionary, it will not be recognized. There are no errors, etc., and it simply stops hitting.</p>
<p>** Case where the condition that was hit earlier does not hit because there is a space :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {2, 4}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat cat cat dog&#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>In addition to specifying the start and end indexes, the behavior changes according to multiple writing methods, such as array indexes and slices.</p>
<p><strong>Single number case only:</strong></p>
<p>If you enter only a single number in the form <code>{n}</code>, it will only hit if it is fixed and &ldquo;repeated n times&rdquo;.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {3}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='cat cat cat'&gt;
</code></pre><p>If the number of characters does not match, there will be no hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {3}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat dog&#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>** Case with a set of starting values and commas **</p>
<p>If you write <code>{n,}</code> with a start value and a comma after that, the condition is &ldquo;n or more times&rdquo;.</p>
<p>For example, if you specify <code>{3,}</code>, you will get a hit in 3 or more times.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {3,}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='cat cat cat'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {3,}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat cat cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 5), match='cat cat cat cat cat'&gt;
</code></pre><p>It does not hit if the start count is not met.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {3,}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat&#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>** Case of a set of comma and end value :**</p>
<p>If you specify a feeling like <code>{,m}</code> with only comma and end value, &ldquo;the part within m times&rdquo; will be hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {,3}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='cat cat cat'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {,3}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 2), match='cat cat'&gt;
</code></pre><p>If the pattern is repeated more times than specified, the specified number of times will be included in the resulting Match object.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {,3}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat cat cat cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='cat cat cat'&gt;
</code></pre><p>In some cases, you can use the regular expression symbols that have already been prepared, even if you do not specify the <code>{}</code> parentheses as shown below. In such cases, it may be simpler and easier to grasp the meaning by using those symbols.</p>
<p>For example, there are the following cases.</p>
<p><strong>The case of <code>{,1}</code> and <code>?</code> symbols :</strong></p>
<p>The last character is an option (OK with or without). Both <code>{,1}</code> and <code>?</code> symbols have the same behavior.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat dog rabbit {,1}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 2), match='cat dog'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat dog rabbit?&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 2), match='cat dog'&gt;
</code></pre><p><strong>Case of <code>{0,}</code> and <code>*</code> symbols :</strong></p>
<p>Both <code>{0,}</code> and <code>*</code> are also conditions of &ldquo;0 or more repetitions (Match object is returned even if there is no corresponding character)&rdquo;.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {0,}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='cat cat cat'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {0,}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 0), match=''&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat *&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='cat cat cat'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat *&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog&#39;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&lt;</span>re<span style="color:#f92672">.</span>Match object; span<span style="color:#f92672">=</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>), match<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span><span style="color:#f92672">&gt;</span>
</code></pre></div><p><strong>The case of <code>{1,}</code> and <code>+</code> symbols :</strong></p>
<p>The <code>{1,}</code> and <code>+</code> symbols are both conditions for one or more repetitions.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {1,}&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='cat cat cat'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat {1,}&#39;</span>,string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog&#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat+&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='cat cat cat'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat+&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog&#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><h1 id="greedy-quantifiers-and-reluctant-quantifiers">Greedy Quantifiers and Reluctant Quantifiers</h1>
<p>Consider a pattern that begins with the letters <code>cat</code> and ends with the letters <code>cat</code>.
This can be expressed in the pattern <code>cat.+cat</code> by combining the dot sign <code>.</code> that hits any single character and one or more repeated plus signs <code>+</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat.+cat&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Dog Cat Dog Cat Dog Cat Dog Cat Dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(1, 8), match='cat dog cat dog cat dog cat'&gt;
</code></pre><p>The part called <code>cat dog cat dog cat dog dog cat</code> matched. However, looking at the original character string, the character string part &ldquo;cat dog cat&rdquo; also matches the original assumed pattern. The regular expression pattern this time matches the longest possible string.</p>
<p>This kind of behavior is called the greedy property of regular expressions. Or it is called greedy quantifier. As you can see from the fact that when greedy is translated into Japanese, it means &ldquo;greedy&rdquo; or &ldquo;greedy&rdquo;. As much as possible, &ldquo;greedy&rdquo; matches as many characters as possible within the range that matches the pattern. In Python&rsquo;s re module, basically this is the greedy behavior by default.</p>
<p>On the other hand, if you want to set the match result to be as short as possible, such as <code>cat dog cat</code>, you can express by setting the <code>?</code> symbol after repeatedly specifying it. In this sample, it can be supported by putting it after the <code>+</code> symbol that is specified repeatedly.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat.+?cat&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Dog Cat Dog Cat Dog Cat Dog Cat Dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(1, 4), match='cat dog cat'&gt;
</code></pre><p>This property is called English reluctant in the regular expression area.
It means something like &ldquo;modest&rdquo; or &ldquo;quiet&rdquo;. It is also called non-greedy, or it is also called the shortest match.
Also called the minimum quantifier in the reluctant quantifier.</p>
<p>An example of the use of the shortest match is when there are start tags and end tags like HTML tags. For example, when you want to take a part surrounded by <code>&lt;div&gt;</code> tags, you can use the shortest match to extract individual <code>&lt;div&gt;</code> tag parts.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;&lt;div&gt;.+?&lt;/div&gt;&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&lt;div&gt;cat&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;dog&lt;/div&gt;&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 12), match='&lt;div&gt;cat&lt;/div&gt;'&gt;
</code></pre><p>If you keep the greedy designation, various extra parts will match and the expected result will not be obtained.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;&lt;div&gt;.+&lt;/div&gt;&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&lt;div&gt;cat&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;dog&lt;/div&gt;&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 32), match='&lt;div&gt;cat&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;dog&lt;/div&gt;'&gt;
</code></pre><p>Note that this <code>?</code> symbol also means that when used alone, the &ldquo;character option specification (condition that &ldquo;whether or not there is a specific character&rdquo; is OK)&rdquo; is used when it is used alone, as mentioned in the previous section. I will. Be careful because the behavior changes depending on the combination (it will be the shortest match if it is used with a repeat symbol).</p>
<p>Regarding greedy and reluctant, there are differences in performance as well as differences in behavior.
For example, if you set a greedy condition for a long time etc., it will check for the next character &ldquo;as long as the match condition is met&rdquo; and check one character at a time to try to match as many characters as possible. As a result, greedy tends to be slower.</p>
<p>The reluctant (shortest match) has the property that if the minimum is satisfied, the check ends there, so if the pattern is short, the processing is not as slow as greedy.</p>
<h1 id="-symbol-indicating-the-beginning-of-a-line"><code>^</code> symbol indicating the beginning of a line</h1>
<p>If you set the <code>^</code> symbol in the pattern, you get the expression &ldquo;beginning of line&rdquo;.</p>
<p>For example, if you say <code>^cat</code>, it won&rsquo;t hit unless the beginning is <code>cat</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;^cat&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog rabbit&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 1), match='cat'&gt;
</code></pre><p>In the following cases, the line doesn&rsquo;t start with <code>cat</code>, so it won&rsquo;t hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;^cat&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog cat rabbit&#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>Note that, by default, even if it is a multi-line character string, <code>^</code> only applies to the beginning of the character string. For example, even if the beginning of the second line is the character <code>cat</code>, it will not hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;^cat&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog rabbit</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> cat dog&#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>If you want to target multiple lines, you need to specify the flag setting option <code>flags=re.MULTILINE</code>. I&rsquo;ll leave out the details about the flag setting here because I will touch on it later.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;^cat&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog rabbit</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> cat dog&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>MULTILINE)
</code></pre></div><pre><code>&lt;re.Match object; span=(3, 4), match='cat'&gt;
</code></pre><h1 id="-symbol-indicating-the-end-of-line"><code>$</code> symbol indicating the end of line</h1>
<p>In contrast to <code>^</code>, which indicates the beginning of a line, the <code>$</code> symbol indicates &ldquo;end of line.&rdquo; For example, to search for a case where the end of the line is <code>cat</code>, it is as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat$&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog rabbit cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(2, 3), match='cat'&gt;
</code></pre><p>If the specified character does not exist at the end of the line, it will not match.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat $&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog cat rabbit&#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>Also, similar to the case of <code>^</code>, by default the <strong>last line</strong> will match when there are multiple lines. Note that the <code>^</code> symbol only hits the first line, but this is the last line.</p>
<p>** A case where it ends with <code>cat</code> at the end of the line but does not match :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat$&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog rabbit cat</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> dog&#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>** Match case because the last character on the last line is <code>cat</code> :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat $&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog rabbit</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> dog cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(4, 5), match='cat'&gt;
</code></pre><p>Similar to the <code>^</code> symbol, if you want to make a match determination at the end of each line even in the middle of the line, set the flag of <code>flags=re.MULTILINE</code> here.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat$&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog rabbit cat</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> dog&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>MULTILINE)
</code></pre></div><pre><code>&lt;re.Match object; span=(2, 3), match='cat'&gt;
</code></pre><h1 id="b-and-b-representing-word-boundaries"><code>\b</code> and <code>\B</code> representing word boundaries</h1>
<p>The word word boundary seems a little difficult, but it shows whether it is adjacent to the word boundary.</p>
<p>For example, when targeting a character string such as <code>Java tea</code>, the space part becomes the delimiter part. In addition to spaces, symbols etc. are also judged as delimiters.</p>
<p>If you use the pattern <code>Java\b</code>, it will match if the word <code>Java</code> is separated by spaces or symbols, and so on.</p>
<p>** A case that matches because the character after <code>Java</code> is a space delimiter :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;Java\b&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Java tea&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 4), match='Java'&gt;
</code></pre><p>** Case without delimiter after <code>Java</code> and no match :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;Java\b&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;JavaScript&#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p><strong>Matching case since <code>Java</code> is a symbol delimiter :</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;Java\b&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Java?&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 4), match='Java'&gt;
</code></pre><p>In Japanese, words are not separated by spaces (complex morphological analysis is required), so although they are named Word boundary, they are not processed as word boundaries. Punctuation and spaces match as delimiters.</p>
<p>** Case of matching punctuation :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern <span style="color:#f92672">=</span> r <span style="color:#e6db74">&#39;Hello \ b&#39;</span>,
    string <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Hello, It&#39;</span>s nice weather today<span style="color:#e6db74">&#39;)</span>
</code></pre></div><pre><code>&lt;Re.Match object; span = (0, 5), match = 'Hello'&gt;
</code></pre><p>** Space matching case :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern <span style="color:#f92672">=</span> r <span style="color:#e6db74">&#39;Hello \ b&#39;</span>,
    string <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Hello It&#39;</span>s nice weather today<span style="color:#e6db74">&#39;)</span>
</code></pre></div><pre><code>&lt;Re.Match object; span = (0, 5), match = 'Hello'&gt;
</code></pre><p>Similar to the English sample, if the characters are continuous (no delimiter), it will not match.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern <span style="color:#f92672">=</span> r <span style="color:#e6db74">&#39;Hello \ b&#39;</span>,
    string <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Hello It&#39;</span>s nice weather today<span style="color:#e6db74">&#39;)</span>
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
```Negation can be dealt with by capitalizing it like `\B` like other specifications such as `\d`.

The following sample uses `\B` for the pattern, so it matches the opposite case.

```py
match = re.search(
    pattern = r 'Hello \ B',
    string = 'Hello It's nice weather today')
print(match)
</code></pre><pre><code>None
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern <span style="color:#f92672">=</span> r <span style="color:#e6db74">&#39;Hello \ B&#39;</span>,
    string <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Hello It&#39;</span>s nice weather today<span style="color:#e6db74">&#39;)</span>
</code></pre></div><pre><code>&lt;Re.Match object; span = (0, 5), match = 'Hello'&gt;
</code></pre><h1 id="a-and-z-that-match-the-beginning-and-end-of-the-string"><code>\A</code> and <code>\Z</code> that match the beginning and end of the string</h1>
<p>It is close to the symbol <code>^</code> that represents the beginning of a line and the symbol <code>$</code> that represents the end of a line, but <code>\A</code> represents the beginning of the target character string, and <code>\Z</code> represents the target character string. Represents the end of.</p>
<p>Unlike <code>^</code>, even if you specify <code>flags=re.MULTILINE</code> (details will be described later), it will not match at the beginning of the line. For multi-line strings, only the first position is really hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\A cat&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;There was a cat. </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> There was no dog. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 1), match='cat'&gt;
</code></pre><p>Even if <code>flags=re.MULTILINE</code> is specified as shown below, it will not match even if the pattern character is included at the beginning of the second line.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\A cat&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;There was a dog. </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> There was no cat. &#39;</span>,
    flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>MULTILINE)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>Contrary to <code>\A</code>, use <code>\Z</code> if you want to handle the end of the string. Alphabetically, A is first and Z is last.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat\Z&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog dog rabbit</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> rabbit cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(5, 6), match='cat'&gt;
</code></pre><p>So far, we have seen how to write various regular expression patterns and symbols.
From the next section, we will dive deeper into Python&rsquo;s re module.</p>
<h1 id="compile-the-pattern">Compile the pattern</h1>
<p>The pattern argument of the re module can be a compiled pattern or a string. Until now, in the sample, it has been handled by specifying the character string as a whole.</p>
<p>By compiling the pattern, the regular expression engine written in C will do the work. However, if you specify it as a character string, it will not be compiled and slow processing will be done, and even if you specify it as a character string, it will be compiled and processed internally.</p>
<p>To compile the pattern, use the re.compile function as shown below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat.+dog&#39;</span>)
</code></pre></div><p>The compiled pattern has various methods like those in the re module. By using that, unlike when you specified the argument of pattern in the function of the re module, you can process with only the argument of the character string.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern<span style="color:#f92672">.</span>search(string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat dog dog rabbit dog cat cat dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 10), match='cat cat cat dog dog dog dog cat dog dog'&gt;
</code></pre><p>It can also be specified as an argument of the function of the re module.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span>pattern, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat dog dog dog dog cat dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 10), match='cat cat cat dog dog dog dog cat dog dog'&gt;
</code></pre><p>Based on the above, there are three ways to process regular expressions.</p>
<ul>
<li>[1]. Compile the pattern and process with the method of the pattern</li>
<li>[2]. Compile the pattern and specify it as the argument of the re module function.</li>
<li>[3]. Specify the character string in re module</li>
</ul>
<p>[1] to [3] The execution results will be the same. However, the performance seems to differ to some extent with the three methods (though this sample is a nanosecond world, so it is not a big load).</p>
<p>In cases where performance is required, such as when executing on a large data set or a fairly long sentence, it may be better to measure firmly and select the faster one. I think that it is an error if you use it for validation on short strings on a level that you usually use a little, or on websites.</p>
<p>It seems to be early because [1] and [2] are compiled in advance, but even in the case of directly specifying a string as a pattern like [3], the pattern of the compile result is actually automatically generated by Python side. It seems that it will be cached in memory, so the case of simply specifying the character string of [3] will not be slowed down (the first time will take a little time to compile, then the compilation will be skipped and it will be a little faster).</p>
<p>In fact, [3] is faster than [2] in the feeling that I tried a little this time in my environment.</p>
<p>** Case of using method of compiled object of [1] :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">%%</span>timeit
pattern<span style="color:#f92672">.</span>search(string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat dog dog rabbit dog cat cat dog&#39;</span>)
</code></pre></div><pre><code>290 ns ± 15.8 ns per loop (mean ± std.dev. of 7 runs, 1000000 loops each)
</code></pre><p>** Case where the compiled object of [2] is specified as an argument of the function of re module :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">%%</span>timeit
re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span>pattern, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat dog dog dog dog cat dog&#39;</span>)
</code></pre></div><pre><code>995 ns ± 50.9 ns per loop (mean ± std.dev. of 7 runs, 1000000 loops each)
</code></pre><p>** Case where a string is specified in the pattern in the re module of [3] :**</p>
<ul>
<li>Due to cache issues, the Jupyter kernel has been restarted once.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">%%</span>timeit
re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat.+dog&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat dog dog dog dog cat dog&#39;</span>)
</code></pre></div><pre><code>803 ns ± 72.9 ns per loop (mean ± std.dev. of 7 runs, 1000000 loops each)
</code></pre><p>The cached compilation pattern can be cleared with the purge function.
It&rsquo;s a trivial amount of memory, so I think it&rsquo;s basically not used except for cases such as an old PC or a huge number of patterns.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>purge()
</code></pre></div><h1 id="match-function">match function</h1>
<p>The match function is a search function like the search function. Unlike the search function, it will not match if it does not match from the beginning of the character string.</p>
<p><strong>Check from the beginning of the string and match with the pattern so it matches :</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>match(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat dog&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog rabbit cat rabbit&#39;</span>)

<span style="color:#f92672">&lt;</span>re<span style="color:#f92672">.</span>Match object; span<span style="color:#f92672">=</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>), match<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog&#39;</span><span style="color:#f92672">&gt;</span>
</code></pre></div><p><strong>The pattern matches from the middle of the string, but the result is None because it is not from the beginning :</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>match(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat dog&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog cat dog rabbit cat rabbit&#39;</span>)
<span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#66d9ef">print</span>(match)

None
</code></pre></div><p>*There are quite a few cases where the search function called in other languages such as Python corresponds to the match function, so be careful not to accidentally use match as if it were search.</p>
<h1 id="search-function">search function</h1>
<p>I will also dig deep into the search function that I have used in various examples so far.</p>
<p>The search function, unlike match, will match if it matches the pattern even in the middle of the string.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat dog&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog dog cat dog rabbit cat rabbit&#39;</span>)

<span style="color:#f92672">&lt;</span>re<span style="color:#f92672">.</span>Match object; span<span style="color:#f92672">=</span>(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>), match<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog&#39;</span><span style="color:#f92672">&gt;</span>
</code></pre></div><h1 id="findall-function">findall function</h1>
<p>Unlike the search function etc., the findall function returns the execution result as a list of strings, not as a Match object.
It will be a list of the matched number.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>findall(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat dog&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog dog cat dog rabbit dog cat dog&#39;</span>)

[<span style="color:#e6db74">&#39;Cat dog&#39;</span>,<span style="color:#e6db74">&#39;cat dog&#39;</span>,<span style="color:#e6db74">&#39;cat dog&#39;</span>]
</code></pre></div><p>Basically, a list of character strings is returned, but there are cases where the contents of the list become tuple if there are multiple parentheses of group specification <code>()</code> in the pattern.
More about groups in later sections.</p>
<p>If there is one group of <code>()</code> parentheses in the pattern, it remains a list of strings, and if there are two or more, it becomes a tuple list.</p>
<p>** Case where group parenthesis in pattern returns a list of strings:**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>findall(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(cat dog)&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog dog cat dog dog rabbit dog cat dog rabbit&#39;</span>)

[<span style="color:#e6db74">&#39;Cat dog&#39;</span>,<span style="color:#e6db74">&#39;cat dog&#39;</span>,<span style="color:#e6db74">&#39;cat dog&#39;</span>]
</code></pre></div><p>** A case where there are two group brackets in the pattern and a tuple list is returned: **</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>findall(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(cat dog)(dog)&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog dog cat dog dog rabbit dog cat dog rabbit&#39;</span>)
</code></pre></div><pre><code>[('Cat dog','dog'), ('cat dog','dog')]
</code></pre><h1 id="finditer-function">finditer function</h1>
<p>The finditer function, like the findall function, can get all the hits in a string.
The difference is that the findall function returns the result as a list of strings, while the findter function returns an iterable object containing a Match object.</p>
<p>You can get a Match object, which is convenient when you want to get the position of the matching character string.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">iterable <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>finditer(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat dog&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog dog cat dog rabbit dog cat dog&#39;</span>)

<span style="color:#66d9ef">for</span> match <span style="color:#f92672">in</span> iterable:
    <span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 2), match='cat dog'&gt;
&lt;re.Match object; span=(3, 5), match='cat dog'&gt;
&lt;re.Match object; span=(7, 9), match='cat dog'&gt;
</code></pre><p>#fullmatch function</p>
<p>The fullmatch function is judged by whether the pattern matches the entire string.
It does not match if the pattern matches but contains extra strings.For example, it is useful for validation of phone number or email address, even if the format is phone number or email address, but it contains extra character strings.</p>
<p>For example, it can be judged by whether the Match object is returned by checking the format of the phone number as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>fullmatch(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d{2,3}-\d{4}-\d{4}&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;090-1234-5678&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 13), match='090-1234-5678'&gt;
</code></pre><p><code>\d</code> is an arbitrary number, and the brackets of <code>{}</code> are the number of repetitions.</p>
<p>The format matches, but does not match if it contains extra characters, as shown below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>fullmatch(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d{2,3}-\d{4}-\d{4}&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat 090-1234-5678 dog&#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><p>This fullmatch function will be added in Python 3.4 or later. Since 3.4 itself is no longer supported, I think that earlier versions are rarely used, but in the case of old Python versions, match with <code>\Z</code> indicating the last position and the beginning of the string. You can achieve the same thing as the fullmatch function by combining the match functions that are required to do.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>match(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d{2,3}-\d{4}-\d{4}\Z&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;090-1234-5678&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 13), match='090-1234-5678'&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>match(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d{2,3}-\d{4}-\d{4}\Z&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog 090-1234-5678 dog cat&#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><h1 id="handle-the-position-of-the-matched-string">Handle the position of the matched string</h1>
<p>In case you want to handle the matching part of the string, you can use the span method of the Match object.</p>
<p>As shown below, the same value as the span display that is displayed when you output a match object with Jupyter or print it can be obtained with tuple.
The values are the starting and ending index values required for the string slice.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> string <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog dog cat dog rabbit&#39;</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat dog&#39;</span>, string<span style="color:#f92672">=</span>string)
<span style="color:#f92672">&gt;&gt;&gt;</span> match

<span style="color:#f92672">&lt;</span>re<span style="color:#f92672">.</span>Match object; span<span style="color:#f92672">=</span>(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>), match<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog&#39;</span><span style="color:#f92672">&gt;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>span()

(twenty four)
</code></pre></div><p>By specifying the corresponding start and end indexes in the character string slice, you can confirm that they match the corresponding part.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> string[<span style="color:#ae81ff">2</span>:<span style="color:#ae81ff">4</span>]

<span style="color:#e6db74">&#39;cat dog&#39;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> span <span style="color:#f92672">=</span> match<span style="color:#f92672">.</span>span()
<span style="color:#f92672">&gt;&gt;&gt;</span> string[span[<span style="color:#ae81ff">0</span>]:span[<span style="color:#ae81ff">1</span>]]

<span style="color:#e6db74">&#39;cat dog&#39;</span>
</code></pre></div><p>You can also get the index of the string range by using the start method and end method without going through the span method.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>start()

<span style="color:#ae81ff">2</span>

<span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>end()

Four
</code></pre></div><h1 id="split-function">split function</h1>
<p>Like the string split function of the str class, the split function of the re module can specify a pattern to split the string and obtain a list of the results. Unlike the str class, various patterns of regular expressions can be used here. The result is returned as a list of strings.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>split(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat 1 cat 2 cat 3 cat&#39;</span>)

[<span style="color:#e6db74">&#39;Cat&#39;</span>,<span style="color:#e6db74">&#39;cat&#39;</span>,<span style="color:#e6db74">&#39;cat&#39;</span>,<span style="color:#e6db74">&#39;cat&#39;</span>]
</code></pre></div><p>You can set the maximum number of splits by specifying the maxsplit argument. If omitted, everything will be split as much as possible.
If set, it will remain undivided after the maximum number is reached.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>split(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat 1 cat 2 cat 3 cat&#39;</span>, maxsplit<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)

[<span style="color:#e6db74">&#39;Cat&#39;</span>,<span style="color:#e6db74">&#39;cat&#39;</span>,<span style="color:#e6db74">&#39;cat 3 cat&#39;</span>]
</code></pre></div><h1 id="sub-function">sub function</h1>
<p>The sub function allows you to replace strings using regular expression patterns.
It is an abbreviation for the word substitute in English, and means &ldquo;change&rdquo; or &ldquo;replace.&rdquo;</p>
<p>Specify the character string after replacement in the argument of repl (replacement).</p>
<p><strong>Sample to replace arbitrary number (<code>\d</code>) with hyphen :</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>sub(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d&#39;</span>, repl<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;-&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat 1 cat 2 cat 3 cat&#39;</span>)

<span style="color:#e6db74">&#39;Cat-cat-cat-cat&#39;</span>
</code></pre></div><p>You can specify the maximum number of replacements by specifying the count argument. If omitted, all parts of the corresponding pattern will be replaced.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>sub(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d&#39;</span>, repl<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;-&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat 1 cat 2 cat 3 cat&#39;</span>, count<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)

<span style="color:#e6db74">&#34;Cat-Cat-Cat 3 Cat&#34;</span>
</code></pre></div><p>You can also specify a function instead of a string in the repl argument. The corresponding function must receive a Match object as the first argument, and the return value must have a format that specifies the character string after replacement.</p>
<p><strong>Sample that specifies the function that replaces the numeric part (<code>\d</code>) with alphabet in repl argument :</strong></p>
<ul>
<li>As I will explain in detail in the section of group setting, if you want to get the matched part in the Match object, you can get it by doing <code>group(0)</code>.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">digit_to_alphabet</span>(match):
    matched_str <span style="color:#f92672">=</span> match<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">0</span>)
    <span style="color:#66d9ef">if</span> matched_str <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;1&#39;</span>:
        <span style="color:#66d9ef">return</span><span style="color:#e6db74">&#39;A&#39;</span>
    <span style="color:#66d9ef">if</span> matched_str <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;2&#39;</span>:
        <span style="color:#66d9ef">return</span><span style="color:#e6db74">&#39;B&#39;</span>
    
    <span style="color:#66d9ef">return</span><span style="color:#e6db74">&#39;C&#39;</span>


re<span style="color:#f92672">.</span>sub(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d&#39;</span>, repl<span style="color:#f92672">=</span>digit_to_alphabet, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat 1 cat 2 cat 3 cat&#39;</span>)
</code></pre></div><pre><code>&quot;Cat A Cat B Cat C Cat&quot;
</code></pre><h1 id="subn-function">subn function</h1>
<p>The subn function behaves much like the sub function. The difference is that the return value of the sub function is returned as a character string after replacement, whereas the subn function returns the replaced character string and the number of replaced items as tuple.</p>
<p>** Case where the numerical value (<code>\d</code>) is replaced in three places :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>subn(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d&#39;</span>, repl<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;-&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat 1 cat 2 cat 3 cat&#39;</span>)

(<span style="color:#e6db74">&#39;Cat-cat-cat-cat&#39;</span>, <span style="color:#ae81ff">3</span>)
</code></pre></div><p>So far we have seen each of the main functions. We&rsquo;ll talk about flagging from the next section.</p>
<h1 id="regarding-flag-setting-of-each-function">Regarding flag setting of each function</h1>
<p>In many cases, each regular expression function accepts an argument called flags as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;^dog&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">dog</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">rabbit&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>MULTILINE)

<span style="color:#f92672">&lt;</span>re<span style="color:#f92672">.</span>Match object; span<span style="color:#f92672">=</span>(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>), match<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog&#39;</span><span style="color:#f92672">&gt;</span>
</code></pre></div><p>You can switch the regular expression processing from the default by specifying the constant provided in this argument.</p>
<p>In the following sections, we will delve into the major constants of each of the flags provided.</p>
<p>I mentioned in the previous section that if you directly specify a character string in the pattern with the re module function, it will be automatically compiled and cached internally.</p>
<p>If the value of the flag is changed, even if the pattern character strings are together, they will be judged as different patterns and will be cached separately.
Although speed and memory are slight differences, keep in mind that point when handling a large number of patterns on a large scale.</p>
<h1 id="case-insensitive-flag-setting">Case insensitive flag setting</h1>
<p>By default, search etc. are checked with case sensitivity.</p>
<p><strong>Sample that matches the pattern only in lowercase :</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>findall(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;abc&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;abcABC&#39;</span>)

[<span style="color:#e6db74">&#39;abc&#39;</span>]
</code></pre></div><p>If you want it to be case insensitive, you can set it by setting the <code>re.IGNORECASE</code> flag.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>findall(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;abc&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;abcABC&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>IGNORECASE)

[<span style="color:#e6db74">&#39;abc&#39;</span>,<span style="color:#e6db74">&#39;ABC&#39;</span>]
</code></pre></div><p>Alternatively, a constant called <code>re.I</code> is available as an abbreviation. Whichever you use, the behavior will be the same.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>findall(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;abc&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;abcABC&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>I)

[<span style="color:#e6db74">&#39;abc&#39;</span>,<span style="color:#e6db74">&#39;ABC&#39;</span>]
</code></pre></div><h1 id="set-a-flag-to-target-a-multi-line-string-to-a-pattern">Set a flag to target a multi-line string to a pattern</h1>
<p>By default, the <code>^</code> symbol at the beginning of a line and the <code>$</code> at the end of a line are checked only on the first or last line.</p>
<p><strong>Because the <code>^</code> symbol that specifies the beginning of the line is included in the pattern, only one case can be matched :</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>findall(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;^cat dog&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog rabbit</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> cat dog rabbit</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> cat dog rabbit&#39;</span>)

[<span style="color:#e6db74">&#39;cat dog&#39;</span>]
</code></pre></div><p>If you want the <code>^</code> and <code>$</code> specifications to be judged &ldquo;line by line&rdquo;, specify the <code>re.MULTILINE</code> constant in the flag settings.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>findall(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;^cat dog&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog rabbit</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> cat dog rabbit</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> cat dog rabbit&#39;</span>,
    flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>MULTILINE)
</code></pre></div><pre><code>['Cat dog','cat dog','cat dog']
</code></pre><p>As an abbreviation, <code>re.M</code> constants are also available.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>findall(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;^cat dog&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat dog rabbit</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> cat dog rabbit</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> cat dog rabbit&#39;</span>,
    flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>M)
</code></pre></div><pre><code>['Cat dog','cat dog','cat dog']
</code></pre><p>Flag to include line breaks with the # dot symbol</p>
<p>The dot symbol <code>.</code> in the pattern is used as &ldquo;any one character&rdquo;. However, only line breaks are excluded by default.</p>
<p>** Case where the dot does not match because the specified point is a new line :**</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat.dog.rabbit&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">dog</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">rabbit&#39;</span>)
<span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#66d9ef">print</span>(match)

None
</code></pre></div><p>If you want to switch the dot symbol to include line breaks, specify <code>re.DOTALL</code> in the flag settings. It&rsquo;s like DOTALL because &ldquo;dots will be applicable to everything including line breaks&rdquo;.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat.dog.rabbit&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">dog</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">rabbit&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>DOTALL)<span style="color:#f92672">&lt;</span>re<span style="color:#f92672">.</span>Match object; span<span style="color:#f92672">=</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>), match<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> dog</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> rabbit&#39;</span><span style="color:#f92672">&gt;</span>
</code></pre></div><p>As abbreviation, the constant <code>re.S</code> is prepared.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat.dog.rabbit&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">dog</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">rabbit&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>S)

<span style="color:#f92672">&lt;</span>re<span style="color:#f92672">.</span>Match object; span<span style="color:#f92672">=</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>), match<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> dog</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> rabbit&#39;</span><span style="color:#f92672">&gt;</span>
</code></pre></div><h1 id="set-flag-to-display-detailed-information-of-pattern">Set flag to display detailed information of pattern</h1>
<p>If you want to check what the defined pattern looks like, or if the defined pattern is too slow&hellip; If you specify a constant of <code>re.DEBUG</code> in the flag setting, various pattern information will be displayed. It looks like</p>
<p>I&rsquo;m not so familiar with perl to that extent, but it seems to be the Python version of the one that displays information when you write <code>use re'debug';</code> in perl (Reference: <a href="https://stackoverflow.com/questions/606350/how-can-i-debug-a-regular-expression-in-python">How can I debug a regular expression in Python?</a>).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;abc&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>DEBUG)
</code></pre></div><pre><code>LITERAL 97
LITERAL 98
LITERAL 99

 0.INFO 12 0b11 3 3 (to 13)
      prefix_skip 3
      prefix [0x61, 0x62, 0x63]('abc')
      overlap [0, 0, 0]
13: LITERAL 0x61 ('a')
15. LITERAL 0x62 ('b')
17. LITERAL 0x63 ('c')
19. SUCCESS
</code></pre><p>It was displayed in various ways. I haven&rsquo;t grasped all of it, even if I looked it up in the official Python documentation, because it only has the following light explanations.</p>
<blockquote>
<p>Display debug information about compiled expressions. There is no corresponding inline flag.
<a href="https://docs.python.org/ja/3.8/library/re.html">re &mdash; Regular expression operation</a></p>
</blockquote>
<p>Therefore, I will not go deep into it (because it is hard to find out), but I will try to find out to some extent.</p>
<p>Information is displayed in different expressions above and below the blank line, but this time only the upper part will be touched.</p>
<p>In the above sample, it is the following <code>LITERAL &lt;number&gt;</code>.</p>
<pre><code>LITERAL 97
LITERAL 98
LITERAL 99
</code></pre><p>The numbers such as 97 and 98 are called code points in Unicode.</p>
<blockquote>
<p>A code point is a point at which a character is assigned, and depending on the standard, something other than the intended character such as escape may be assigned in addition to the actual assignment of the character.
&hellip;
The code space can be one-dimensional or multi-dimensional. The code points therein are specified by an integer string corresponding to the coordinates. When the code space is one-dimensional like Unicode, it is an integer sequence of length 1, that is, one integer. In Unicode terms it is called a &ldquo;Unicode scalar value&rdquo;.
<a href="https://en.wikipedia.org/wiki/%E7%AC%A6%E5%8F%B7%E7%82%B9">Code Point-wikipedia</a></p>
</blockquote>
<p>In the case of Unicode, I think that it is okay for the time being with the recognition such as the ID assigned to each character.</p>
<p>In Python, you can get the code point of any character with the built-in ord function.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> ord(<span style="color:#e6db74">&#39;a&#39;</span>)
<span style="color:#ae81ff">97</span>

<span style="color:#f92672">&gt;&gt;&gt;</span> ord(<span style="color:#e6db74">&#39;b&#39;</span>)
<span style="color:#ae81ff">98</span>

<span style="color:#f92672">&gt;&gt;&gt;</span> ord (<span style="color:#e6db74">&#39;cat&#39;</span>)
<span style="color:#ae81ff">29483</span>
</code></pre></div><p>The upper part of the information displayed by <code>re.DEBUG</code> shows how the regular expression pattern is checked from above like code.</p>
<p>That is,</p>
<ul>
<li><code>LITERAL 97</code> -&gt; Whether the character is&rsquo;a&rsquo;</li>
<li><code>LITERAL 98</code> -&gt; whether character is&rsquo;b&rsquo;</li>
<li><code>LITERAL 99</code> -&gt; whether the character is&rsquo;c&rsquo;</li>
</ul>
<p>Things like that will be processed in order from the top.</p>
<p>I will try other ones. Let&rsquo;s specify the pattern using the brackets of <code>[]</code> that &ldquo;matches any character&rdquo; and <code>a-c</code> that represents &ldquo;character range from a to c&rdquo;.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;[a-c]&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>DEBUG)
</code></pre></div><pre><code>IN
  RANGE (97, 99)

 0.INFO 8 0b100 1 1 (to 9)
      in
 5.RANGE 0x61 0x63 ('a'-'c')
 8.FAILURE
 9: IN 5 (to 15)
11.RANGE 0x61 0x63 ('a'-'c')
14.FAILURE
15: SUCCESS
</code></pre><p>The information above is</p>
<pre><code>IN
  RANGE (97, 99)
</code></pre><p>Has changed to. The <code>IN</code> thing is almost the same as Python&rsquo;s in specification, SQL IN, or Pandas&rsquo;s isin thing.
It is a judgment such as whether it is included in a certain range.
<code>RANGE</code> indicates the range of target code points.
If you write it in Python, it will be similar to the following.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#ae81ff">98</span> <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">97</span>, <span style="color:#ae81ff">100</span>)

True
</code></pre></div><p>Now let&rsquo;s specify <code>\d</code>, which represents an arbitrary number.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>DEBUG)
</code></pre></div><pre><code>IN
  CATEGORY CATEGORY_DIGIT

 0.INFO 7 0b100 1 1 (to 8)
      in
 5. CATEGORY UNI_DIGIT
 7.FAILURE
 8: IN 4 (to 13)
10. CATEGORY UNI_DIGIT
12.FAILURE
13: SUCCESS
</code></pre><p>Next time</p>
<pre><code>IN
  CATEGORY CATEGORY_DIGIT
</code></pre><p>It became contents such as. Is it something like &ldquo;whether it is included in the numerical category&rdquo;?</p>
<p>Next, let&rsquo;s specify a pattern using the dot <code>.</code> symbol that represents &ldquo;arbitrary character&rdquo;.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;a.&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>DEBUG)
</code></pre></div><pre><code>LITERAL 97
ANY None

 0.INFO 8 0b1 2 2 (to 9)
 ...
</code></pre><p>This time, the word <code>ANY</code> came out. Is it something like &ldquo;any character string&rdquo;?</p>
<p>Next, let&rsquo;s specify the <code>+</code> symbol that represents &ldquo;one or more repetitions&rdquo;.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;a+&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>DEBUG)
</code></pre></div><pre><code>MAX_REPEAT 1 MAXREPEAT
  LITERAL 97
...
</code></pre><p>The word MAX_REPEAT came out. This is an explanation of the behavior of &ldquo;checking repeatedly as long as possible&rdquo; as mentioned in the section of the greedy quantifier. It is similar to a loop in a for statement in Python.</p>
<p>The following <code>1 MAXREPEAT</code> part will probably be information such as &ldquo;at least once&rdquo; to &ldquo;repeat for the constant value MAXREPEAT&rdquo;.
It looks like <code>MAX_REPEAT</code> and <code>MAXREPEAT</code> are somehow similar, so I get confused when I first see it&hellip;
Older ones such as Python 2 will repeat in the range of 1 to 4294967295, such as <code>1 4294967295</code>. Since it became Python 3 series, there was no limit on the number of repetitions, so it became <code>MAX REPEAT</code> &hellip; Is it such a situation? I couldn&rsquo;t find any material, so that area is vague.</p>
<p>If you specify <code>*</code>, which is &ldquo;0 or more repetitions&rdquo;, instead of the <code>+</code> symbol, the part called <code>1 MAXREPEAT</code> becomes <code>0 MAXREPEAT</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;a*&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>DEBUG)
</code></pre></div><pre><code>MAX_REPEAT 0 MAXREPEAT
  LITERAL 97
...
</code></pre><p>Also, if you add the <code>?</code> symbol as the shortest match (reluctant), you can see that the <code>MAX_REPEAT</code> part becomes <code>MIN_REPEAT</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;a+?&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>DEBUG)
</code></pre></div><pre><code>MIN_REPEAT 1 MAXREPEAT
  LITERAL 97
</code></pre><p>As a more complicated pattern, try nesting the <code>()</code> description of groups (though we&rsquo;ll cover groups in more detail in a later section).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;([a-z]+([0-9]+))&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>DEBUG)
</code></pre></div><pre><code>SUBPATTERN 1 0 0
  MAX_REPEAT 1 MAXREPEAT
    IN
      RANGE (97, 122)
  SUBPATTERN 2 0 0
    MAX_REPEAT 1 MAXREPEAT
      IN
        RANGE (48, 57)
...
</code></pre><p>Somehow the indentation is increasing. If you nest a loop in Python, the calculation time will increase exponentially, and if the result displayed like this regular expression has deep indentation (especially, the number of characters increases. Since the processing time of regular expressions will be bloated, it will be necessary to pay attention and consideration.</p>
<p>In this way, using the <code>re.DEBUG</code> flag setting, you can check the structure like a code for the parts that are difficult to understand by just looking at the regular expression pattern. This is useful for performance tuning etc. in the case where a large amount of character strings etc. have to be processed.</p>
<h1 id="to-set-multiple-flags-at-the-same-time">To set multiple flags at the same time</h1>
<p>We have seen the main flag settings in the previous section, but as you can see from the fact that the argument name is <code>flags</code> instead of <code>flag</code>, multiple flag settings can be set at the same time.</p>
<p>In that case, you can set it by putting the <code>|</code> symbol between multiple flags.</p>
<p><strong>Sample that sets both the flag <code>re.MULTILINE</code> for multiple lines and the flag <code>re.DOTALL</code> that also targets line breaks by specifying dots:</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;^cat.^dog&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> dog</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74"> rabbit&#39;</span>,
    flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>MULTILINE<span style="color:#f92672">|</span>re<span style="color:#f92672">.</span>DOTALL)
</code></pre></div><pre><code class="language-<re.Match" data-lang="<re.Match"></code></pre><h1 id="about-regular-expression-groups">About regular expression groups</h1>
<p>From this section we&rsquo;ll touch on groups of regular expressions.</p>
<p>By using groups, you can extract only a part of the matched pattern or use the extracted part in other processing such as regular expressions.</p>
<p>#The basics of writing groups and the group method of the Match object</p>
<p>Use the brackets of <code>()</code> to specify the group. <code>Cat (.) dog</code> group You can set it by enclosing the part you want to set with <code>()</code>.</p>
<p>Taking the pattern <code>cat (.) dog</code> as an example, the dot <code>.</code> part of any character surrounded by the characters cat and dog is enclosed in brackets of <code>()</code>, so the middle The dot part of is a group.</p>
<p>Even if a group is set, the basics of Match objects (span and match parts) do not change.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;cat (.) dog&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;fox cat rabbit dog wolf&#39;</span>)

match
</code></pre></div><pre><code>&lt;re.Match object; span=(1, 4), match='cat rabbit dog'&gt;
</code></pre><p>Use the Match object&rsquo;s group method to retrieve group data.
For the argument, specify the index value of the group as an integer.
The behavior of the argument is</p>
<ul>
<li>0 -&gt; whole string of matched parts</li>
<li>1 -&gt; first group part</li>
<li>2 -&gt; second group part</li>
<li>&hellip;</li>
</ul>
<p>It will be in the form of.
If you omit the argument or specify 0 in the first argument, the entire character string of the matched part is returned.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>group()

<span style="color:#e6db74">&#34;Cat rabbit dog&#34;</span>

<span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">0</span>)

<span style="color:#e6db74">&#34;Cat rabbit dog&#34;</span>
</code></pre></div><p>If you specify 1 or more in the argument, you can get the values of the first and subsequent groups.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">1</span>)

<span style="color:#e6db74">&#39;rabbit&#39;</span>
</code></pre></div><p>If you want to set multiple groups, you can use multiple brackets of <code>()</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.) cat (.) dog (.)&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;fox cat rabbit dog wolf&#39;</span>)
</code></pre></div><p>When you get it by group method, you can get it by setting 1, 2, 3&hellip; in order.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">1</span>)

<span style="color:#e6db74">&#39;fox&#39;</span>

<span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">2</span>)

<span style="color:#e6db74">&#39;rabbit&#39;</span>

<span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">3</span>)

<span style="color:#e6db74">&#39;wolf&#39;</span>
</code></pre></div><p>You can also specify multiple arguments at the same time. In that case, the values of multiple groups will be returned in tuple.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>)

(<span style="color:#e6db74">&#39;Fox&#39;</span>,<span style="color:#e6db74">&#39;Wolf&#39;</span>)
</code></pre></div><p>If you want to specify the index with a variable such as list or tuple, you can expand the list or tuple as an argument on the Python side by adding the <code>*</code> symbol when specifying the argument.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> group_index_list <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>]
<span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>group(<span style="color:#f92672">*</span>group_index_list)

(<span style="color:#e6db74">&#39;Fox&#39;</span>,<span style="color:#e6db74">&#39;Wolf&#39;</span>)
</code></pre></div><p>#Match object groups method</p>
<p>With the groups method, you can get a list of the resulting strings for the configured groups.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.) cat (.) dog (.)&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;fox cat rabbit dog wolf&#39;</span>)

match<span style="color:#f92672">.</span>groups()
</code></pre></div><pre><code>('Fox','rabbit','wolf')
</code></pre><p>You can specify a default value when the group part is empty by specifying an optional argument named default.
If there is no hit in the group in the first place, the Match object itself may not return? However, if you use the <code>?</code> symbol with &ldquo;with or without&rdquo; as in <code>(.)?</code>, the Match object will return even if there is no group part. , The default value is reflected in such cases.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.) cat (.) dog (.)?&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;fox cat rabbit dog&#39;</span>)

match<span style="color:#f92672">.</span>groups(default<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sheep&#39;</span>)
</code></pre></div><pre><code>('Fox','rabbit','sheep')
</code></pre><p>Group brackets are also used when specifying the OR condition of # character strings, etc.</p>
<p>Well before, I introduced that when specifying the OR condition of a character string, it is expressed as <code>(&lt;character string 1&gt;|&lt;character string 2&gt;|&lt;character string N&gt;)</code>.
For example, if you want to accept if it is either a <code>cat</code> or a <code>dog</code>, the description is as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am (a cat | a dog). &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 8), match='I am a cat. '&gt;
</code></pre><p>As you can see from the format, <code>()</code> parentheses are used as well as the group specification.
Even if you use the parentheses of <code>()</code> in the OR condition, you can get the value from the resulting Match object by the group method etc. by default.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am (a cat | a dog). &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)

match<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">1</span>)
</code></pre></div><pre><code>&quot;I'm a cat&quot;
</code></pre><p>When using parentheses of <code>()</code> in OR condition etc., I think that processing of groups is basically unnecessary in most cases. On the other hand, by default, the processing of the group is executed, so there is a lot of waste and performance is slow.</p>
<h1 id="disable-group-processing-when-using-group-brackets">Disable group processing when using group brackets</h1>
<p>In the previous section, the parentheses of <code>()</code> are used for things other than extracting the character string at a specific place in the group such as the OR condition, and at that time the processing of the group is executed and it may be a processing load. I touched a point.</p>
<p>When you want to improve performance by disabling the process of extracting strings in groups, you can add <code>?:</code> immediately after <code>(</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am (?: cat | dog). &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>)
</code></pre></div><p>With <code>?:</code> specified, if you try to access a group such as <code>.group(1)</code> with the Match object, you can see that it is played with an error.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">1</span>)

<span style="color:#f92672">...</span>
<span style="color:#a6e22e">IndexError</span>: no such group
</code></pre></div><p>If you check the content of the regular expression by specifying the flag setting of <code>re.DEBUG</code>, you can see that the part called <code>SUBPATTERN 1 0 0</code> is reduced and the required processing is reduced.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am (a cat | a dog). &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>,
    flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>DEBUG)
</code></pre></div><pre><code>LITERAL 21566
LITERAL 36649
LITERAL 12399
SUBPATTERN 1 0 0
  BRANCH
    LITERAL 29483
    LITERAL 12391
    LITERAL 12354
    LITERAL 12427
  OR
    LITERAL 29356
    LITERAL 12384
    LITERAL 12424
LITERAL 12290
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;I am (?: cat | dog). &#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;I am a cat. I have no name yet. &#39;</span>,
    flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>DEBUG)
</code></pre></div><pre><code>LITERAL 21566
LITERAL 36649
LITERAL 12399
BRANCH
  LITERAL 29483
  LITERAL 12391
  LITERAL 12354
  LITERAL 12427
OR
  LITERAL 29356
  LITERAL 12384
  LITERAL 12424
LITERAL 12290
</code></pre><h1 id="group-back-reference">Group back reference</h1>
<p>Referencing the group set in the pattern in the subsequent processing is called back reference.</p>
<p>For example, you can use it to replace characters such as <code>cat-dog</code> with hyphen-separated character strings and replace them with <code>dog-cat</code>.</p>
<p>I&rsquo;ll try with the code. First of all, try defining a pattern normally and taking a Match object.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)-(.)&#39;</span>)
<span style="color:#f92672">&gt;&gt;&gt;</span> match <span style="color:#f92672">=</span> pattern<span style="color:#f92672">.</span>search(string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat-dog&#39;</span>))
<span style="color:#f92672">&gt;&gt;&gt;</span> match

<span style="color:#f92672">&lt;</span>re<span style="color:#f92672">.</span>Match object; span<span style="color:#f92672">=</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">3</span>), match<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat-dog&#39;</span><span style="color:#f92672">&gt;</span>

<span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">1</span>)

<span style="color:#e6db74">&#39;Cat&#39;</span>

<span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">2</span>)

<span style="color:#e6db74">&#39;dog&#39;</span>
</code></pre></div><p>When setting a back reference, specify a group of <code>\</code> symbol and group number such as <code>\1</code>, <code>\2</code> and so on.
If you use it in the replacement process, use this description in the <code>repl</code> argument of the <code>sub</code> function that handles the replacement.</p>
<p>In this sample, we want to replace the hyphens before and after, so specify as <code>\2-\1</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> pattern<span style="color:#f92672">.</span>sub(repl<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\2-\1&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat-dog&#39;</span>)

<span style="color:#e6db74">&#39;Dog Cat&#39;</span>
</code></pre></div><p>Up to 99 groups of this back reference are valid. In almost all cases, I don&rsquo;t think I will use the group so much, but please be careful if you need such cases.</p>
<p>Let&rsquo;s try a large number of groups.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)&#39;</span>
            <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)&#39;</span>
            <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)&#39;</span>
            <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)&#39;</span>
            <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)&#39;</span>
            <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)&#39;</span>
            <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)&#39;</span>
            <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)&#39;</span>
            <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)&#39;</span>
            <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)&#39;</span>
            <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)&#39;</span>)
<span style="color:#e6db74">```You can use normally up to the 99th (`</span>\<span style="color:#ae81ff">99</span><span style="color:#960050;background-color:#1e0010">`</span>)<span style="color:#f92672">.</span>

<span style="color:#e6db74">``</span><span style="color:#960050;background-color:#1e0010">`</span>py
pattern<span style="color:#f92672">.</span>sub(
    repl<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\99&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>)
</code></pre></div><pre><code>'Cat'
</code></pre><p>From the 100th, the result has become irrelevant <code>@</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern<span style="color:#f92672">.</span>sub(
    repl<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\100</span><span style="color:#e6db74">&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>)
</code></pre></div><pre><code>'@'
</code></pre><p>After that, alphabets such as <code>A</code>, <code>B</code>, &hellip; continued. The <code>@</code> symbol is set as an unsupported boundary, and it is in the alphabet after that.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern<span style="color:#f92672">.</span>sub(
    repl<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\101</span><span style="color:#e6db74">&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>)
</code></pre></div><pre><code>'A'
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern<span style="color:#f92672">.</span>sub(
    repl<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\102</span><span style="color:#e6db74">&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>
           <span style="color:#e6db74">&#39;Cat cat cat cat cat cat cat cat cat cat&#39;</span>)
</code></pre></div><pre><code>'B'
</code></pre><p>It was unclear why this value would be set after <code>\100</code>, but @k-takata told me in the comments&hellip;! Thank you: bow:</p>
<blockquote>
<p>This is because <code>\100</code> is regarded as an octal escape sequence. The character code of @ is 0o100.</p>
</blockquote>
<h1 id="named-group">Named group</h1>
<p>When you write code in Python, I think that you often use keyword arguments in functions with many arguments.</p>
<p>By using keyword arguments, you can reduce the impact when the number of arguments increases or decreases or the order changes, and the readability increases.</p>
<p>The regular expression group is also the same. If there are only a few cases, it will not bother you, but as the number increases, it will be difficult to maintain and read.
As a workaround for such cases, groups can use named groups (and back references) as keyword arguments.</p>
<p>The pattern format is <code>(?P&lt;group name&gt;corresponding pattern)</code>. For example, if you want to set a group name of <code>left</code> and a pattern of arbitrary characters <code>.</code>, it will be in the form of <code>(?P&lt;left&gt;.)</code>.</p>
<p>In the sample that replaces the character string <code>cat-dog</code> with <code>dog-cat</code>, the corresponding pattern in the named group is as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(?P&lt;left&gt;.)-(?P&lt;right&gt;.)&#39;</span>)
</code></pre></div><p>When it is used as a back reference, it will be in the form <code>\g&lt;group name&gt;</code>. If it is the above pattern, it can be set by writing it like <code>\g&lt;left&gt;</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> pattern<span style="color:#f92672">.</span>sub(repl<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\g&lt;right&gt;-\g&lt;left&gt;&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat-dog&#39;</span>)

<span style="color:#e6db74">&#39;Dog Cat&#39;</span>
</code></pre></div><p>As an aside, what is this P in <code>?P</code>&hellip;? However, it is actually P, which is a Python-specific extension.
Around 1997, Python author Guido supported the old versions such as Python1.5, and then became popular for other languages.</p>
<p>You can read the email that Guido sent to people related to Perl at that time at <a href="https://markmail.org/message/oyezhwvefvotacc3">https://markmail.org/message/oyezhwvefvotacc3</a>.
To cite some, &ldquo;Interaction between Perl and Python is good.&rdquo; &ldquo;Regular expressions bring expressions as close to Perl as possible, but in the next Python 1.5, Python-specific syntax will be added.&rdquo; Is written.</p>
<blockquote>
<p>I hope that Python and Perl can co-exist in years to come;
cross-pollination can be good for both languages.
&hellip;
However, the regex syntax has some Python-specific extensions, which all begin with (?P. Currently there are two of them:</p>
</blockquote>
<h1 id="expand-method-of-match-object">Expand method of Match object</h1>
<p>It is quite close to the sub function that handles the replacement process with regular expressions, and there is the expand method.
The behavior is similar to the sub function, but this is a method that the Match object has.</p>
<p>It can be used when adding replacement processing etc. to the match result.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(.)-(.)&#39;</span>)
match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span>pattern, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat-dog&#39;</span>)
</code></pre></div><p>Group and back reference settings can be used in the same format as <code>\g&lt;group number&gt;</code>.
The template argument of the expand method corresponds to the repl argument of the sub function.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>expand(template<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\g&lt;2&gt;-\g&lt;1&gt;&#39;</span>)

<span style="color:#e6db74">&#39;Dog Cat&#39;</span>
</code></pre></div><p>You can use a named group setting with <code>?P</code> notation as well.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> pattern <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(?P&lt;left&gt;.)-(?P&lt;right&gt;.)&#39;</span>)
<span style="color:#f92672">&gt;&gt;&gt;</span> match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(pattern<span style="color:#f92672">=</span>pattern, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat-dog&#39;</span>)
<span style="color:#f92672">&gt;&gt;&gt;</span> match<span style="color:#f92672">.</span>expand(template<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\g&lt;right&gt;-\g&lt;left&gt;&#39;</span>)

<span style="color:#e6db74">&#39;Dog Cat&#39;</span>
</code></pre></div><h1 id="symbols-that-need-to-be-escaped-in-regular-expressions">Symbols that need to be escaped in regular expressions</h1>
<p>So far, we have seen how to write various regular expression patterns.</p>
<p>I have used various symbols, but if you want to use the symbol as it is in a pattern, there is something that requires escaping for that symbol.</p>
<p>For example, if you try to set a pattern for the character string <code>cat (5 years old)</code> and use the brackets of <code>()</code> as it is, it will be a group process and it will not hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>fullmatch(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;.(.age)&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat (5 years old)&#39;</span>)

<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><p>In such a case, if the escape symbol <code>\</code> is placed immediately before the corresponding symbol, it will be judged as it is.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>fullmatch(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;.\(.year\)&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat (5 years old)&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 5), match='cat (5 years old)'&gt;
</code></pre><p>In addition to the brackets of <code>()</code>, you need to escape the following symbols.</p>
<p><code>\</code>, <code>^</code>, <code>$</code>, <code>.</code>, <code>|</code>, <code>?</code>, <code>*</code>, <code>+</code>, <code>[</code>, <code>{</code></p>
<p>Do you need <code>]</code> and <code>}</code> of the closing bracket symbols of <code>[</code> and <code>{</code>? I thought, but if there is no opening parenthesis (or if it is properly escaped), it seems that there is no problem if it is not escaped.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>fullmatch(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;.].&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat] dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 3), match='cat]dog'&gt;
</code></pre><h1 id="escape-function">escape function</h1>
<p>Regarding the process of escaping the above-mentioned symbols, besides adding the escape symbol (<code>\</code>) directly to the character string, the escape function that creates the character string after escaping in batch is prepared.</p>
<p><strong>A pattern that uses parentheses of <code>()</code> and matches when passing through the escape function :</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">&gt;&gt;&gt;</span> escaped_str <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>escape(pattern<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat (5 years old)&#39;</span>)
<span style="color:#f92672">&gt;&gt;&gt;</span> escaped_str

<span style="color:#e6db74">&#34;Cat </span><span style="color:#ae81ff">\\</span><span style="color:#e6db74"> (5 years old </span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">)&#34;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>fullmatch(
    pattern<span style="color:#f92672">=</span>escaped_str,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat (5 years old)&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 5), match='cat (5 years old)'&gt;
</code></pre><p>Up to this point, I&rsquo;ve touched on groups and escapes.
In the next section, we&rsquo;ll talk a lot about lookahead and lookbehind in regular expressions. This is the last topic.</p>
<h1 id="zero-width-assertions-and-regular-expression-lookahead-and-lookbehind">Zero-width assertions and regular expression lookahead and lookbehind</h1>
<p>So far, we have touched on expressions such as <code>^</code> for the beginning of a line, <code>$</code> for the end of a line, <code>\A</code> for the beginning of a string, and <code>\Z</code> for the end of a string.</p>
<p>These are used to specify positions, but their contents are not included after the match.
For example, if you set the pattern <code>^cat</code>, only <code>cat</code> will remain in the result after matching.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;^cat&#39;</span>,
    string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cat&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 1), match='cat'&gt;
```These &quot;no more characters added to the match result (no characters consumed, no width)&quot; are called **zero width assertions** (zero-width assertions in English).

The expressions called look ahead and look behind of the regular expressions that we will touch will also have the same zero-width assertions.

The positions of `^` and `$` symbols are fixed, whereas in the look-ahead and the look-ahead, the match condition is that a specific character string exists before and after, and the match result includes them. It can be processed in the form of no (zero-width assertion).

There are four types of look-ahead and look-ahead.

- Positive lookahead
- Negative lookahead
- Positive lookbehind
- Negative lookbehind

Let's look at each one in turn.

It should be noted that, like English like look ahead, Japanese translations such as affirmative lookahead are not so intuitive to me personally.
Therefore, it may be better to focus on the points such as &quot;what kind of behavior&quot; and &quot;what kind of writing is necessary&quot; rather than the words themselves.

# Positive lookahead

Positive look ahead in English.
The format is `(?=Pattern)`. The meaning is that there is a specified pattern immediately after.

For example, if you have the string `5 year old cat` and you want to include only the year part in the match result, you can use the following pattern that uses positive lookahead (for example, if the year is two or more digits). Will be set once).

```py
re.search(
    pattern=r'\d years old (?= cat)', string='5 years old cat')
</code></pre><pre><code>&lt;re.Match object; span=(0, 2), match='5 years old'&gt;
</code></pre><p>Since the part of <code>cat</code> is specified by positive look-ahead, it can be confirmed that it is not included in the resulting Match object.
Also, since it uses affirmative lookahead, strings other than cats, such as <code>5 years old dogs</code>, will not match.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d years old (?= cat)&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;5 years old dog&#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><h1 id="negative-lookahead">Negative lookahead</h1>
<p>Negative look ahead targets the pattern immediately following it, similar to positive look ahead.
However, the condition is that &ldquo;the condition is not met&rdquo;, so the expression is &ldquo;the specified pattern does not exist immediately after&rdquo;.</p>
<p>The format is <code>(?! pattern)</code>.
The affirmative lookahead sample will now hit with the string that did not hit (<code>5 year old dog</code>).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d years old (?! cat)&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;5 years old dog&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(0, 2), match='5 years old'&gt;
</code></pre><p>On the other hand, a character string such as <code>5 year old cat</code> will not be hit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">match <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\d years old (?! cat)&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;5 years old cat&#39;</span>)
<span style="color:#66d9ef">print</span>(match)
</code></pre></div><pre><code>None
</code></pre><h1 id="positive-lookbehind">Positive lookbehind</h1>
<p>Positive lookbehind is a condition that &ldquo;the specified pattern exists immediately before&rdquo;. The position to be checked differs from the pre-reading.</p>
<p>The format is <code>(?&lt;=pattern)</code>.</p>
<p>By setting affirmative lookbehind to the character string &ldquo;Cat is&rdquo; as shown below, only the character string &ldquo;`5&rdquo; that follows can be extracted.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(?&lt;=cat)\d years&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cats are 5 years old&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(2, 4), match='5 years old'&gt;
</code></pre><h1 id="negative-lookbehind">Negative lookbehind</h1>
<p>Since I have already touched on positive lookahead and negative lookahead, I feel that it requires almost no explanation, but negative lookahead is a condition that &ldquo;the specified pattern does not exist immediately before&rdquo;.</p>
<p>The format is <code>(?&lt;!pattern&gt;)</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">re<span style="color:#f92672">.</span>search(
    pattern<span style="color:#f92672">=</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;(?&lt;!cat is)\d years old&#39;</span>, string<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;dog is 5 years old&#39;</span>)
</code></pre></div><pre><code>&lt;re.Match object; span=(2, 4), match='5 years old'&gt;
</code></pre><h1 id="at-the-end">At the end</h1>
<p>It feels like the article is quite long, but I think I&rsquo;ve covered the main Python regular expressions. Thank you for your hard work!</p>
<p><s>Everyone who has read this far, can I keep LGTM pressed? :innocent:</s></p>
<hr>
<p>Besides, I am writing various articles mainly on Python. Please take that as well!
<a href="https://qiita.com/simonritchie/private/992f04ef0c56914d25d2">Main articles posted so far</a></p>
<p>#Summary of references/reference sites</p>
<ul>
<li><a href="https://www.amazon.com/Mastering-Python-Regular-Expressions-Felix/dp/1783283157/">Mastering Python Regular Expressions</a></li>
<li><a href="https://togetter.com/li/1268851">What does the engineer say &ldquo;I fully understand&rdquo;, &ldquo;I don&rsquo;t know anything&rdquo; and &ldquo;Chot de kill&rdquo; really mean that? Many voices of &ldquo;Understanding&rdquo;</a></li>
<li><a href="https://link.springer.com/article/10.1007/BF02478259">A logical calculus of the ideas immanent in nervous activity</a></li>
<li><a href="https://www.rand.org/pubs/research_memoranda/RM704.html">Representation of Events in Nerve Nets and Finite Automata</a></li>
<li><a href="https://en.wikipedia.org/wiki/%E3%82%B1%E3%83%B3%E3%83%BB%E3%83%88%E3%83%B3%E3%83%97%E3%82%BD%E3%83%B3">Ken Thompson-Wikipedia</a></li>
<li><a href="https://note.nkmk.me/python-raw-string-escape/">Raw string that ignores (disables) escape sequences in Python</a></li>
<li><a href="https://note.nkmk.me/python-re-regex-character-type/">Judge, extract, and count kanji, hiragana, katakana, and alphanumeric characters with Python regular expressions</a></li>
<li><a href="http://www.standby-media.jp/news/000074">What is the garbled phenomenon &ldquo;tofu&rdquo;? </a></li>
<li><a href="https://en.wikipedia.org/wiki/%E5%B9%B3%E4%BB%AE%E5%90%8D_(Unicode%E3%81%AE%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF)">Hiragana (Unicode block)-Wikipedia</a></li>
<li><a href="https://kotobank.jp/word/CJK%E7%B5%B1%E5%90%88%E6%BC%A2%E5%AD%97-3928">CJK Integrated Kanji</a></li>
<li><a href="https://ja.wikipedia.org/wiki/CJK%E7%B5%B1%E5%90%88%E6%BC%A2%E5%AD%97">CJK Integrated Kanji-Wikipedia</a></li>
<li><a href="https://hibiki-press.tech/learn_prog/python/regex_pattern/1099">[Python] Summary of regular expression notation (re module)</a></li>
<li><a href="https://ja.wikipedia.org/wiki/%E6%95%B0%E9%87%8F%E8%A9%9E">Quantifier-Wikipedia</a></li>
<li><a href="https://qiita.com/vicboss1002/items/804cc899e16a4c6f358c">About absolute maximum quantifier</a></li>
<li><a href="https://ja.javascript.info/regexp-boundary">Word boundary: \b</a></li>
<li><a href="https://qiita.com/tukiyo3/items/b994ffafb7f01e79fe34">The number of digits in the phone number is 10 or 11 digits. There are no more 9 digits</a></li>
<li><a href="https://note.nkmk.me/python-re-match-search-findall-etc/">How to use Python regular expression module re (match, search, sub, etc.)</a></li>
<li><a href="https://ejje.weblio.jp/content/substitute">What is a substitute</a></li>
<li><a href="https://stackoverflow.com/questions/606350/how-can-i-debug-a-regular-expression-in-python">How can I debug a regular expression in Python?</a></li>
<li><a href="https://docs.python.org/ja/3.8/library/re.html">re &mdash; Regular expression operation</a></li>
<li><a href="https://en.wikipedia.org/wiki/%E7%AC%A6%E5%8F%B7%E7%82%B9">Code Point-wikipedia</a></li>
<li><a href="https://note.nkmk.me/python-chr-ord-unicode-code-point/">Convert Unicode code point and character with Python (chr, ord, \x, \u, \U)</a></li>
<li><a href="https://www.php.net/manual/ja/regexp.reference.back-references.php">Backward reference</a></li>
<li><a href="https://markmail.org/message/oyezhwvefvotacc3">Claiming (?P&hellip;) regex syntax extensions</a></li>
<li><a href="https://qiita.com/tohta/items/2ba7ecde5636b38ef1f6">Understand where you are (accept|no) constant (first | after) reading</a></li>
</ul>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
