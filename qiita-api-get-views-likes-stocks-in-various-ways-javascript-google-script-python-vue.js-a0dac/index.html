<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Qiita API] Get Views, Likes, Stocks in various ways (JavaScript, Google Script, Python, Vue.js) | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Qiita API] Get Views, Likes, Stocks in various ways (JavaScript, Google Script, Python, Vue.js)</h1>
<p>
  <small class="text-secondary">
  
  
  Nov 11, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/javascript">JavaScript</a></code></small>


<small><code><a href="https://memotut.com/tags/googleappsscript">GoogleAppsScript</a></code></small>


<small><code><a href="https://memotut.com/tags/qiitaapi">QiitaAPI</a></code></small>


<small><code><a href="https://memotut.com/tags/vue.js">Vue.js</a></code></small>

</p>
<pre><code>## Introduction
</code></pre>
<p>Looking at my post on Qiita, I see three numbers: &ldquo;Page view&rdquo;, &ldquo;Like&rdquo; and &ldquo;Stock&rdquo;. I like the &ldquo;likes&rdquo; of all posts on my page, but I don&rsquo;t know the View and Stock of each post or the total. Since I have about 20 posts, I decided to try various methods to get all of my posts, views, likes, and stocks for studying.</p>
<p>When I looked it up, everyone hit the Qiita API in various ways to obtain information, and there are many reference pages, so I will carry out it while checking them.</p>
<ul>
<li>&ldquo;Like&rdquo;: You can get by tapping the API (likes_count)</li>
<li>&ldquo;Page view&rdquo;: Set access token and hit API to get (page_views_count)</li>
<li>&ldquo;Stock&rdquo;: Count the number of users who are stocked, because the number cannot be acquired with the API.</li>
</ul>
<h2 id="reference-url">Reference URL</h2>
<p>I mainly referred to the following posts. (Other reference pages are listed at the end)
<a href="https://qiita.com/Naoto9282/items/252c4b386aeafc0052ba">[Qiita API] Good! Automatic counting of the number of views (Qiita)</a></p>
<h2 id="assumption">Assumption</h2>
<p>Issuing Qiita personal access token
Qiita &ldquo;Settings&rdquo; → &ldquo;Applications&rdquo; → &ldquo;Personal access token&rdquo; (read-only: read_qiita)</p>
<h2 id="implementation-type">Implementation type</h2>
<p>① HTML/JavaScript
② GoogleScript
③ Python + Vue.js</p>
<h2 id="-htmljavascript">① HTML/JavaScript</h2>
<ul>
<li>Set your own access token issued and press the &ldquo;Read&rdquo; button
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/167772/97f256e9-7e8c-184a-7bc5-720c14cac32c.png" alt="html1.png">
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/167772/d93fbe80-0c2b-f32b-b261-c943b08d7c23.png" alt="html2.png"></li>
</ul>
<p>code</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Qiita_data_get.html" data-lang="Qiita_data_get.html">
<span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ja&#34;</span>&gt;
  &lt;<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;utf-8&#34;</span>&gt;
    &lt;<span style="color:#f92672">title</span>&gt;Qiita Item Get&lt;/<span style="color:#f92672">title</span>&gt;
    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css&#34;</span>&gt;
  &lt;/<span style="color:#f92672">head</span>&gt;

  &lt;<span style="color:#f92672">body</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container&#34;</span>&gt;
      &lt;<span style="color:#f92672">br</span>&gt;
      &lt;<span style="color:#f92672">h3</span>&gt;Get Qiita post list&lt;/<span style="color:#f92672">h3</span>&gt;
      &lt;<span style="color:#f92672">br</span>&gt;
      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;input-group flex-nowrap&#34;</span>&gt;
        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;input-group-prepend&#34;</span>&gt;
          &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;input-group-text&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;addon-wrapping&#34;</span>&gt;Qiita access token settings&lt;/<span style="color:#f92672">span</span>&gt;
        &lt;/<span style="color:#f92672">div</span>&gt;
        &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-control&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;accesstoken&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Access Token&#34;</span> <span style="color:#a6e22e">aria-describedby</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;addon-wrapping&#34;</span>&gt;
      &lt;/<span style="color:#f92672">div</span>&gt;
      &lt;<span style="color:#f92672">br</span>&gt;
      &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-primary&#34;</span> <span style="color:#a6e22e">onclick</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;getData()&#34;</span>&gt;Read&lt;/<span style="color:#f92672">button</span>&gt;
      &lt;<span style="color:#f92672">hr</span>&gt;
      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;result&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
    &lt;/<span style="color:#f92672">div</span>&gt;

    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://code.jquery.com/jquery-3.2.1.min.js&#34;</span> <span style="color:#a6e22e">integrity</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=&#34;</span> <span style="color:#a6e22e">crossorigin</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;anonymous&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;

    &lt;<span style="color:#f92672">script</span>&gt;
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">title</span>;
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">view</span>;
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">like</span>;
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">stock</span>;

      <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getData</span>() {
        <span style="color:#75715e">// Confirm access token
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">token</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;accesstoken&#39;</span>).<span style="color:#a6e22e">value</span>
        <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">token</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">``</span>){
          <span style="color:#a6e22e">alert</span> (<span style="color:#e6db74">&#39;Please enter your access token&#39;</span>)
          <span style="color:#66d9ef">return</span>
        }

        <span style="color:#75715e">// display until you can get
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#34;#result&#34;</span>);
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">loading</span> <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&lt;p&gt;Now Loading...&lt;/p&gt;&#39;</span>;
        <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">append</span>(<span style="color:#a6e22e">loading</span>);

        <span style="color:#75715e">// Get your post list and get data by id
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">items</span> <span style="color:#f92672">=</span> [];
        <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">ajax</span>({
          <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;GET&#34;</span>,
          <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;https://qiita.com/api/v2/authenticated_user/items&#34;</span>,
          <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#34;Content-Type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;application/json&#34;</span>,
            <span style="color:#e6db74">&#34;Authorization&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Bearer &#34;</span><span style="color:#f92672">+</span> <span style="color:#a6e22e">token</span>,
          },
          <span style="color:#a6e22e">dataType</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;json&#34;</span>,
          <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">data</span>){
            <span style="color:#a6e22e">items</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>;

            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sum_view</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sum_like</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sum_stock</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">html</span> <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&lt;table class=&#34;table table-dark&#34;&gt;&#39;</span> <span style="color:#f92672">+</span>
                      <span style="color:#e6db74">&#39;&lt;thead&gt;&lt;tr&gt;&lt;th scope=&#34;col&#34;&gt;No&lt;/th&gt;&lt;th scope=&#34;col&#34;&gt;title&lt;/th&gt;&lt;th scope=&#34;col&#34;&gt;VIEWS&lt;/th&gt;&lt;th scope= &#34;col&#34;&gt;LIKES&lt;/th&gt; &lt;th scope=&#34;col&#34;&gt;STOCKS&lt;/th&gt; &lt;th scope=&#34;col&#34;&gt;LIKE rate &lt;/th&gt; &lt;th scope=&#34;col&#34;&gt;STOCK rate &lt;/th&gt; &lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&#39;</span>

            <span style="color:#75715e">// Loop the post list, get data by ID, set HTML
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
              <span style="color:#a6e22e">qiitaView</span>(<span style="color:#a6e22e">items</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">id</span>, <span style="color:#a6e22e">token</span>);
              <span style="color:#a6e22e">qiitaStock</span>(<span style="color:#a6e22e">items</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">id</span>, <span style="color:#a6e22e">token</span>);

              <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">no</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">length</span><span style="color:#f92672">-</span><span style="color:#a6e22e">i</span>;

              <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">per_like</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">like</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">view</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">1000</span>;
              <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">math_like</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">per_like</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">1000</span>;

              <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">per_stock</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">stock</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">view</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">1000</span>;
              <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">math_stock</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">per_stock</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">1000</span>;

              <span style="color:#a6e22e">html</span> <span style="color:#f92672">+=</span>
              <span style="color:#e6db74">&#39;&lt;tr&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;th scope=&#34;row&#34;&gt;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">no</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/th&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;td&gt;&lt;a href=&#34;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&#34; target=&#34;_blank&#34;&gt;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">title</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/a&gt;&lt;/td&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;td&gt;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">view</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/td&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;td&gt;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">like</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/td&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;td&gt;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">stock</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/td&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;td&gt;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">math_like</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/td&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;td&gt;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">math_stock</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/td&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;/tr&gt;&#39;</span>;

              <span style="color:#a6e22e">sum_view</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">view</span>;
              <span style="color:#a6e22e">sum_like</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">like</span>;
              <span style="color:#a6e22e">sum_stock</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">stock</span>;

            };

            <span style="color:#75715e">// set total in html and write
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">html</span> <span style="color:#f92672">+=</span>
              <span style="color:#e6db74">&#39;&lt;tr&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;th scope=&#34;row&#34;&gt;total&lt;/th&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;td&gt;&lt;/td&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;td&gt;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sum_view</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/td&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;td&gt;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sum_like</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/td&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;td&gt;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sum_stock</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/td&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;td&gt;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">``</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/td&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;td&gt;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">``</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/td&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;/tr&gt;&#39;</span> <span style="color:#f92672">+</span>
              <span style="color:#e6db74">&#39;&lt;/tbody&gt;&lt;/table&gt;&#39;</span>;

            <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">empty</span>();
            <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">append</span>(<span style="color:#a6e22e">html</span>);

          },
          <span style="color:#a6e22e">error</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">XMLHttpRequest</span>, <span style="color:#a6e22e">textStatus</span>, <span style="color:#a6e22e">errorThrown</span>){
            <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">empty</span>();
            <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;Error1: Is access token correct?&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">errorThrown</span>);
          }
        });

      };

      <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">qiitaView</span>(<span style="color:#a6e22e">id</span>, <span style="color:#a6e22e">token</span>) {

        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">views</span> <span style="color:#f92672">=</span> [];

        <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">ajax</span>({
          <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;GET&#34;</span>,<span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://qiita.com/api/v2/items/&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">id</span>,
          <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#34;Content-Type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;application/json&#34;</span>,
            <span style="color:#e6db74">&#34;Authorization&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Bearer &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">token</span>,
          },
          <span style="color:#a6e22e">dataType</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;json&#34;</span>,
          <span style="color:#a6e22e">async</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,      <span style="color:#75715e">// 同期通信
</span><span style="color:#75715e"></span>          <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">data</span>){
            <span style="color:#a6e22e">views</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>;
            <span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">views</span>.<span style="color:#a6e22e">title</span>;
            <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">views</span>.<span style="color:#a6e22e">url</span>;
            <span style="color:#a6e22e">like</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">views</span>.<span style="color:#a6e22e">likes_count</span>;
            <span style="color:#a6e22e">view</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">views</span>.<span style="color:#a6e22e">page_views_count</span>;
          },
          <span style="color:#a6e22e">error</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">XMLHttpRequest</span>, <span style="color:#a6e22e">textStatus</span>, <span style="color:#a6e22e">errorThrown</span>){
            <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;Error2 : &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">errorThrown</span>);
          }
        });

      };

      <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">qiitaStock</span>(<span style="color:#a6e22e">id</span>, <span style="color:#a6e22e">token</span>) {

        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">stocks</span> <span style="color:#f92672">=</span> [];
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">flg</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;off&#39;</span>;

        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">j</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">j</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>; <span style="color:#a6e22e">j</span><span style="color:#f92672">++</span>) {

          <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">ajax</span>({
            <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;GET&#34;</span>,
            <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://qiita.com/api/v2/items/&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">id</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;/stockers?page=&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">j</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;&amp;per_page=100&#39;</span>,
            <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
              <span style="color:#e6db74">&#34;Content-Type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;application/json&#34;</span>,
              <span style="color:#e6db74">&#34;Authorization&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Bearer &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">token</span>,
            },
            <span style="color:#a6e22e">dataType</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;json&#34;</span>,
            <span style="color:#a6e22e">async</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,      <span style="color:#75715e">// 同期通信
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">data</span>){
              <span style="color:#a6e22e">stocks</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>;
              <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">stock_len</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">stocks</span>.<span style="color:#a6e22e">length</span>;

              <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">stock_len</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">100</span>) {
                <span style="color:#a6e22e">stock</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">j</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span>) <span style="color:#f92672">-</span> <span style="color:#ae81ff">100</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">stock_len</span>;
                <span style="color:#a6e22e">flg</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;on&#39;</span>;
              }

            },
            <span style="color:#a6e22e">error</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">XMLHttpRequest</span>, <span style="color:#a6e22e">textStatus</span>, <span style="color:#a6e22e">errorThrown</span>){
              <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;Error3 : &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">errorThrown</span>);
            }
          });

          <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">flg</span><span style="color:#f92672">==</span><span style="color:#e6db74">&#39;on&#39;</span>) {
            <span style="color:#66d9ef">break</span>;
          }

        };
      };
    &lt;/<span style="color:#f92672">script</span>&gt;
  &lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p>##②Google Script
・GSスクリプトを作成し、プロジェクトを定期実行設定を行う。（「編集」→「現在のプロジェクトのトリガー」から設定。1日1回の取得を設定）
（google scriptは参考にさせていただいたページにほぼ載っています。stockやviewに対する率を追加で設定しています）
（stockは、各投稿毎に1000stockまでの取得）</p>
<p>毎日取得してみると、view数は50～100viewくらいあるんだなぁとパッとわかります。
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/167772/b7e021e5-8a47-65b1-cf4c-61f2fe0a3368.png" alt="gs1.png">
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/167772/802039be-51ce-f7b6-e088-2a858cc656cb.png" alt="gs2.png"></p>
<p>コード</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.js" data-lang=".js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">myFunction</span>() {
  
  <span style="color:#75715e">// 変数設定
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sum_likes</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sum_page_views</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sum_stocks</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
  
  <span style="color:#75715e">// 取得日付設定
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">now</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date()
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">record_title</span> <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;日付&#39;</span>]
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">record_page_views</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">now</span>]
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">record_likes</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">now</span>]
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">record_stocks</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">now</span>]
  
  <span style="color:#75715e">// Qiita API による自身の投稿を取得
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://qiita.com/api/v2/authenticated_user/items&#39;</span>
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">option</span> <span style="color:#f92672">=</span> {
    <span style="color:#a6e22e">headers</span> <span style="color:#f92672">:</span> {
      <span style="color:#e6db74">&#39;Authorization&#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Bearer アクセストークンを設定&#39;</span>
    },
    <span style="color:#a6e22e">method</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;get&#39;</span>
  }
  
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">res</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">UrlFetchApp</span>.<span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">option</span>)  
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">list</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">getContentText</span>())
  <span style="color:#a6e22e">list</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">reverse</span>()  <span style="color:#75715e">// 降順から昇順に変更
</span><span style="color:#75715e"></span>  
  <span style="color:#75715e">// 取得したアイテムをループして、view, like, stockを取得
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
    
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">item</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>[<span style="color:#a6e22e">i</span>]

    <span style="color:#75715e">// likes数を取得
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">item_id</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">item</span>[<span style="color:#e6db74">&#39;id&#39;</span>]
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">item</span>[<span style="color:#e6db74">&#39;title&#39;</span>]
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">likes_count</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">item</span>[<span style="color:#e6db74">&#39;likes_count&#39;</span>]
    <span style="color:#a6e22e">sum_likes</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">likes_count</span>
    
    <span style="color:#75715e">// page viewを取得
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://qiita.com/api/v2/items/&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">item_id</span>
    <span style="color:#a6e22e">res</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">UrlFetchApp</span>.<span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">option</span>)
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">json</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">getContentText</span>())
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">page_views_count</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">json</span>[<span style="color:#e6db74">&#39;page_views_count&#39;</span>]
    <span style="color:#a6e22e">sum_page_views</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">page_views_count</span>
    
    <span style="color:#75715e">// stock数を取得
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cnt</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">stock_count</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">while</span>(<span style="color:#a6e22e">cnt</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10</span>) {
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">url_stock</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;/stockers?page=&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">cnt</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;&amp;per_page=100&#39;</span>
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">res_stock</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">UrlFetchApp</span>.<span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url_stock</span>, <span style="color:#a6e22e">option</span>)
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">json_stock</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">res_stock</span>.<span style="color:#a6e22e">getContentText</span>())
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">stock_num</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">json_stock</span>.<span style="color:#a6e22e">length</span>

      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">stock_num</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">100</span>) {
        <span style="color:#a6e22e">stock_count</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">cnt</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span>) <span style="color:#f92672">-</span> <span style="color:#ae81ff">100</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">stock_num</span>
        <span style="color:#a6e22e">sum_stocks</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">stock_count</span>
        <span style="color:#66d9ef">break</span>
      } <span style="color:#66d9ef">else</span> {
        <span style="color:#a6e22e">cnt</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span> 
      }
    }
    
    <span style="color:#75715e">// シート書き出しのためにデータをセット
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">record_title</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">title</span>)
    <span style="color:#a6e22e">record_page_views</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">page_views_count</span>)
    <span style="color:#a6e22e">record_likes</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">likes_count</span>)
    <span style="color:#a6e22e">record_stocks</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">stock_count</span>)
  }

  <span style="color:#75715e">// 率を計算  
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">par_likes</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum_likes</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">sum_page_views</span>
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">par_stocks</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum_stocks</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">sum_page_views</span>
  <span style="color:#75715e">// スプレッドシートのセット
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">spreadsheet</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">SpreadsheetApp</span>.<span style="color:#a6e22e">openById</span>(<span style="color:#e6db74">&#39;xxxxxxxxxxxxxxxxxxxxxxxxxxx&#39;</span>)
  <span style="color:#75715e">// シート：sum
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sheet</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">spreadsheet</span>.<span style="color:#a6e22e">getSheetByName</span>(<span style="color:#e6db74">&#39;sum&#39;</span>)
  <span style="color:#a6e22e">sheet</span>.<span style="color:#a6e22e">appendRow</span>([<span style="color:#66d9ef">new</span> Date(), <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">length</span>, <span style="color:#a6e22e">sum_page_views</span>, <span style="color:#a6e22e">sum_likes</span>, <span style="color:#a6e22e">sum_stocks</span>, <span style="color:#a6e22e">par_likes</span>, <span style="color:#a6e22e">par_stocks</span>])
  <span style="color:#75715e">// シート：view
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sheet</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">spreadsheet</span>.<span style="color:#a6e22e">getSheetByName</span>(<span style="color:#e6db74">&#39;view&#39;</span>)
  <span style="color:#a6e22e">sheet</span>.<span style="color:#a6e22e">getRange</span>(<span style="color:#e6db74">&#39;1:1&#39;</span>).<span style="color:#a6e22e">clear</span>()
  <span style="color:#a6e22e">sheet</span>.<span style="color:#a6e22e">getRange</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#a6e22e">record_title</span>.<span style="color:#a6e22e">length</span>).<span style="color:#a6e22e">setValues</span>([<span style="color:#a6e22e">record_title</span>])
  <span style="color:#a6e22e">sheet</span>.<span style="color:#a6e22e">appendRow</span>(<span style="color:#a6e22e">record_page_views</span>)
  <span style="color:#75715e">// シート：like
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sheet</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">spreadsheet</span>.<span style="color:#a6e22e">getSheetByName</span>(<span style="color:#e6db74">&#39;like&#39;</span>)
  <span style="color:#a6e22e">sheet</span>.<span style="color:#a6e22e">getRange</span>(<span style="color:#e6db74">&#39;1:1&#39;</span>).<span style="color:#a6e22e">clear</span>()
  <span style="color:#a6e22e">sheet</span>.<span style="color:#a6e22e">getRange</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#a6e22e">record_title</span>.<span style="color:#a6e22e">length</span>).<span style="color:#a6e22e">setValues</span>([<span style="color:#a6e22e">record_title</span>])
  <span style="color:#a6e22e">sheet</span>.<span style="color:#a6e22e">appendRow</span>(<span style="color:#a6e22e">record_likes</span>)
  <span style="color:#75715e">// シート：stock
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sheet</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">spreadsheet</span>.<span style="color:#a6e22e">getSheetByName</span>(<span style="color:#e6db74">&#39;stock&#39;</span>)
  <span style="color:#a6e22e">sheet</span>.<span style="color:#a6e22e">getRange</span>(<span style="color:#e6db74">&#39;1:1&#39;</span>).<span style="color:#a6e22e">clear</span>()
  <span style="color:#a6e22e">sheet</span>.<span style="color:#a6e22e">getRange</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#a6e22e">record_title</span>.<span style="color:#a6e22e">length</span>).<span style="color:#a6e22e">setValues</span>([<span style="color:#a6e22e">record_title</span>])
  <span style="color:#a6e22e">sheet</span>.<span style="color:#a6e22e">appendRow</span>(<span style="color:#a6e22e">record_stocks</span>)
}
<span style="color:#e6db74">```
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">##③Python + PHP/Vue.js
</span><span style="color:#e6db74">-  データをQiita APIにて取得して、DBに設定する（Cron設定にてPythonは1日1回実行）
</span><span style="color:#e6db74">-  Vue.jsにて、axiosを叩きDB情報を取得(php)、表示![vue1.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/167772/02134f6e-2a9d-1657-8a54-e299d56d2fd9.png)
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- Press the data acquisition button
</span><span style="color:#e6db74">![vue2.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/167772/d7a06ef0-c16b-c27e-e492-be7cbbd4e020.png)
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">- Acquire Python data with Qiita API and set it in DB (Cron setting executes once a day)
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">~~~Qiita_data_get.py
</span><span style="color:#e6db74">import requests
</span><span style="color:#e6db74">import json
</span><span style="color:#e6db74">import datetime
</span><span style="color:#e6db74">import MySQLdb
</span><span style="color:#e6db74">
</span><span style="color:#e6db74"># Qiita access token
</span><span style="color:#e6db74">token =&#39;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#39;
</span><span style="color:#e6db74"># Qiita API settings
</span><span style="color:#e6db74">url =&#39;https://qiita.com/api/v2/authenticated_user/items&#39;
</span><span style="color:#e6db74">headers = {&#39;content-type&#39;:&#39;application/json&#39;,
</span><span style="color:#e6db74">           &#39;Authorization&#39;:&#39;Bearer&#39; + token}
</span><span style="color:#e6db74">#Set connection information
</span><span style="color:#e6db74">cnt = MySQLdb.connect(
</span><span style="color:#e6db74">  user=&#39;xxxxxxxxxxxx&#39;,
</span><span style="color:#e6db74">  passwd=&#39;xxxxxxxxxxxxx&#39;,
</span><span style="color:#e6db74">  host=&#39;xxxxxxxxxxxxxxxxxxxx&#39;,
</span><span style="color:#e6db74">  db=&#39;xxxxxxxxxxxxxx&#39;,
</span><span style="color:#e6db74">  charset=&#39;utf8&#39;
</span><span style="color:#e6db74">)
</span><span style="color:#e6db74">
</span><span style="color:#e6db74"># Get cursor
</span><span style="color:#e6db74">db = cnt.cursor()
</span><span style="color:#e6db74">
</span><span style="color:#e6db74"># Data acquisition/sorting
</span><span style="color:#e6db74">res = requests.get(url, headers=headers)
</span><span style="color:#e6db74">list = res.json()
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">for item in list:
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    item_id = item[&#39;id&#39;]
</span><span style="color:#e6db74">    # Title, set of like numbers
</span><span style="color:#e6db74">    title = item[&#39;title&#39;]
</span><span style="color:#e6db74">    item_url = item[&#39;url&#39;]
</span><span style="color:#e6db74">    likes_count = item[&#39;likes_count&#39;]
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    url =&#39;https://qiita.com/api/v2/items/&#39; + item_id
</span><span style="color:#e6db74">    res = requests.get(url, headers=headers)
</span><span style="color:#e6db74">    json = res.json()
</span><span style="color:#e6db74">    #Set of number of views by title
</span><span style="color:#e6db74">    page_views_count = json[&#39;page_views_count&#39;]
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    i = 1
</span><span style="color:#e6db74">    Get #stock number
</span><span style="color:#e6db74">    while i &lt;10:
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">        url_stock = url +&#39;/stockers?page=&#39; + str(i) +&#39;&amp;per_page=100&#39;
</span><span style="color:#e6db74">        res_stock = requests.get(url_stock, headers=headers)
</span><span style="color:#e6db74">        json_stock = res_stock.json()
</span><span style="color:#e6db74">        stock_num = len(json_stock)
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">        if stock_num != 100:
</span><span style="color:#e6db74">            stock_count = (i * 100)-100 + stock_num
</span><span style="color:#e6db74">            break
</span><span style="color:#e6db74">        else:
</span><span style="color:#e6db74">            i += 1
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    # Set date
</span><span style="color:#e6db74">    now = datetime.datetime.now()
</span><span style="color:#e6db74">    setdate = now.strftime(&#39;%Y-%m-%d&#39;)
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    Calculate percent like # stock
</span><span style="color:#e6db74">    per_like = likes_count / page_views_count * 100
</span><span style="color:#e6db74">    per_like = round(per_like, 2)
</span><span style="color:#e6db74">    per_stock = stock_count / page_views_count * 100
</span><span style="color:#e6db74">    per_stock = round(per_stock, 2)
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    # Select DB data by date and title
</span><span style="color:#e6db74">    sqlselect = &#34;SELECT * from qiita_data WHERE setdate=&#39;&#34; + setdate + &#34;&#39;AND title=&#39;&#34; + title + &#34;&#39;&#34;
</span><span style="color:#e6db74">    db.execute(sqlselect)
</span><span style="color:#e6db74">    row = db.fetchall()
</span><span style="color:#e6db74">    dbcnt = len(row)
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    #Update if there is data in DB (to overwrite data if executed on the same day)
</span><span style="color:#e6db74">    if dbcnt&gt; 0:
</span><span style="color:#e6db74">        sqlupdate = &#34;UPDATE qiita_data SET views=&#39;&#34; + str(page_views_count) + &#34;&#39;, likes=&#39;&#34; + str(likes_count) + &#34;&#39;, stocks=&#39;&#34; + str(stock_count) + &#34;&#39;, per_like=&#39;&#34; + str(per_like) + &#34;&#39;, per_stock=&#39;&#34; + str(per_stock) + &#34;&#39;WHERE setdate=&#39;&#34; + setdate + &#34;&#39;AND title=&#39;&#34; + title + &#34;&#39;&#34;
</span><span style="color:#e6db74">        db.execute(sqlupdate)
</span><span style="color:#e6db74">    #Insert if there is no data in DB
</span><span style="color:#e6db74">    else:
</span><span style="color:#e6db74">        sqlinsert = &#34;INSERT INTO qiita_data(setdate, title, url, views, likes, stocks, per_like, per_stock) VALUES (&#39;&#34; + setdate + &#34;&#39;,&#39;&#34; + title + &#34;&#39;,&#39;&#34; + item_url + &#34;&#39;, &#39; &#34;+ str(page_views_count) + &#34;&#39;,&#39;&#34; + str(likes_count) + &#34;&#39;,&#39;&#34; + str(stock_count) + &#34;&#39;,&#39;&#34; + str(per_like) + &#34;&#39;,&#39;&#34; + str(per_stock) + &#34;&#39;)&#34;
</span><span style="color:#e6db74">        db.execute(sqlinsert)
</span><span style="color:#e6db74">
</span><span style="color:#e6db74"># End cursor
</span><span style="color:#e6db74">db.close()
</span><span style="color:#e6db74">#Commit
</span><span style="color:#e6db74">cnt.commit()
</span><span style="color:#e6db74"># MySQL disconnect
</span><span style="color:#e6db74">cnt.close()
</span></code></pre></div><ul>
<li>Return DB information</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-qiita_data_get.php" data-lang="qiita_data_get.php"><span style="color:#75715e">&lt;?php</span>

  <span style="color:#75715e">// set of DB settings
</span><span style="color:#75715e"></span>  $host <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;xxxxxxxxxxxxxxxxxxxxxxxx&#34;</span>;
  $dbname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;xxxxxxxxxxxxxxxxxxxxxxx&#34;</span>;
  $user <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;xxxxxxxxxxxxx&#34;</span>;
  $pass <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;xxxxxxxxxxxxx&#34;</span>;

  <span style="color:#75715e">// get parameters
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isset</span>($_GET[<span style="color:#e6db74">&#39;setdate&#39;</span>])) {
    $paramdate <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;19000101&#39;</span>;
  } <span style="color:#66d9ef">else</span> {
    $paramdate <span style="color:#f92672">=</span> $_GET[<span style="color:#e6db74">&#39;setdate&#39;</span>];
  }

  <span style="color:#75715e">// check the number of digits
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">strlen</span>($paramdate)<span style="color:#f92672">!=</span><span style="color:#ae81ff">8</span>) {
    <span style="color:#a6e22e">http_response_code</span>(<span style="color:#ae81ff">500</span>);
    <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;setdate length is not 8&#34;</span>;
    <span style="color:#66d9ef">exit</span>();
  }

  <span style="color:#75715e">// YYYYMMDD format check
</span><span style="color:#75715e"></span>  $stryear <span style="color:#f92672">=</span> <span style="color:#a6e22e">substr</span>($paramdate, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">4</span>);
  $strmonth <span style="color:#f92672">=</span> <span style="color:#a6e22e">substr</span>($paramdate, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">2</span>);
  $strday <span style="color:#f92672">=</span> <span style="color:#a6e22e">substr</span>($paramdate, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">2</span>);
  <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">checkdate</span>($strmonth, $strday, $stryear)) {
    <span style="color:#a6e22e">http_response_code</span>(<span style="color:#ae81ff">500</span>);
    <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;setdate is not date&#34;</span>;
    <span style="color:#66d9ef">exit</span>();
  }

  <span style="color:#75715e">// Set header information
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">header</span>(<span style="color:#e6db74">&#34;Content-Type: application/json; charset=utf-8&#34;</span>);

  $data <span style="color:#f92672">=</span> <span style="color:#66d9ef">array</span>();

  <span style="color:#75715e">// DB connection information setting, SQL preparation, connection
</span><span style="color:#75715e"></span>  $db <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PDO</span>(<span style="color:#e6db74">&#39;mysql:host=&#39;</span> <span style="color:#f92672">.</span>$host <span style="color:#f92672">.</span><span style="color:#e6db74">&#39;dbname=&#39;</span> <span style="color:#f92672">.</span>$dbname <span style="color:#f92672">.</span><span style="color:#e6db74">&#39;charset=utf8&#39;</span>, $user, $pass);

  <span style="color:#75715e">// if the date did not come
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> ($paramdate <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;19000101&#39;</span>) {
    $sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select * from qiita_data&#34;</span>;
  <span style="color:#75715e">// if the date is set in the parameter
</span><span style="color:#75715e"></span>  } <span style="color:#66d9ef">else</span> {
    $sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select * from qiita_data where setdate=&#39;&#34;</span> <span style="color:#f92672">.</span>$paramdate <span style="color:#f92672">.</span><span style="color:#e6db74">&#34;&#39;&#34;</span>;
  }
  $sth <span style="color:#f92672">=</span> $db <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">prepare</span>($sql);
  $sth <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">execute</span>();

  <span style="color:#75715e">// get the data
</span><span style="color:#75715e"></span>  $data <span style="color:#f92672">=</span> $sth <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">fetchAll</span>(<span style="color:#a6e22e">PDO</span><span style="color:#f92672">::</span><span style="color:#a6e22e">FETCH_ASSOC</span>);

  <span style="color:#75715e">// json objectization
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">json_encode</span>($data);
<span style="color:#75715e">?&gt;</span>
</code></pre></div><ul>
<li>Display in Vues.js</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Qiita_data_get(Vue).html" data-lang="Qiita_data_get(Vue).html"><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ja&#34;</span>&gt;
  &lt;<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;utf-8&#34;</span>&gt;
    &lt;<span style="color:#f92672">title</span>&gt;Qiita Data Get&lt;/<span style="color:#f92672">title</span>&gt;
    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css&#34;</span>&gt;
  &lt;/<span style="color:#f92672">head</span>&gt;

  &lt;<span style="color:#f92672">body</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container&#34;</span>&gt;
      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;app&#34;</span>&gt;
        &lt;<span style="color:#f92672">br</span>&gt;
        &lt;<span style="color:#f92672">h3</span>&gt;Get Qiita post list&lt;/<span style="color:#f92672">h3</span>&gt;
        &lt;<span style="color:#f92672">br</span>&gt;
        &lt;<span style="color:#f92672">p</span>&gt;Acquisition date: &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;date&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;date&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;getdate&#34;</span>&gt; (If you do not enter, get the current date)&lt;/<span style="color:#f92672">p</span>&gt;
        &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-primary&#34;</span> <span style="color:#a6e22e">v-on:click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;getitem&#34;</span>&gt;Get data&lt;/<span style="color:#f92672">button</span>&gt;
        &lt;<span style="color:#f92672">hr</span>&gt;
        &lt;<span style="color:#f92672">table</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;table table-dark&#34;</span>&gt;
          &lt;<span style="color:#f92672">thead</span>&gt;
            &lt;<span style="color:#f92672">tr</span>&gt;
              &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;No&lt;/<span style="color:#f92672">th</span>&gt;
              &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Title&lt;/<span style="color:#f92672">th</span>&gt;
              &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Views&lt;/<span style="color:#f92672">th</span>&gt;&lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Likes&lt;/<span style="color:#f92672">th</span>&gt;
              &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Stocks&lt;/<span style="color:#f92672">th</span>&gt;
              &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Like率&lt;/<span style="color:#f92672">th</span>&gt;
              &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Stock率&lt;/<span style="color:#f92672">th</span>&gt;
            &lt;/<span style="color:#f92672">tr</span>&gt;
          &lt;/<span style="color:#f92672">thead</span>&gt;
          &lt;<span style="color:#f92672">tr</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;(item, index) in items&#34;</span> <span style="color:#a6e22e">:key</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;item.no&#34;</span>&gt;
            &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row&#34;</span>&gt;{{ itemno - index }}&lt;/<span style="color:#f92672">th</span>&gt;
            &lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">v-bind:href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;item.url&#34;</span> <span style="color:#a6e22e">target</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;_blank&#34;</span>&gt;{{ item.title }}&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">td</span>&gt;
            &lt;<span style="color:#f92672">td</span>&gt;{{ item.views }}&lt;/<span style="color:#f92672">td</span>&gt;
            &lt;<span style="color:#f92672">td</span>&gt;{{ item.likes }}&lt;/<span style="color:#f92672">td</span>&gt;
            &lt;<span style="color:#f92672">td</span>&gt;{{ item.stocks }}&lt;/<span style="color:#f92672">td</span>&gt;
            &lt;<span style="color:#f92672">td</span>&gt;{{ item.per_like }}&lt;/<span style="color:#f92672">td</span>&gt;
            &lt;<span style="color:#f92672">td</span>&gt;{{ item.per_stock }}&lt;/<span style="color:#f92672">td</span>&gt;
          &lt;/<span style="color:#f92672">tr</span>&gt;
        &lt;/<span style="color:#f92672">table</span>&gt;
      &lt;/<span style="color:#f92672">div</span>&gt;
    &lt;<span style="color:#f92672">div</span>&gt;

    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://unpkg.com/axios/dist/axios.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;

    &lt;<span style="color:#f92672">script</span>&gt;
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Vue</span>({
        <span style="color:#a6e22e">el</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;#app&#39;</span>,
        <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> {
          <span style="color:#a6e22e">items</span><span style="color:#f92672">:</span> [],
          <span style="color:#a6e22e">getdate</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&#39;</span>,
          <span style="color:#a6e22e">itemno</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
        },
        <span style="color:#a6e22e">methods</span><span style="color:#f92672">:</span> {
          <span style="color:#a6e22e">getitem</span>() {

            <span style="color:#66d9ef">if</span>( <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getdate</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;&#39;</span>){
              <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">date</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date();
              <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">yyyy</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">date</span>.<span style="color:#a6e22e">getFullYear</span>();
              <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">mm</span> <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#34;0&#34;</span><span style="color:#f92672">+</span>(<span style="color:#a6e22e">date</span>.<span style="color:#a6e22e">getMonth</span>()<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)).<span style="color:#a6e22e">slice</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>);
              <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">dd</span> <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#34;0&#34;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">date</span>.<span style="color:#a6e22e">getDate</span>()).<span style="color:#a6e22e">slice</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>);
              <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getdate</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">yyyy</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">mm</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">dd</span>;
            }

            <span style="color:#a6e22e">yyyy</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getdate</span>.<span style="color:#a6e22e">substr</span>(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">4</span>)
            <span style="color:#a6e22e">mm</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getdate</span>.<span style="color:#a6e22e">substr</span>(<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">2</span>)
            <span style="color:#a6e22e">dd</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getdate</span>.<span style="color:#a6e22e">substr</span>(<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">2</span>)
            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">setdate</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">yyyy</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">mm</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">dd</span>
            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx/qiita_data_get.php?setdate=&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">setdate</span>

            <span style="color:#a6e22e">axios</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">url</span>)
            .<span style="color:#a6e22e">then</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">response</span>){
              <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">items</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">data</span>
              <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">itemno</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">length</span>
              <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">itemno</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>){
                <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;データが取得できませんでした&#39;</span>)
              }
              <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">itemno</span>)
            }.<span style="color:#a6e22e">bind</span>(<span style="color:#66d9ef">this</span>))
            .<span style="color:#66d9ef">catch</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">error</span>){
              <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">error</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;が起きています&#39;</span>)
            })
          }
        }
      })
    &lt;/<span style="color:#f92672">script</span>&gt;
  &lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p>##まとめ
・QiitaAPIを叩き、自分の投稿の「ページビュー」/「いいね」/「ストック」のすべての情報取得・表示するところを実装しました。
・どの方法でもよいと思いますが、GoogleScriptは定期実行も簡単に設定できるので、便利かなと思いました。
・次はたまってきた情報をいい感じに見せるグラフ表示とかをやってみたいと思います。→2020/02/12追記：<a href="https://qiita.com/yoshi_yast/items/f4557cb48a13f198d42a">Chart.jsを使用して、複数軸のグラフを表示する(Javascript)</a>にて実施しました。</p>
<p>##その他の参考URL</p>
<ul>
<li><a href="https://qiita.com/api/v2/docs">Qiita API v2 ドキュメント</a></li>
<li><a href="https://qiita.com/tag1216/items/b0b90e30c7e581aa2b00">Qiita API v2 の概要(非公式)</a></li>
<li><a href="https://qiita.com/kai_kou/items/3cc89f94f4440546a995">Qiita API v2を活用するときの参考記事まとめ</a></li>
<li><a href="https://qiita.com/junsan50/items/af751532e6eeb1e2a987">Vue.js + axios で Qiita API v2 を叩いて投稿を取得する</a></li>
</ul>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
