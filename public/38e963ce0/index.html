<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] Python environment construction (Anaconda &#43; VSCode) @ Windows10 [January 2020 edition] | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] Python environment construction (Anaconda + VSCode) @ Windows10 [January 2020 edition]</h1>
<p>
  <small class="text-secondary">
  
  
  Jan 16, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/windows10">Windows10</a></code></small>


<small><code><a href="https://memotut.com/tags/anaconda">Anaconda</a></code></small>


<small><code><a href="https://memotut.com/tags/vscode">VSCode</a></code></small>

</p>
<pre><code>#Background
</code></pre>
<p>When I made a Python environment with Anaconda + VS Code, I was troubled because the latest setting method did not come out, so I will publish my notes for those who will do it now.
It seems that there was a VS Code specification change around 2017. Be careful when reading old commentary.</p>
<p>Articles referenced:
<a href="https://qiita.com/Atupon0302/items/ee3303629ce0b2ae58d7">@Atupon0302: Build Python environment in Windows 10 environment with Anaconda+Visual Studio Code [September 2017]</a></p>
<h1 id="what-to-write-in-this-article">What to write in this article</h1>
<p>In this article, I will write a procedure to build a Python environment with Anaconda and VS Code on a Windows 10 PC and build and debug a simple program.</p>
<p>Since the purpose of introducing Python is to play with machine learning, I will use Anaconda which can put the Python library for machine learning in one go.
(Previously, I had a lot of trouble putting in individual machine learning libraries&hellip;)</p>
<p>#Prerequisite environment</p>
<ul>
<li>Windows10 Enterprise</li>
<li>Anaconda 2019.10</li>
<li>VS Code 1.41.1</li>
<li>VS Code Python Extention 2020.1.58038</li>
</ul>
<h1 id="procedure">Procedure</h1>
<h2 id="insert-anaconda">Insert Anaconda</h2>
<h3 id="installation-of-main-unit">Installation of main unit</h3>
<p>Get the module for Windows from the Download link on the <a href="https://www.anaconda.com/">Anaconda</a> page. Select 3.x as the Python version.
All installer contents are default, just press the Next button.
I was &ldquo;Anaconda 2019.10 for Windows Installer&rdquo;.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105029/e61e97db-bf0a-efb5-6eed-a602d9ce0eca.png" alt="anaconda1.png"></p>
<h3 id="operation-check">operation check</h3>
<p>Start Anaconda3&gt; Anaconda Prompt from the start menu.
Execute the following with Anaconda Prompt and OK if the version number is returned.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">conda -V
python -V
</code></pre></div><h3 id="creating-a-virtual-environment">Creating a virtual environment</h3>
<p>Create a virtual environment for yourself to hold the library configuration of the execution environment.
By default we have a base environment, and we already have a handy library such as numpy in it, so copy base to create a new environment.
If you don&rsquo;t use the <code>--clone</code> option, you can create a clean new environment. I will add my favorite library here. (See below)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Create py37 environment (when duplicating base)</span>
conda create -n py37 --clone base

<span style="color:#75715e"># Create py37 environment (If you add python only and add necessary libraries later)</span>
conda create -n py37 python<span style="color:#f92672">=</span>3.7
</code></pre></div><p>Check the created environment.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#Display environment list</span>
conda info -e
</code></pre></div><p>Environments that are enabled are marked with *. Currently the default base environment is in effect.</p>
<pre><code class="language-console" data-lang="console">(base) C:\Users\XXXX&gt;conda info -e
# conda environments:
#
py37 C:\Users\XXXX\.conda\envs\py37
base * C:\Users\XXXX\Anaconda3
</code></pre><p>To switch to a new environment, use the <code>conda activate</code> command.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># enable py37 environment</span>
conda activate py37
</code></pre></div><p>If successful, the environment name (py37) is added to the prompt</p>
<pre><code class="language-console" data-lang="console">(base) C:\Users\XXXX&gt;activate py37

(py37) C:\Users\XXXX&gt;
</code></pre><p>The display of the libraries in the environment is <code>conda list</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># See version of numpy library</span>
conda list numpy
</code></pre></div><pre><code class="language-console" data-lang="console">(py37) C:\Users\XXXX&gt;conda list numpy
# packages in environment at C:\Users\XXXX\Anaconda3\envs\py37:
#
# Name Version Build Channel
numpy 1.16.5 py37h19fb1c0_0
numpy-base 1.16.5 py37hc3f5095_0
numpydoc 0.9.1 py_0
</code></pre><p>If you need to add a library, add it with <code>conda search</code> <code>conda install</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># If you are looking for a django library</span>
conda search django

<span style="color:#75715e"># To add the django library</span>
conda install django
</code></pre></div><p>To exit the environment, use the <code>conda deactivate</code> command.
(Although there is an explanation that the command is <code>deactivate</code>, it is deprecated at present, so set it to <code>conda deactivate</code>.)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Get out of the environment</span>
conda deactivate
</code></pre></div><p>The conda command is used like the PIP command provided by Python. In Anaconda environment, package management is done using <code>conda</code> command instead of <code>pip</code>.</p>
<h3 id="python-path">Python path</h3>
<p>As mentioned above, I will create a virtual environment according to my work, so I will not set the PATH of Windows. (Set from the control panel)</p>
<h2 id="insert-vs-code">Insert VS Code</h2>
<h3 id="installation-of-main-unit-1">Installation of main unit</h3>
<p>Download the <a href="https://azure.microsoft.com/ja-jp/products/visual-studio-code/">vscode</a> page and insert the module for Windows.
The installer contents are included by default.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105029/88c8294b-3207-1332-6cf5-3490cf22d853.png" alt="vscode.png"></p>
<h3 id="operation-check-1">operation check</h3>
<p>Start Visual Studio Code from the start menu. Hereinafter referred to as VS Code.</p>
<h3 id="setup-allow-building-and-debugging-python">Setup: Allow building and debugging Python</h3>
<ul>
<li>Include Python extension
Click the extension button on the VS Code toolbar, search for &ldquo;Python&rdquo; and enter the Python extension for Visual Studio Code.</li>
</ul>
<p>*There was a problem with the image version, so I finally added Python Extension 2020.1.58038.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105029/edc0f84b-73bb-df74-bfac-59fc0d7da71f.png" alt="000231.png"></p>
<ul>
<li>Set the path
Open the setting screen by File&gt;Preferences&gt;Settings of VS Code.</li>
</ul>
<ol>
<li>
<p>Enter &ldquo;python.pythonpath&rdquo; in the search key and set the Python path.
For the value, refer to the value entered as <code>conda info -e</code> on Anaconda.
<code>C:\Users\XXXX\Anaconda3\envs\py37\python.exe</code></p>
</li>
<li>
<p>Put &ldquo;python.condapath&rdquo; in the search key and set the Conda command path.
The value specifies the directory name where conda.exe is located. (Scripts)
C:\Users\XXXX\Anaconda3\Scripts\</p>
</li>
</ol>
<ul>
<li>Create a task for build</li>
</ul>
<p>Create an appropriate working folder and write test.py.
At this time, if the working folder is under the virtual environment of Anaconda, the breakpoint cannot be used in the debug execution described later.
When developing with VS Code, you need a development folder different from Anaconda&rsquo;s virtual environment (I&rsquo;ve separated the environment, but it&rsquo;s a little troublesome&hellip;)</p>
<p>Reference: <a href="https://qiita.com/EngineerShiba/items/6c7d2b97829a4c4092d7">Problem that does not stop at breakpoint when debugging Python virtual environment with VS Code</a></p>
<p>The following is working in <code>c:\dev\pydev</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh:test.py" data-lang="sh:test.py"><span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;foo&#34;</span>)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;bar&#34;</span>)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Fugafuga&#34;</span>)
</code></pre></div><p>If you run &ldquo;Ctrl + Shift + B&rdquo; (build task execution command) with test.py open in VS Code, a warning message that there is no task is displayed.
When you click the message, the message that a task will be created from the template will be displayed. Click it further and select &ldquo;Others&rdquo; from the template type to create the task setting file (tasks.json).
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105029/6cca66ab-b352-64a1-e5c2-09164a26236a.png" alt="task01.png">
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105029/47908a2d-e4e3-0704-2bf1-b6578246dfa1.png" alt="task02.png">
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105029/544b7811-9094-7d15-5d33-b9728b1c64de.png" alt="task03.png"></p>
<p>Edit tasks.json as follows and save.
The point is to write the Python path specified in settings.json in <code>command</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tasks.json" data-lang="tasks.json">{
    <span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#960050;background-color:#1e0010">See</span> <span style="color:#960050;background-color:#1e0010">https://go.microsoft.com/fwlink/?LinkId=733558</span>
    <span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#960050;background-color:#1e0010">for</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">documentation</span> <span style="color:#960050;background-color:#1e0010">about</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">tasks.json</span> <span style="color:#960050;background-color:#1e0010">format</span>
    <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;2.0.0&#34;</span>,
    <span style="color:#f92672">&#34;tasks&#34;</span>: [{
            <span style="color:#f92672">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;python build&#34;</span>,
            <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;shell&#34;</span>,
            <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;${config:python.pythonPath}&#34;</span>,
            <span style="color:#f92672">&#34;args&#34;</span>: [<span style="color:#e6db74">&#34;${file}&#34;</span>],
            <span style="color:#f92672">&#34;group&#34;</span>: {
                <span style="color:#f92672">&#34;kind&#34;</span>: <span style="color:#e6db74">&#34;build&#34;</span>,
                <span style="color:#f92672">&#34;isDefault&#34;</span>: <span style="color:#66d9ef">true</span>
            }
        }
    ]
}
</code></pre></div><ul>
<li>Build</li>
</ul>
<p>&ldquo;Ctrl + Shift + B&rdquo;</p>
<p>After saving task.json, execute &ldquo;Ctrl + Shift + B&rdquo; (build task execution command) with test.py open, and the execution result will be displayed on the console.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105029/94c888f6-1582-0dce-a8ae-1ae3d3a77f43.png" alt="000241.png"></p>
<ul>
<li>Debug</li>
</ul>
<p>&ldquo;F5&rdquo;</p>
<p>If you run &ldquo;F5&rdquo; (build task execution command) with test.py open in VS Code, it will be executed in debug mode.
When you place a breakpoint, it is highlighted in yellow and you can step through it.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105029/fe7927e0-6588-89b1-70d0-859a52f992e5.png" alt="000242.png"></p>
<h1 id="addicted">Addicted</h1>
<ul>
<li>I get a conda error.</li>
</ul>
<p>I&rsquo;m using the latest version of Python Extension (2020.1), but <a href="https://github.com/microsoft/vscode-python/issues/9154">PythonExtention 2019.12 version gives an error that conda cannot be found, so use 2020.1</a> occurred. After updating Python Extension from 2020.1.57204 to 2020.1.58038, it disappeared. Is this all right?</p>
<h1 id="reference-link">Reference link</h1>
<p><a href="https://code.visualstudio.com/docs/python/environments">Official: Python with VS Code</a>
<a href="https://code.visualstudio.com/docs/python/settings-reference">Official: Setting environment variables</a></p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
