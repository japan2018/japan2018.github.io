<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] For those who look at the log while learning with machine learning ~ Muscle training with LightGBM ~ | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] For those who look at the log while learning with machine learning ~ Muscle training with LightGBM ~</h1>
<p>
  <small class="text-secondary">
  
  
  Dec 23, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/machine-learning"> machine learning</a></code></small>


<small><code><a href="https://memotut.com/tags/life-hack"> life hack</a></code></small>


<small><code><a href="https://memotut.com/tags/muscle-training"> muscle training</a></code></small>


<small><code><a href="https://memotut.com/tags/lightgbm"> lightgbm</a></code></small>

</p>
<pre><code>What do you guys do when learning models with machine learning?
</code></pre>
<p>Did you just look at the log output to the console?
&ldquo;Oh, it was lower than I expected!&rdquo; &ldquo;Oh, the accuracy is getting worse, do your best!!&rdquo;
It&rsquo;s surprisingly fun to think, though.</p>
<p>But when I cheered up, the model doesn&rsquo;t do its best, and there is no dramatic development, so it&rsquo;s a waste of time to look at it.
I noticed it while thinking about such a thing.</p>
<p>** &ldquo;Why don&rsquo;t you do muscle training this time?&rdquo; **</p>
<p>That&rsquo;s why I thought of an environment where I could do muscle training between machine learning.</p>
<hr>
<p>This is Hattori from NTT Docomo.
This is the article from the 23rd day of AdventCalender 2019, NTT Docomo Service Innovation Department.</p>
<h2 id="target-of-this-article">Target of this article</h2>
<ul>
<li>I like muscle training</li>
<li>People in the machine learning neighborhood who lack exercise</li>
<li>People who often use LightGBM such as kaggler</li>
</ul>
<h2 id="why-do-you-do-muscle-training">Why do you do muscle training?</h2>
<p>To improve the accuracy of the model, it is necessary to repeat hypotheses and verifications many times.</p>
<p>However, if the accuracy does not improve at all, I think that it may be less motivated.</p>
<p>**At such times, muscle training is effective. **</p>
<p>Muscle training activates the secretion of the hormone called &ldquo;testosterone&rdquo;.
Testosterone is a hormone that controls the motivation of the brain.
Even when the accuracy is not improved and it falls</p>
<p>&ldquo;OK! Once again!&rdquo;</p>
<p>It has come to be considered that, the accuracy has improved.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/525983/fb24c540-284a-4610-e5f1-73e88c7df45a.png" alt="Muscle training effect.png"></p>
<p>Also, I feel that muscle training has become popular recently.
An animation that shows high school girls doing muscle training is broadcast, and an application that does muscle training on the Yamanote line appears. After all, demand for muscle training seems to be high.</p>
<p><a href="https://www.fnn.jp/posts/00049182HDK/201912020700_FNNjpeditorsroom_HDK">Muscle training on the Yamanote Line&hellip; &ldquo;A train-only app&rdquo; introduced by JR East. But don&rsquo;t you worry about the surrounding eyes? </a></p>
<h2 id="direction">Direction</h2>
<p>As you can not even force muscle training, so</p>
<ol>
<li>Create a situation that makes you think &ldquo;You have to exercise hard!&rdquo;
→** Muscle training menu, play a signal to start, rhythm, etc.**</li>
<li>Increase motivation for muscle training
→** Depending on the learning situation (accuracy), change the number of muscle training etc. to have a game property**</li>
</ol>
<p>Focus on such places.</p>
<p>Also, LightGBM is the target model for implementation.</p>
<p>*Deep learning models tend to take a long time to learn, so it&rsquo;s hard to keep trying while trying, so I gave up&hellip; orz</p>
<h3 id="what-is-light-gbm">What is Light GBM</h3>
<p>LightGBM is a gradient boosting library developed by Microsoft.
It is often used in Kaggle<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>, and its high accuracy and fast learning speed are attractive.
XGBoost is also famous, but recently there is an impression that LightGBM is used.</p>
<p>The following articles are easy to understand about LightGBM.</p>
<p><a href="https://lightgbm.readthedocs.io/en/latest/">LightGBM Official Documentation (English)</a>
<a href="https://upura.hatenablog.com/entry/2019/10/29/184617">Seven Reasons for &ldquo;First Hand Light GBM&rdquo;</a>
<a href="https://www.codexa.net/lightgbm-beginner/">Introduction to LightGBM – How to use LightGBM, how it works, and how it differs from XGBoost</a></p>
<h2 id="lightgbm-callback-function">LightGBM Callback function</h2>
<p>This time we will mainly implement using the Callback function of LightGBM.
LightGBM Callback function will be executed at the time of learning by passing the Callback function defined by yourself at the time of learning.</p>
<p>Basically, in many machine learning libraries (except the NN framework), learning is executed on the library side, so it is difficult for the side to use during learning, but various customizations are possible with the callback function. Become.</p>
<p>For example</p>
<ul>
<li>Send learning progress to logger (and also to Slack/LINE)</li>
<li>Proprietary Early Stopping implementation</li>
<li>Dynamically change hyperparameters</li>
</ul>
<p>It is useful for heavy users.</p>
<h3 id="callback-function-mechanism">Callback function mechanism</h3>
<p>Callback function is defined to accept the argument of namedtuple type (env in the sample code below).
Since the variable containing the learning situation is included in that, the process using it is defined.
What you can receive is</p>
<ul>
<li>Hyper parameter</li>
<li>Current iteration count</li>
<li>Train/valid score for the current iteration</li>
<li>Model being trained (Booster class)</li>
</ul>
<p>Etc.</p>
<p>When you execute learning such as <code>lgb.train()</code> or <code>lgb.fit()</code>, you can pass the defined callback function as a list with the argument name callbacks.
Below is a simple sample code.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">import</span> lightgbm <span style="color:#f92672">as</span> lgb

<span style="color:#f92672">....</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callback_func</span>(env):
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    Callback function that you define
</span><span style="color:#e6db74">    The learning status can be obtained from the argument env(named tuple)
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    <span style="color:#66d9ef">if</span> env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">%</span> <span style="color:#ae81ff">100</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
        <span style="color:#66d9ef">print</span>(f <span style="color:#e6db74">&#34;Now, {env.iteration + 1} iteration is over&#34;</span>)


lgb<span style="color:#f92672">.</span>train(
    lgb_param,
    <span style="color:#f92672">.....</span>
    callbacks<span style="color:#f92672">=</span>[callback_func] Pass the functions defined <span style="color:#f92672">in</span> <span style="color:#75715e">#callbacks in list format</span>
)
</code></pre></div><p>You can understand more detailed contents and other usages by looking at the links below.</p>
<p><a href="https://github.com/Microsoft/LightGBM/blob/master/python-package/lightgbm/callback.py">LightGBM/callback.py at master · Microsoft/LightGBM · GitHub</a>
[How to use LightGBM (callback function) that is too detailed to convey) (http://yutori-datascience.hatenablog.com/entry/2017/08/19/195049)
<a href="https://amalog.hateblo.jp/entry/lightgbm-logging-callback">Learning history is output via logger using LightGBM callback</a></p>
<h2 id="implemented-function">Implemented function</h2>
<h3 id="give-muscle-training-guidance-when-learning">Give muscle training guidance when learning</h3>
<ul>
<li>At the start of learning: Guidance for starting muscle training menu
-Example: &ldquo;Start abdominal muscle 30 times&rdquo;</li>
<li>Make a metronome sound (pawn sound) at regular intervals
-Example: Pawn every 5 seconds</li>
<li>At the end of learning / maximum number of times, end guidance
-Example: &ldquo;Thank you for your hard work.&rdquo; &ldquo;I did my best.&rdquo;</li>
</ul>
<p>Great for muscle training</p>
<ul>
<li>Time is fixed (eg Planck 30 seconds)</li>
<li>A certain number of times (eg 30 times abdominal muscles)</li>
</ul>
<p>There are two types of the metronome sound, and the timing to output depends on which type.</p>
<h4 id="time-is-fixed">Time is fixed</h4>
<p>Sound is emitted at regular intervals until the target time is reached.
However, instead of making it a normal time, I decided to set the target time and the interval to make a sound with the iteration of machine learning because I wanted to do my best on the same time axis as LightGBM during learning.</p>
<p>I feel that &ldquo;300iteration plank&rdquo; ** is more friendly with the model than &ldquo;30 second plank&rdquo;.</p>
<h4 id="the-number-of-times-is-fixed">The number of times is fixed</h4>
<p>It is difficult to match the number of iterations because the pace is important for those with a fixed number of times, so set it in seconds.
In the first few iterations, the number of iterations for the specified number of seconds is calculated, and then the metronome sound is emitted for each number of times.</p>
<h3 id="muscle-training-menu-specified-or-random">Muscle training menu specified or random</h3>
<p>Since it is not good to do the same training, I made it possible to specify or randomize by myself.
We recommend setting a random setting, and enjoy including what kind of training you do.</p>
<h3 id="if-the-accuracy-is-better-than-last-time-the-metronome-sound-will-change">If the accuracy is better than last time, the metronome sound will change</h3>
<p>If you understand that &ldquo;Oh, the accuracy has improved!&rdquo; during a painful muscle training, you can also motivate your muscle training.
It also prevents you from being unable to concentrate on muscle training due to concern about accuracy during learning.</p>
<p>To implement this, output the learning log to the log file every time,
Implemented to read and compare the previous learning log.</p>
<h3 id="if-the-accuracy-is-worse-than-the-previous-time-a-penalty-add-muscle-training">If the accuracy is worse than the previous time, a penalty (add muscle training)</h3>
<p>The accuracy of the model also affects the muscle training in the sense that it gives a game.
This can also be handled by comparing it with the previous learning log.</p>
<h3 id="penalty-even-if-you-stop-learning-on-the-way-add-muscle-training">Penalty even if you stop learning on the way (add muscle training)</h3>
<p>Abort learning on the way ≒ Accuracy did not improve
It is like that, so in that case it is a muscle training of the penalty.
It is handled by catching Keyboard Interrupt Exception.</p>
<p>&ldquo;Ctrl + C&rdquo; does not allow you to escape.</p>
<h2 id="implementation">Implementation</h2>
<h3 id="execution-environmentpreparation">Execution environment/preparation</h3>
<ul>
<li>MacOS 10.14.5</li>
<li>Python 3.6.8</li>
<li>lightgbm 2.3.0</li>
<li>VLC media player 3.0.8</li>
</ul>
<h4 id="install">Install</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Install VLC</span>
brew cask install vlc
<span style="color:#75715e"># Python-Install VLC</span>
pip install python-vlc
<span style="color:#75715e"># Install LightGBM</span>
pip install lightgbm
</code></pre></div><h4 id="sound-source-preparation">Sound source preparation</h4>
<p>You need to prepare a sound source.</p>
<p>About voice, I made it with the MacOS standard voice reading function <sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>,
Other sound effects were prepared from the free sound source site <sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>.</p>
<p>You may be more motivated by preparing your own voice.</p>
<h3 id="source-code">Source code</h3>
<h4 id="config-defined-in-advance">config defined in advance</h4>
<p>Set the muscle training menu, type, number of executions, sound source path, etc.
It&rsquo;s not essential, so let&rsquo;s fold it.</p>
<details><summary>Configure code for muscle training menu</summary><div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python">train_config <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;planc&#34;</span>:{
        <span style="color:#e6db74">&#34;train_menu&#34;</span>: <span style="color:#e6db74">&#34;planc&#34;</span>,
        <span style="color:#e6db74">&#34;train_type&#34;</span>: <span style="color:#e6db74">&#34;duration&#34;</span>,
        <span style="color:#e6db74">&#34;total_iteration&#34;</span>: <span style="color:#ae81ff">500</span>,
    },
    <span style="color:#e6db74">&#34;abs&#34;</span>:{
        <span style="color:#e6db74">&#34;train_menu&#34;</span>: <span style="color:#e6db74">&#34;abs&#34;</span>,
        <span style="color:#e6db74">&#34;train_type&#34;</span>: <span style="color:#e6db74">&#34;iter&#34;</span>,
        <span style="color:#e6db74">&#34;total_times&#34;</span>: <span style="color:#ae81ff">50</span>,
        <span style="color:#e6db74">&#34;seconds_1time&#34;</span>: <span style="color:#ae81ff">3</span>
    },
    <span style="color:#e6db74">&#34;pushup&#34;</span>:{<span style="color:#e6db74">&#34;train_menu&#34;</span>: <span style="color:#e6db74">&#34;pushup&#34;</span>,
        <span style="color:#e6db74">&#34;train_type&#34;</span>: <span style="color:#e6db74">&#34;iter&#34;</span>,
        <span style="color:#e6db74">&#34;total_times&#34;</span>: <span style="color:#ae81ff">50</span>,
        <span style="color:#e6db74">&#34;seconds_1time&#34;</span>: <span style="color:#ae81ff">2</span>
    },  
    <span style="color:#e6db74">&#34;squat&#34;</span>:{
        <span style="color:#e6db74">&#34;train_menu&#34;</span>: <span style="color:#e6db74">&#34;squat&#34;</span>,
        <span style="color:#e6db74">&#34;train_type&#34;</span>: <span style="color:#e6db74">&#34;iter&#34;</span>,
        <span style="color:#e6db74">&#34;total_times&#34;</span>: <span style="color:#ae81ff">50</span>,
        <span style="color:#e6db74">&#34;seconds_1time&#34;</span>: <span style="color:#ae81ff">2</span>
    },
}

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">make_sound_dict</span>(config):
    sound_dict <span style="color:#f92672">=</span> {
        <span style="color:#e6db74">&#34;iteration_10&#34;</span>:[
            <span style="color:#e6db74">&#39;sound/iter_sound_1.mp3&#39;</span>
        ],
        <span style="color:#e6db74">&#34;iteration_100&#34;</span>:[
            <span style="color:#e6db74">&#39;sound/iter_sound_2.mp3&#39;</span>
        ],
        <span style="color:#e6db74">&#34;iteration_100_better&#34;</span>:[
            <span style="color:#e6db74">&#39;sound/iter_sound_3.mp3&#39;</span>
        ],
        <span style="color:#e6db74">&#34;train_finish&#34;</span>:[
            <span style="color:#e6db74">&#39;sound/finish.mp3&#39;</span>
        ]
    }
    <span style="color:#66d9ef">if</span> config[<span style="color:#e6db74">&#34;train_type&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;duration&#34;</span>:
        sound_dict[<span style="color:#e6db74">&#34;train_start&#34;</span>] <span style="color:#f92672">=</span> [
            f<span style="color:#e6db74">&#34;sound/{config[&#39;total_iteration&#39;]}iter.mp3&#34;</span>, <span style="color:#75715e"># Nイテレーション</span>
            f<span style="color:#e6db74">&#34;sound/{config[&#39;train_menu&#39;]}_train.mp3&#34;</span>,
            <span style="color:#e6db74">&#34;sound/start.mp3&#34;</span>
        ]
    <span style="color:#66d9ef">elif</span> config[<span style="color:#e6db74">&#34;train_type&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;iter&#34;</span>:
        sound_dict[<span style="color:#e6db74">&#34;train_start&#34;</span>] <span style="color:#f92672">=</span> [
            f<span style="color:#e6db74">&#34;sound/{config[&#39;train_menu&#39;]}_train.mp3&#34;</span>, <span style="color:#75715e"># 筋トレ名（ex: 腕立て伏せ、腹筋、。。。）</span>
            f<span style="color:#e6db74">&#34;sound/{config[&#39;total_times&#39;]}times.mp3&#34;</span>,  <span style="color:#75715e"># Nイテレーション</span>
            <span style="color:#e6db74">&#34;sound/start.mp3&#34;</span> <span style="color:#75715e"># スタート  </span>
        ]
    <span style="color:#66d9ef">return</span> sound_dict
</code></pre></div></div></details>
<h4 id="callback関数を含んだ筋トレ用クラス">Callback関数を含んだ筋トレ用クラス</h4>
<p>少し長いですが、メインのところなのでそのまま載せます。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MuscleSound</span>():
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    LightGBMで筋トレするためのCallback
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    <span style="color:#66d9ef">def</span> __init__(self, train_config, train_menu<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;planc&#34;</span>):
        <span style="color:#66d9ef">if</span> train_menu <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;random&#34;</span>:
            <span style="color:#75715e"># randomの場合はメニューからランダムで設定</span>
            train_menu <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span>choice(train_config<span style="color:#f92672">.</span>keys())
        <span style="color:#66d9ef">assert</span>(train_menu <span style="color:#f92672">in</span> train_config<span style="color:#f92672">.</span>keys())
        self<span style="color:#f92672">.</span>train_menu <span style="color:#f92672">=</span> train_menu
        self<span style="color:#f92672">.</span>config <span style="color:#f92672">=</span> train_config[train_menu]
        self<span style="color:#f92672">.</span>sound_dict <span style="color:#f92672">=</span> make_sound_dict(self<span style="color:#f92672">.</span>config)
        self<span style="color:#f92672">.</span>log_dir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;./muscle&#34;</span>
        self<span style="color:#f92672">.</span>start_time <span style="color:#f92672">=</span> None
        self<span style="color:#f92672">.</span>n_iter_1time <span style="color:#f92672">=</span> None
        <span style="color:#75715e"># setup</span>
        os<span style="color:#f92672">.</span>makedirs(self<span style="color:#f92672">.</span>log_dir, exist_ok<span style="color:#f92672">=</span>True)
        self<span style="color:#f92672">.</span>_setup_prev_log()
        self<span style="color:#f92672">.</span>_load_prev_log()

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">media_play</span>(self, media_list):
        <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">        指定されたmedia_listの音声ファイルを順番に再生
</span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
        p <span style="color:#f92672">=</span> vlc<span style="color:#f92672">.</span>MediaListPlayer()
        vlc_media_list <span style="color:#f92672">=</span> vlc<span style="color:#f92672">.</span>MediaList(media_list)
        p<span style="color:#f92672">.</span>set_media_list(vlc_media_list)
        p<span style="color:#f92672">.</span>play()

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_setup_prev_log</span>(self):
        <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">        前回の学習ログがcurr.logになっているのを
</span><span style="color:#e6db74">        prev.logにrename
</span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
        log_filepath <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(self<span style="color:#f92672">.</span>log_dir, <span style="color:#e6db74">&#34;curr.log&#34;</span>)
        <span style="color:#66d9ef">if</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>exists(log_filepath):
            os<span style="color:#f92672">.</span>rename(
                log_filepath,
                os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(self<span style="color:#f92672">.</span>log_dir, <span style="color:#e6db74">&#34;prev.log&#34;</span>)
            )

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_load_prev_log</span>(self, log_filepath<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;muscle/prev.log&#34;</span>):
        <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">        前回学習時のログを読み込む
</span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
        <span style="color:#66d9ef">if</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>exists(log_filepath):
            self<span style="color:#f92672">.</span>prev_log <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(
                log_filepath, names<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;iter&#34;</span>,<span style="color:#e6db74">&#34;score&#34;</span>]
            )<span style="color:#f92672">.</span>set_index(<span style="color:#e6db74">&#34;iter&#34;</span>)[<span style="color:#e6db74">&#34;score&#34;</span>]
        <span style="color:#66d9ef">else</span>:
            self<span style="color:#f92672">.</span>prev_log <span style="color:#f92672">=</span> None

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_check_score</span>(self, env):
        <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">        スコアの比較及び、ログの保存
</span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
        n_iter <span style="color:#f92672">=</span> env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
        is_better_score <span style="color:#f92672">=</span> False
        <span style="color:#75715e"># Validationスコアを抽出</span>
        <span style="color:#75715e"># valid_setsの最後のdatasetのスコアを使う</span>
        curr_score <span style="color:#f92672">=</span> env<span style="color:#f92672">.</span>evaluation_result_list[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">2</span>]
        <span style="color:#75715e"># 数値が上がるほど良いスコアになるかどうか</span>
        is_upper_metric <span style="color:#f92672">=</span> env<span style="color:#f92672">.</span>evaluation_result_list[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">3</span>]
        <span style="color:#75715e"># 前回のログに同じiterationのスコアがあれば比較</span>
        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>prev_log <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> None <span style="color:#f92672">and</span> n_iter <span style="color:#f92672">in</span> self<span style="color:#f92672">.</span>prev_log<span style="color:#f92672">.</span>index:
            prev_score <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>prev_log<span style="color:#f92672">.</span>loc[n_iter]
            is_better_score <span style="color:#f92672">=</span> curr_score <span style="color:#f92672">&gt;</span> prev_score \
                <span style="color:#66d9ef">if</span> is_upper_metric <span style="color:#66d9ef">else</span> curr_score <span style="color:#f92672">&lt;</span> prev_score
        <span style="color:#75715e"># ログを保存</span>
        <span style="color:#66d9ef">with</span> open(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(self<span style="color:#f92672">.</span>log_dir, <span style="color:#e6db74">&#34;curr.log&#34;</span>), <span style="color:#e6db74">&#34;a&#34;</span>) <span style="color:#66d9ef">as</span> f:
            f<span style="color:#f92672">.</span>write(f<span style="color:#e6db74">&#34;{n_iter},{curr_score}</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
        <span style="color:#66d9ef">return</span> is_better_score

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">play_train_start</span>(self, train_menu):
        <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">        学習スタート時の音再生
</span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
        self<span style="color:#f92672">.</span>play_media_list(self<span style="color:#f92672">.</span>sound_dict[<span style="color:#e6db74">&#34;train_start&#34;</span>])
        <span style="color:#75715e"># 読み終わる前に学習（筋トレ）が始まらないよう少しsleep</span>
        time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">5</span>)

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">duration_sound</span>(self, env):
        <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">        時間が決まっている筋トレ向け
</span><span style="color:#e6db74">        一定のイテレーション回数毎のときに音を出す
</span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
        <span style="color:#66d9ef">if</span> (env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">&gt;</span> self<span style="color:#f92672">.</span>config[<span style="color:#e6db74">&#34;total_iteration&#34;</span>]:
            <span style="color:#75715e"># 筋トレする最大イテレーション数を超えたら何もしない</span>
            <span style="color:#66d9ef">return</span>
        <span style="color:#66d9ef">elif</span> env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> self<span style="color:#f92672">.</span>config[<span style="color:#e6db74">&#34;total_iteration&#34;</span>]:
            <span style="color:#75715e"># 終了回数に達したため、合図</span>
            self<span style="color:#f92672">.</span>media_play(self<span style="color:#f92672">.</span>sound_dict[<span style="color:#e6db74">&#34;train_finish&#34;</span>])
        <span style="color:#66d9ef">elif</span> (env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">%</span> <span style="color:#ae81ff">100</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
            <span style="color:#75715e"># 100回毎の音</span>
            is_better_score <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>_check_score(env)
            <span style="color:#66d9ef">if</span> is_better_score:
                self<span style="color:#f92672">.</span>media_play(self<span style="color:#f92672">.</span>sound_dict[<span style="color:#e6db74">&#34;iteration_100_better&#34;</span>])
            <span style="color:#66d9ef">else</span>:
                self<span style="color:#f92672">.</span>media_play(self<span style="color:#f92672">.</span>sound_dict[<span style="color:#e6db74">&#34;iteration_100&#34;</span>])
        <span style="color:#66d9ef">elif</span> (env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">%</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
            <span style="color:#75715e"># 10回毎の音</span>
            self<span style="color:#f92672">.</span>media_play(self<span style="color:#f92672">.</span>sound_dict[<span style="color:#e6db74">&#34;iteration_10&#34;</span>])

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">iter_sound</span>(self, env):
        <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">        時間に合わせた音再生（回数が決まっている筋トレ向け）
</span><span style="color:#e6db74">        一定の秒数毎に音を出す
</span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>n_iter_1time <span style="color:#f92672">is</span> None:
            <span style="color:#66d9ef">return</span>
        <span style="color:#66d9ef">if</span>  (env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">&gt;</span> self<span style="color:#f92672">.</span>config[<span style="color:#e6db74">&#34;total_times&#34;</span>]<span style="color:#f92672">*</span>self<span style="color:#f92672">.</span>n_iter_1time:
            <span style="color:#75715e"># 筋トレする最大回数数を超えたら何もしない</span>
            returnif (env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">==</span> self<span style="color:#f92672">.</span>config[<span style="color:#e6db74">&#34;total_times&#34;</span>]<span style="color:#f92672">*</span>self<span style="color:#f92672">.</span>n_iter_1time:
            <span style="color:#75715e"># When the maximum number of times is reached, give an end guide</span>
            self<span style="color:#f92672">.</span>media_play(self<span style="color:#f92672">.</span>sound_dict[<span style="color:#e6db74">&#34;train_finish&#34;</span>])
        <span style="color:#66d9ef">if</span> (env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)<span style="color:#f92672">%</span>self<span style="color:#f92672">.</span>n_iter_1time <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>:
            <span style="color:#75715e"># Do nothing if it is not divisible by the number of iterations per time</span>
            <span style="color:#66d9ef">return</span>
        <span style="color:#66d9ef">if</span> ((env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)<span style="color:#f92672">//</span>self<span style="color:#f92672">.</span>n_iter_1time) <span style="color:#f92672">%</span><span style="color:#ae81ff">10</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
            <span style="color:#75715e"># Sound every 100 times</span>
            self<span style="color:#f92672">.</span>media_play(self<span style="color:#f92672">.</span>sound_dict[<span style="color:#e6db74">&#34;iteration_100&#34;</span>])
        <span style="color:#66d9ef">else</span>:
            <span style="color:#75715e"># Sound every 10 times</span>
            self<span style="color:#f92672">.</span>media_play(self<span style="color:#f92672">.</span>sound_dict[<span style="color:#e6db74">&#34;iteration_10&#34;</span>])

    <span style="color:#66d9ef">def</span> __call__(self, env):
        <span style="color:#66d9ef">if</span> env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
            <span style="color:#75715e"># At the beginning of learning</span>
            self<span style="color:#f92672">.</span>media_play(self<span style="color:#f92672">.</span>sound_dict[<span style="color:#e6db74">&#34;train_start&#34;</span>])
        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>config[<span style="color:#e6db74">&#34;train_type&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;times&#34;</span>:
            <span style="color:#75715e"># Set an appropriate number of iterations per time</span>
            <span style="color:#66d9ef">if</span> env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
                self<span style="color:#f92672">.</span>start_time <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>time()
            <span style="color:#66d9ef">elif</span> env<span style="color:#f92672">.</span>iteration <span style="color:#f92672">==</span> <span style="color:#ae81ff">11</span>:
                time_10iter <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>time()<span style="color:#f92672">-</span>self<span style="color:#f92672">.</span>start_time
                self<span style="color:#f92672">.</span>n_iter_1time <span style="color:#f92672">=</span> int(self<span style="color:#f92672">.</span>config[<span style="color:#e6db74">&#34;seconds_1time&#34;</span>] <span style="color:#f92672">/</span> time_10iter <span style="color:#f92672">*</span> <span style="color:#ae81ff">10</span>)
                <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;number of iterations per time&#34;</span>, self<span style="color:#f92672">.</span>n_iter_1time)
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> env<span style="color:#f92672">.</span>evaluation_result_list:
            <span style="color:#66d9ef">return</span>
        <span style="color:#75715e"># Metronome sound reproduction according to muscle training type</span>
        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>config[<span style="color:#e6db74">&#34;train_type&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;iter&#34;</span>:
            self<span style="color:#f92672">.</span>iter_sound(env)
        <span style="color:#66d9ef">elif</span> self<span style="color:#f92672">.</span>config[<span style="color:#e6db74">&#34;train_type&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;duration&#34;</span>:
            self<span style="color:#f92672">.</span>duration_sound(env)
</code></pre></div><h4 id="penalty-handling-on-interruption">Penalty handling on interruption</h4>
<p>This is a process to impose a penalty if you stop learning on the way.</p>
<p>Here, instead of the Callback function, the Exception of KeyboardInterrupt is caught and processed.</p>
<p>Moreover, it is designed so that it can be used as a decorator so that it can be easily written when learning.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">penalty_muscle</span>(func):
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">play_media_list</span>(media_list):
        <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">        Play audio files of specified media_list in order
</span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
        p <span style="color:#f92672">=</span> vlc<span style="color:#f92672">.</span>MediaListPlayer()
        vlc_media_list <span style="color:#f92672">=</span> vlc<span style="color:#f92672">.</span>MediaList(media_list)
        p<span style="color:#f92672">.</span>set_media_list(vlc_media_list)
        p<span style="color:#f92672">.</span>play()

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">wrapper_func</span>(<span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs):
        <span style="color:#66d9ef">try</span>:
            func(<span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs)
        <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">KeyboardInterrupt</span>:
            interrupt_list <span style="color:#f92672">=</span> [
                <span style="color:#e6db74">&#39;sound/keyboard_interrupt.mp3&#39;</span>,
                <span style="color:#e6db74">&#39;sound/1000iter.mp3&#39;</span>,
                <span style="color:#e6db74">&#39;sound/planc_train.mp3&#39;</span>,
                <span style="color:#e6db74">&#39;sound/add.mp3&#39;</span>
            ]
            <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Add muscle training because Ctrl+C is done!!!&#34;</span>)
            play_media_list(interrupt_list)
            time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">5</span>)
            <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">100</span>):
                <span style="color:#66d9ef">if</span> i <span style="color:#f92672">%</span><span style="color:#ae81ff">10</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> i <span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span>:
                    play_media_list([<span style="color:#e6db74">&#39;sound/iter_sound_2.mp3&#39;</span>])
                <span style="color:#66d9ef">else</span>:
                    play_media_list([<span style="color:#e6db74">&#39;sound/iter_sound_1.mp3&#39;</span>])
                time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">1</span>)
            <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#a6e22e">KeyboardInterrupt</span>)
    <span style="color:#66d9ef">return</span> wrapper_func

</code></pre></div><h4 id="learning-code-example-using-callback-function">Learning code example using Callback function</h4>
<p>For normal LightGBM learning,</p>
<ul>
<li>Add a penalty_muscle decorator to the function to learn</li>
<li>Create an instance of MuscleSound class and pass it to callbacks</li>
</ul>
<p>only.
Since the decorator only catches Keyboard Interrupt, any function is acceptable as long as you learn LightGBM in the function.
With this, you can easily make a muscle training version LightGBM anytime.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#a6e22e">@penalty_muscle</span> <span style="color:#75715e"># Add a decorator to the learning function</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">train_muscle_lgb</span>(train_df, target_col, use_cols):
    folds <span style="color:#f92672">=</span> KFold(n_splits<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, shuffle<span style="color:#f92672">=</span>True, random_state<span style="color:#f92672">=</span><span style="color:#ae81ff">2019</span>)
    <span style="color:#66d9ef">for</span> i, (trn_, val_) <span style="color:#f92672">in</span> enumerate(folds<span style="color:#f92672">.</span>split(train_df, train_df[target_col])):
        <span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#34;============fold{i}============&#34;</span>)
        trn_data <span style="color:#f92672">=</span> lgb<span style="color:#f92672">.</span>Dataset(
            train_df<span style="color:#f92672">.</span>loc[trn_, use_cols],
            label<span style="color:#f92672">=</span>train_df<span style="color:#f92672">.</span>loc[trn_, target_col]
        )
        val_data <span style="color:#f92672">=</span> lgb<span style="color:#f92672">.</span>Dataset(
            train_df<span style="color:#f92672">.</span>loc[val_, use_cols],
            label<span style="color:#f92672">=</span>train_df<span style="color:#f92672">.</span>loc[val_, target_col]
        )
        lgb_param <span style="color:#f92672">=</span> {
            <span style="color:#e6db74">&#34;objective&#34;</span>: <span style="color:#e6db74">&#34;binary&#34;</span>,
            <span style="color:#e6db74">&#34;metric&#34;</span>: <span style="color:#e6db74">&#34;auc&#34;</span>,
            <span style="color:#e6db74">&#34;learning_rate&#34;</span>: <span style="color:#ae81ff">0.01</span>,
            <span style="color:#e6db74">&#34;verbosity&#34;</span>: <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,
        }
        <span style="color:#75715e"># MuscleSound class instance generation (Callback function)</span>
        callback_func <span style="color:#f92672">=</span> MuscleSound(train_config, train_menu<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;random&#34;</span>)
        model <span style="color:#f92672">=</span> lgb<span style="color:#f92672">.</span>train(
            lgb_param,
            trn_data,
            num_boost_round<span style="color:#f92672">=</span><span style="color:#ae81ff">10000</span>,
            valid_sets<span style="color:#f92672">=</span>[trn_data, val_data],
            verbose_eval<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>,
            early_stopping_rounds<span style="color:#f92672">=</span><span style="color:#ae81ff">500</span>,
            callbacks<span style="color:#f92672">=</span>[callback_func] <span style="color:#75715e">#callback function specified</span>
        )
</code></pre></div><h2 id="i-actually-tried">I actually tried</h2>
<p>It is an animated GIF for various reasons.
Since the voices and sounds written in the subtitles are actually there, please play them in your brain.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/525983/ea1c87e7-778b-ccc5-cbf5-c221a61829be.gif" alt="training_anime.gif"></p>
<h2 id="challenges-i-experienced">Challenges I experienced</h2>
<p>As a result of actually doing muscle training by myself, there were still problems.</p>
<h3 id="i-will-skip">I will skip</h3>
<p>No matter how much you hear the sound, I want to skip it after doing it many times. A sly stuff.</p>
<ul>
<li>Because you get tired if you do too many times, decide the maximum number of muscle training per day</li>
<li>Detect that you are doing muscle training with IoT devices. The result is given to twitter etc.</li>
</ul>
<p>It seems necessary to deal with such things.
The latter seems to have a high hurdle, but if you do so far, maybe everyone will use it?</p>
<h3 id="learning-time-is-too-short-for-muscle-training">Learning time is too short for muscle training</h3>
<p>If there wasn&rsquo;t much learning data, there was no time to do muscle training. I want hundreds of thousands.
And LightGBM is still fast.</p>
<p>It is difficult to take measures, but there is no choice but to reduce the learning rate or create feature quantities.
(Huh? Are you in a situation to use LightGBM to do muscle training?)</p>
<h3 id="is-muscle-training-a-penalty-in-the-first-place">Is muscle training a penalty in the first place?</h3>
<p>I don&rsquo;t like muscle training so much, but for muscle training people, increasing the number of muscle training is not a penalty. .. ? Some people may dare not improve the accuracy, or some people may press Ctrl + C. .. ?</p>
<p>Muscle training is deep, whether you like it or do it with a penalty.</p>
<h2 id="summary">Summary</h2>
<p>Let&rsquo;s all do muscle training and have a meaningful time while learning the model! !</p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>World&rsquo;s most famous data analysis platform (<a href="https://www.kaggle.com/">https://www.kaggle.com/</a>) <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p><a href="https://w3g.jp/blog/mac-os-tts">Synthesized voice narration sound source that can be created with macOS standard software</a> <a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p><a href="https://soundeffect-lab.info/">Sound effect lab (sound source site)</a> <a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
