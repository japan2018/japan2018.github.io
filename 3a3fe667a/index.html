<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] Collection of Python statistical techniques-Statistical analysis against Python- | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] Collection of Python statistical techniques-Statistical analysis against Python-</h1>
<p>
  <small class="text-secondary">
  
  
  Dec 13, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/statistics"> statistics</a></code></small>


<small><code><a href="https://memotut.com/tags/analysis"> analysis</a></code></small>

</p>
<pre><code>This is the [Open and Reproducible Science Advent Calendar 2019](https://adventar.org/calendars/4523): Day 13 article.
</code></pre>
<h1 id="article-purpose">Article purpose</h1>
<p>S is the name for statistical analysis.
But there are people like me who want to do anything with just Python.
For such people, I will introduce useful libraries and techniques for doing statistical analysis in Python.
There are many articles and books on the same subject, but I will focus on those that are not often introduced elsewhere.
For the details of each library technique, we plan to introduce another article as much as possible.</p>
<p>Target: People who have used Python but are not serious</p>
<h1 id="jupyter-notebook--lab">Jupyter Notebook / Lab</h1>
<p>It is a classic that has been introduced in various articles, but I will introduce it once.</p>
<p>Why do we use program-based statistical software like Python or R instead of GUI-based like SPSS?
It&rsquo;s <del>expensive</del> to ensure <strong>reproducibility of results</strong>.
In other words, this is so that it is possible to later confirm what kind of operation/analysis a certain result was obtained from.</p>
<p>Jupyter Notebook is a tool for writing programs while checking execution results one by one.
It is R Markdown in R, and live script in MATLAB.
It becomes easy to look back on what program each analysis result was derived from.
It&rsquo;s a must-have tool for data analysis in Python.
For details, I think <a href="https://qiita.com/takuyanin/items/8bf396e7b6b051670147">Articles around this</a> is easy to understand.</p>
<p>Jupyter Lab is an advanced version of Jupyter Notebook.
In June 2019, ver1.0 was finally released.
I don&rsquo;t think there is a definite difference compared to Notebook, but it is easier to use in various ways.
For more details, <a href="https://qiita.com/kirikei/items/a1639954ce5ccaf7ac3c">Articles around this</a> is recommended.</p>
<p>Personally, I like the ruler function.
In Python, there is a convention (<a href="https://pep8-ja.readthedocs.io/ja/latest/#">PEP8</a>) that &ldquo;if the length of a line is less than 79 characters is good&rdquo;.
You don&rsquo;t have to follow this convention, but if you keep the line length properly, it&rsquo;s easier to read later.
With the ruler function, you can easily see how much is 79 characters.</p>
<p>I could display it by inserting the extension function also in Notebook (<a href="https://qiita.com/simonritchie/items/88161c806197a0b84174#ruler">Reference</a>),butLabcanbeimplementedjustbytweakingthesettings(<a href="https://stackoverflow.com/questions/49322559/how-can-i-add-a-ruler-vertical-line-to-codemirror-editors-in-jupyterlab">Reference</a>)</p>
<h1 id="divide-into-functions">Divide into functions</h1>
<p>As mentioned above, it is recommended to write the main analysis code on the <code>.ipynb</code> file with Jupyter Notebook / Lab.
However, let&rsquo;s break the complicated code as a function and write it in another <code>.py</code> file.
If you only import it from <code>.ipynb</code> and use it, the readability will improve.</p>
<p>See <a href="https://qiita.com/ren094275/items/5d42f7c6be8c5d3cd014">this article</a> for how to create your own function and make it <code>import</code>.</p>
<p>However, in order to reflect the update of the <code>.py</code> file in <code>.ipynb</code>, it is necessary to restart Kernel once.
It&rsquo;s quite annoying because all the variables are reset once.
To prevent this, put the following code in the head of <code>.ipynb</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">%</span>reload_ext autoreload
<span style="color:#f92672">%</span>autoreload <span style="color:#ae81ff">2</span>
</code></pre></div><p>With this, the changes in the <code>.py</code> file are reflected immediately without restart Kernel.</p>
<h2 id="leave-docstring">Leave Docstring</h2>
<p>Docstring is a memo about how to use a function, written according to a certain format.</p>
<p>When I read the analysis script I wrote about a year later, the content seems to be messy.
It will be possible to decipher it if you take time, but you can look back easily if you leave the Docstring.
For writing, see <a href="https://qiita.com/simonritchie/items/49e0813508cad4876b5a#%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82docstring%E3%81Itisperfectifyouread%A3%E3%81%A6">this article</a>.</p>
<h2 id="leave-a-comment">Leave a comment&hellip;?</h2>
<p>In addition to the Docstring, leave comments as appropriate so that you can understand the content of the analysis immediately afterwards.
It is often said that there is discussion (<a href="https://qiita.com/hiro-hori/items/1cf28a6ac75db077c8f3">Reference</a>).
After all, it seems that it is best if you can understand the contents from the variable name or function name without leaving a comment.</p>
<p>IMHO:
At least <code>.ipynb</code> should be able to read the code easily without leaving comments (let&rsquo;s add a heading).
If you think that it is not easy to read when you look back later, divide it as a function and leave a comment or Docstring.</p>
<h2 id="use-git-at-least-moderately">Use Git (at least moderately)</h2>
<p>It&rsquo;s not limited to Python&hellip;</p>
<p>Git is a system for managing source code versions.
Speaking of Git, the site <a href="https://github.com/">GitHub</a> is famous.
It&rsquo;s like a cloud storage for storing data (which, roughly speaking) is managed by Git.
By using Git properly, you can check the source code at the past time.</p>
<p>[How to use Git and GitHub] [https://qiita.com/nnahito/items/565f8755e70c51532459) was easy to understand.</p>
<p>Recording change history frequently using Git seems to be an essential technique for programmers.
…But it&rsquo;s rather difficult to keep records for a human like me.
At the very least, be sure to record the history only when you <em>announce the analysis results</em> in a laboratory, study group, academic conference, paper, etc.
We can look back at what kind of code the analysis results used in those presentations were obtained.</p>
<h2 id="debugging-with-breakpoint">Debugging with breakpoint()</h2>
<p>When fixing a program error, the first step is to find out the cause of the error.
In such a case, the debug function can check the contents of the variables around the error and check the code flow step by step.
Please check <a href="https://qiita.com/musaprg/items/d9f091957475e3088f0e">this article</a> for how to use the debug function of Python.
However, the method introduced in this article cannot be used from Jupyter Notebook.
Please rewrite as follows (<a href="https://qiita.com/makopo/items/170c939c79dcc5c89e12">Reference</a>).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># import pdb; pdb.set_trace() &lt;- instead of this</span>
<span style="color:#f92672">from</span> IPython.core.debugger <span style="color:#f92672">import</span> Pdb; Pdb()<span style="color:#f92672">.</span>set_trace() <span style="color:#75715e"># &lt;- this</span>
</code></pre></div><p>If you are using Python 3.7 or later, ↓ is OK. <a href="https://qiita.com/nakkun/items/62cc704af729893783f1">(Reference)</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># import pdb; pdb.set_trace() &lt;- instead of this</span>
<span style="color:#75715e"># from IPython.core.debugger import Pdb; Pdb().set_trace() &lt;- Not this</span>
breakpoint() <span style="color:#75715e"># &lt;- only this</span>
</code></pre></div><p><code>breakpoint()</code> is super convenient.</p>
<h2 id="read-variables-from-another-file">Read variables from another file</h2>
<p>I&rsquo;ve known that you can <code>import</code> your own defined function from another <code>.py</code> file,
I didn&rsquo;t know until recently that I could define variables (constants).
Please see <a href="https://qiita.com/xKxAxKx/items/9c9198a4e1665d624d88">this article</a> for the method.
If you enumerate a large number of parameters in a row, this method will be easier to see later.</p>
<h2 id="load-google-spreadsheet">Load Google Spreadsheet</h2>
<p>Many people will be using Google forms to complete the survey.
When you analyze the data stored in Google Spreadsheet, you usually download it as .csv and then load it.
However, you can load a spreadsheet directly into Python using the library <code>oauth2client</code>.
It is recommended for those who want to analyze the progress one by one, but who is troubled to download files one by one.</p>
<p>The method is introduced on <a href="https://qiita.com/AAkira/items/22719cbbd41b26dbd0d1">here</a>.</p>
<p>It is convenient to make it a function like ↓.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">from</span> oauth2client.service_account <span style="color:#f92672">import</span> ServiceAccountCredentials
<span style="color:#f92672">import</span> gspread


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">fetch_spread_sheet</span>(spreadsheet_name, worksheet_num, json_path):
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    Read specified Google Spreadsheet as DataFrame type
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    Parameters
</span><span style="color:#e6db74">    ----------
</span><span style="color:#e6db74">    worksheet_name: str
</span><span style="color:#e6db74">        Spreadsheet name to load
</span><span style="color:#e6db74">    worksheet_num: int
</span><span style="color:#e6db74">        The worksheet number to read from the spreadsheet
</span><span style="color:#e6db74">    json_path: str
</span><span style="color:#e6db74">        Path of json file downloaded from GoogleDrive API manager
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    scopes <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;https://www.googleapis.com/auth/drive&#39;</span>]
    credentials <span style="color:#f92672">=</span> ServiceAccountCredentials<span style="color:#f92672">.</span>from_json_keyfile_name(json_path, scopes<span style="color:#f92672">=</span>scopes)
    gc <span style="color:#f92672">=</span> gspread<span style="color:#f92672">.</span>authorize(credentials)
    workbook <span style="color:#f92672">=</span> gc<span style="color:#f92672">.</span>open(spreadsheet_name)
    sheet <span style="color:#f92672">=</span> workbook<span style="color:#f92672">.</span>get_worksheet(worksheet_num)
    <span style="color:#66d9ef">return</span> pd<span style="color:#f92672">.</span>DataFrame(sheet<span style="color:#f92672">.</span>get_all_values())
</code></pre></div><h2 id="statistical-library-pingouin">Statistical library Pingouin</h2>
<p>Pingouin (Panguin, Penguin in French) is a statistics package available in Python (<a href="https://pingouin-stats.org/index.html">official site</a>).
It&rsquo;s a new package that was first released in April 2018.</p>
<p>Speaking of Python statistical packages, there are <code>StatsModels</code> and <code>scipy.stats</code>.
On the other hand, Pingouin&rsquo;s cucumber is “simple and thorough”.
For example, if you use <code>ttest_ind</code> of <code>scipy.stats</code>, it will perform t test and return t value and p value.
On the other hand, <code>pingouin.ttest</code> returns t-value, p-value, <strong>degree of freedom, effect size, 95% confidence interval, test power, Bayse Factor</strong> all at once.</p>
<p>Please check the <a href="https://pingouin-stats.org/api.html#">official site</a> for the list of pingouin functions.
There are functions that are difficult or complicated to do with other libraries.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
