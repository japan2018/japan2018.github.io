<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://japan2018.github.io/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://japan2018.github.io/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://japan2018.github.io/favicon-16x16.png">

  
  <link rel="manifest" href="https://japan2018.github.io/site.webmanifest">

  
  <link rel="mask-icon" href="https://japan2018.github.io/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://japan2018.github.io/css/bootstrap.min.css" />

  
  <title>Delete tweets for specified period | Some Title</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Delete tweets for specified period</h1>
<p>
  <small class="text-secondary">
  
  
  Mar 21, 2020
  </small>
  

<small><code><a href="https://japan2018.github.io/tags/python">Python</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/windows">Windows</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/twitter">Twitter</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/twitterapi">TwitterAPI</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/python3">Python3</a></code></small>

</p>
<pre><code>## I want to say that there was no black history
</code></pre>
<p>There are already various tools in the world,
According to the specifications of Twitter, only the latest 3200 can be deleted,
There is a charge for mass deletion.
Very troubled.</p>
<p>There are over 100,000 tweets like garbage that have accumulated since 2010.</p>
<p>There is also a source that erases all tweets in Qiita if you search for it.
But everything is in trouble.
In the first place, if you want to erase all, it is faster to recreate an account&hellip;</p>
<p>I want to erase the black history and keep the true human being.</p>
<p>For such people.</p>
<p>##procedure</p>
<ol>
<li>Construction of python3.6 environment</li>
<li>Get an archive full of black history</li>
<li>Edit tweet.js in the archive</li>
<li>Get API key</li>
<li>Editing the source code</li>
<li>Execution</li>
<li>Complete</li>
</ol>
<p>##1. Build python3.6 environment
Of course you can use it?
If you can&rsquo;t use it, ask Google Sensei</p>
<p>##2. Get an archive full of black history
① Log in to Twitter on your PC and open the settings screen (<a href="https://twitter.com/settings/account">https://twitter.com/settings/account</a>)
② Select &ldquo;Twitter data&rdquo; tab (enter when password is requested)
③ Press “Download Twitter data”.
*It will take a long time before you can download
▽ It takes time for Twitter to generate download data because it downloads past tweets and DM including images.
However, since it is a new design, it will send a download link by email when it becomes available for download.
④ Click the link that came to the email to start downloading.
⑤ After downloading, decompress it to an appropriate location</p>
<p>##3.Edit tweet.js
I want to read this file with the source code, so I will do a little work.</p>
<p>① Open the &ldquo;data&rdquo; folder in the unzipped folder
② There is a file named &ldquo;tweet.js&rdquo;, so open it with an appropriate text editor.
③ Delete the character string &ldquo;window.YTD.tweet.part0 = &ldquo;at the beginning.
④ Save and close.</p>
<p>*Before saving, make sure that there is no UTF-8 BOM. Maybe an error occurs when reading the file.</p>
<ul>
<li>Also, make a backup of the file just in case. If you make a mistake, download again.</li>
</ul>
<p>##4. Get API key
You need an access token to use Twitter&rsquo;s API. Well, it&rsquo;s just a string.
Follow the steps below to get 2 keys and 2 tokens.
It is necessary for the program, so you can copy and paste it even in notepad OK</p>
<p>① Access here → <a href="https://developer.twitter.com/en/apps">https://developer.twitter.com/en/apps</a>
② There may be some Apps, but select &ldquo;Details&rdquo; although the account ID of Twitter is listed.
③ Check that there are 3 tabs, &ldquo;App details&rdquo;, &ldquo;Keys and tokens&rdquo;, and &ldquo;Permissions&rdquo;.</p>
<p>④ First, select “Permissions” and press the “Edit” button to change the permissions.
⑤ The authority is &ldquo;Read, write, and Direct Messages&rdquo;.
⑥ Click Save to save.</p>
<p>⑦ Open &ldquo;Keys and tokens&rdquo;
⑧ Make a note of the following listed in &ldquo;Keys, secret keys and access tokens management.&rdquo;
· API key
・API secret key
⑨ Copy the information of &ldquo;Access token &amp; access token secret&rdquo;
When you press the &ldquo;Regenerator&rdquo; button
・Access token
・Access token secret
Is displayed, so make a note of each</p>
<p>This is OK</p>
<p>##5. Editing the source code
Source sample is below
I wrote in the comments what I want you to change, so please do whatever you want</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#f92672">import</span> json
<span style="color:#f92672">import</span> twitter <span style="color:#75715e"># pip install python-twitter</span>

<span style="color:#75715e"># ====== Please write your settings in a nice way ======</span>

<span style="color:#75715e">#key and token are listed below</span>
api_key <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Copy and paste here&#39;</span>, <span style="color:#75715e"># Copy the &#34;API key&#34; you wrote down here</span>
api_secret_key <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Copy and paste here&#39;</span>, <span style="color:#75715e"># Copy &#34;API secret key&#34; you wrote down here</span>
access_token <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Copy and paste here&#39;</span>, <span style="color:#75715e"># Copy the &#34;Access token&#34; you wrote down here</span>
access_token_secret <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Copy and paste here&#39;</span>, <span style="color:#75715e"># Copy the &#34;Access token secret&#34; you wrote down here</span>

<span style="color:#75715e"># Describe the file path of tewwt.js. (Be sure to add two &#34;\&#34;)</span>
js_file_path <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;D:</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">sample</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">hogehoge</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">tweet.js&#34;</span>

<span style="color:#75715e"># Delete the tweets in the begin-end period specified below. (Including begin and end dates)</span>
begin_year <span style="color:#f92672">=</span> <span style="color:#ae81ff">2010</span> <span style="color:#75715e"># this year</span>
begin_month <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#75715e"># for this month</span>
begin_day <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#75715e"># from this day down↓</span>
end_year <span style="color:#f92672">=</span> <span style="color:#ae81ff">2019</span> <span style="color:#75715e"># this year</span>
end_month <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span> <span style="color:#75715e"># for this month</span>
end_day <span style="color:#f92672">=</span> <span style="color:#ae81ff">31</span> <span style="color:#75715e"># delete up to this day</span>

<span style="color:#75715e"># ================================</span>

api <span style="color:#f92672">=</span> twitter<span style="color:#f92672">.</span>Api(
    consumer_key <span style="color:#f92672">=</span> api_key,
    consumer_secret <span style="color:#f92672">=</span> api_secret_key,
    access_token_key <span style="color:#f92672">=</span> access_token,
    access_token_secret <span style="color:#f92672">=</span> access_token_secret,
    sleep_on_rate_limit <span style="color:#f92672">=</span> True
)

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">date</span>():
    <span style="color:#66d9ef">def</span> __init__(self, y, m, d):
        self<span style="color:#f92672">.</span>y <span style="color:#f92672">=</span> y
        self<span style="color:#f92672">.</span>m <span style="color:#f92672">=</span> m
        self<span style="color:#f92672">.</span>d <span style="color:#f92672">=</span> d

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">date_range</span>():
    <span style="color:#66d9ef">def</span> __init__(self):
        self<span style="color:#f92672">.</span>begin <span style="color:#f92672">=</span> date(begin_year, begin_month, begin_day)
        self<span style="color:#f92672">.</span>end <span style="color:#f92672">=</span> date(end_year, end_month, end_day)

<span style="color:#75715e">#I think there is a more efficient way, but lose if you care</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">cnv_month_from_str2int</span>(month):
    <span style="color:#66d9ef">if</span> month <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Jan&#39;</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">elif</span> month <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Feb&#39;</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span>
    <span style="color:#66d9ef">elif</span> month <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Mar&#39;</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">3</span>
    <span style="color:#66d9ef">elif</span> month <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Apr&#39;</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">4</span>
    <span style="color:#66d9ef">elif</span> month <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;May&#39;</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">5</span>
    <span style="color:#66d9ef">elif</span> month <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Jun&#39;</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">6</span>
    <span style="color:#66d9ef">elif</span> month <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Jul&#39;</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">7</span>
    <span style="color:#66d9ef">elif</span> month <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Aug&#39;</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">8</span>
    <span style="color:#66d9ef">elif</span> month <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Sep&#39;</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">9</span>
    <span style="color:#66d9ef">elif</span> month <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Oct&#39;</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">10</span>
    <span style="color:#66d9ef">elif</span> month <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Nov&#39;</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">11</span>
    <span style="color:#66d9ef">elif</span> month <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Dec&#39;</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">12</span>
    <span style="color:#66d9ef">else</span>:
        <span style="color:#66d9ef">assert</span> False, <span style="color:#e6db74">&#34;ERROR!![{}] is not month&#34;</span><span style="color:#f92672">.</span>format(month)

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">run</span>():
    d_r <span style="color:#f92672">=</span> date_range()
    cnt <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">with</span> open(js_file_path, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf-8&#39;</span>, mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;r&#39;</span>) <span style="color:#66d9ef">as</span> f:
        tj<span style="color:#f92672">=</span>json<span style="color:#f92672">.</span>load(f)
        <span style="color:#66d9ef">for</span> tweet0 <span style="color:#f92672">in</span> tj:
            tweet <span style="color:#f92672">=</span> tweet0[<span style="color:#e6db74">&#39;tweet&#39;</span>]
            <span style="color:#66d9ef">print</span>()
            <span style="color:#66d9ef">print</span>(tweet[<span style="color:#e6db74">&#39;id&#39;</span>])

            date <span style="color:#f92672">=</span> tweet[<span style="color:#e6db74">&#39;created_at&#39;</span>]
            dow, month, day, time, other, year <span style="color:#f92672">=</span> date<span style="color:#f92672">.</span>split()
            _year <span style="color:#f92672">=</span> int(year)
            _day <span style="color:#f92672">=</span> int(day)
            _month <span style="color:#f92672">=</span> cnv_month_from_str2int(month)
            
            <span style="color:#75715e"># out of custum date range.</span>
            <span style="color:#66d9ef">if</span> (_year<span style="color:#f92672">&gt;</span> d_r<span style="color:#f92672">.</span>begin<span style="color:#f92672">.</span>y <span style="color:#f92672">and</span> d_r<span style="color:#f92672">.</span>end<span style="color:#f92672">.</span>y <span style="color:#f92672">&lt;</span>_year) \
            <span style="color:#f92672">or</span> (_month <span style="color:#f92672">&gt;</span>d_r<span style="color:#f92672">.</span>begin<span style="color:#f92672">.</span>m <span style="color:#f92672">and</span> d_r<span style="color:#f92672">.</span>end<span style="color:#f92672">.</span>m <span style="color:#f92672">&lt;</span>_month) \
            <span style="color:#f92672">or</span> (_day <span style="color:#f92672">&gt;</span>d_r<span style="color:#f92672">.</span>begin<span style="color:#f92672">.</span>d <span style="color:#f92672">and</span> d_r<span style="color:#f92672">.</span>end<span style="color:#f92672">.</span>d <span style="color:#f92672">&lt;</span>_day):
                <span style="color:#66d9ef">continue</span>

            <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;The number that deleted tweet is {}&#34;</span><span style="color:#f92672">.</span>format(cnt))
            <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Now deleting {}/{}/{}&#34;</span><span style="color:#f92672">.</span>format(_year, _month, _day) ))

            <span style="color:#66d9ef">try</span>:
                api<span style="color:#f92672">.</span>DestroyStatus(tweet[<span style="color:#e6db74">&#39;id&#39;</span>])
                cnt <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
            <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
                <span style="color:#75715e"># Error if already deleted or tweet is RT</span>
                <span style="color:#66d9ef">print</span>(e<span style="color:#f92672">.</span>args)
    <span style="color:#66d9ef">return</span> cnt

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;__main__&#39;</span>:
    dl_cnt <span style="color:#f92672">=</span> run()
    <span style="color:#66d9ef">print</span>()
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Finish!!&#34;</span>)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Deleted {} tweets&#34;</span><span style="color:#f92672">.</span>format(dl_cnt))


</code></pre></div><p>##6. Execution
The deletion starts when you execute.
You can see that the number of tweets decreases if you open your account and repeat updates.
It will take a long time to delete it, so be patient. (If you delete tens of thousands, it doesn&rsquo;t end in 1 hour or so.)</p>
<p>##7. Done.
If finish is displayed, it should be completed.
This should have erased the black history almost neatly. I did it.</p>
<h2 id="non-compliant-items">Non-compliant items</h2>
<p>By the way, you can&rsquo;t cancel RT&hellip;
I haven&rsquo;t looked at the information in tweet.js in detail, but maybe there is something that can be judged as RTAfter that, you should search the official document for an API to cancel RT and hit it. It was troublesome to look up. ..</p>
<p>If you want to delete only tweets with images, you should be able to do it.</p>
<p>If you want to do it, check the contents of .js and API and rewrite it yourself</p>
<p>##reference
<a href="https://qiita.com/aeas44/items/a5b82da69b64b32aada4">https://qiita.com/aeas44/items/a5b82da69b64b32aada4</a></p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-123456789-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
