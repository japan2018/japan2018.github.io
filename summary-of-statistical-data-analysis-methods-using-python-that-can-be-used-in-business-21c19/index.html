<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Summary of statistical data analysis methods using Python that can be used in business | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Summary of statistical data analysis methods using Python that can be used in business</h1>
<p>
  <small class="text-secondary">
  
  
  Mar 21, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/%E3%83%87%E3%83%BC%E3%82%BF-analysis"> データ analysis</a></code></small>


<small><code><a href="https://memotut.com/tags/statistics"> statistics</a></code></small>


<small><code><a href="https://memotut.com/tags/introduction-to-statistics"> introduction to statistics</a></code></small>


<small><code><a href="https://memotut.com/tags/jupyterlab"> JupyterLab</a></code></small>

</p>
<pre><code># Overview
</code></pre>
<p>I think it is very important to verify the effects after conducting various prototypes with WEB services,
I think that basic statistics can be used enough as a method.
This time, we summarized the method of statistical data analysis using Python+JupyterLab (Docker) for the purpose of basic statistics, verification of the effects of prototypes that can be used in business, and data analysis.</p>
<p>The notebook I used this time is also available below, so please refer to it.
<a href="https://github.com/hikarut/Data-Science/tree/master/notebooks/statisticsSample">https://github.com/hikarut/Data-Science/tree/master/notebooks/statisticsSample</a></p>
<p>#Environment
It is assumed that JupyterLab can be used with Docker by referring to the following.
<a href="https://qiita.com/hikarut/items/ec2ba860f5bcfc0d05d3">Use vim key binding with JupyterLab started with Docker</a></p>
<h1 id="summary-of-analysis-methods">Summary of analysis methods</h1>
<table>
<thead>
<tr>
<th align="left">-</th>
<th align="left">Qualitative explanatory variables <br>(2 classifications)</th>
<th align="left">Quantitative explanatory variables <br> (multiple cases including quantity and quality)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><strong>Quantitative Outcome (Numerical)</strong></td>
<td align="left">T-test for differences in means <br>(or Wilcoxon rank sum test)</td>
<td align="left">Multiple regression analysis</td>
</tr>
<tr>
<td align="left">** Qualitative outcomes (categorical type)**</td>
<td align="left">z-test for difference in proportions <br>(same as Chi-square test)</td>
<td align="left">Logistic regression analysis</td>
</tr>
</tbody>
</table>
<h1 id="the-term">the term</h1>
<h3 id="quantitative">quantitative</h3>
<ul>
<li>Information represented by <strong>number</strong> such as age, income, and purchase amount</li>
</ul>
<h3 id="qualitative">qualitative</h3>
<p>*Information expressed as <strong>characters</strong>, not as numbers such as gender, occupation, or product genre</p>
<ul>
<li>May be replaced by **binary variable ** of 0,1</li>
</ul>
<h3 id="outcome">Outcome</h3>
<ul>
<li>When we look at data analysis from the perspective of causal insight, that is, the outcome that we want to ultimately control and the candidates for the causes that may affect it, ** the outcome that we ultimately want to control is the outcome. Index)**</li>
<li>Generally, it is often called &ldquo;result variable&rdquo;, &ldquo;objective variable&rdquo;, &ldquo;dependent variable&rdquo;, or &ldquo;external criterion&rdquo;.</li>
</ul>
<h3 id="explanatory-variable">Explanatory variable</h3>
<ul>
<li>Factors that may influence or explain differences in outcomes are called explanatory variables</li>
</ul>
<h3 id="average-value">Average value</h3>
<ul>
<li>Total data divided by the number of data</li>
<li>Generally, what is called &ldquo;average&rdquo; is often &ldquo;arithmetic average&rdquo;, but there are also &ldquo;geometric average&rdquo; and &ldquo;geometric average&rdquo;.</li>
<li>Average calculation using Numpy</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

np<span style="color:#f92672">.</span>mean()
</code></pre></div><h3 id="median">Median</h3>
<ul>
<li>Value located at the center when the data are arranged in ascending order</li>
<li>If there is an even number of data, the median is the value obtained by adding the two central values and dividing by 2.</li>
<li>Calculate median using Numpy</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

np<span style="color:#f92672">.</span>median()
</code></pre></div><h3 id="deviation">deviation</h3>
<ul>
<li>Difference between each data value and the average value</li>
<li>An index that shows how much each value of the data is larger or smaller than the average value</li>
<li>Total deviation is 0, so average deviation is also 0</li>
</ul>
<h3 id="variance">Variance</h3>
<ul>
<li>Mean of the square of the deviation</li>
<li>One of the statistics that shows the spread of the distribution, and it can be judged whether the data has large variation or small data.</li>
<li>Calculating variance with Numpy</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

np<span style="color:#f92672">.</span>var()
</code></pre></div><h3 id="standard-deviation">Standard Deviation</h3>
<ul>
<li>Positive square root of variance</li>
<li>One of the statistics that shows the spread of the distribution, and it can be judged whether the data has large variation or small data.</li>
<li>Unlike variance, standard deviation has the same unit dimension as data, so standard deviation is often used when expressing the degree of dispersion of actual data.</li>
<li>Called &ldquo;Standard Deviation&rdquo;, often abbreviated as &ldquo;SD&rdquo;</li>
<li>Calculate standard deviation using Numpy</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

np<span style="color:#f92672">.</span>std()
</code></pre></div><h3 id="null-hypothesis">null hypothesis</h3>
<ul>
<li>The hypothesis that completely overturns our theory is called the null hypothesis, in contrast to the hypothesis we want to assert.
*Alternative hypothesis is more important because it is a hypothesis that is set up for the time of statistical hypothesis testing</li>
<li>For example, if the hypothesis that there is no difference is set as the null hypothesis, this is rejected, and the alternative hypothesis, &ldquo;There is a difference,&rdquo; is concluded.</li>
<li>Reference: <a href="https://bellcurve.jp/statistics/glossary/899.html">Null Hypothesis | Statistics Glossary | Statistics WEB</a></li>
</ul>
<h3 id="alternative-hypothesis">Alternative hypothesis</h3>
<ul>
<li>A hypothesis adopted when the null hypothesis is rejected in the statistical hypothesis test.</li>
<li>The hypothesis we want to assert is called the alternative hypothesis because it is a hypothesis that conflicts with the null hypothesis.</li>
<li>Reference: <a href="https://bellcurve.jp/statistics/glossary/1785.html">Alternative Hypothesis | Glossary of Statistics | Statistics Web</a></li>
</ul>
<h3 id="p-value">p-value</h3>
<ul>
<li>In the statistical hypothesis test, the probability that the test statistic has that value under the null hypothesis.</li>
<li>In general, reject the null hypothesis as false and adopt the alternative hypothesis if the p-value is 5% or less **</li>
<li>In many cases, we often want to assert the hypothesis that &ldquo;there is a significant difference.&rdquo; In that case, if the probability p value of the null hypothesis that &ldquo;there is no significant difference&rdquo; is 0.05 or less, &ldquo;there is a significant difference.&rdquo; Can be determined</li>
<li>Reference: <a href="https://bellcurve.jp/statistics/glossary/2172.html">P-value | Statistics Glossary | Statistics WEB</a></li>
</ul>
<p>#Detailed analysis method</p>
<h2 id="t-test">t test</h2>
<ul>
<li>A method for considering whether or not the average value is caused by accidental variation in data
<ul>
<li>→ <strong>A method to check if there is a significant difference between the two averages</strong></li>
</ul>
</li>
<li>Techniques that can be used when the outcome is quantitative (numerical) and the explanatory variables are qualitative</li>
<li>The z-test is used when the number of cases is large, and the t-test can be used even when the number of cases is small.However, if the t-test is used, it can cover both cases where the number of cases is large or small, so it is common to use the t-test.
** Generally, it can be judged that there is a significant difference if the p-value is 0.05 or less **
*The t-test can be used in the <strong>parametric test method that assumes that the population follows a normal distribution</strong>, and if the population does not have a normal distribution (there are outliers), a significant difference is unlikely to occur.</li>
<li>There are the following four types of t-test (reference: <a href="https://logics-of-blue.com/t-test/">Concept of t-test</a>)
<ul>
<li>One group t test</li>
<li>Paired t test</li>
<li>Student&rsquo;s t test</li>
<li>Welch&rsquo;s t-test</li>
</ul>
</li>
</ul>
<h4 id="one-sample-t-test-1-group-t-test">One sample t test (1 group t test)</h4>
<ul>
<li>A test that confirms whether the average value is equal to a specific value</li>
<li>One sample t test using Python</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#1 sample t test</span>

<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> scipy <span style="color:#f92672">as</span> sp
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt

coffee <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([
    <span style="color:#ae81ff">210.9</span>, <span style="color:#ae81ff">195.4</span>, <span style="color:#ae81ff">202.1</span>, <span style="color:#ae81ff">211.3</span>, <span style="color:#ae81ff">195.5</span>,
    <span style="color:#ae81ff">212.9</span>, <span style="color:#ae81ff">210.9</span>, <span style="color:#ae81ff">198.3</span>, <span style="color:#ae81ff">202.1</span>, <span style="color:#ae81ff">215.6</span>,
    <span style="color:#ae81ff">204.7</span>, <span style="color:#ae81ff">212.2</span>, <span style="color:#ae81ff">200.7</span>, <span style="color:#ae81ff">206.1</span>, <span style="color:#ae81ff">195.8</span>
])

t, p <span style="color:#f92672">=</span> sp<span style="color:#f92672">.</span>stats<span style="color:#f92672">.</span>ttest_1samp(coffee, popmean<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;population mean:&#39;</span>, np<span style="color:#f92672">.</span>mean(coffee))
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;t-value with population mean of 200:&#39;</span>, t)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Probability that population mean is 200 (p value):&#39;</span>, p)
</code></pre></div><pre><code class="language-:" data-lang=":">Population average: 204.96666666666664
T-value with a population mean of 200: 2.751076959309973
Probability that population mean is 200 (p-value): 0.015611934395473872
</code></pre><ul>
<li>Reference: <a href="https://tanuhack.com/ttest-one-sample/">Method to perform 1-sample t-test (two-sided/one-sided test) with ttest_1samp of Python</a></li>
</ul>
<h4 id="corresponding-t-test">Corresponding t-test</h4>
<ul>
<li>** A test comparing the difference between two means for the same population **</li>
<li>Reference: <a href="https://data-science.gr.jp/theory/tst_paired_t_test.html">Supported t-test</a></li>
<li>Paired t-test using Python</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Paired t test</span>

<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">from</span> scipy <span style="color:#f92672">import</span> stats

A <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">0.7</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1.6</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">0.2</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1.2</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">0.1</span>, <span style="color:#ae81ff">3.4</span>, <span style="color:#ae81ff">3.7</span>, <span style="color:#ae81ff">0.8</span>, <span style="color:#ae81ff">0.0</span>, <span style="color:#ae81ff">2.0</span>])
B <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">1.9</span>, <span style="color:#ae81ff">0.8</span>, <span style="color:#ae81ff">1.1</span>, <span style="color:#ae81ff">0.1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">0.1</span>, <span style="color:#ae81ff">4.4</span>, <span style="color:#ae81ff">5.5</span>, <span style="color:#ae81ff">1.6</span>, <span style="color:#ae81ff">4.6</span>, <span style="color:#ae81ff">3.4</span>])

<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;A mean:&#39;</span>, np<span style="color:#f92672">.</span>mean(A))
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;B mean:&#39;</span>, np<span style="color:#f92672">.</span>mean(B))
stats<span style="color:#f92672">.</span>ttest_rel(A, B)
</code></pre></div><pre><code class="language-:" data-lang=":">A average: 0.75
B average: 2.3299999999999996
Ttest_relResult(statistic=-4.062127683382037, pvalue=0.00283289019738427)
</code></pre><ul>
<li>Reference: <a href="https://qiita.com/suaaa7/items/745ac1ca0a8d6753cf60">[Python] Summary of statistical test methods between two groups</a></li>
</ul>
<h4 id="students-t-test">Student&rsquo;s t test</h4>
<ul>
<li>A test to be used when <strong>there is no correspondence between two data (when the populations are different)</strong>, and the variance of the two data can be assumed to be <strong>uniformly distributed</strong></li>
<li>In general, when we call &ldquo;t-test&rdquo;, we often refer to &ldquo;Student&rsquo;s t-test&rdquo;.</li>
<li>Reference: <a href="https://data-science.gr.jp/theory/tst_student_t_test.html">Student&rsquo;s t-test</a></li>
<li>Student&rsquo;s t-test using Python</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Student&#39;s t test</span>

<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">from</span> scipy <span style="color:#f92672">import</span> stats

A <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">6.3</span>, <span style="color:#ae81ff">8.1</span>, <span style="color:#ae81ff">9.4</span>, <span style="color:#ae81ff">10.4</span>, <span style="color:#ae81ff">8.6</span>, <span style="color:#ae81ff">10.5</span>, <span style="color:#ae81ff">10.2</span>, <span style="color:#ae81ff">10.5</span>, <span style="color:#ae81ff">10.0</span>, <span style="color:#ae81ff">8.8</span>])
B <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">4.8</span>, <span style="color:#ae81ff">2.1</span>, <span style="color:#ae81ff">5.1</span>, <span style="color:#ae81ff">2.0</span>, <span style="color:#ae81ff">4.0</span>, <span style="color:#ae81ff">1.0</span>, <span style="color:#ae81ff">3.4</span>, <span style="color:#ae81ff">2.7</span>, <span style="color:#ae81ff">5.1</span>, <span style="color:#ae81ff">1.4</span>, <span style="color:#ae81ff">1.6</span>])

<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;A mean:&#39;</span>, np<span style="color:#f92672">.</span>mean(A))
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;B mean:&#39;</span>, np<span style="color:#f92672">.</span>mean(B))
stats<span style="color:#f92672">.</span>ttest_ind(A, B)
</code></pre></div><pre><code class="language-:" data-lang=":">A average: 9.28
B average: 3.0181818181818185
Ttest_indResult(statistic=9.851086859836649, pvalue=6.698194360479442e-09)
</code></pre><ul>
<li>Reference: <a href="https://qiita.com/suaaa7/items/745ac1ca0a8d6753cf60">[Python] Summary of statistical test methods between two groups</a></li>
</ul>
<h4 id="welchs-t-test">Welch&rsquo;s t-test</h4>
<ul>
<li>A test to be used when <strong>there is no correspondence between two data (when the populations are different)</strong> and <strong>the populations of the two data are not necessarily equal</strong></li>
<li>Reference: <a href="https://data-science.gr.jp/theory/tst_welch_t_test.html">Welch&rsquo;s t-test</a></li>
<li>Welch&rsquo;s t-test using Python</li>
</ul>
<pre><code class="language-python#" data-lang="python#">
import numpy as np
from scipy import stats

A = np.array([13.8, 10.2, 4.6, 10.0, 4.2, 16.1, 14.4, 4.9, 7.7, 11.4])
B = np.array([3.3, 2.6, 4.0, 4.7, 1.9, 2.9, 4.7, 5.3, 4.3, 3.0, 2.0])

print('A mean:', np.mean(A))
print('B mean:', np.mean(B))
stats.ttest_ind(A, B, equal_var=False)
</code></pre><pre><code class="language-:" data-lang=":">A average: 9.73
B average: 3.5181818181818176
Ttest_indResult(statistic=4.426442804187721, pvalue=0.0012285738375064346)
</code></pre><ul>
<li>Reference: <a href="https://qiita.com/suaaa7/items/745ac1ca0a8d6753cf60">[Python] Summary of statistical test methods between two groups</a></li>
</ul>
<h3 id="wilcoxon-rank-sum-test">Wilcoxon rank sum test</h3>
<ul>
<li>A method for considering whether or not the average value is caused by the random variation of data, as in the t-test.</li>
<li>As a difference from the t test, the Wilcoxon rank sum test is a nonparametric test that can be used even if the population does not follow a normal distribution **</li>
<li>A test method used when <strong>there is no correspondence between two data</strong>, which corresponds to Student&rsquo;s t-test or Welch&rsquo;s t-test</li>
<li>Reference
<ul>
<li><a href="https://best-biostatistics.com/stat-test/w-test.html">What is Wilcoxon rank sum test? </a></li>
<li><a href="https://data-science.gr.jp/theory/tst_wilcoxon_rank_sum_test.html">Wilcoxon rank sum test</a></li>
<li><a href="https://data-science.gr.jp/theory/tbs_parametric.html">Parametric and non-parametric</a></li>
</ul>
</li>
<li>Wilcoxon rank sum test using Python</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">from</span> scipy <span style="color:#f92672">import</span> stats

A <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">1.83</span>, <span style="color:#ae81ff">1.50</span>, <span style="color:#ae81ff">1.62</span>, <span style="color:#ae81ff">2.48</span>, <span style="color:#ae81ff">1.68</span>, <span style="color:#ae81ff">1.88</span>, <span style="color:#ae81ff">1.55</span>, <span style="color:#ae81ff">3.06</span>, <span style="color:#ae81ff">1.30</span>, <span style="color:#ae81ff">2.01</span>, <span style="color:#ae81ff">3.11</span>])
B <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">0.88</span>, <span style="color:#ae81ff">0.65</span>, <span style="color:#ae81ff">0.60</span>, <span style="color:#ae81ff">1.05</span>, <span style="color:#ae81ff">1.06</span>, <span style="color:#ae81ff">1.29</span>, <span style="color:#ae81ff">1.06</span>, <span style="color:#ae81ff">2.14</span>, <span style="color:#ae81ff">1.29</span>])

<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;A mean:&#39;</span>, np<span style="color:#f92672">.</span>mean(A))
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;B mean:&#39;</span>, np<span style="color:#f92672">.</span>mean(B))
stats<span style="color:#f92672">.</span>mannwhitneyu(A, B, alternative<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;two-sided&#39;</span>)
</code></pre></div><pre><code class="language-:" data-lang=":">A average: 2.0018181818181815
B average: 1.1133333333333333
MannwhitneyuResult(statistic=91.0, pvalue=0.0018253610099931035)
</code></pre><p>*Be careful of using <code>mannwhitneyu</code> because it is the same as Mann Whitney&rsquo;s U test.</p>
<h3 id="wilcoxon-signed-rank-sum-test">Wilcoxon signed rank sum test</h3>
<ul>
<li>Similar to Wilcoxon rank sum test, a method to consider whether or not the mean value is caused by random data variation.</li>
<li>The Wilcoxon rank sum test and the Wilcoxon signed rank sum test are different.</li>
<li>&ldquo;Wilcoxon rank sum test&rdquo; is the test method used when there is no correspondence between the two data, and &ldquo;Wilcoxon signed rank sum test&rdquo; is the test method used when ** there is a correspondence between the two data</li>
<li>A test equivalent to the paired t test</li>
<li>Reference: <a href="https://data-science.gr.jp/theory/tst_wilcoxon_signed_rank_test.html">Wilcoxon Signed Rank Test</a></li>
<li>Wilcoxon signed rank test using Python</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">from</span> scipy <span style="color:#f92672">import</span> stats

A <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">1.83</span>, <span style="color:#ae81ff">1.50</span>, <span style="color:#ae81ff">1.62</span>, <span style="color:#ae81ff">2.48</span>, <span style="color:#ae81ff">1.68</span>, <span style="color:#ae81ff">1.88</span>, <span style="color:#ae81ff">1.55</span>, <span style="color:#ae81ff">3.06</span>, <span style="color:#ae81ff">1.30</span>])
B <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">0.88</span>, <span style="color:#ae81ff">0.65</span>, <span style="color:#ae81ff">0.60</span>, <span style="color:#ae81ff">1.05</span>, <span style="color:#ae81ff">1.06</span>, <span style="color:#ae81ff">1.29</span>, <span style="color:#ae81ff">1.06</span>, <span style="color:#ae81ff">2.14</span>, <span style="color:#ae81ff">1.29</span>])

<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;A mean:&#39;</span>, np<span style="color:#f92672">.</span>mean(A))
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;B mean:&#39;</span>, np<span style="color:#f92672">.</span>mean(B))
stats<span style="color:#f92672">.</span>wilcoxon(A, B)
</code></pre></div><pre><code class="language-:" data-lang=":">A average: 1.8777777777777775
B average: 1.1133333333333333
WilcoxonResult(statistic=0.0, pvalue=0.007685794055213263)
</code></pre><p>*Note that you use <code>wilcoxon</code></p>
<h3 id="chi-square-test">Chi-square test</h3>
<ul>
<li>A test of independence, a method for determining whether two variables can be related or not</li>
<li>Techniques that can be used when qualitative outcomes and qualitative explanatory variables are used</li>
<li>A method of examining the relationship between two variables by comparing the actual measured data and the result that would be obtained if the two variables were independent (unrelated)
<em>If the hypothesis &ldquo;not related&rdquo; is established as the null hypothesis as in the case of the <em>t test, this is generally rejected when the p-value is 0.05 or less</em></em> and the alternative hypothesis &ldquo;related&rdquo; is concluded. To do.</li>
<li>Reference
<ul>
<li><a href="https://best-biostatistics.com/contingency/chi-square.html">What is the chi-square test? Easy to understand even the formula! </a></li>
<li><a href="https://logics-of-blue.com/chi-squared-test/">Chi-square test</a></li>
</ul>
</li>
<li>Chi-square test using Python</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Chi-square test</span>

<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">from</span> scipy <span style="color:#f92672">import</span> stats

<span style="color:#75715e">#Sample data</span>
sex <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>choice([<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>], size<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>)
vote <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>choice([<span style="color:#e6db74">&#39;agree&#39;</span>,<span style="color:#e6db74">&#39;against&#39;</span>], size<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>)
cross <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>crosstab(index<span style="color:#f92672">=</span>sex, columns<span style="color:#f92672">=</span>vote)
<span style="color:#66d9ef">print</span>(cross)

x2, p, dof, expected <span style="color:#f92672">=</span> stats<span style="color:#f92672">.</span>chi2_contingency(cross, correction<span style="color:#f92672">=</span>False)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Chi-square value:&#34;</span>, x2)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;p value:&#34;</span>, p)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;freedom&#34;</span>, dof)
<span style="color:#66d9ef">print</span>(expected)
</code></pre></div><pre><code class="language-:" data-lang=":">vote against agree
sex
female 5 5
male 6 4
Chi-square value: 0.20202020202020202
P-value: 0.653095114932182
1 degree of freedom
[[5.5 4.5]
 [5.5 4.5]]
</code></pre><p>*<code>correction=False</code> specifies not to correct</p>
<ul>
<li>Reference: <a href="https://qiita.com/ynakayama/items/67ddb321a8ce5b07274c">Cross tabulation and chi-square test</a></li>
</ul>
<h3 id="multiple-regression-analysis">Multiple regression analysis</h3>
<ul>
<li>Analytical method that shows the tendency of each outcome to increase (decrease) on average as the quantitative explanatory variable increases.
<em>A simple regression analysis</em>* analyzes the relationship between one explanatory variable and one outcome, and a multiple regression analysis* can analyze the relationship between multiple explanatory variables and outcomes at once. *</li>
<li>Techniques that can be used when the outcome is quantitative and the explanatory variables are also quantitative</li>
<li>As a premise, assuming that &ldquo;the other explanatory variables are the same&rdquo;, we will investigate how the outcome changes when other explanatory variables change.If there is a correlation between variables, ** &ldquo;Multicollinearity (multi-collinearity =multicolinearity)” **</li>
<li>Since the explanatory variable changes the value of the outcome (objective variable), it is possible to <strong>predict</strong> the &ldquo;value&rdquo; of the outcome (objective variable) from the explanatory variable.</li>
<li>Reference: <a href="https://www.intage.co.jp/glossary/402/">What is multiple regression analysis</a></li>
<li>Simple regression analysis using Python (scikit-learn)</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#Register test data</span>
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

data <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;output&#39;</span>: [<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">60</span>, <span style="color:#ae81ff">70</span>, <span style="color:#ae81ff">80</span>, <span style="color:#ae81ff">90</span>, <span style="color:#ae81ff">100</span>],
                     <span style="color:#e6db74">&#39;input01&#39;</span>: [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">14</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">17</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">20</span>],
                     <span style="color:#e6db74">&#39;input02&#39;</span>: [<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">35</span>, <span style="color:#ae81ff">35</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">70</span>, <span style="color:#ae81ff">85</span>, <span style="color:#ae81ff">100</span>]},)
data<span style="color:#f92672">.</span>head()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">Simple regression analysis <span style="color:#66d9ef">with</span> <span style="color:#75715e"># input01 and output</span>
<span style="color:#f92672">from</span> sklearn <span style="color:#f92672">import</span> linear_model
model <span style="color:#f92672">=</span> linear_model<span style="color:#f92672">.</span>LinearRegression()

<span style="color:#75715e"># Use input01 as an explanatory variable</span>
X <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>loc[:, [<span style="color:#e6db74">&#39;input01&#39;</span>]]<span style="color:#f92672">.</span>values
<span style="color:#75715e"># Use output as the target variable</span>
Y <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;output&#39;</span>]<span style="color:#f92672">.</span>values

<span style="color:#75715e"># Create predictive model</span>
model<span style="color:#f92672">.</span>fit(X, Y)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;model parameters:&#39;</span>, model<span style="color:#f92672">.</span>get_params())
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;regression coefficient:&#39;</span>, model<span style="color:#f92672">.</span>coef_)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;intercept (error):&#39;</span>, model<span style="color:#f92672">.</span>intercept_)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;coefficient of determination (correlation of X and Y):&#39;</span>, model<span style="color:#f92672">.</span>score(X, Y))
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;regression formula: [alcohol] = </span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> × [density] + </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">%</span>(model<span style="color:#f92672">.</span>coef_[<span style="color:#ae81ff">0</span>], model<span style="color:#f92672">.</span>intercept_))
</code></pre></div><pre><code class="language-:" data-lang=":">Model parameters: {'copy_X': True,'fit_intercept': True,'n_jobs': None,'normalize': False}
Regression coefficient: [4.45327487]
Intercept (error): 10.912578788709233
Coefficient of determination (correlation between X and Y): 0.8771602016326598
Regression formula: [alcohol] = 4.45327486982735 × [density] + 10.912578788709233
</code></pre><ul>
<li>Simple regression analysis (statsmodels) using Python</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">Regression analysis using <span style="color:#75715e">#statsmodels</span>
<span style="color:#f92672">import</span> statsmodels.api <span style="color:#f92672">as</span> sm

model <span style="color:#f92672">=</span> sm<span style="color:#f92672">.</span>OLS(Y, sm<span style="color:#f92672">.</span>add_constant(X))
result <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>fit(disp<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
<span style="color:#66d9ef">print</span>(result<span style="color:#f92672">.</span>summary())
</code></pre></div><pre><code class="language-:" data-lang=":">==============================================================================
Dep. Variable:                      y   R-squared:                       0.877
Model:                            OLS   Adj. R-squared:                  0.862
Method:                 Least Squares   F-statistic:                     57.13
Date:                Fri, 20 Mar 2020   Prob (F-statistic):           6.56e-05
Time:                        23:33:37   Log-Likelihood:                -37.282
No. Observations:                  10   AIC:                             78.56
Df Residuals:                       8   BIC:                             79.17
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
- -----------------------------------------------------------------------------
const         10.9126      6.833      1.597      0.149      -4.845      26.670
x1             4.4533      0.589      7.558      0.000       3.095       5.812
==============================================================================
Omnibus:                        5.725   Durbin-Watson:                   2.878
Prob(Omnibus):                  0.057   Jarque-Bera (JB):                2.315
Skew:                           1.150   Prob(JB):                        0.314
Kurtosis:                       3.513   Cond. No.                         22.4
==============================================================================
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># グラフ化</span>
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt
 
<span style="color:#75715e"># 散布図</span>
plt<span style="color:#f92672">.</span>scatter(X, Y)
 
<span style="color:#75715e"># 回帰直線</span>
plt<span style="color:#f92672">.</span>plot(X, model<span style="color:#f92672">.</span>predict(X), color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;black&#39;</span>)
</code></pre></div><ul>
<li>Pythonを使った重回帰分析(scikit-learn)</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># 正規化して重回帰分析</span>
<span style="color:#f92672">from</span> sklearn <span style="color:#f92672">import</span> linear_model
model <span style="color:#f92672">=</span> linear_model<span style="color:#f92672">.</span>LinearRegression()

<span style="color:#75715e"># データフレームの各列を正規化</span>
data2 <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> x: (x <span style="color:#f92672">-</span> np<span style="color:#f92672">.</span>mean(x)) <span style="color:#f92672">/</span> (np<span style="color:#f92672">.</span>max(x) <span style="color:#f92672">-</span> np<span style="color:#f92672">.</span>min(x)))
data2<span style="color:#f92672">.</span>head()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># 説明変数にoutput以外を利用</span>
data2_except_output <span style="color:#f92672">=</span> data2<span style="color:#f92672">.</span>drop(<span style="color:#e6db74">&#34;output&#34;</span>, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
X <span style="color:#f92672">=</span> data2_except_output
<span style="color:#75715e"># 目的変数にoutputを利用</span>
Y <span style="color:#f92672">=</span> data2[<span style="color:#e6db74">&#39;output&#39;</span>]<span style="color:#f92672">.</span>values
 
<span style="color:#75715e"># 予測モデルを作成</span>
model<span style="color:#f92672">.</span>fit(X, Y)
 
<span style="color:#75715e"># 偏回帰係数</span>
<span style="color:#66d9ef">print</span>(pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#34;name&#34;</span>:data2_except_output<span style="color:#f92672">.</span>columns,
                    <span style="color:#e6db74">&#34;result&#34;</span>:np<span style="color:#f92672">.</span>abs(model<span style="color:#f92672">.</span>coef_)})<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;result&#39;</span>) )
 
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;切片(誤差):&#39;</span>, model<span style="color:#f92672">.</span>intercept_)
</code></pre></div><pre><code class="language-:実行結果" data-lang=":実行結果">      name    result
0  input01  0.295143
1  input02  0.707205
切片(誤差): 1.6679414843100476e-17
</code></pre><ul>
<li>Pythonを使った重回帰分析(statsmodels)</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># statsmodelsを使った重回帰分析</span>
<span style="color:#f92672">import</span> statsmodels.api <span style="color:#f92672">as</span> sm

<span style="color:#75715e"># 予測モデルを作成</span>
model <span style="color:#f92672">=</span> sm<span style="color:#f92672">.</span>OLS(Y, sm<span style="color:#f92672">.</span>add_constant(X))
result <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>fit(disp<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
<span style="color:#66d9ef">print</span>(result<span style="color:#f92672">.</span>summary())
</code></pre></div><pre><code class="language-:実行結果" data-lang=":実行結果">                            OLS Regression Results                            
==============================================================================
Dep. Variable:                      y   R-squared:                       0.962
Model:                            OLS   Adj. R-squared:                  0.951
Method:                 Least Squares   F-statistic:                     87.64
Date:                Fri, 20 Mar 2020   Prob (F-statistic):           1.11e-05
Time:                        23:36:48   Log-Likelihood:                 13.530
No. Observations:                  10   AIC:                            -21.06
Df Residuals:                       7   BIC:                            -20.15
Df Model:                           2                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
- -----------------------------------------------------------------------------
const      -1.388e-17      0.024  -5.87e-16      1.000      -0.056       0.056
input01        0.2951      0.180      1.636      0.146      -0.132       0.722
input02        0.7072      0.180      3.923      0.006       0.281       1.133
==============================================================================
Omnibus:                        6.793   Durbin-Watson:                   1.330
Prob(Omnibus):                  0.033   Jarque-Bera (JB):                2.620
Skew:                           1.171   Prob(JB):                        0.270
Kurtosis:                       3.896   Cond. No.                         10.5
==============================================================================
</code></pre><ul>
<li>※<code>scikit-learn</code>は機械学習、<code>statsmodels</code>は統計学として使う場合が多い。<code>scikit-learn</code>だとp値は自前で計算する必要があるが<code>statsmodels</code>は自動で計算してくれる</li>
<li>参考
<ul>
<li><a href="https://pythondatascience.plavox.info/scikit-learn/%E7%B7%9A%E5%BD%A2%E5%9B%9E%E5%B8%B0">scikit-learn で線形回帰 (単回帰分析・重回帰分析)</a></li>
<li><a href="https://analysis-navi.com/?p=1930">Pythonによる重回帰分析</a></li>
</ul>
</li>
</ul>
<h3 id="ロジスティック回帰分析">ロジスティック回帰分析</h3>
<ul>
<li>「説明変数が1増える事にアウトカムが1になる割合(確率=オッズ)が約何倍になるか」という<strong>オッズ比</strong>を求めて比較する手法* Techniques that can be used when the outcomes are qualitative and the explanatory variables are quantitative.</li>
<li>Regression analysis to analyze outcomes related to binary logic (regression analysis for &ldquo;probability&rdquo;, there is no distinction between single regression and multiple regression)</li>
<li>Since the probability that the outcome (objective variable) becomes 1 from the explanatory variable is known, it is possible to **predict ** the probability that the outcome (objective variable) becomes 1 from the explanatory variable.
*Reference: <a href="https://udemy.benesse.co.jp/ai/logistic-regression-analysis.html">[Logistic Regression Analysis] Examples of use, odds ratios, and usage in Excel! </a></li>
<li>Logistic regression analysis using Python</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#Register test data</span>
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

data <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;Gender&#39;</span>: [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>],
                     <span style="color:#e6db74">&#39;Student&#39;</span>: [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>],
                     <span style="color:#e6db74">&#39;Dwelling time (sec)&#39;</span>: [<span style="color:#ae81ff">34</span>, <span style="color:#ae81ff">28</span>, <span style="color:#ae81ff">98</span>, <span style="color:#ae81ff">70</span>, <span style="color:#ae81ff">67</span>, <span style="color:#ae81ff">23</span>, <span style="color:#ae81ff">67</span>, <span style="color:#ae81ff">56</span>, <span style="color:#ae81ff">41</span>, <span style="color:#ae81ff">90</span>],
                     <span style="color:#e6db74">&#39;User Registration&#39;</span>: [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>]},)
data
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">Logistic regression analysis using <span style="color:#75715e">#statsmodels</span>
<span style="color:#f92672">from</span> sklearn.linear_model <span style="color:#f92672">import</span> LogisticRegression
<span style="color:#f92672">import</span> statsmodels.api <span style="color:#f92672">as</span> sm

<span style="color:#75715e"># Use other than user registration for explanatory variables</span>
X <span style="color:#f92672">=</span> data[[<span style="color:#e6db74">&#39;Gender&#39;</span>,<span style="color:#e6db74">&#39;Student&#39;</span>,<span style="color:#e6db74">&#39;Stay time(s)&#39;</span>]]
<span style="color:#75715e"># Use user registration as the target variable</span>
Y <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;user registration&#39;</span>]<span style="color:#f92672">.</span>values

model <span style="color:#f92672">=</span> sm<span style="color:#f92672">.</span>Logit(Y, sm<span style="color:#f92672">.</span>add_constant(X))
result <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>fit(disp<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;---summary---&#39;</span>)
<span style="color:#66d9ef">print</span>(result<span style="color:#f92672">.</span>summary())

<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;---log odds---&#39;</span>)
<span style="color:#66d9ef">print</span>(result<span style="color:#f92672">.</span>params)

<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;---p value---&#39;</span>)
<span style="color:#66d9ef">print</span>(result<span style="color:#f92672">.</span>pvalues)

<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;--- What percentage of the probability that the event will occur when the variable is increased by 1 unit (quantitative evaluation)---&#39;</span>)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Dwell time (sec):&#39;</span>, <span style="color:#ae81ff">1</span> <span style="color:#f92672">/</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>exp(<span style="color:#f92672">-</span>result<span style="color:#f92672">.</span>params[<span style="color:#e6db74">&#39;Dwell time (sec)&#39;</span>]))))
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Stay time(s):&#39;</span>, np<span style="color:#f92672">.</span>exp(result<span style="color:#f92672">.</span>params[<span style="color:#e6db74">&#39;Stay time(s)&#39;</span>]) <span style="color:#f92672">/</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>exp(result<span style="color:#f92672">.</span>params[<span style="color:#e6db74">&#39;Stay time(s)&#39;</span>])) )

<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;---The probability that an event will occur when the variable becomes 1 is a multiple of the probability that an event will not occur (qualitative evaluation)---&#39;</span>)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;gender:&#39;</span>, np<span style="color:#f92672">.</span>exp(result<span style="color:#f92672">.</span>params[<span style="color:#e6db74">&#39;gender&#39;</span>])))
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;student:&#39;</span>, np<span style="color:#f92672">.</span>exp(result<span style="color:#f92672">.</span>params[<span style="color:#e6db74">&#39;student&#39;</span>])))
</code></pre></div><pre><code class="language-:" data-lang=":">- --summary---
                           Logit Regression Results
=================================================== ============================
Dep. Variable: y No. Observations: 10
Model: Logit Df Residuals: 6
Method: MLE Df Model: 3
Date: Fri, 20 Mar 2020 Pseudo R-squ.: 0.7610
Time: 10:12:42 Log-Likelihood: -1.6565
converged: False LL-Null: -6.9315
Covariance Type: nonrobust LLR p-value: 0.01443
=================================================== ============================
                 coef std err z P&gt;|z| [0.025 0.975]
- ------------------------------------------------- ----------------------------
const -9.5614 10.745 -0.890 0.374 -30.622 11.499
Gender 0.1543 5.170 0.030 0.976 -9.979 10.287
Student 22.7574 3.26e+04 0.001 0.999 -6.38e+04 6.38e+04
Stay time (sec) 0.1370 0.139 0.988 0.323 -0.135 0.409
=================================================== ============================

Possibly complete quasi-separation: A fraction 0.30 of observations can be
perfectly predicted.This might indicate that there is complete
quasi-separation.In this case some parameters will not be identified.
- -- Logarithmic odds ---
const -9.561361
Gender 0.154283
Student 22.757416
Stay time (seconds) 0.136965
dtype: float64
- --p value---
const 0.373568
Gender 0.976193
Student 0.999442
Stay time (seconds) 0.323037
dtype: float64
- -- What percentage increases the probability of an event occurring when the variable increases by 1 unit (quantitative evaluation)---
Time spent (seconds): 0.5341877701226888
Time spent (seconds): 0.5341877701226888
- -- What is the probability that an event will occur when the variable becomes 1 (the qualitative evaluation)?
Gender: 1.1668207000698392
Student: 7645749443.830123
</code></pre><ul>
<li>Reference
<ul>
<li><a href="https://analysis-navi.com/?p=1229">Logistic regression analysis with Python</a></li>
<li><a href="http://www.kazutak.com/index.php/2018/06/02/%E3%83%AD%E3%82%B8%E3%82%B9%E3%83%86%E3%82%A3%E3%83%83%E3%82%AF%E5%9B%9E%E5%B8%B0%E3%81%A7%E5%84%AA%E8%89%AF%E9%A1%A7%E5%AE%A2%E3%82%92%E5%88%A4%E5%88%A5%E3%81%99%E3%82%8B/">Distinguish good customers by logistic regression</a></li>
</ul>
</li>
</ul>
<h1 id="references">References</h1>
<ul>
<li><a href="https://www.amazon.co.jp/dp/4478028230/ref=cm_sw_em_r_mt_dp_U_shlzEbHH67FZ8">Statistics is the strongest discipline [Practice]</a></li>
<li><a href="https://www.amazon.co.jp/dp/B00DJ0Y7F2/ref=cm_sw_r_tw_dp_U_x_51xzEbA67WKTZ">Introduction to complete self-study statistics</a></li>
</ul>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
