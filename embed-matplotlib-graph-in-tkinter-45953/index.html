<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Embed matplotlib graph in Tkinter | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Embed matplotlib graph in Tkinter</h1>
<p>
  <small class="text-secondary">
  
  
  Mar 6, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/gui"> GUI</a></code></small>


<small><code><a href="https://memotut.com/tags/object-oriented"> object oriented</a></code></small>


<small><code><a href="https://memotut.com/tags/matplotlib"> matplotlib</a></code></small>


<small><code><a href="https://memotut.com/tags/tkinter"> Tkinter</a></code></small>

</p>
<pre><code>#1.First of all
</code></pre>
<p>Recently, there were the following hurdles regarding programming.</p>
<p>(1) I want to create a GUI program in Python. → You can use Tkinter
(2) I want to display some calculation results on a graph. → You can use matplotlib
(3) I want to embed the graph written in matplotlib in (2) into Tkinter in (1). → NG</p>
<p>I tried to get over it by tampering with the example code, but it didn&rsquo;t work.</p>
<p>This article introduces how the issue (3) was solved and its contents.</p>
<p>#2. Object-oriented design of matplotlib
First, I found that I needed to understand matplotlib&rsquo;s object orientation.
The graph created by matplotlib.pyplot is the object of the Figure class, the object of the Axes class that draws the actual graph, and the object (below, instance) of the Axis class that manages the x-axis and y-axis as follows. It consists of three parts.</p>
<img width ="300" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/208980/1331c939-1a73-a370-e14c-94dccd0d72c5.png">
<p>(Note: English axes means axis, but in matplotlib, it means the part that draws the graph, not the axis.)</p>
<p>Now, let&rsquo;s draw a simple graph using matplotlib&rsquo;s object-oriented design.</p>
<p>(1) Create a single figure instance fig.</p>
<p><code>fig = plt.figure()</code></p>
<p>(2) Generate four Axes instas that draw the actual graph.</p>
<p><code>ax1, ax2, ax3, ax4</code></p>
<p>(3) Place four Axes instas on the fig instas in a (2X2) matrix and draw.</p>
<p><code>ax1 = fig.add_subplot(221) ax2 = fig.add_subplot(222) ax3 = fig.add_subplot(223) ax4 = fig.add_subplot(224) plt.show()</code>
The drawing result is displayed in the following figure. You can see that it is Matplotlib by the round icon (upper left) of this Window.
<img width="600" alt="matplotlib.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/208980/a37cc14a-5e15-16ed-b42d-c9c6a39b6595.png"></p>
<p>The program code of object-oriented design of matplotlib is posted.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt

<span style="color:#75715e">#Prepare Data</span>
x1 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>linspace(<span style="color:#ae81ff">0.0</span>, <span style="color:#ae81ff">5.0</span>)
y1 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>cos(<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>pi <span style="color:#f92672">*</span> x1) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>exp(<span style="color:#f92672">-</span>x1)
x2 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>linspace(<span style="color:#ae81ff">0.0</span>, <span style="color:#ae81ff">3.0</span>)
y2 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>cos(<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>pi <span style="color:#f92672">*</span> x2) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>exp(<span style="color:#f92672">-</span>x1)


<span style="color:#75715e"># Figure instance</span>
fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure()
<span style="color:#66d9ef">print</span>(type(fig))

<span style="color:#75715e">#ax1 instance</span>
ax1 <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">221</span>)
ax1<span style="color:#f92672">.</span>plot(x1, y1)
ax1<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;line plot&#39;</span>)
ax1<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;Damped oscillation&#39;</span>)
<span style="color:#66d9ef">print</span>(type(ax1))

<span style="color:#75715e">#ax2 instance</span>
ax2 <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">222</span>)
ax2<span style="color:#f92672">.</span>scatter(x1, y1, marker<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;o&#39;</span>)
ax2<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;Scatter plot&#39;</span>)

<span style="color:#75715e">#ax3 instance</span>
ax3 <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">223</span>)
ax3<span style="color:#f92672">.</span>plot(x2,y2)
ax3<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;Damped oscillation&#39;</span>)
ax3<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;time (s)&#39;</span>)

<span style="color:#75715e">#ax4 instance</span>
ax4 <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">224</span>)
ax4<span style="color:#f92672">.</span>scatter(x2, y2, marker<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;o&#39;</span>)
ax4<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;time (s)&#39;</span>)

<span style="color:#75715e">#Drawing</span>
plt<span style="color:#f92672">.</span>show()
</code></pre></div><p>#3. Embed matplotlib in Tkinter</p>
<p>Next is how to embed a matploblib graph in Tkinter.
The procedure is explained using the figure below.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/208980/238c4fdc-81db-2394-1b97-b8f22757e269.png" alt="nagare.png"></p>
<p>(1) Prepare Tkinter Window. Name the instance root.
(2) Place a canvas instance on top of root.
(3) Prepare a fig instance with a graph drawn in the same way as in the previous chapter.
(4) Place the fig instance in the canvas instance and draw.</p>
<p>It&rsquo;s complicated because there are 3 instances. However, if you keep this concept in mind, GUI programming will be easier from the next time.</p>
<p>The following code performs the above steps (2) and (4). Be careful how you use <code>FigureCanvasTkAgg</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python">canvas <span style="color:#f92672">=</span> FigureCanvasTkAgg(fig, master<span style="color:#f92672">=</span>root) <span style="color:#75715e"># Generate canvas instance, Embedding fig in root</span>
canvas<span style="color:#f92672">.</span>draw()
canvas<span style="color:#f92672">.</span>get_tk_widget()<span style="color:#f92672">.</span>pack()
</code></pre></div><p>The drawing result is displayed in the following figure. I was able to draw a matplot graph on the GUI well.
You can see that it is Tkinter from the blue feather icon (upper left) of this Window.</p>
<p>The program code to embed the graph of matplotlib in Tkinter is posted.
While maintaining the program code in the previous chapter, the contents of Tkinter will be expanded in the latter half.</p>
<img width="600" alt="tkinter.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/208980/e1114fc9-bad9-236b-a709-56bf419f98c9.png">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt
<span style="color:#f92672">from</span> matplotlib.backends.backend_tkagg <span style="color:#f92672">import</span> FigureCanvasTkAgg
<span style="color:#f92672">import</span> tkinter <span style="color:#f92672">as</span> tk

<span style="color:#75715e"># Prepare Data</span>
x1 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>linspace(<span style="color:#ae81ff">0.0</span>, <span style="color:#ae81ff">5.0</span>)
y1 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>cos(<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>pi <span style="color:#f92672">*</span> x1) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>exp(<span style="color:#f92672">-</span>x1)
x2 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>linspace(<span style="color:#ae81ff">0.0</span>, <span style="color:#ae81ff">3.0</span>)
y2 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>cos(<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>pi <span style="color:#f92672">*</span> x2) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>exp(<span style="color:#f92672">-</span>x1)

<span style="color:#75715e"># Figure instance</span>
fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>Figure()

<span style="color:#75715e"># ax1</span>
ax1 <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">221</span>)
ax1<span style="color:#f92672">.</span>plot(x1, y1)
ax1<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;line plot&#39;</span>)
ax1<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;Damped oscillation&#39;</span>)

<span style="color:#75715e"># ax2</span>
ax2 <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">222</span>)
ax2<span style="color:#f92672">.</span>scatter(x1, y1, marker<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;o&#39;</span>)
ax2<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;Scatter plot&#39;</span>)

<span style="color:#75715e"># ax3</span>
ax3 <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">223</span>)
ax3<span style="color:#f92672">.</span>plot(x2, y2)
ax3<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;Damped oscillation&#39;</span>)
ax3<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;time (s)&#39;</span>)

<span style="color:#75715e"># ax4</span>
ax4 <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">224</span>)
ax4<span style="color:#f92672">.</span>scatter(x2, y2, marker<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;o&#39;</span>)
ax4<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;time (s)&#39;</span>)


<span style="color:#75715e"># When windows is closed.</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_destroyWindow</span>():
    root<span style="color:#f92672">.</span>quit()
    root<span style="color:#f92672">.</span>destroy()


<span style="color:#75715e"># Tkinter Class</span>

root <span style="color:#f92672">=</span> tk<span style="color:#f92672">.</span>Tk()
root<span style="color:#f92672">.</span>withdraw()
root<span style="color:#f92672">.</span>protocol(<span style="color:#e6db74">&#39;WM_DELETE_WINDOW&#39;</span>, _destroyWindow) <span style="color:#75715e"># When you close the tkinter window.</span>

<span style="color:#75715e"># Canvas</span>
canvas <span style="color:#f92672">=</span> FigureCanvasTkAgg(fig, master<span style="color:#f92672">=</span>root) <span style="color:#75715e"># Generate canvas instance, Embedding fig in root</span>
canvas<span style="color:#f92672">.</span>draw()
canvas<span style="color:#f92672">.</span>get_tk_widget()<span style="color:#f92672">.</span>pack()
<span style="color:#75715e">#canvas._tkcanvas.pack()</span>

<span style="color:#75715e"># root</span>
root<span style="color:#f92672">.</span>update()
root<span style="color:#f92672">.</span>deiconify()
root<span style="color:#f92672">.</span>mainloop()

</code></pre></div><p>#4. Summary</p>
<p>(1) I want to embed the graph written in matplotlib in Tkinter, but it did not work. ‥
(2) First, you need to draw a matplotlib grab with object-oriented design.
(3) Then prepare a canvas instance of Tkinter and put the instance of matplotlib graph on it.</p>
<p>#5. Reference materials</p>
<ol>
<li>Matplotlib Usage <a href="https://matplotlib.org/1.5.1/faq/usage_faq.html">https://matplotlib.org/1.5.1/faq/usage_faq.html</a></li>
<li>Basic knowledge of matplotlib that I wanted to know quickly <a href="https://qiita.com/skotaro/items/08dc0b8c5704c94eafb9">https://qiita.com/skotaro/items/08dc0b8c5704c94eafb9</a></li>
<li>Embedding in Tk <a href="https://matplotlib.org/3.1.1/gallery/user_interfaces/embedding_in_tk_sgskip.html">https://matplotlib.org/3.1.1/gallery/user_interfaces/embedding_in_tk_sgskip.html</a></li>
<li>Tkinter event binding <a href="https://cassiopeia.hatenadiary.org/entry/20070822/1187712650">https://cassiopeia.hatenadiary.org/entry/20070822/1187712650</a></li>
</ol>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
