<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] Mastering reading csv files. List of main options of pandas.read_csv. | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] Mastering reading csv files. List of main options of pandas.read_csv.</h1>
<p>
  <small class="text-secondary">
  
  
  Mar 27, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>

</p>
<pre><code># [Python] Master csv file reading. List of main options of pandas.read_csv.
</code></pre>
<p>Application of reading csv file with pandas
I can do much more than I expected, such as specifying the rows and columns to read, so make a note.</p>
<p>Basically it is OK if you hold down this much
<a href="#1-Listofmainoptionsofread_csvmethod">List of main options of read_csv method</a></p>
<br>
> ・For the basic version of reading csv files with python, click here (https://qiita.com/yuta-38/items/8f7a332651cd5a02e986)
<blockquote>
<p>-The official page is <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html">here</a></p>
</blockquote>
<br>
**table of contents**
<ol>
<li><a href="#1-Listofmainoptionsofread_csvmethod">List of main options of read_csv method</a></li>
<li><a href="#2-Defaultreaddata">Default read data</a></li>
<li><a href="#3-blankmatrixcelloforiginalfile">Blank row/column/cell of original file</a></li>
<li><a href="#4-Header">Header</a>
<ol>
<li><a href="#Readfilewithoutheader">Read file without header</a></li>
<li><a href="#Specifyheaderline">Specify header line</a></li>
<li><a href="#Specifyheadernameandload">Specify header name</a></li>
<li><a href="#Specifycommonprefixforheadername">Specify common prefix for header name</a></li>
</ol>
</li>
<li><a href="#5-Specifyheadercolumnindex">Specify header column (index)</a></li>
<li><a href="#6-ReadColumns">Read Columns</a>
<ol>
<li><a href="#Specifybycolumnnumber">Specify by column number</a></li>
<li><a href="#Specifybycolumnname">Specify by column name</a></li>
</ol>
</li>
<li><a href="#7-ReadRow">Read Row</a>
<ol>
<li><a href="#Specifythenumberoflinestoreadfromthebeginning">Specify the number of lines to read from the beginning</a></li>
<li><a href="#Specifythenumberoflinestoexcludefromthebeginning">Specify the number of lines to exclude from the beginning</a></li>
<li><a href="#Excludespecifiedlines">Exclude specified lines</a></li>
<li><a href="#Specifythenumberoflinestobeexcludedfromtheend">Specify the number of lines to be excluded from the end</a></li>
</ol>
</li>
<li><a href="#8-LoadbyType">Load by Type</a></li>
<li><a href="#9-Readfileonweb">Read file on WEB</a></li>
<li><a href="#10-ReadCompressedFile">Read Compressed File</a></li>
<li><a href="#11-Readwithdelimiter">Read with delimiter</a></li>
</ol>
<br>
##1. List of main options of read_csv method
<table>
<thead>
<tr>
<th align="center">Options</th>
<th align="center">Example</th>
<th align="left">Content</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">sep</td>
<td align="center">sep=&rsquo;;&rsquo;</td>
<td align="left">separate</td>
</tr>
<tr>
<td align="center">delimiter</td>
<td align="center">delimiter=&rsquo;;&rsquo;</td>
<td align="left">division (same as sep)</td>
</tr>
<tr>
<td align="center">header</td>
<td align="center">header=1</td>
<td align="left">Specify header line (default is guess, if none header=None *&ldquo;N&rdquo; is uppercase)</td>
</tr>
<tr>
<td align="center">names</td>
<td align="center">①names=[&lsquo;AA&rsquo;,&lsquo;BB&rsquo;,&lsquo;CC&rsquo;,,] ②names='1234567&rsquo;</td>
<td align="left">Add column titles (use with header=0 if there is a header)</td>
</tr>
<tr>
<td align="center">index_col</td>
<td align="center">index_col=0</td>
<td align="left">Specifies the column that will be the row index</td>
</tr>
<tr>
<td align="center">usecols</td>
<td align="center">usecols=[1,2,5]</td>
<td align="left">Specify the lines to read. Specify only one line in list format &ldquo;usecols=[0]. Can be specified in column title&rdquo;</td>
</tr>
<tr>
<td align="center">prefix</td>
<td align="center">prefix=&quot;line number&rdquo;, header=None</td>
<td align="left">Specifies the line title prefix. Example If &ldquo;prefix='line number&rsquo;&rdquo;, line number 0, line number 1,&hellip; Effective only when hedar=None is specified.</td>
</tr>
<tr>
<td align="center">dtype</td>
<td align="center">dtype=str</td>
<td align="left">Read by specifying the type. If not applicable, an error (such as reading str as float)</td>
</tr>
<tr>
<td align="center">skiprows</td>
<td align="center">①skiprows=5 ②skiprows=[1,3,6]</td>
<td align="left">Specify the row numbers not to be read at the beginning. If it is an integer, 0 to the specified integer.</td>
</tr>
<tr>
<td align="center">skipfooter</td>
<td align="center">skipfooter=2, engine='python&rsquo;, encoding='utf_8&rsquo;</td>
<td align="left">Specifies the number of lines to exclude from the bottom. Need to describe to use in python. If the characters are garbled, specify the character code.</td>
</tr>
<tr>
<td align="center">nrows</td>
<td align="center">nrows=5</td>
<td align="left">Specify up to which line to read.</td>
</tr>
<tr>
<td align="center">encoding</td>
<td align="center">encoding='shift_jis&rsquo;</td>
<td align="left">Character code specification when reading the file</td>
</tr>
<tr>
<td align="center">(compression)</td>
<td align="center">compression='zip&rsquo;</td>
<td align="left">Open the compressed file. At present, it is possible to open by analogy without describing. (Conversely, an error occurs when compression='gzip&rsquo; is specified in the zip file)</td>
</tr>
<tr>
<td align="center">(skipinitialspace)</td>
<td align="center">skipinitialspace=True</td>
<td align="left">Delete the leading white space after delimiter (character separation). At present, like the specifications that are deleted by default</td>
</tr>
</tbody>
</table>
<br>
##2. Data read by default
<h3 id="-original-file">■ Original file</h3>
<p>When reading the following csv file</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/edc393d6-641f-2997-7039-3bcb9bca58af.png" alt="image.png"></p>
<p><strong>▼ column</strong>
・A column is index
・F column is empty
・G column is character and blank cell</p>
<p><strong>▼ line</strong>
・The first row is the column title
・The 9th line is empty</p>
<ul>
<li>There is a formula error (#NUM!) on the 10th line.</li>
</ul>
<br>
#### ■Read result
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/2ff714da-354d-4825-ba28-72e4ea938382.png" alt="image.png"></p>
<p><strong>▼Point</strong>
・** Heading column added to the first column ** (index number from 0)
・**Title line added to the first line**</p>
<ul>
<li>Blank cells are complemented with &ldquo;Unnamed:column number&rdquo;**</li>
<li><strong>Blank cells become NaN</strong>.
・Formula error is displayed as #NUM!.</li>
</ul>
<p>*Additional contents remain when outputting to a file again. (NaN disappears)</p>
<br>
### ■ Attributes of each column
<pre><code class="language-text:" data-lang="text:">Unnamed: 0 object
Column 1 object
Row 2 float64
Column 3 object
Row 4 float64
Unnamed: 5 float64
Row 5 object
</code></pre><p>・Date: object type
・Numeric value: float64 type
└ Both integers and decimals
└ NaN is ignored</p>
<ul>
<li>Column with function error: object type</li>
<li>Empty column: float64 type
・Text: object type
└ If there is one text cell, it becomes an object type</li>
</ul>
<br>
### ■ Output read result
<p>When output as a csv file with utf8.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/a0708fee-4bf1-67cd-1870-393be3170263.png" alt="image.png"></p>
<ul>
<li>The automatically inserted headings remain in the first row and first column.
・NaN becomes a blank line</li>
</ul>
<br>
##3. Blank row/column/cell of original file
<p>White space is treated as &ldquo;NaN&rdquo; (empty data).
The following is also treated as NaN.</p>
<ul>
<li>&ldquo;&rsquo;&rsquo;</li>
<li>&ldquo;# N/A&rdquo;</li>
<li>&ldquo;# N/A N/A&rdquo;</li>
<li>&ldquo;#NA&rdquo;</li>
<li>&ldquo;-1. # IND&rdquo;</li>
<li>&ldquo;-1. # QNAN&rdquo;</li>
<li>&ldquo;-NaN&rdquo;</li>
<li>&ldquo;-Nan&rdquo;</li>
<li>&ldquo;1. # IND&rdquo;</li>
<li>&ldquo;1. # QNAN&rdquo;</li>
<li>&ldquo;<NA>&rdquo;</li>
<li>&ldquo;N/A&rdquo;</li>
<li>&ldquo;NA&rdquo;</li>
<li>&ldquo;NULL&rdquo;</li>
<li>&ldquo;NaN&rdquo;</li>
<li>&ldquo;N/a&rdquo;</li>
<li>&ldquo;Nan&rdquo;</li>
<li>&ldquo;Null&rdquo;</li>
</ul>
<br>
##4. Header
<p>The default at reading is &ldquo;analog&rdquo;.
*Basically, the top line is read as the header.</p>
<p>▼ Original file
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/8ceef755-273d-62a4-e396-fa0228eefc38.png" alt="image.png"></p>
<p>▼ Read result
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/723be998-bb20-97eb-1664-145c2c7f80e2.png" alt="image.png"></p>
<pre><code class="language-python:" data-lang="python:">import pandas as pd

df = pd.read_csv('~/desktop/test.csv')
df
</code></pre><p>└ Read the test.csv file on the desktop and display it.</p>
<br>
### ① Read a file without header
Optionally specify no header.
`header=None`
<p><strong>▼ Original file</strong> (“test2.csv of desktop”)
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/400bc701-4b22-dbb6-62d8-77b3e2dc7cfc.png" alt="image.png"></p>
<p><strong>▼ Read file</strong>
<code>pd.read_csv('~/desktop/test2.csv' ,header=None)</code>
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/403519d5-9c7c-ce5f-6a0f-d08b72221f81.png" alt="image.png"></p>
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test2.csv' ,header=None)
df
</code></pre><p>*N in N is a capital letter. (None is an error)</p>
<br>
**▼ If not specified**
`df2 = pd.read_csv('~/desktop/test2.csv')`
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/fb3d7fa6-e1cc-8afc-cca6-d1a49ab21179.png)
<br>
### ② Specify the header line
*The line above the specified line will not be read.
<p><strong>▼ When a line that serves as a header is specified</strong></p>
<p>Describe <code>header=integer</code> as an option</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;~/desktop/test.csv&#39;</span> ,header<span style="color:#f92672">=</span><span style="color:#ae81ff">6</span>)
df
<span style="color:#e6db74">``</span><span style="color:#960050;background-color:#1e0010">`!</span>[image<span style="color:#f92672">.</span>png](https:<span style="color:#f92672">//</span>qiita<span style="color:#f92672">-</span>image<span style="color:#f92672">-</span>store<span style="color:#f92672">.</span>s3<span style="color:#f92672">.</span>ap<span style="color:#f92672">-</span>northeast<span style="color:#f92672">-</span><span style="color:#ae81ff">1.</span>amazonaws<span style="color:#f92672">.</span>com<span style="color:#f92672">/</span><span style="color:#ae81ff">0</span><span style="color:#f92672">/</span><span style="color:#ae81ff">563526</span><span style="color:#f92672">/</span>e6f041bb<span style="color:#f92672">-</span><span style="color:#ae81ff">7200</span><span style="color:#f92672">-</span><span style="color:#ae81ff">404</span>a<span style="color:#f92672">-</span>d7c5<span style="color:#f92672">-</span>be9078ae0c2c<span style="color:#f92672">.</span>png)


<span style="color:#f92672">&lt;</span>br<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">**</span><span style="color:#960050;background-color:#1e0010">▼</span> If <span style="color:#f92672">not</span> specified<span style="color:#f92672">**</span>
<span style="color:#960050;background-color:#1e0010">!</span>[image<span style="color:#f92672">.</span>png](https:<span style="color:#f92672">//</span>qiita<span style="color:#f92672">-</span>image<span style="color:#f92672">-</span>store<span style="color:#f92672">.</span>s3<span style="color:#f92672">.</span>ap<span style="color:#f92672">-</span>northeast<span style="color:#f92672">-</span><span style="color:#ae81ff">1.</span>amazonaws<span style="color:#f92672">.</span>com<span style="color:#f92672">/</span><span style="color:#ae81ff">0</span><span style="color:#f92672">/</span><span style="color:#ae81ff">563526</span><span style="color:#f92672">/</span><span style="color:#ae81ff">73</span>ce0f60<span style="color:#f92672">-</span>b776<span style="color:#f92672">-</span>d8f6<span style="color:#f92672">-</span><span style="color:#ae81ff">9</span>b71<span style="color:#f92672">-</span><span style="color:#ae81ff">7</span>f38cd2f7874<span style="color:#f92672">.</span>png)




<span style="color:#f92672">&lt;</span>br<span style="color:#f92672">&gt;</span>
<span style="color:#75715e">### ③ Read by specifying the header name</span>
Describe <span style="color:#e6db74">`names=`</span> <span style="color:#66d9ef">as</span> an option<span style="color:#f92672">.</span>
There are two types of writing<span style="color:#f92672">.</span>

(<span style="color:#ae81ff">1</span>) continuous string
(<span style="color:#ae81ff">2</span>) list format

<span style="color:#f92672">**</span><span style="color:#960050;background-color:#1e0010">▼</span>Point<span style="color:#f92672">**</span>
<span style="color:#f92672">-</span> If the header already exists, overwrite it <span style="color:#66d9ef">with</span> <span style="color:#e6db74">`header=0`</span><span style="color:#f92672">.</span>
<span style="color:#f92672">-</span> When the number of specified characters <span style="color:#f92672">is</span> less than the number of columns to be read: The column title of the other side <span style="color:#f92672">is</span> blank
<span style="color:#960050;background-color:#1e0010">・</span>If the specified number of characters <span style="color:#f92672">is</span> larger: The column title <span style="color:#f92672">in</span> the rear <span style="color:#f92672">is</span> NaN
<span style="color:#960050;background-color:#1e0010">·</span> Different columns cannot have the same name (error)



<span style="color:#f92672">&lt;</span>br<span style="color:#f92672">&gt;</span>
<span style="color:#75715e">### ■ Actual example (try execution result with data with 7 columns)</span>

<span style="color:#75715e">####(1) Specify with a continuous character string</span>

<span style="color:#f92672">**</span><span style="color:#960050;background-color:#1e0010">▼</span> Example <span style="color:#ae81ff">1</span>: When <span style="color:#e6db74">`names=&#39;123345&#39;`</span><span style="color:#f92672">**</span>

<span style="color:#e6db74">``</span><span style="color:#960050;background-color:#1e0010">`</span>python
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;~/desktop/test.csv&#39;</span> ,names<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;12345&#39;</span>)
df
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/4de07daf-968a-3b26-6bf6-bfa3a84ef065.png" alt="image.png"></p>
<p>The two leading columns are blank.</p>
<br>
** ▼ Example 2: If `names='abcdefghi'` **
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;~/desktop/test.csv&#39;</span> ,names<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;abcdefghi&#39;</span>)
df
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/e84eff0c-71fd-28a5-09c9-6ceee76ab5c3.png" alt="image.png"></p>
<p>Many column titles are empty (NaN) columns.</p>
<br>
** ▼ Example 3: `names='aaabbbccc'` Error if duplicated **
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv' ,names='aaabbbccc')
df

#output
# Value Error: Duplicate names are not allowed.
</code></pre><br>
####(2) Specify in list format
<p><strong>▼ Example 1: In case of <code>names=['aaa','bbb','ccc','ddd','eee','fff']</code></strong></p>
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv' ,names=['aaa','bbb','ccc','ddd','eee','fff'])
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/563f2251-620d-c203-3b5d-178c10e2bb87.png" alt="image.png"></p>
<br>
**▼ Example 2: `names=['aaa','bbb','aaa','ddd']` Duplicate is an error**
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv' ,names=['aaa','bbb','aaa','ddd'])
df
</code></pre><br>
### specify a common prefix for header names
`prefix='string', header=None`
 └ Valid only when header=None (ignored if none)
└ A column number is added to the specified character string.
‥
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv', prefix=&quot;XXX&quot;, header=None)
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/c6301c9e-ba52-f1ba-9845-fdd69b075cb1.png" alt="image.png"></p>
<br>
##5. Specifying the heading column (index)
Describe `index_col=integer` in option.
By default, columns with index numbers are automatically added.
<br>
```python
import pandas as pd
df = pd.read_csv('~/desktop/test.csv' ,index_col=0)
df
```
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/9102a334-a5fa-0282-6b4a-be89dba77104.png" alt="image.png"></p>
<br>
Default (no specification)
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/c24e0186-6c71-e4b8-9b26-81fbeaa279f7.png)
<br>
##6. Reading columns
It can be specified by column number or column name.
<p>①Specify by column number
②Specify by column name</p>
<br>
▼ Use the following as the original file
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/3046793e-146a-441a-8c88-938a8f3d9f14.png)
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;~/desktop/test.csv&#39;</span>)
df
</code></pre></div><br>
### ① Specify by column number
Describe `usecols=[]` in the option
└List type
└ Described in [] even if the specification is one column
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv', usecols=[0,3,6])
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/3d00f2b8-9550-2b2a-1063-c9217a646f02.png" alt="image.png"></p>
<p>**▼ 1 column (ex. 0th column only) **
<code>usecols=[0]</code></p>
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv', usecols=[0])
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/d72bbc2a-c0b2-323e-3d48-83dde3aca8e9.png" alt="image.png"></p>
<p><strong>▼Error if not list type</strong></p>
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv', usecols=0)
df

#output
# ValueError:'usecols' must either be list-like of all strings, all unicode, all integers or a callable.
</code></pre><br>
### ② Specify by column name
<p>It is also possible to extract only the specified column name.</p>
<p>▼Example: <code>usecols=['column1','column4']</code>
└Specify columns 1 and 4.</p>
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv', usecols=['column1','column4'])
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/c2e7e928-8f83-2dd6-c37e-f608b3c1f273.png" alt="image.png"></p>
<br>
▼It is also possible to add a column name when reading and to extract with that name.
<p>Example:
・<code>Header=0</code>
・<code>Names='ABCDEFG'</code>
・<code>Usecols=['A','C']</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;~/desktop/test.csv&#39;</span>, header<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, names<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ABCDEFG&#39;</span> ,usecols<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;A&#39;</span>,<span style="color:#e6db74">&#39;C&#39;</span>])
df
</code></pre></div><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/561d9093-a939-f22b-70f4-d146dddda5f5.png" alt="image.png"></p>
<br>
##7. Line reading
<p>① Specify the number of lines to read from the beginning
② Specify the number of lines to be excluded from the beginning
③ Exclude the specified line
④ Specify the number of lines to be excluded from the end</p>
<br>
### ① Specify the number of lines to read from the beginning
Describe `usecols=integer` in option.
This is useful when you want to check the contents when there are a large number of lines.
<br>
▼Example: `nrows=3`
Read from the third line up.
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv', nrows=3)
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/56794d39-2e52-b33c-0235-182e8ef29383.png" alt="image.png"></p>
<br>
### ② Specify the number of lines to be excluded from the beginning
Describe `skiprows=integer` in the option.
<p>▼Example: <code>skiprows=6</code>
Skip to the 6th line from the top.
If the header is not specified, the 6th line will be the header.</p>
<p>*No skip if &ldquo;skiprows=0&rdquo;.</p>
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv', skiprows=6)
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/d28bba04-81c9-7b86-ff04-a4b7808d3249.png" alt="image.png"><br></p>
<h3 id="-exclude-the-specified-line">③ Exclude the specified line</h3>
<p>Describe <code>skiprows=[integer]</code> in the option.</p>
<p>▼Example: <code>skiprows=[2,3,6,7,8]</code>
Skip the 2,3,5,7,8 lines from the top.</p>
<ul>
<li>Use [] to skip only one line
└“skip worw=[6]”: skip the 6th line</li>
</ul>
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv', skiprows=[2,3,6,7,8])
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/d55805c6-1d44-8a25-d8fa-d73173653b31.png" alt="image.png"></p>
<br>
### ④ Specify the number of lines to be excluded from the end
Describe `skipfooter=integer, engine='python'` in the option.
<p>*Specify the character code if the characters are garbled.
Example: <code>encoding='utf_8'</code></p>
<p>▼Example: <code>skipfooter=6, engine='python', encoding='utf_8'</code>
Skip the 6th line from the bottom.</p>
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv', skipfooter=6, engine='python', encoding='utf_8')
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/71d91e01-9d6e-735b-0405-36f3ad3b42e3.png" alt="image.png"></p>
<br>
▼If the character code is not specified
`skipfooter=6, engine='python'`
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv', skipfooter=6, engine='python')
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/4c5acd6f-1127-40f7-5e7b-3baf46b2a783.png" alt="image.png"></p>
<p>Japanese is garbled.</p>
<br>
▼If python is not specified
`skipfooter=6`
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv', skipfooter=6)
df

#output
# &lt;ipython-input-81-77b6fdc5c66e&gt;:2: ParserWarning: Falling back to the'python' engine
#because the'c' engine does not support skipfooter;
#you can avoid this warning by specifying engine='python'.
</code></pre><p>An error is displayed. Instructions that describe &ldquo;engine='python&rsquo;&rdquo;.</p>
<br>
##8. Read by specifying the type
Describe `dtype=type` as an option.
If it cannot be changed, an error will occur.
<ul>
<li>There is a &ldquo;dtypes&rdquo; method to see the type of the read table.
†Different depending on whether it is plural or singular.</li>
</ul>
<p>▼ Convert to a string with <code>dtype=str</code> and check the type with <code>.dtypes</code> (dtypes method).</p>
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv', dtype=str)

df.dtypes

#output
Unnamed: 0 object
Column 1 object
Column 2 object
Column 3 object
Row 4 object
Unnamed: 5 object
Row 5 object
dtype: object
</code></pre><br>
▼ default
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv')

df.dtypes

#output
Unnamed: 0 object
Column 1 object
Row 2 float64
Column 3 object
Row 4 float64
Unnamed: 5 float64
Row 5 object
dtype: object
</code></pre><br>
▼Convert character string to float (Error)
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.csv' ,dtype=float)
df.dtypes

#output
# ValueError: could not convert string to float
</code></pre><br>
##9. Reading files on the WEB
You can also read files on the WEB.
<p><code>pd.read_csv('URL', encoding='character code')</code></p>
<ul>
<li>If you get garbled characters or if you get an error that the character code is different, specify &ldquo;encoding='character code&rsquo;&rdquo;.</li>
</ul>
<p>** ▼ Read statistical data of the government&rsquo;s nationwide population by gender for each prefecture **
・Reference page: <a href="https://www.e-stat.go.jp/stat-search/files?page=1&amp;layout=datalist&amp;toukei=00200521&amp;tstat=000001011777&amp;cycle=0&amp;tclass1=000001094741">e-Start</a></p>
<pre><code class="language-python:" data-lang="python:">import pandas as pd

dfurl = pd.read_csv('https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031524010&amp;fileKind=1', encoding='shift_jis')
dfurl
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/3057aeca-ede2-d425-1f2e-a090a59c10c6.png" alt="image.png"></p>
<br>
###▼ When the character code is not specified (an error occurs)
<pre><code class="language-python:" data-lang="python:">import pandas as pd

dfurl = pd.read_csv('https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031524010&amp;fileKind=1')
dfurl

#output
# UnicodeDecodeError:'utf-8' codec can't decode byte 0x93 in position 0: invalid start byte
</code></pre><br>
##10. Reading compressed files
You can read compressed files such as zip without specifying it.
Readable compression formats: ‘gzip’, ‘bz2’, ‘zip’, ‘xz’
<p>Because it reads the compressed format by analogy.
└ Default: <code>compression=infer</code></p>
<ul>
<li>Cannot read if multiple files are compressed.</li>
<li>Cannot be read when PW is set.</li>
</ul>
<br>
**▼ Read the zip file on the desktop, test.zip **
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.zip')
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/9643f60c-1637-d18c-3a17-9b53e6d3d618.png" alt="image.png"></p>
<p>■ The above is the same as <code>compression='zip'</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;~/desktop/test.zip&#39;</span>, compression<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;zip&#39;</span>)
df
</code></pre></div><br>
▼If the compression format is specified incorrectly, an error will occur.
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.zip', compression='gzip')
df

#output
# BadGzipFile: Not a gzipped file (b'PK')
</code></pre><br>
▼ An error occurs when two or more files are compressed
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/2files.zip')
df

#output
# ValueError: Multiple files found in compressed zip file ['test.csv','space.csv']
</code></pre><br>
▼ An error occurs when two or more files are compressed
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/2files.zip')
df

#output
# ValueError: Multiple files found in compressed zip file ['test.csv','space.csv']
</code></pre><br>
▼ Error even if PW is set
<pre><code class="language-python:" data-lang="python:">import pandas as pd
df = pd.read_csv('~/desktop/test.zip')
df

#output
# RuntimeError: File'test.csv' is encrypted, password required for extraction
</code></pre><br>
##11. Read by specifying delimiter
`sep='separator'`
└The same applies to "delimiter='delimiter'".
<p><strong>▼ Example: File to read</strong>
One cell contains multiple data.
└Data separated by &ldquo;@&rdquo;
└Data separated by &ldquo;;&rdquo;
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/69393c0e-a358-6287-fede-25f360338619.png" alt="image.png"></p>
<p>*2 characters cannot be specified (list cannot be used)
*You cannot repeat the same option
*You cannot use delimiter and sep together.
└ delimiter has priority.</p>
<br>
**▼ Load defaults**
<pre><code class="language-python:import" data-lang="python:import">
df = pd.read_csv('~/desktop/test2.csv')
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/f02d772e-d0e3-43dd-93b2-2b4a5ee04cd8.png" alt="image.png"></p>
<br>
**▼`sep='@'`** 「@」で区切る
<pre><code class="language-python:「@」で区切る（sep）" data-lang="python:「@」で区切る（sep）">import pandas as pd

df = pd.read_csv('~/desktop/test2.csv', sep='@')
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/43f1471c-dbe2-fa1f-e5fc-12b972a33eb8.png" alt="image.png"></p>
<p><strong>▼<code>delimita='@'</code></strong> 「@」で区切る</p>
<pre><code class="language-python:「@」で区切る（delimiter）" data-lang="python:「@」で区切る（delimiter）">import pandas as pd

df = pd.read_csv('~/desktop/test2.csv', delimiter='@')
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/43f1471c-dbe2-fa1f-e5fc-12b972a33eb8.png" alt="image.png"></p>
<br>
**▼`sep=';'`** 「;」で区切る
<pre><code class="language-python:「;」で区切る（sep）" data-lang="python:「;」で区切る（sep）">import pandas as pd

df = pd.read_csv('~/desktop/test2.csv', sep=';')
df
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/a9ba4567-b1fa-7cd5-56d9-a0ad8176defc.png" alt="image.png"></p>
<br>
**▼オプションの繰り返しはできない。**
<pre><code class="language-python:エラー" data-lang="python:エラー">import pandas as pd

df = pd.read_csv('~/desktop/test2.csv', sep=';', sep='@')
df

#出力
# SyntaxError: keyword argument repeated
</code></pre><br>
**▼2文字指定はできない（listは使えない）**
<pre><code class="language-python:エラー" data-lang="python:エラー">import pandas as pd

df = pd.read_csv('~/desktop/test2.csv', sep=[';','@'])
df

#出力
# TypeError: unhashable type: 'list'
</code></pre><br>
**▼2delimiterとsepの併用はできない。**
└　delimiterが優先される。
<table>
<thead>
<tr>
<th align="left"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/563526/5f36d35b-3ac0-f4be-e391-07f59240924b.png" alt="image.png"></th>
</tr>
</thead>
</table>
<br>
[トップに戻る](#pythoncsvファイルの読み込みを使いこなすpandasread_csvの主要オプション一覧)
    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
