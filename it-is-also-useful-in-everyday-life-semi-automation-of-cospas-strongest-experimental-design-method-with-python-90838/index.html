<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>It is also useful in everyday life!? Semi-automation of Cospa&#39;s strongest experimental design method with Python | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>It is also useful in everyday life!? Semi-automation of Cospa&rsquo;s strongest experimental design method with Python</h1>
<p>
  <small class="text-secondary">
  
  
  Dec 9, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/automation"> automation</a></code></small>


<small><code><a href="https://memotut.com/tags/python3"> Python3</a></code></small>


<small><code><a href="https://memotut.com/tags/design-of-experiments"> design of experiments</a></code></small>

</p>
<pre><code>&lt;!-- title
    How to get a lot of information with a small number of experiments with Python
    Automatically create an efficient experimental plan in Python
    Automatically create a good experiment plan for COSPA in Python
        I experimented 30,000 times, but actually 16 times was enough
        Reduce 30,000 experiments to 16
        Also useful for everyday life!?--&gt;
</code></pre>
<h1 id="overview">Overview</h1>
<ul>
<li>I will explain (roughly) the &ldquo;experimental design method&rdquo; that greatly improves the number of experiments.</li>
<li>Since the procedure of experimental design is a little complicated, we will automate the procedure part with Python (the purpose of this time).</li>
</ul>
<h1 id="what-is-experimental-design-how-useful-it-is">What is experimental design (how useful it is)</h1>
<blockquote>
<p>Experimental design (Experimental design, Design of experiments) is a statistical application field that aims to design efficient experimental methods and to analyze the results appropriately. is there.
<a href="https://en.wikipedia.org/wiki/%E5%AE%9F%E9%A8%93%E8%A8%88%E7%94%BB%E6%B3%95">From Wikipedia</a></p>
</blockquote>
<p>Let&rsquo;s say you want to know which effect is great among various parameters (causes) in scientific experiments.
Design of experiments can be used to drastically reduce the number of experiments needed to study it.</p>
<p>Although it seems difficult to write, in fact, this experimental design method is also useful in everyday life situations. **</p>
<p>Let&rsquo;s take cooking as an example.
<strong>To make delicious curry</strong>, as a parameter that determines the deliciousness of curry,</p>
<p>-Stew time
-Flour ratio
-Types of curry powder</p>
<p>Try two types each,
Look into <strong>which parameters affect how much you taste</strong>.</p>
<table>
<thead>
<tr>
<th align="center">Parameter</th>
<th align="center">1</th>
<th align="center">2</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">** Stew time **</td>
<td align="center">20 minutes</td>
<td align="center">60 minutes</td>
</tr>
<tr>
<td align="center">** Wheat Flour Ratio **</td>
<td align="center">5%</td>
<td align="center">10%</td>
</tr>
<tr>
<td align="center"><strong>Curry Powder Type</strong></td>
<td align="center">Yokosuka Navy</td>
<td align="center">Vermont</td>
</tr>
<tr>
<td align="center">If you try all these combinations in the example in the table above,</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>2<em>2</em>2 = ** You have to eat the curry 8 times. **</p>
<p>However, using design of experiments,</p>
<p><strong>Eat only 4 times</strong> to see which factors affect how delicious.</p>
<p>*The graph below is an example of the results.
<img width="696" alt="sample-bar.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/402948/b301c6ee-dd21-1131-c37c-615ecb9167db.png"></p>
<ul>
<li>In this example, it can be seen that the simmering time is the most effective and the influence of the flour ratio is small.</li>
</ul>
<p>#Power of experimental design
Even if the number of times is halved (8⇒4), it&rsquo;s pretty good, but
The more parameters, the more powerful the design of experiment.</p>
<ul>
<li>If there are 7 parameters, the total number of combinations will be **128 times ** ⇒ For design of experiments, **8 times is enough! **</li>
<li>If there are 15 parameters, the total number of combinations will be **32768 times ** ⇒ For design of experiments **16 times! ! **</li>
</ul>
<p>Wouldn&rsquo;t it be great to be so efficient?</p>
<h1 id="for-whom">For whom</h1>
<p>As mentioned above, it should have a wide range of applications such as daily life, research life, and social life.
Using it will make your life more convenient.</p>
<p>In my case, I knew that when I was a university student, I could greatly improve my research, but I didn&rsquo;t know at the time.
&ldquo;<strong>I want to teach myself to university students</strong>&rdquo; is my motivation to write this article.</p>
<p>And, this experimental design method can also be used for <strong>Studies on summer vacation free school</strong>.
The rationale is that **only the &ldquo;mean&rdquo; is used when calculating the effect of a parameter this way.
(It may be necessary for an adult who understands to give some support.)</p>
<p>#So? Why Python?
Design of experiments is a very powerful efficiency tool, so I want many people to use it.
However, it is a little difficult to learn how to use it.</p>
<p>This is a personal idea, but such a technique is like a mathematical formula,
The engineering idea is that I usually want to use it as a tool easily.</p>
<p>** Let&rsquo;s automate the complicated procedure part with Python so that it can be used as a tool from usual! **
That is the reason for this Pythonization.</p>
<h1 id="want-to-know-how-it-works">Want to know how it works</h1>
<p>As with mathematical formulas, I think you need to understand the contents once.
However, once I understand it, I don&rsquo;t think it is necessary to remember the contents every time I actually use it.</p>
<p>Please study with reference to the links below.</p>
<p><a href="https://www.slideshare.net/hajimemizuyama/part-2-51006255?next_slideshow=1">Introduction to Design of Experiments Part2</a></p>
<p>We would like you to understand the <strong>method of reducing the number of experiments by using the orthogonal array</strong>* of the experimental design method.</p>
<h1 id="python-design-of-experiments-design_of_experimentdoe-with-python-in-jupyter-notebook">Python design of experiments-Design_of_Experiment(DoE) with Python in Jupyter Notebook</h1>
<p>This time, I implemented the following with Python + Jupyter notebook.
The Jupyter notebook file is uploaded to GitHub.</p>
<ul>
<li>Creating an experiment plan using a two-level orthogonal table (<a href="https://github.com/pama80000/Design_of_Experiment">create_expt_plan_2_levels.ipynb</a>)</li>
<li>Analysis of the above experimental results (from visualization to analysis of variance) (<a href="https://github.com/pama80000/Design_of_Experiment">analysis_expt_result_2_levels.ipynb</a>)</li>
</ul>
<h1 id="feature">Feature</h1>
<ul>
<li>Not only factors but also interactions can be assigned and analyzed.</li>
<li>Interaction is the effect of combining factors.
*In the curry example, the explanation is omitted because there is no interaction.</li>
</ul>
<p>#Language &amp; Libraries-Dependency</p>
<!-- write your language and version, required libraries and their versions
It is also good to prepare requirements.txt for Python -->
<ul>
<li>Python: 3.6.5</li>
<li>pandas: 0.23.0</li>
<li>openpyxl: 2.5.3</li>
<li>matplotlib: 2.2.2</li>
<li>scipy: 1.1.0</li>
</ul>
<h1 id="preparation-setup">Preparation-Setup</h1>
<!-- Write the setup method. List the commands to set up the hardware and software to prepare -->
<p>The above Python environment and Jupyter Notebook environment are required.
Anaconda is convenient to install them all at once.
<a href="https://knowledge.sakura.ad.jp/17235/%22ReferencelinkforAnaconda%22">Description and installation method of Anaconda (reference link)</a>
<a href="https://qiita.com/simonritchie/items/d7dccb798f0b9c8b1ec5">Article referenced in Jupyter notebook</a></p>
<h1 id="usage-usage">Usage-Usage</h1>
<!-- How to use. Write as concretely as possible. Write sample -->
<h2 id="creating-an-experimental-design-using-a-two-level-orthogonal-table">Creating an experimental design using a two-level orthogonal table</h2>
<!-- Write what this software is and what it can do
In addition, display a screenshot or GIF animation such as a simple demo (example) -->
<ul>
<li><a href="https://github.com/pama80000/Design_of_Experiment">create_expt_plan_2_levels.ipynb</a></li>
<li>** Allocates (assigns) factors and interactions to a 2-level orthogonal array **.</li>
<li>Output the experimental plan after allocation to EXCEL.</li>
</ul>
<p>● Example
Suppose you want to find out which parameters affect delicious curry.</p>
<ul>
<li>Stew time: 20/60 min</li>
<li>Wheat flour ratio: 5/10%</li>
<li>Curry powder type: Navy Yokosuka / Vermont</li>
</ul>
<p>Enter it as shown below.</p>
<pre><code class="language-python3:create_expt_plan_2_levels.ipynb" data-lang="python3:create_expt_plan_2_levels.ipynb"># Factor name
factor_symbols_all = [&quot;time&quot;, &quot;wheat&quot;, &quot;curry powder&quot;]

# Level of each factor
factors = [
    [20,60],
    [5,10],
    [&quot;Navy&quot;, &quot;BMT&quot;]
]

#Specify the interaction you want to see by the factor number (o-).
interactions = [
# [0, 1], # AxB
# [1, 2] # BxC
]
</code></pre><p>When executed, the experiment plan table and EXCEL as shown below are output.
Output file name: output_Expt_Plan_L*.xlsx
<img width="279" alt="sample-table.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/402948/f7422ab1-3789-06d4-4d4d-0fab073633b8.png"></p>
<p>#Analysis of experimental results (from visualization to analysis of variance)</p>
<!-- Write what this software is and what it can do
In addition, display a screenshot or GIF animation such as a simple demo (example) -->
<ul>
<li><a href="https://github.com/pama80000/Design_of_Experiment">analysis_expt_result_2_levels.ipynb</a></li>
<li>Using the experimental design created last time ** Using the result data after the experiment **,
<strong>Visualize, analyze and estimate the effects of factors and interactions</strong>.</li>
</ul>
<p>● Example
Write the results in the EXCEL file you just output and save it.</p>
<ul>
<li>Here, suppose that the deliciousness of curry is evaluated as a perfect score of 5.</li>
<li>Save the file with the results as &ldquo;result_Expt_Plan_L4.xlsx&rdquo;.</li>
</ul>
<p>*Example of experimental results
<img width="536" alt="sample-result.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/402948/62baaa5e-4689-1e19-630c-a753f02d9a31.png"></p>
<p>Specify the file in code.</p>
<pre><code class="language-python3:analysis_expt_result_2_levels.ipynb" data-lang="python3:analysis_expt_result_2_levels.ipynb">path ='result_Expt_Plan_L4.xlsx'
</code></pre><p>When executed, the single effect of each parameter (called factor) is <strong>visualized</strong> in a graph.
<img width="325" alt="sample-plot.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/402948/184a199b-8310-e543-6c0a-a622514e82f0.png"><img width="696" alt="sample-bar.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/402948/587de4e8-e607-d3ca-ca0c-112c1d2d7a2a.png"></p>
<p>You can also see <strong>statistical analysis results (ANOVA table)</strong>.</p>
<p>From the result, since the one with a small influence is pooled as an error,
In this case, it is necessary to specify wheat.</p>
<pre><code class="language-python3:analysis_expt_result_2_levels.ipynb" data-lang="python3:analysis_expt_result_2_levels.ipynb"># ['Time','Wheat','Curry powder']
pool_list = [0,1,0]
</code></pre><p>Then, the analysis of variance is performed as follows.</p>
<img width="326" alt="sample-analysis.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/402948/ce65764a-8866-ee31-2c79-a7a1a2435753.png">
<h1 id="license-license">License-License</h1>
<!-- This software is released under the MIT License, see LICENSE. -->
<p>Released under the <a href="https://opensource.org/licenses/mit-license.php%22MITLisense%22">MIT license</a></p>
<h1 id="references-references">References-References</h1>
<p>Information such as information sources (sites, papers), links, etc.</p>
<p><a href="http://jasst.jp/archives/jasst05w/pdf/S4-1.pdf">http://jasst.jp/archives/jasst05w/pdf/S4-1.pdf</a>
<a href="https://www.slideshare.net/hajimemizuyama/par-49440366">https://www.slideshare.net/hajimemizuyama/par-49440366</a></p>
<h1 id="future-tasks">Future tasks</h1>
<p>Currently, only the methods in the &ldquo;Interaction table&rdquo; are used to assign interactions.
In order to increase reliability, &ldquo;method using the table of interaction&rdquo; and &ldquo;method using component symbols&rdquo; are assigned to the allocation method.
I would like to do two ways and add a check.</p>
<p>Also, at present, only 2 level system is supported.</p>
<p>-Support for 3-level system
-Supports 4 levels and pseudo levels</p>
<p>I would like to implement these in the future.</p>
<p>#Postscript
I had the impression that the experimental design method I studied recently seemed to be quite usable,
I wrote this article for the purpose of making it known to many people.</p>
<p>There is also a part where I omitted the explanation because my priority is on comprehension (due to my lack of explanation).
I may add it if I come up with a good example in the future.</p>
<p>I&rsquo;m new to Python, so I think it&rsquo;s rough and hard to see, but
I hope it helps someone.</p>
<p>I have previously posted when compiling the results into report material.
<a href="https://qiita.com/kousakulog/items/34855cd8286bd4f33c08"><strong>Power Point Material Automatic Creation</strong></a> will also be helpful.
→<a href="https://qiita.com/kousakulog/items/34855cd8286bd4f33c08">Automatic report generation using Python (Qiita article)</a></p>
<h2 id="finally-advertising">Finally, advertising</h2>
<p>Released iOS memo application &ldquo;<a href="https://apps.apple.com/jp/app/saku-memo/id1471529344">Saku memo!</a>&rdquo; by personal development.
It is a memo/ToDo management app that features intuitive operations such as simple screens and sorting by dragging and dropping.
→<a href="https://apps.apple.com/jp/app/saku-memo/id1471529344">Saku memo! -Always crisp notes, Todo, sort (Apple App Store)</a></p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
