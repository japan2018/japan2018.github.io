<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] Introduction to discord.py (2) | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] Introduction to discord.py (2)</h1>
<p>
  <small class="text-secondary">
  
  
  Mar 7, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/%E5%85%A5%E9%96%80">入門</a></code></small>


<small><code><a href="https://memotut.com/tags/python3">Python3</a></code></small>


<small><code><a href="https://memotut.com/tags/discord">discord</a></code></small>


<small><code><a href="https://memotut.com/tags/discord.py">discord.py</a></code></small>

</p>
<pre><code>#Introduction
</code></pre>
<p>We run an unofficial server for discord.py (although some developers).
Questions are also accepted here. You can also create a personal channel and get support there for those who want long-term support**.
If you would like to receive individual support, please enter from the invitation url below and DM to @@Smidora #8931`.
<a href="https://discord.gg/KPp2Wsu">https://discord.gg/KPp2Wsu</a> **Please send any questions regarding this article here**</p>
<h1 id="about-this-article">About this article</h1>
<p>This article is a step-by-step article about discord.py.
First you will learn the basics of writing and then you will learn the advanced content.
<strong>【series】</strong></p>
<p><a href="https://qiita.com/sizumita/items/9d44ae7d1ce007391699">Introduction to discord.py (1)</a>
<a href="https://qiita.com/sizumita/items/b37e74fca41d98077a18">Introduction to discord.py (2)</a></p>
<h1 id="note">Note</h1>
<p>**This article is for anyone who can do a little Python. **
However, you can use it just by copying and pasting it, but you will not be able to write it later, so if you want to create more individual functions,
It is recommended to study using books, paiza learning, dot installation, Progate, <a href="https://repository.kulib.kyoto-u.ac.jp/dspace/handle/2433/245698">Kyoto text</a> I will.
My recommended book is Shingo Tsuji&rsquo;s <a href="https://www.amazon.co.jp/PythonStartbook-ExpandedandRevisedEdition-Tsuji-Shingo/dp/4774196436/">Python Startbook</a>.</p>
<h1 id="my-operating-environment">My operating environment</h1>
<p>Python 3.8.0
Mac OS Catalina 10.15.2
discord.py-1.3.2</p>
<h1 id="use-various-events">Use various events</h1>
<p>Last time I introduced that there are many events in discord.py. In addition to the previously used <code>on_ready</code> and <code>on_message</code>, we will introduce the main events. (Those in parentheses are arguments.)
<strong>Detailed explanation will be introduced when it appears</strong></p>
<h3 id="about-writing">About writing</h3>
<p>The format like List[discord.Reaction] means a list containing discord.Reaction.</p>
<p>| Event name | Contents | Remarks |
|:&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;|:&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- &ndash;|:&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;|
| <a href="">on_message(message)</a> | Message sent |
<a href="">on_message_delete(message)</a> | The message was deleted | I don&rsquo;t know who deleted it. Also, it is not called by deleting the message before the bot is started |
| <a href="">on_message_edit(before, after)</a> | Message updated | Not called for message update before bot is started.
| <a href="">on_reaction_add(reaction, user)</a> | A reaction was added | It is not called in addition to the message before the bot is started.
<a href="">on_reaction_remove(reaction, user)</a> | Reactions removed | Not called on message delete before bot started.
| <a href="">on_member_join(member)</a> | A user has entered the server |
<a href="">on_member_remove(member)</a> | User left the server | |
| <a href="">on_voice_state_update(member, before, after)</a> | Voice status changed | Called when entering, leaving or muting a voice channel |</p>
<p>As an example, here is the code that sends the content to the channel you set when the message is deleted:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> discord
client <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>Client()


<span style="color:#a6e22e">@client.event</span>
async <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">on_message_delete</span>(message):
    channel <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>get_channel(DEBUG_CHANNEL_ID)
    await channel<span style="color:#f92672">.</span>send(f<span style="color:#e6db74">&#34;{message.author.name}&#39;s message was deleted:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">```</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">{message.content}</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">```&#34;</span>)


client<span style="color:#f92672">.</span>run(TOKEN)
</code></pre></div><h1 id="change-server-settings">Change server settings</h1>
<p>Representing a server in discord.py is the discord.Guild class. Various changes can be made by acquiring this using Client.</p>
<h3 id="what-you-will-learn-in-this-chapter">What you will learn in this chapter</h3>
<ul>
<li>How to get the server</li>
<li>Modification method</li>
</ul>
<h2 id="get-the-server">Get the server</h2>
<h3 id="get-from-id">Get from id</h3>
<p>Use the Client.get_guild function or Client.fetch_guild function. In the normal case, use get_guild function.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># get_guild</span>
guild <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>get_guild(GUILD_ID)

<span style="color:#75715e"># fetch_guild</span>
guild <span style="color:#f92672">=</span> await client<span style="color:#f92672">.</span>fetch_guild(GUILD_ID)
</code></pre></div><h3 id="get-by-name">Get by name</h3>
<p>To get it by name, use the get function in discord.utils.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">guild <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>utils<span style="color:#f92672">.</span>get(client<span style="color:#f92672">.</span>guilds, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span>)
</code></pre></div><p><strong>Note that this will only return the first one with the same name</strong></p>
<h2 id="change-server-settings-1">Change server settings</h2>
<p>The server setup is very long, so I&rsquo;ll only cover the main ones.</p>
<h3 id="rename">rename</h3>
<p>To change the name etc. in discord.Guild, use the edit function.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Continued above</span>
await guild<span style="color:#f92672">.</span>edit(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;new name&#34;</span>)
</code></pre></div><h3 id="change-description">Change description</h3>
<p>Change the description.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Continued above</span>
await guild<span style="color:#f92672">.</span>edit(description<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;This is an explanatory note This is an explanatory note This is an explanatory note This is an explanatory note&#34;</span>)
</code></pre></div><p>Change ### icon
All you have to do is specify bytes for icon.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Continued above</span>

<span style="color:#75715e"># Make a local file an icon</span>
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#34;test.png&#34;</span>, <span style="color:#e6db74">&#34;rb&#34;</span>) <span style="color:#66d9ef">as</span> f:
    await guild<span style="color:#f92672">.</span>edit(icon<span style="color:#f92672">=</span>f<span style="color:#f92672">.</span>getvalue())
</code></pre></div><h2 id="add-reason-for-change">Add reason for change</h2>
<p>These changes will remain in the system log, but you can set a reason for them to be displayed at that time.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Continued above</span>

await guild<span style="color:#f92672">.</span>edit(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Mad Magiskey&#39;s room&#34;</span>, reason<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;I did it in my mood, I don&#39;t reflect on it&#34;</span>)
</code></pre></div><h2 id="change-in-bulk">Change in bulk</h2>
<p>All the above changes can be done once.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Continued above</span>

await guild<span style="color:#f92672">.</span>edit (name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Madomagisuki&#39;s room&#34;</span>, description<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;A server where people who like Madomagi gather.&#34;</span>, reason<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;I did it in my mood, I don&#39;t reflect on it&#34;</span>)
</code></pre></div><h1 id="change-channel-settings">Change channel settings</h1>
<p>The main classes that represent channels in discord.py are discord.CategoryChannel, discord.TextChannel and discord.VoiceChannel. Various changes can be made by acquiring this using Client or Guild.</p>
<h3 id="what-you-will-learn-in-this-chapter-1">What you will learn in this chapter</h3>
<ul>
<li>How to get channels</li>
<li>Modification method</li>
</ul>
<h2 id="get-channel">Get channel</h2>
<h3 id="get-from-id-1">Get from id</h3>
<p>Use Client.get_channel function or Client.fetch_channel, Guild.get_channel function. In the normal case, use get_channel function.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">channel <span style="color:#f92672">=</span> guild<span style="color:#f92672">.</span>get_channel(CHANNEL_ID)
</code></pre></div><h3 id="get-by-name-1">Get by name</h3>
<p>To get it by name, use the get function in discord.utils.
In this case, you also have to pay attention to the type of channel. <code>guild.channels</code>, <code>guild.text_channels</code>, <code>guild.voice_channels</code>, <code>guild.categories</code> are used properly.</p>
<h4 id="when-getting-from-a-text-channel">When getting from a text channel</h4>
<p>Use <code>guild.text_channels</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">channel <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>utils<span style="color:#f92672">.</span>get(guild<span style="color:#f92672">.</span>text_channels, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span>)
</code></pre></div><h4 id="when-getting-from-voice-channel">When getting from voice channel</h4>
<p>Use <code>guild.voice_channels</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">channel <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>utils<span style="color:#f92672">.</span>get(guild<span style="color:#f92672">.</span>voice_channels, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span>)
</code></pre></div><h4 id="when-getting-from-a-category">When getting from a category</h4>
<p>Use <code>guild.categories</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">channel <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>utils<span style="color:#f92672">.</span>get(guild<span style="color:#f92672">.</span>categories, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span>)
</code></pre></div><h4 id="when-getting-from-all">When getting from all</h4>
<p>Use <code>guild.channels</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">channel <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>utils<span style="color:#f92672">.</span>get(guild<span style="color:#f92672">.</span>channels, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span>)
</code></pre></div><h2 id="change-channel-settings-1">Change channel settings</h2>
<p>Since the channel settings are very long, I will only introduce the main ones.</p>
<h3 id="text-channel">Text channel</h3>
<h4 id="rename-1">Rename</h4>
<p>Use name.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">await channel<span style="color:#f92672">.</span>edit(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;New Name&#34;</span>)
</code></pre></div><h4 id="change-topic">Change topic</h4>
<p>Use topic.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">await channel<span style="color:#f92672">.</span>edit(topic<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;topictopictopictopictoping&#34;</span>)
</code></pre></div><h4 id="change-the-place">Change the place</h4>
<p>use position</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">await channel<span style="color:#f92672">.</span>edit(position<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
</code></pre></div><h4 id="change-category">Change category</h4>
<p>Use category.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Set category</span>
category_channel <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>get_channel(CATEGORY_CHANNEL_ID)
await channel<span style="color:#f92672">.</span>edit(category<span style="color:#f92672">=</span>category_channel)

<span style="color:#75715e"># No category</span>
await channel<span style="color:#f92672">.</span>edit(category<span style="color:#f92672">=</span>None)
</code></pre></div><h2 id="change-in-bulk-1">Change in bulk</h2>
<p>All the above changes can be done once.</p>
<pre><code class="language-pythonawait" data-lang="pythonawait"></code></pre><h1 id="change-job-title-settings">Change job title settings</h1>
<p>It is the discord.Role class that represents a position in discord.py. By getting this from guild, you can make various changes.
<strong>I will introduce the change of authority in a later chapter</strong></p>
<h3 id="what-you-will-learn-in-this-chapter-2">What you will learn in this chapter</h3>
<ul>
<li>Various ways to set job titles</li>
</ul>
<h2 id="get-a-job-title">Get a job title</h2>
<h3 id="get-from-id-2">Get from id</h3>
<p>Use the discord.Guild.get_role function.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">guild <span style="color:#f92672">=</span> message<span style="color:#f92672">.</span>guild
role <span style="color:#f92672">=</span> guild<span style="color:#f92672">.</span>get_role(ROLE_ID)
</code></pre></div><h3 id="get-by-name-2">Get by name</h3>
<p>To get it by name, use the get function in discord.utils.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">guild <span style="color:#f92672">=</span> message<span style="color:#f92672">.</span>guild
role <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>utils<span style="color:#f92672">.</span>get(guild<span style="color:#f92672">.</span>roles, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span>)
</code></pre></div><p><strong>Note that this will only return the first one with the same name</strong></p>
<h2 id="rename-2">Rename</h2>
<p>Use the edit function to change the name or color with discord.Role.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Continued above</span>

<span style="color:#75715e"># Rename</span>
await role<span style="color:#f92672">.</span>edit(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;new name&#34;</span>)
</code></pre></div><h2 id="change-color">Change color</h2>
<p>To change the color, use discord.Colour.
discord.Colour has a function corresponding to each color, and you can also use it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Continued above</span>

When using <span style="color:#75715e">#RGB</span>
await role<span style="color:#f92672">.</span>edit(colour<span style="color:#f92672">=</span>discord<span style="color:#f92672">.</span>Colour<span style="color:#f92672">.</span>from_rgb(<span style="color:#ae81ff">256</span>, <span style="color:#ae81ff">256</span>, <span style="color:#ae81ff">256</span>))

When using <span style="color:#75715e"># hsv (H, S, V are each given a value between 0 and 1)</span>
await role<span style="color:#f92672">.</span>edit(colour<span style="color:#f92672">=</span>discord<span style="color:#f92672">.</span>Colour<span style="color:#f92672">.</span>from_hsv(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>))

When to use the <span style="color:#75715e"># function</span>
await role<span style="color:#f92672">.</span>edit(colour<span style="color:#f92672">=</span>discord<span style="color:#f92672">.</span>Colour<span style="color:#f92672">.</span>blue())
</code></pre></div><h2 id="change-position">Change position</h2>
<p>When changing the position, you need to enter the position number in the position argument.
Since 0 is @everyone, you need to choose 1 or more. It goes up from 1 in order.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Continued above</span>

await role<span style="color:#f92672">.</span>edit(position<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</code></pre></div><h2 id="add-reason-for-change-1">Add reason for change</h2>
<p>These changes will remain in the system log, but you can set a reason for them to be displayed at that time.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Continued above</span>

await role<span style="color:#f92672">.</span>edit(position<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, reason<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;I did it, I didn&#39;t reflect on it&#34;</span>)
</code></pre></div><h2 id="change-in-bulk-2">Change in bulk</h2>
<p>All the above changes can be done once.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">await role<span style="color:#f92672">.</span>edit(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;greenish green&#34;</span>, colour<span style="color:#f92672">=</span>discord<span style="color:#f92672">.</span>Colour<span style="color:#f92672">.</span>green(), position<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, reason<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;I did it, I didn&#39;t reflect on it&#34;</span>)
</code></pre></div><h1 id="change-permissions">Change permissions</h1>
<h3 id="study-in-this-section">Study in this section</h3>
<ul>
<li>About permissions of discord.py</li>
<li>How to change the authority of the post</li>
<li>How to change channel permissions</li>
</ul>
<h2 id="class-around-discordpy-authority">Class around discord.py authority</h2>
<p>There are discord.Permissions and discord.PermissionOverWrite in the class around permissions of discord.py. Each of these links to the discord post permissions and channel-specific settings.</p>
<p>For the values that can be set for each item, Permissions can only be set on and off, but PermissionOverWrite can be “not set” in addition to on and off (If not set, higher permission settings, for example if it is a text channel (The settings for the category channel to be used will be inherited).</p>
<p>Also, the difference between the two is that Permissions overwrites everything (except the ones you didn&rsquo;t specify) while PermissionOverWrite overwrites only the ones you specify.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># overwrite</span>
overwrite <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>PermissionOverWrite()
overwrite<span style="color:#f92672">.</span>read_messages <span style="color:#f92672">=</span> True
overwrite<span style="color:#f92672">.</span>manage_messages <span style="color:#f92672">=</span> False
overwrite<span style="color:#f92672">.</span>send_messages <span style="color:#f92672">=</span> None <span style="color:#75715e"># If overwrite, None can be set</span>

<span style="color:#75715e"># permissions</span>
permissions <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>Permissions()
permissions<span style="color:#f92672">.</span>read_messages <span style="color:#f92672">=</span> True
permissions<span style="color:#f92672">.</span>manage_messages <span style="color:#f92672">=</span> False
<span style="color:#75715e"># permissions.send_messages = None # None cannot be set</span>
</code></pre></div><h2 id="change-the-authority-of-the-post">Change the authority of the post</h2>
<p>In discord.py the job title is discord.Role. First you need to get this from the guild.</p>
<h3 id="get-from-id-3">Get from id</h3>
<p>Use the discord.Guild.get_role function.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">guild <span style="color:#f92672">=</span> message<span style="color:#f92672">.</span>guild
role <span style="color:#f92672">=</span> guild<span style="color:#f92672">.</span>get_role(ROLE_ID)
</code></pre></div><h3 id="get-by-name-3">Get by name</h3>
<p>To get it by name, use the get function in discord.utils.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">guild <span style="color:#f92672">=</span> message<span style="color:#f92672">.</span>guild
role <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>utils<span style="color:#f92672">.</span>get(guild<span style="color:#f92672">.</span>roles, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span>)
</code></pre></div><p><strong>Note that this will only return the first one with the same name</strong></p>
<h3 id="get-change-permission">Get change permission</h3>
<p>To change permissions, you need to create a new discord.Permissions class. Here, use the permissions of the role you have obtained once, and avoid unnecessary changes.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">guild <span style="color:#f92672">=</span> message<span style="color:#f92672">.</span>guild
role <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>utils<span style="color:#f92672">.</span>get(guild<span style="color:#f92672">.</span>roles, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;everyone&#34;</span>)
<span style="color:#75715e"># get permissions</span>
permissions <span style="color:#f92672">=</span> role<span style="color:#f92672">.</span>permissions
</code></pre></div><p>To change the value of discord.Permissions, it is necessary to put permission=True or prohibition=False into the variable corresponding to the permission name.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># One more continuation</span>

<span style="color:#75715e">#Can&#39;t hit @everyone</span>
permissions<span style="color:#f92672">.</span>mention_everyone <span style="color:#f92672">=</span> False

<span style="color:#75715e"># Add permission to change emoji</span>
permissions<span style="color:#f92672">.</span>manage_emojis <span style="color:#f92672">=</span> True
</code></pre></div><h3 id="create-new-permissions">create new permissions</h3>
<p>If you want to create a new one, you can do it by setting <code>permissions = discord.Permissions()</code>.</p>
<h3 id="change">change</h3>
<p>To reflect this in discord.Role, use the discord.Role.edit function (** coroutine function **)
As I did last time, with the edit function, you can set the name, color, whether it is displayed separately from everyone, and the position.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Continued above</span>

await role<span style="color:#f92672">.</span>edit(permissions<span style="color:#f92672">=</span>permissions)
</code></pre></div><h2 id="change-channel-permissions">Change channel permissions</h2>
<p>Channel permissions are changed using set_permissions.</p>
<h3 id="when-setting-permissions-directly">When setting permissions directly</h3>
<p>By using the set_permissions command, you can change the permissions of users and positions.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">channel <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>get_channel(CHANNEL_ID)
<span style="color:#75715e"># Get target members</span>
member <span style="color:#f92672">=</span> channel<span style="color:#f92672">.</span>guild<span style="color:#f92672">.</span>get_member(MEMBER_ID)

<span style="color:#75715e"># change</span>
await channel<span style="color:#f92672">.</span>set_permissions(member, send_messages<span style="color:#f92672">=</span>False)
</code></pre></div><h3 id="when-using-permissionoverwrite">When using PermissionOverWrite</h3>
<p>With PermissionOverWrite you can set compliance to None=Category setting.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">channel <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>get_channel(CHANNEL_ID)
<span style="color:#75715e"># Get target job title</span>
role <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>utils<span style="color:#f92672">.</span>get(channel<span style="color:#f92672">.</span>guild<span style="color:#f92672">.</span>roles, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;everyone&#34;</span>)

overwrite <span style="color:#f92672">=</span> discord<span style="color:#f92672">.</span>PermissionOverWrite()
overwrite<span style="color:#f92672">.</span>send_messages <span style="color:#f92672">=</span> False
overwrite<span style="color:#f92672">.</span>read_messages <span style="color:#f92672">=</span> None

<span style="color:#75715e"># change</span>
await channel<span style="color:#f92672">.</span>set_permissions(role, overwrite<span style="color:#f92672">=</span>overwrite)
</code></pre></div><p>#Create a channel</p>
<h3 id="what-you-will-learn-in-this-chapter-3">What you will learn in this chapter</h3>
<ul>
<li>How to create a channel</li>
</ul>
<h2 id="how-to-create-a-text-channel">How to create a text channel</h2>
<p>To create a text channel, use the <code>discord.Guild.create_text_channel</code> or <code>discord.CategoryChannel.create_text_channel</code> function.
If you use <code>discord.CategoryChannel.create_text_channel</code>, it will automatically belong to the parent category. In <code>discord.Guild.create_text_channel</code>, you have to set it yourself.
You can also set permissions together, but you can only use PermissionOverWrite.
When setting the authority,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">{
    Designated post <span style="color:#f92672">or</span> member<span style="color:#f92672">-</span>: Corresponding PermissionOverWrite,
    guild<span style="color:#f92672">.</span>me: Corresponding PermissionOverWrite
}
</code></pre></div><p>Use as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">Use <span style="color:#75715e"># discord.Guild.create_text_channel</span>
guild <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>get_guild(GUIILD_ID)
<span style="color:#75715e">#@everyone can&#39;t speak, but I can</span>
overwrites <span style="color:#f92672">=</span> (guild<span style="color:#f92672">.</span>default_role: discord<span style="color:#f92672">.</span>PermissionOverWrite(send_messages<span style="color:#f92672">=</span>False),
              guild<span style="color:#f92672">.</span>me: discord<span style="color:#f92672">.</span>PermissionOverWrite(send_messages<span style="color:#f92672">=</span>True)
}
new_channel <span style="color:#f92672">=</span> await guild<span style="color:#f92672">.</span>create_text_channel(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Notice&#34;</span>, overwrites<span style="color:#f92672">=</span>overwrites, topic<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Show notice.&#34;</span>)
<span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#34;#{new_channel.name} was created.&#34;</span>)
<span style="color:#e6db74">``</span><span style="color:#960050;background-color:#1e0010">`</span>The <span style="color:#66d9ef">return</span> value of create_text_channel <span style="color:#f92672">is</span> the newly created channel<span style="color:#f92672">.</span>

<span style="color:#75715e">## How to create a voice channel</span>
It<span style="color:#e6db74">&#39;s basically the same as a text channel, but without the topic and slow mode settings.</span>

<span style="color:#e6db74">``</span><span style="color:#960050;background-color:#1e0010">`</span>python
Use <span style="color:#75715e"># discord.Guild.create_voice_channel</span>
category <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>get_channel(CATEGORY_ID)
await category<span style="color:#f92672">.</span>create_voice_channel(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;chat voice&#34;</span>)
</code></pre></div><h2 id="how-to-create-categories">How to create categories</h2>
<p>You can only set the name and permissions here. And there is only discord.Guild.create_category.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">guild <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>get_guild(GUIILD_ID)
I can<span style="color:#e6db74">&#39;t see #@everyone, but I can see myself</span>
overwrites <span style="color:#f92672">=</span> (guild<span style="color:#f92672">.</span>default_role: discord<span style="color:#f92672">.</span>PermissionOverWrite(read_messages<span style="color:#f92672">=</span>False),
              guild<span style="color:#f92672">.</span>me: discord<span style="color:#f92672">.</span>PermissionOverWrite(read_messages<span style="color:#f92672">=</span>True)
}
await guild<span style="color:#f92672">.</span>create_category(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;for operation&#34;</span>, overwrites<span style="color:#f92672">=</span>overwrites)
</code></pre></div><h1 id="at-the-end">At the end</h1>
<p>How was it so far?
This time, I explained how to write it by dividing it into advanced event usage, setting change, and channel creation.
In the next article, we&rsquo;ll cover how to wait for input and how to connect to a voice channel and play audio.
Well then.
The next article is in good faith.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
