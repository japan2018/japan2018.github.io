<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] [IOS] First Pyto | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] [IOS] First Pyto</h1>
<p>
  <small class="text-secondary">
  
  
  Feb 24, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/ios">iOS</a></code></small>


<small><code><a href="https://memotut.com/tags/pyto">pyto</a></code></small>

</p>
<pre><code>#Introduction
</code></pre>
<p>I think Pythonista is the most famous Python environment for iOS. Personally Pythonista</p>
<ul>
<li>It has not been updated for more than 2 years (as of 2020/2/24) (Added 2020/3/9: Pythonista v3.3 was released)</li>
<li>There are few supported libraries (Pandas cannot be used)</li>
</ul>
<p>That was the reason why I was postponed from purchasing. One day, an application called &ldquo;Pyto&rdquo; was introduced in Nikkei Software, and when I searched it, the following points were attractive compared to Pythonista, so I purchased it.</p>
<ul>
<li>Frequently updated</li>
<li>In addition to Pandas, you can use sklearn, skimage, and even OpenCV</li>
<li>GUI application for iOS can be created as well as Pythonista (iOS 13 or later)</li>
</ul>
<p>This article explains how to use Pyto and its basic functions.</p>
<p>#Environment
iPad pro11 (2018) 64GB (iOS13.3.1)
Pyto(11.4)</p>
<h1 id="how-to-use">How to use</h1>
<h2 id="startup-screenfile-selection-screen">Startup screen/file selection screen</h2>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/2ad79998-875d-6b8a-67ec-19dfe1f2d09a.jpeg" alt="119ADF6B-1BF9-460A-830F-FF8E719FE5D6.jpeg"></p>
<p>When you start the application for the first time, it will be a screen to select a file. Open the file in any location or create a new one. Also, ~~ The &ldquo;&hellip;&rdquo; button (the button indicated by the pink arrow in the figure) on this screen ~~ (2020/4/22 postscript (v11.8.3): changed to a bullet icon) It becomes the menu/setting of the editor.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/94f4380e-9d5b-b7f1-aab1-4d0a9ba18499.jpeg" alt="050F0333-FE89-4B2B-8D57-940304DBE305.jpeg"></p>
<h2 id="menusettings">Menu/Settings</h2>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/e2685105-258e-7bdd-533c-2c2ce3f900e8.png" alt="96D890E7-A6CE-4219-A927-CA7E488E89BE.png">
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/d6e00601-4959-20f4-c8c2-31c62822e36b.png" alt="D33381E6-15EB-4CBF-89F3-177E98441FF7.png"></p>
<p>The menu is as shown above. You can set the editor and appearance here, use the interactive mode, and add a new library with PyPi (addable packages are pure python only).</p>
<h3 id="interactive-mode-repl">Interactive mode (REPL)</h3>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/952add6c-cee1-9f62-90be-01056633515e.png" alt="AEE1ED64-E070-40EB-A179-586CEEA2DFFC.png">
Interactive mode. Enter the code in the text box below. Graph display of matplotlib is possible even in interactive mode.</p>
<h3 id="run-module-python--m">Run module (python -m)</h3>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/577dcc57-3203-d9b3-0c39-9bb6756b45a7.png" alt="DF58FB17-6DC9-479F-AC54-545CEF6F2273.png"></p>
<p>You can execute the <code>.py</code> file. In the above screen, pip is running, but I couldn&rsquo;t display package information with <code>pip show</code>. Also, I ran <code>pip list</code> to check the installed packages, but only the packages that I installed later with PyPi, which is described later, are displayed.</p>
<h3 id="pypi">PyPi</h3>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/44c9cde0-4401-0951-79c0-1fe63b196cb4.png" alt="61F51E40-6823-4EBA-9221-CF994A14CF4F.png">
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/ce8dde82-0d96-77c3-9743-d3a70e1a7932.png" alt="166D96AF-234F-40A3-8422-24A9C92A295A.png">
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/2196ca34-3648-746a-6183-a6da4c8a864d.png" alt="988088C5-1672-4DA2-837D-5AB3196EB792.png"></p>
<p>You can use PyPi to check the installed library version and add a new library. However, it seems that you can add only pure python&rsquo;s. I was able to install seaborn, but I could not install tensorflow or pyaudio.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/e80629ef-672a-9619-9a65-b368d5941dbb.png" alt="B703C6B8-29F2-4436-9BC7-51AC1CF816A7.png">
In the above figure, pairplot is executed using the seaborn installed. When using matplotlib or seaborn in Pyto, if you do not write <code>plt.clf()</code> at the end, the graphs will overlap when running multiple times.</p>
<h3 id="sample-code">Sample code</h3>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/69a00f4e-5e43-54eb-4142-4579cb7985f0.png" alt="ADC66C5B-9A2C-4FFF-A238-03AF43963979.png">
Contains sample code using OpenCV, sklearn, GUI modules, etc.</p>
<h3 id="loaded-modules">Loaded modules</h3>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/6b4cba47-23bf-18ec-1476-170fff5d3fe1.png" alt="51B7203E-521E-40C4-A3A7-0EEAE7466E13.png"></p>
<p>The modules that have been loaded are displayed. You can also view the source code for that module. I&rsquo;m not sure what to use it for.</p>
<h3 id="settings">Settings</h3>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/8db47f79-5019-f0d8-b0eb-f8d7ad89442a.png" alt="5AC0364F-4ACE-40E1-BBE4-718DBF50E06A.png">
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/c44ec247-9ac5-8c6d-bd19-de9797a08793.png" alt="B3694FC6-E2D0-4C16-A222-27F8C0CB2469.png"></p>
<p>This is the editor setting screen. Supports soft tabs (space tabs). In addition, the appearance of the editor can be selected from several types and customized.</p>
<h2 id="editor-screen">Editor screen</h2>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/e50fd288-834f-1815-bdcc-28c34878adc4.png" alt="CBAE04E3-7B21-4232-B16A-10F3A32B7E56.png"></p>
<p>This is the editor screen. There is a gear mark in the lower right corner, but this is not an app setting. You can register the file being edited in Siri and change the current directory. The lower left&hellip; is an editor action, and it seems that you can do something with the file. The bookmark icon next to it is a Pyto document. It describes how to use Pyto packages (GUI tools, etc.). This document is available on the Internet and can be found here [https://pyto.readthedocs.io/en/latest/].</p>
<p>The buttons at the top are &ldquo;Return to file selection screen&rdquo;, &ldquo;Search and replace&rdquo;, &ldquo;Debug (pdb)&rdquo;, and &ldquo;Execute&rdquo; in order from the four squares on the left.</p>
<p>You can also press the button like &ldquo;V&rdquo; at the bottom right of the screen to finish the input when using the external keyboard. This makes it easier to move the cursor to the browser when used with the browser in split view.</p>
<h3 id="add-to-siri-arguments-current-directory">add-to-siri, arguments, current directory</h3>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/8a4792d5-347a-456b-4428-6abe0173321b.png" alt="2C364699-02CD-4BBC-ABE0-479A590C348B.png">
You can set add-to-siri, arguments, current directory. In arguments, you can set the arguments to be passed during program execution.
You can change the current directory with current directory. If you change it, a warning will be displayed, but you can execute it without problems even after changing the current directory. The directory selected here has edit permission, and you can refer to and change files. If you cannot read the local file, you may be able to read it by selecting a folder here.</p>
<p>(Added 2020/4/22 (v11.8.3): The design had changed)
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/c9a8b595-0b14-1ab5-fef0-f8dcf14d5dea.png" alt="FAFC6C25-426A-4384-B1B9-F754CDC3FCD8.png"></p>
<h3 id="editor-actionsdcc4fe4e-7d14-4810-9eb5-f4006fa0f774pnghttpsqiita-image-stores3ap-northeast-1amazonawscom0549600e9204326-4117-2ec4-2c23-aa6742f5e44fpng">Editor actions<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/e9204326-4117-2ec4-2c23-aa6742f5e44f.png" alt="DCC4FE4E-7D14-4810-9EB5-F4006FA0F774.png"></h3>
<p>Editor actions. 2to3 and black are prepared by default.</p>
<h3 id="document">Document</h3>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/bbfdfa16-353e-1fc3-c722-7b6eb843291d.png" alt="8C27C7A1-ADC6-4429-925A-68C007B37B62.png">
The document. It is the same as the public <a href="https://pyto.readthedocs.io/en/latest/">here</a>. Click the button like &ldquo;V&rdquo; on the upper right to split view.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/f74ad18f-928f-292d-481e-4020e3fec601.png" alt="8C6BDE7F-5BE0-4C97-B1B8-7DAB200FFF4C.png">
The document is in split view.</p>
<h3 id="complement">Complement</h3>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/1fe27e41-5546-fda4-2ed6-f65ae3c5d404.png" alt="78DD5921-502D-4D33-ABA5-C517DFA0B87C.png">
Complementation is possible. Select by tapping, or select from the candidates by the Tab key and confirm with Enter.</p>
<h3 id="folder-lock">Folder lock</h3>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/bb501179-5947-debe-93ed-50aeffe47c6e.jpeg" alt="41FCA36E-CC70-4EF8-8D81-534D1EDD94D8.jpeg">
The initial use folder cannot be referenced or changed in the initial state. In this case, you can browse/change by pressing the key mark at the bottom right and selecting the current directory.</p>
<h2 id="keyboard">Keyboard</h2>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/fe66911d-4576-49f2-8e18-44fa18651099.png" alt="06720EAA-27AA-4718-B3D8-B035BC0B16CA.png"></p>
<p>The software keyboard is the default on iOS. Pyto does not provide extended keys other than the Tab key. Therefore, writing programs on the iPhone is a bit tough.</p>
<p>You can use an external keyboard (Bluetooth keyboard, etc.) without difficulty. Shortcut keys such as comment out, reverse indent, and execute can also be used, so it is reasonably comfortable. However, it was not possible to batch comment out with multiple lines selected.</p>
<h1 id="bonus">bonus</h1>
<p>OpenCV includes dnn module, so I tried Mobilenet for trial. The source code was borrowed from <a href="http://asukiaaa.blogspot.com/2018/03/opencvdnnpythonmobilenet.html">http://asukiaaa.blogspot.com/2018/03/opencvdnnpythonmobilenet.html</a> and rewritten for Pyto a little. The camera is a camera outside the iPad.
There was no problem with the operation, and the frame rate was at a level that I did not feel stiff. To be honest, I wasn&rsquo;t expecting deep learning to work on iOS apps, so I was surprised.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/549600/9645e9d0-821e-a0bf-aba0-e5bdfd928cd1.png" alt="7F93B6F4-F29B-4BCC-A1E9-071D864BE627.png"></p>
<h4 id="added-2020422-how-to-use-mobilenet">[Added 2020/4/22] How to use Mobilenet</h4>
<p>MobileNet learned data is included in <a href="https://github.com/shicai/MobileNet-Caffe">here</a></p>
<ul>
<li>mobilenet_v2.caffemodel</li>
<li>mobilenet_v2_deploy.prototxt</li>
<li>synset.txt</li>
</ul>
<p>I have used. If you are using iOS13 or later, the zip can be expanded, so download it in zip format.</p>
<p>Next, extract the above files to any folder. I,</p>
<pre><code>python_code (any folder)
├── MobileNet-Caffe-master
│ ├── mobilenet_v2.caffemodel
│ ├── mobilenet_v2_deploy.prototxt
│ └── synset.txt
├── mobilenet.py (executable file)
</code></pre><p>It was made. Permissions may be required at some locations.</p>
<p>The source code used is a file specified by a command line argument. You can specify arguments in pyto, but I wrote it directly in the program as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> os
<span style="color:#f92672">from</span> cv2 <span style="color:#f92672">import</span> dnn

modelfolder <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;./MobileNet-Caffe-master&#34;</span> <span style="color:#75715e"># Folder with learned data</span>
net <span style="color:#f92672">=</span> dnn<span style="color:#f92672">.</span>readNetFromCaffe(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(modelfolder, <span style="color:#e6db74">&#34;mobilenet_v2_deploy.prototxt&#34;</span>), os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(modelfolder, <span style="color:#e6db74">&#34;mobilenet_v2.caffemodel&#34;</span>))
<span style="color:#66d9ef">with</span> open(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(modelfolder, <span style="color:#e6db74">&#34;synset.txt&#34;</span>), <span style="color:#e6db74">&#34;r&#34;</span>) <span style="color:#66d9ef">as</span> f:
    classNames <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>readlines()
showPreview <span style="color:#f92672">=</span> True
</code></pre></div><p>After that, I think that it will work if you rewrite the following points.</p>
<ul>
<li>Use <code>cv2.autorotate</code> (rotate the image according to the device orientation)</li>
<li>do not write <code>cv2.destroyAllWindows</code> and <code>cv2.waitKey</code></li>
<li>comment out all <code>print</code> functions</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">How to write <span style="color:#75715e"># autorotate</span>
<span style="color:#f92672">import</span> cv2

device <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
cap <span style="color:#f92672">=</span> cv2<span style="color:#f92672">.</span>VideoCapture(device)
<span style="color:#66d9ef">while</span> cap<span style="color:#f92672">.</span>isOpened():
    ret, frame <span style="color:#f92672">=</span> cap<span style="color:#f92672">.</span>read()
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> ret:
        <span style="color:#66d9ef">continue</span>
    frame <span style="color:#f92672">=</span> cv2<span style="color:#f92672">.</span>autorotate(frame, device) <span style="color:#75715e"># add this part</span>
    frame <span style="color:#f92672">=</span> cv2<span style="color:#f92672">.</span>cvtColor(frame, cv2<span style="color:#f92672">.</span>COLOR_BGR2RGB)
</code></pre></div><p>#Other</p>
<ul>
<li>Universal app (compatible with both iPhone and iPad)</li>
<li>Debugger (pdb) can be used</li>
<li>csv, no problem loading images locally</li>
<li>Graph overlap of matplotlib can be solved with <code>plt.clf()</code> (described above)</li>
<li>Can Pyto&rsquo;s GUI module be written in almost the same way as pythonista?</li>
<li>~~syntax highlight is a little strange (&ldquo;bonus&rdquo; line 18, line 20, etc.) fixed in ~~v11.5</li>
<li>Wrapped lines are treated as new lines (not automatically indented, or you can comment out even in the middle of a line. Bug?)</li>
<li>It will automatically add a closing parenthesis &ldquo;)&rdquo;, but if you write it yourself it will be duplicated (it will not be put outside the parentheses like vscode)</li>
<li>Not as strong as GUI as pythonista (parts cannot be placed with GUI creation tools)</li>
</ul>
<p>If you emphasize GUI application creation, Pythonista, if processing is important Pyto? Some libraries are in Pythonista and not in Pyto, so I think it&rsquo;s a good idea to compare the built-in libraries in the documentation.</p>
<p>Pyto seems to continue to grow, so I felt that it was a very promising app.</p>
<h1 id="link">Link</h1>
<p>Pyto official website: <a href="https://pyto.app/">https://pyto.app/</a>
Pyto documentation: <a href="https://pyto.readthedocs.io/en/latest/">https://pyto.readthedocs.io/en/latest/</a></p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
