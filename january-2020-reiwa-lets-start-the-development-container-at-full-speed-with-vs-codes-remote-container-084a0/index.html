<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[January 2020] Reiwa, let&#39;s start the development container at full speed with VS Code&#39;s Remote Container | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[January 2020] Reiwa, let&rsquo;s start the development container at full speed with VS Code&rsquo;s Remote Container</h1>
<p>
  <small class="text-secondary">
  
  
  Jan 3, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/java">Java</a></code></small>


<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/php">PHP</a></code></small>


<small><code><a href="https://memotut.com/tags/javascript">JavaScript</a></code></small>


<small><code><a href="https://memotut.com/tags/go">Go</a></code></small>

</p>
<pre><code># Start a dash from &quot;Development environment + container containing all projects&quot; with Remote Conainer of VS Code! ?
</code></pre>
<p>Are you using VS Code Remote Conainer for development? You can use Remote SSH if you just enter an existing container, but let&rsquo;s use Remote Container as a &ldquo;part of local development environment&rdquo;, rather as ** local development environment = Remote Container **. It&rsquo;s Reiwa! ~~ (It&rsquo;s been 2 years already&hellip;?)~~</p>
<p>Especially when using a Mac, Python, PHP, Ruby, etc. are included from the beginning, so there is a <strong>development environment</strong>, but these are relatively built into the macOS ecosystem, so it is unnecessary. You can&rsquo;t add or remove packages. It breaks easily like <code>brew</code>&hellip; Especially in addition to <strong>upgrading</strong>. It&rsquo;s totally crazy with a margin.
That&rsquo;s why if you are programming with Python or Ruby on the Mac, you will be in a situation where you can not go back **.
Even if that doesn&rsquo;t happen, let&rsquo;s get started with &ldquo;Development with Remote Container&quot;~!</p>
<h2 id="introducing-the-dev-container-feature">Introducing the &ldquo;Dev Container&rdquo; feature</h2>
<p>Did you know that there is an item and repository called &ldquo;Try a dev container&rdquo; on the original site of Remote Container and the original Github?</p>
<ul>
<li><a href="https://code.visualstudio.com/docs/remote/containers#_quick-start-try-a-dev-container">Developing inside a Container using Visual Studio Code Remote Development # Try a dev container</a></li>
</ul>
<p>&ldquo;dev container&rdquo; is a sample project with a container containing the development environment, and dev-container samples are prepared for the following languages.</p>
<ul>
<li>Node.js, Javascript</li>
<li>Python</li>
<li>Go</li>
<li>Java</li>
<li>.Net Core</li>
<li>PHP</li>
<li>Rust</li>
<li>C++</li>
</ul>
<p>For example, the sample for node.js and Javascript has the following tree.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">% git clone https://github.com/Microsoft/vscode-remote-try-node nodejs-dev-sample
% cd nodejs-dev-sample
% tree -a -I <span style="color:#e6db74">&#34;.git&#34;</span>
.
├── .devcontainer
│ ├── Dockerfile
│ └── devcontainer.json
├── .eslintrc.json
├── .gitattributes
├── .gitignore
├── .vscode
│ └── launch.json
├── LICENSE
├── README.md
├── package.json
├── server.js
└── yarn.lock
</code></pre></div><p>If you exclude all <code>.git</code> with the <code>tree</code> command and display all, it will be as above.
What you care about here is the <code>.devcontainer</code>, right? !
The contents of <code>Dockerfile</code> and <code>devcontainer.json</code> are as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="color:#75715e">#------------------------------------------------- -------------------------------------------------- ----------</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Copyright (c) Microsoft Corporation. All rights reserved.</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Licensed under the MIT License. See https://go.microsoft.com/fwlink/?linkid=2090316 for license information.</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">#------------------------------------------------- -------------------------------------------------- ----------</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> node:10</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># The node image includes a non-root user with sudo access. Use the &#34;remoteUser&#34;</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># property in devcontainer.json to use it.On Linux, the container user&#39;s GID/UIDs</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># will be updated to match your local UID/GID (when using the dockerFile property).</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># See https://aka.ms/vscode-remote/containers/non-root-user for details.</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">ARG</span> USERNAME<span style="color:#f92672">=</span>node
<span style="color:#66d9ef">ARG</span> USER_UID<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>
<span style="color:#66d9ef">ARG</span> USER_GID<span style="color:#f92672">=</span>$USER_UID<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Avoid warnings by switching to noninteractive</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">ENV</span> DEBIAN_FRONTEND<span style="color:#f92672">=</span>noninteractive

<span style="color:#75715e"># Configure apt and install packages</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> apt-get update <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> apt-get -y install --no-install-recommends apt-utils dialog 2&gt;&amp;<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    #<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e"># Verify git and needed tools are installed</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#f92672">&amp;&amp;</span> apt-get -y install git iproute2 procps <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    #<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e"># Remove outdated yarn from /opt and install via package</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e"># so it can be easily updated via apt-get upgrade yarn</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#f92672">&amp;&amp;</span> rm -rf /opt/yarn-* <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> rm -f /usr/local/bin/yarn <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> rm -f /usr/local/bin/yarnpkg <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> apt-get install -y curl apt-transport-https lsb-release <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> curl -sS https://dl.yarnpkg.com/<span style="color:#66d9ef">$(</span>lsb_release -is | tr<span style="color:#e6db74">&#39;[:upper:]&#39;&#39;[:lower:]&#39;</span><span style="color:#66d9ef">)</span>/pubkey.gpg | apt-key add-2&gt;/dev /null <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> echo <span style="color:#e6db74">&#34;deb https://dl.yarnpkg.com/</span><span style="color:#66d9ef">$(</span>lsb_release -is | tr<span style="color:#e6db74">&#39;[:upper:]&#39;&#39;[:lower:]&#39;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74">/ stable main&#34;</span> | tee /etc/apt/sources.list .d/yarn.list <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> apt-get update <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> apt-get -y install --no-install-recommends yarn <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    #<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e"># Install eslint globally</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#f92672">&amp;&amp;</span> npm install -g eslint <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    #<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e"># [Optional] Update a non-root user to UID/GID if needed.</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;</span>$USER_GID<span style="color:#e6db74">&#34;</span> !<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1000&#34;</span> <span style="color:#f92672">]||</span> <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;</span>$USER_UID<span style="color:#e6db74">&#34;</span> !<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1000&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>        groupmod --gid $USER_GID $USERNAME <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>        <span style="color:#f92672">&amp;&amp;</span> usermod --uid $USER_UID --gid $USER_GID $USERNAME <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>        <span style="color:#f92672">&amp;&amp;</span> chown -R $USER_UID:$USER_GID /home/$USERNAME; <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#66d9ef">fi</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#75715e"># [Optional] Add add sudo support for non-root user</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#f92672">&amp;&amp;</span> apt-get install -y sudo <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> echo node ALL<span style="color:#f92672">=</span><span style="color:#ae81ff">\(</span>root<span style="color:#ae81ff">\)</span> NOPASSWD:ALL &gt;/etc/sudoers.d/$USERNAME <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> chmod <span style="color:#ae81ff">0440</span> /etc/sudoers.d/$USERNAME <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    #<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e"># Clean up</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#f92672">&amp;&amp;</span> apt-get autoremove -y <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> apt-get clean -y <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> rm -rf /var/lib/apt/lists/*<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Switch back to dialog for any ad-hoc use of apt-get</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">ENV</span> DEBIAN_FRONTEND<span style="color:#f92672">=</span>dialog
</code></pre></div><p>The explanation above will be given later, and the contents of <code>devcontainer.json</code> will be&hellip;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json:devcontainer.json" data-lang="json:devcontainer.json">{
    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Node.js Sample&#34;</span>,
    <span style="color:#f92672">&#34;dockerFile&#34;</span>: <span style="color:#e6db74">&#34;Dockerfile&#34;</span>,

    <span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#960050;background-color:#1e0010">Use&#39;appPort&#39;</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">create</span> <span style="color:#960050;background-color:#1e0010">a</span> <span style="color:#960050;background-color:#1e0010">container</span> <span style="color:#960050;background-color:#1e0010">with</span> <span style="color:#960050;background-color:#1e0010">published</span> <span style="color:#960050;background-color:#1e0010">ports.If</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">port</span> <span style="color:#960050;background-color:#1e0010">isn&#39;t</span> <span style="color:#960050;background-color:#1e0010">working,</span> <span style="color:#960050;background-color:#1e0010">be</span> <span style="color:#960050;background-color:#1e0010">sure</span>
    <span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#960050;background-color:#1e0010">your</span> <span style="color:#960050;background-color:#1e0010">server</span> <span style="color:#960050;background-color:#1e0010">accepts</span> <span style="color:#960050;background-color:#1e0010">connections</span> <span style="color:#960050;background-color:#1e0010">from</span> <span style="color:#960050;background-color:#1e0010">all</span> <span style="color:#960050;background-color:#1e0010">interfaces</span> <span style="color:#960050;background-color:#1e0010">(0.0.0.0</span> <span style="color:#960050;background-color:#1e0010">or&#39;*&#39;),</span> <span style="color:#960050;background-color:#1e0010">not</span> <span style="color:#960050;background-color:#1e0010">just</span> <span style="color:#960050;background-color:#1e0010">localhost.</span>
    <span style="color:#f92672">&#34;appPort&#34;</span>: [<span style="color:#ae81ff">3000</span>],

    <span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#960050;background-color:#1e0010">Comment</span> <span style="color:#960050;background-color:#1e0010">out</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">next</span> <span style="color:#960050;background-color:#1e0010">line</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">run</span> <span style="color:#960050;background-color:#1e0010">as</span> <span style="color:#960050;background-color:#1e0010">root</span> <span style="color:#960050;background-color:#1e0010">instead.</span>
    <span style="color:#f92672">&#34;remoteUser&#34;</span>: <span style="color:#e6db74">&#34;node&#34;</span>,

    <span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#960050;background-color:#1e0010">Use&#39;settings&#39;</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">set</span> <span style="color:#960050;background-color:#1e0010">*default*</span> <span style="color:#960050;background-color:#1e0010">container</span> <span style="color:#960050;background-color:#1e0010">specific</span> <span style="color:#960050;background-color:#1e0010">settings.json</span> <span style="color:#960050;background-color:#1e0010">values</span> <span style="color:#960050;background-color:#1e0010">on</span> <span style="color:#960050;background-color:#1e0010">container</span> <span style="color:#960050;background-color:#1e0010">create.</span>
    <span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#960050;background-color:#1e0010">You</span> <span style="color:#960050;background-color:#1e0010">can</span> <span style="color:#960050;background-color:#1e0010">edit</span> <span style="color:#960050;background-color:#1e0010">these</span> <span style="color:#960050;background-color:#1e0010">settings</span> <span style="color:#960050;background-color:#1e0010">after</span> <span style="color:#960050;background-color:#1e0010">create</span> <span style="color:#960050;background-color:#1e0010">using</span> <span style="color:#960050;background-color:#1e0010">File</span> <span style="color:#960050;background-color:#1e0010">&gt;Preferences</span> <span style="color:#960050;background-color:#1e0010">&gt;Settings</span> <span style="color:#960050;background-color:#1e0010">&gt;Remote.</span>
    <span style="color:#f92672">&#34;settings&#34;</span>: {
        <span style="color:#f92672">&#34;terminal.integrated.shell.linux&#34;</span>: <span style="color:#e6db74">&#34;/bin/bash&#34;</span>
    },

    <span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#960050;background-color:#1e0010">Specifies</span> <span style="color:#960050;background-color:#1e0010">a</span> <span style="color:#960050;background-color:#1e0010">command</span> <span style="color:#960050;background-color:#1e0010">that</span> <span style="color:#960050;background-color:#1e0010">should</span> <span style="color:#960050;background-color:#1e0010">be</span> <span style="color:#960050;background-color:#1e0010">run</span> <span style="color:#960050;background-color:#1e0010">after</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">container</span> <span style="color:#960050;background-color:#1e0010">has</span> <span style="color:#960050;background-color:#1e0010">been</span> <span style="color:#960050;background-color:#1e0010">created.</span>
    <span style="color:#f92672">&#34;postCreateCommand&#34;</span>: <span style="color:#e6db74">&#34;yarn install&#34;</span>,<span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#960050;background-color:#1e0010">Add</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">IDs</span> <span style="color:#960050;background-color:#1e0010">of</span> <span style="color:#960050;background-color:#1e0010">extensions</span> <span style="color:#960050;background-color:#1e0010">you</span> <span style="color:#960050;background-color:#1e0010">want</span> <span style="color:#960050;background-color:#1e0010">installed</span> <span style="color:#960050;background-color:#1e0010">when</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">container</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">created</span> <span style="color:#960050;background-color:#1e0010">in</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">array</span> <span style="color:#960050;background-color:#1e0010">below.</span>
    <span style="color:#f92672">&#34;extensions&#34;</span>: [
        <span style="color:#e6db74">&#34;dbaeumer.vscode-eslint&#34;</span>
    ]
}
</code></pre></div><p>And, it is a file with a format like a mixture of container settings and settings.json of vscode.
You can almost imagine what this setting is, but what happens when you open this folder in VS Code&hellip; give it a try!
Before that, if the Docker daemon has not been started, start it in advance. If you are using Windows or Mac, please start Docker for Desktop.</p>
<p>After Docker starts up, start VS Code and open <code>nodejs-dev-sample</code>.
Then&hellip;
<img width="697" alt="Screenshot 2020-01-03 14.10.20.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/335150/ef966934-a25f-3f41-37ea-94ed24849cec.png"></p>
<p><code>dev container configuration found, so open in container? I got an inquiry saying </code>!
Then click on <code>Reopen in Container</code>&hellip;
<img width="931" alt="Screenshot 2020-01-03 14.22.25.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/335150/187da491-46be-98a3-2087-2bc9d14ffd99.png">
After a while&hellip; it opened! The status bar at the bottom left has turned green and the Remote is being connected, and the words &ldquo;Dev Container: Node.js Sample&rdquo; are dazzling!
That&rsquo;s right. If the <code>.devcontainer</code> folder and the <code>devcontainer.json</code> settings and the appropriate <code>Dockerfile</code> are in place, it will automatically create a container that mounts all the files in the project folder and open the project with VS Code. !</p>
<p>Also noteworthy here in the Dockerfile is that docker nicely solves the &ldquo;root&rdquo; user problem.
&ldquo;Developing in a container&rdquo; sounds nice, but running most images often leaves the user as &ldquo;root&rdquo;, so the owner of the file being updated in the container is &ldquo;root&rdquo;. &ldquo;There was an annoying problem. If you write your own Dockerfile, you can write anything, but you can not write it one by one, and if you write Dockerfile one by one, it doesn&rsquo;t matter even if the development environment is dirty <strong>It&rsquo;s a company&rsquo;s PC</strong>, isn&rsquo;t it? ?
This Dockerfile carefully supports those places, so the root user problem has been resolved successfully.</p>
<p>You can also manage the container from VSCode&hellip;
<img width="931" alt="Screenshot 2020-01-03 14.23.29.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/335150/b7a79212-b76d-9f0a-d8b8-3c40d412adf1.png">
In this way, you can manage which container is used in which project from VS Code.
In particular, <strong>I don&rsquo;t know which folder the Dockerfile is used to launch the container in Docker</strong> (or rather, the image is created and the container is started, so it doesn&rsquo;t really matter which folder the Dockerfile created in.) This is useful.</p>
<h2 id="how-to-use-it">How to use it?</h2>
<p>First, let&rsquo;s introduce the head family repository.
You can tell which language the sample project is for from the repository name.</p>
<ul>
<li><a href="https://github.com/microsoft/vscode-remote-try-python">microsoft/vscode-remote-try-python</a></li>
<li><a href="https://github.com/microsoft/vscode-remote-try-node">microsoft/vscode-remote-try-node</a></li>
<li><a href="https://github.com/microsoft/vscode-remote-try-go">microsoft/vscode-remote-try-go</a></li>
<li><a href="https://github.com/microsoft/vscode-remote-try-java">microsoft/vscode-remote-try-java</a></li>
<li><a href="https://github.com/microsoft/vscode-remote-try-cpp">microsoft/vscode-remote-try-cpp</a></li>
<li><a href="https://github.com/microsoft/vscode-remote-try-dotnetcore">microsoft/vscode-remote-try-dotnetcore</a></li>
<li><a href="https://github.com/microsoft/vscode-remote-try-rust">microsoft/vscode-remote-try-rust</a></li>
<li><a href="https://github.com/microsoft/vscode-remote-try-php">microsoft/vscode-remote-try-php</a></li>
</ul>
<p>Actually, if you have the <code>.devcontainer</code> folder and the setting of the <code>devcontainer.json</code> and the <code>Dockerfile</code> to be used, it will do it automatically, so just copy these files from the main repository with copy and paste. Is also an ant.
However, it is troublesome to copy and paste every time, so let&rsquo;s arrange the procedure as follows.</p>
<h2 id="1-clone-as-a-template">1. Clone as a template</h2>
<p>Clone the above repository under &ldquo;project name&rdquo; as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git clone https://github.com/microsoft/vscode-remote-try-php my-first-php
</code></pre></div><p>The argument after the repository name is the folder name to be created, and the first is to clone with a different name.</p>
<h2 id="2-delete-and-recreate-history">2. Delete and recreate history</h2>
<p>Naturally, just cloned, it includes all commit history of the original repository.
It&rsquo;s fine to reuse it as it is, but in most cases you will be worried.
So roughly delete the <code>.git</code> and below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$rm -rf .git
</code></pre></div><p>Now I&rsquo;ve forgotten the history of my past commits.
Incidentally, let&rsquo;s delete unnecessary files.
What you need is nothing except <code>.devcontainer</code>. <code>.vscode</code> is up to you.</p>
<p>Then, when cleaning is completed, it will be initialized as a new repository.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git init
...
</code></pre></div><p>This is the beginning of a new development container project!</p>
<h2 id="3-customizing-the-dockerfile">3. Customizing the Dockerfile</h2>
<p>In the actual case, it may be necessary to include DB, Angular, Aws, Firebase, CLI etc. of Azure etc., so it is almost impossible to use Dockerfile as it is.
Therefore, put the command to install the necessary tools in the Dockerfile beforehand.</p>
<p>I will omit the description of the Dockerfile here. .. ..</p>
<h2 id="4-customizing-devcontainerjson">4. Customizing devcontainer.json</h2>
<p>In the <code>devcontainer.json</code>, you can set the project name, the port to transfer, the required VS Code plugin, etc. It is a very important file.
A list of settings can be found at</p>
<ul>
<li><a href="https://code.visualstudio.com/docs/remote/containers#_devcontainerjson-reference">devcontainer.json reference</a></li>
</ul>
<p>Let&rsquo;s extract some of the settings used in the sample repository&hellip;</p>
<ul>
<li>settings …This is the setting value of setting.json of VS Code used in the container.</li>
<li>appPort&hellip; The port to transfer</li>
<li>postCreateCommand… Command executed after container creation</li>
<li>extensions… VSCode plugin installed on the remote side</li>
</ul>
<p>Is that an important point for customization?</p>
<p>Also, according to the reference, <code>docker-compose.yml</code> seems to be available.</p>
<p>After setting these, open the folder from VS Code and immediately start the project including the development environment!</p>
<h2 id="summary">Summary</h2>
<p>In writing the introductory volume of VScode Remote container, I reviewed the official document&hellip; but the volume is not perfect.
I was worried about how deeply I should dig this, but I decided to `` barely touch&rsquo;&rsquo; because it was an introduction (lol)
Although the links are pasted throughout the text, the official help of Remote Container is a surprising page.</p>
<ul>
<li><a href="https://code.visualstudio.com/docs/remote/containers">Developing inside a Container using Visual Studio Code Remote Development</a></li>
</ul>
<p>It&rsquo;s a volume that seems to be able to write this book alone &hellip;</p>
<p>By the way, this is the end this time!</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
