<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] IOS application development with Python (kivy) that can be done by monkeys | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] IOS application development with Python (kivy) that can be done by monkeys</h1>
<p>
  <small class="text-secondary">
  
  
  Dec 28, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/iphone"> iPhone</a></code></small>


<small><code><a href="https://memotut.com/tags/ios"> iOS</a></code></small>


<small><code><a href="https://memotut.com/tags/apple"> apple</a></code></small>


<small><code><a href="https://memotut.com/tags/kivy"> Kivy</a></code></small>

</p>
<pre><code>#Introduction
</code></pre>
<p>Python, which is active in the field of machine learning and data science, has a simple GUI, and kivy used this time can make applications that can be run on desktop, Android, or iOS by building it.</p>
<p>This time, I will give a simple explanation for those who have not made an application but know Python to some extent.
Not even a memorandum to yourself. ..</p>
<p>What is #kivy
One of Python&rsquo;s libraries that allows you to easily create a GUI (Graphical User Interface: not a black console screen).</p>
<p><a href="https://pyky.github.io/kivy-doc-ja/">Japanese Reference</a> also exists, and it is a library still under development.</p>
<p>Many other people have written easy-to-understand and polite articles on how to use it, so I will omit it here. This time we will proceed with the premise that it will be an application.</p>
<p>#Things necessary</p>
<ul>
<li>kivy-ios</li>
<li>Python 3 series</li>
<li>PC with Mac OS (Unfortunately Xcode is required, so it can not be done on Windows, Linux series &hellip;)</li>
<li>XCode</li>
</ul>
<p>#kivy-ios
I will clone it from the <a href="https://github.com/kivy/kivy-ios">This GitHub</a> page.</p>
<p>__ iOS 13 support __
From iOS 13, there seems to be a big change in the Objective-C language, and this kivy-ios has stopped working for a while. As of December 28, 2019, the modified pull request has been merged and is ready for use.</p>
<p><a href="https://github.com/kivy/pyobjus/issues/53">Objective-C iOS 13.0 breaking changes #53</a></p>
<h1 id="start-build">Start build</h1>
<p>Immediately start building the application.
##kivy-ios
First, install the dependency package for running kivy-ios.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">xcode-select --install
brew install autoconf automake libtool pkg-config
brew link libtool
pip3 install cython<span style="color:#f92672">==</span>0.28.1
</code></pre></div><p>In the cloned directory,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pip3 install -r requirements.txt
</code></pre></div><p>Run. Now you are ready to use kivy-ios.</p>
<p>After this, you will need to build python itself for your app, as you will be incorporating the python program into your app. The command is below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">python3 toolchain.py build python3 kivy
</code></pre></div><p>This process took about an hour in my environment (Mac book Pro 2016). Sweat</p>
<h2 id="creating-an-application">Creating an application</h2>
<p>This time it&rsquo;s a tutorial, let&rsquo;s make a stopwatch. As a content, make one button, and output the difference between the time <code>datetime.datetime.now()</code> when the button is pressed the first time and the time when the button is pressed the second time.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:main.py" data-lang="python:main.py"><span style="color:#f92672">from</span> kivy.app <span style="color:#f92672">import</span> App
<span style="color:#f92672">from</span> kivy.uix.widget <span style="color:#f92672">import</span> Widget
<span style="color:#f92672">from</span> kivy.properties <span style="color:#f92672">import</span> StringProperty
<span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> datetime


<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainWindow</span>(Widget):
    button_text <span style="color:#f92672">=</span> StringProperty(<span style="color:#e6db74">&#34;Push Button!!&#34;</span>)
    timer_text <span style="color:#f92672">=</span> StringProperty(<span style="color:#e6db74">&#34;START&#34;</span>)

    <span style="color:#66d9ef">def</span> __init__(self, <span style="color:#f92672">**</span>kwargs):
        super(MainWindow, self)<span style="color:#f92672">.</span>__init__(<span style="color:#f92672">**</span>kwargs)
        self<span style="color:#f92672">.</span>timer_check <span style="color:#f92672">=</span> False
        self<span style="color:#f92672">.</span>timer_before <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">push_button</span>(self):
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> self<span style="color:#f92672">.</span>timer_check:
            self<span style="color:#f92672">.</span>timer_before <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>now()
            self<span style="color:#f92672">.</span>timer_check <span style="color:#f92672">=</span> True
            self<span style="color:#f92672">.</span>button_text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;STOP&#34;</span>
            self<span style="color:#f92672">.</span>timer_text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Running...&#34;</span>
        <span style="color:#66d9ef">else</span>:
            self<span style="color:#f92672">.</span>timer_check <span style="color:#f92672">=</span> False
            self<span style="color:#f92672">.</span>button_text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;START&#34;</span>
            self<span style="color:#f92672">.</span>timer_text <span style="color:#f92672">=</span> str(datetime<span style="color:#f92672">.</span>now()<span style="color:#f92672">-</span>self<span style="color:#f92672">.</span>timer_before)


<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StopWatchApp</span>(App):
    <span style="color:#66d9ef">def</span> __init__(self, <span style="color:#f92672">**</span>kwargs):
        super(StopWatchApp, self)<span style="color:#f92672">.</span>__init__(<span style="color:#f92672">**</span>kwargs)

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">build</span>(self):
        <span style="color:#66d9ef">return</span> MainWindow()


<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;__main__&#39;</span>:
    StopWatchApp()<span style="color:#f92672">.</span>run()
</code></pre></div><pre><code class="language-python:stopwatch.kv" data-lang="python:stopwatch.kv">MainWindow:

&lt;MainWindow&gt;:
    BoxLayout:
        orientation: &quot;vertical&quot;
        size: root.size
        Label:
            text: root.timer_text
        Button:
            text: root.button_text
            on_press: root.push_button()
</code></pre><p><img width="40%" alt="Screenshots 2019-12-28 14.03.35.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/275720/c92e9452-5297-d850-7ee7-2db5d10ca3c0.png"><img width="40%" alt="Screenshots 2019-12-28 14.03.58.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/275720/bad6daab-5b3e-d6e9-fb7e-29c146199c01.png"></p>
<p>It looks very cheap, but I was able to do it for the time being. At this time, save the Python script as <code>main.py</code>. Put the created py file and kv file in an appropriate directory. (This time I saved it in a directory called <code>stopwatch</code>.)</p>
<h2 id="apple-profile-creation">Apple profile creation</h2>
<p>If you&rsquo;re a member of the Apple Developer Program, it&rsquo;s okay, but you will have to pay an annual fee to actually publish your app on the store. However, you can only build an actual device for free, so please set it by referring to the following article.</p>
<p><a href="https://qiita.com/koogawa/items/15b231e2728ff64e08f3">[Xcode] How much can you do with a free real machine build</a></p>
<p>__ Free real machine build __
The profile will expire in __7 days. After this, you will not be able to boot from the iPhone, so you need to transfer it to the actual device again.</p>
<p>##XCode project creation
Type the command according to the command syntax below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">python3 toolchain.py create &lt;title&gt; &lt;app_directory&gt;
</code></pre></div><p>This time, I put a directory called <code>stopwatch</code> in the directory where <code>kivy-ios-master</code> is,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">python3 kivy-ios-master/toolchain.py create StopWatch ./stopwatch
</code></pre></div><p>Will be. Then, a directory called <code>stopwatch-ios</code> will be created in the same directory, so open the XCode project <code>stopwatch.xcodeproj</code> in it.</p>
<img width="70%" alt="Screenshots 2019-12-28 14.13.23.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/275720/d0debd34-2f50-5f8a-13c6-8468abdb5a99.png">
<p>Select the provisioning profile you set from the project settings, select the connected iPhone from the terminal selection screen in the upper left, and press the triangle button to build. At this time, it is necessary to remove the passcode from the iPhone and leave it on the home screen.</p>
<p>Also, the first build will start it automatically, but it won&rsquo;t because the profile is not official. You will need to authenticate from the iPhone <code>Settings&gt; General&gt; Device Administrator</code>.</p>
<p>It seems that the build was successful. Happy New Year.</p>
<p><img width="40%" alt="file name" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/275720/38531e14-e085-d77f-2722-046357da675f.jpeg"> <img width="40%" alt="file name" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/275720/b95cd989-83c2-3564-4ce3-0d495be11b87.jpeg"></p>
<p>Since I took it with a webcam, the image quality is so bad that I die, I&rsquo;m sorry.</p>
<p>#Finally
I never thought that it would be so easy to make an application. What kind of head structure does a person who can think of such a library have? Lol</p>
<p>I would like to make various things again.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
