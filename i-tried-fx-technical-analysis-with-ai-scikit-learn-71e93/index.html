<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>I tried FX technical analysis with AI scikit-learn | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>I tried FX technical analysis with AI scikit-learn</h1>
<p>
  <small class="text-secondary">
  
  
  Jan 1, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/machine-learning"> machine learning</a></code></small>


<small><code><a href="https://memotut.com/tags/scikit-learn"> scikit-learn</a></code></small>


<small><code><a href="https://memotut.com/tags/mt4"> MT4</a></code></small>


<small><code><a href="https://memotut.com/tags/fx-technical-analysis"> FX technical analysis</a></code></small>

</p>
<pre><code>### table of contents
</code></pre>
<ol>
<li>at first</li>
<li>Document structure</li>
<li>Document contents (excerpt)</li>
<li>The process that left an impression</li>
<li>Where to get &ldquo;PDF version document and data set for execution&rdquo;</li>
</ol>
<h3 id="1-at-first">1. at first</h3>
<p>It is a water strider. (Of course the pen name)
Actually, the author has continued to develop EA for MT4 (MQL4) for a long time, hoping to make a profit if it can be done by a hobby, and for the past 1-2 years, especially MT4 and AI should be linked (especially non-technical analysis). ), but I was stalled because the results did not improve.</p>
<p>So, although it is not a bit of a head rest, I tried what AI would be if I applied AI to &ldquo;technical analysis&rdquo; that I thought that MT4&rsquo;s functions and performance were sufficient, &ldquo;AI &ldquo;scikit-learn FX technical analysis”.</p>
<p>Since I&rsquo;m a beginner in AI, I&rsquo;ve searched a lot of articles and materials trying to utilize AI for FX technical analysis. (Internet and books)
But unfortunately, I couldn&rsquo;t find anything that could be used properly.
Maybe there is something that can be used for private business purposes, but it is not available to the general public like the author.</p>
<p>So, I tried as my own method (maybe) is to use MT4 (MQL4) to select &ldquo;features&rdquo; to be used in AI. In fact, I could find other tools (especially Python-based) that could be used. It&rsquo;s a strategy I took because I didn&rsquo;t have it, but I think it&rsquo;s probably a difference in the development process with other developers.</p>
<p>Currently, it is a prototype version, but I got &ldquo;a result that seems to glow if I polish it&rdquo;, so I decided to release it to everyone. The document (report) has been made into a series and divided into two. (Currently there are two, but we plan to increase it in the future)</p>
<h3 id="2-document-structure">2. Document structure</h3>
<p>This series reports test results when AI (scikit-learn) is used for forecasting by technical analysis of FX (USDJPY; dollar/yen). (Currently prototype version)</p>
<p><strong>A trial of FX technical analysis by AI &ldquo;scikit-learn&rdquo;;</strong>
It is divided into [Part 1] and [Part 2].</p>
<p>◎ Read [Part 1] first, and if you think [Part 2] is also worth reading, get it.
(How to obtain is described in [Part 1].)</p>
<ul>
<li>Both [Part 1] and [Part 2] are in PDF format, and the data is in ZIP format.
I haven&rsquo;t written everything in Markdown format on Qiita, and I&rsquo;m not using GitHub either, because I&rsquo;m still not good at using it.</li>
</ul>
<h3 id="3-document-contents-excerpt">3. Document contents (excerpt)</h3>
<p><strong>[Goal of this time]</strong>&hellip;Refer to the block diagram
The AI side extracts &ldquo;technical analysis results&rdquo; that are worth passing to the MT4 (MQL4) side.
Honestly, I think that MT4 (MQL4) is enough for technical analysis function,
I tried it and got quite interesting results, I think the trial was not wasted.
(AI program is written in Python)
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/317816/66e01228-5cf0-d390-afe4-0b7cb7a763bb.png" alt="19_01.png"></p>
<ul>
<li>&ldquo;DLL&rdquo; and its for passing trading information (data) from the Python code side to MT4 (MQL4)
Please refer to my website for how to use it. (DLL is also included)</li>
</ul>
<p><strong>Explanatory content in [Part 1] and [Part 2];</strong>
First, the &ldquo;procedure for applying AI to the technical analysis of FX&rdquo; adopted by the author this time is as follows.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/317816/eceffce4-a080-cae2-56a5-cf3520ebbef2.png" alt="19_02.png"></p>
<ul>
<li>I use Spyder as a Python development environment.</li>
</ul>
<p>(1) [Part 1]
An example of the final stage
・DataFrame (feature amount and label) that has been generated from the exchange (FX) chart
Explain an example of machine learning and prediction using a Python program.</p>
<p>(2) In [Part 2],
I will explain with examples from the first stage to creating a DataFrame</p>
<ul>
<li>Detailed explanation of the generation method of DataFrame (feature amount and label) used in <a href="separatearticle">Part 1</a>.</li>
</ul>
<p>** &lt;Indicator used (example)&gt; **-[Part 2] posted
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/317816/9fd745e8-bf4e-84be-f379-cbe84fc606a6.png" alt="19_03.png">
The indicators used to extract the features are common with the author&rsquo;s original (pine needle filter).
Bollinger band.</p>
<p><strong><Generated DataFrame></strong>&hellip;[Part 1]
The example DataFrame has up to 1049 lines.
・Column elements are features and labels, and row elements are &ldquo;data&rdquo; extracted from the FX chart.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/317816/43da9522-6d51-c73b-53d0-c10c5b213ec3.png" alt="19_04.png"></p>
<p><strong><Forecast Results></strong>&hellip;[Part 1] posted, there are 2 cases
The image below is an image cut from the description (Spyder output)
Example 1;
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/317816/4ec8235b-a708-85c3-2e7f-e152d29b5317.png" alt="19_05.png">
Example 2;
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/317816/d4ce79e4-9d10-eb8b-d2eb-297af633db01.png" alt="19_06.png"></p>
<p><strong>[Win/Loss Judgment Method]</strong></p>
<ul>
<li>Win/Loss judgment uses the same concept as when creating an MT4 EA.
In other words, &ldquo;buy or sell&rdquo; by specifying profit (profit level), loss (loss level), and spread
It learns the result of winning and losing judgment when entering the market from, and makes predictions on test data.
∙ Winning and losing “learning and prediction” are performed by “classification” by random forest.</li>
</ul>
<p>*The development environment required to execute the contents (all available for free) is described in [Part 1].
However, it does not explain how to get Python, scikit-learn or MT4, which is necessary for beginners, and technical explanation.
Some of the knowledge required for beginners can be found on my website (below).
・・All the knowledge necessary to understand the contents is available on the web such as this Qiita.</p>
<h3 id="4-the-process-that-left-an-impression">4. The process that left an impression</h3>
<ul>
<li>Initially, we used &ldquo;SVC (SVM)&rdquo; as the algorithm, but the result (example implemented early) is
The following was the situation.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/317816/b7faffc1-8ce7-b9d4-7903-da3de9e87b48.png" alt="19_07.png">
◆What a phenomenon that the prediction results are all &ldquo;-1&rdquo;, no matter how many times you try
I couldn&rsquo;t improve. (“-1” is when the prediction result is “loss cut”)
However, since the overall correct answer rate was “138/210” (66%), I had a hard time understanding.</li>
</ul>
<p>The cause is that SVC (SVM) handles &ldquo;unbalanced data&rdquo; especially, that is, the number of data between classes
I learned that various advance adjustments are essential when dealing with objects that are significantly biased.
(Scaling, normalization, and other adjustments required)
After all, change the classification algorithm to &ldquo;random forest&rdquo; to solve this troublesome problem
As a result of avoiding it, the result was quite satisfactory.</p>
<h3 id="5-where-to-get-pdf-version-document-and-data-set-for-execution">5. Where to get &ldquo;PDF version document and data set for execution&rdquo;</h3>
<p><strong>◎ URL for obtaining [Part 1]</strong>
** ① Document (PDF) **; <a href="http://mql4.s1002.xrea.com/ai_tec/ai_tec_01.pdf">http://mql4.s1002.xrea.com/ai_tec/ai_tec_01.pdf</a>
** ② Data set (.zip) **; <a href="http://mql4.s1002.xrea.com/ai_tec/ai_tec_01.zip">http://mql4.s1002.xrea.com/ai_tec/ai_tec_01.zip</a>
*The data set contains the materials necessary for executing &ldquo;Python code, DataFrame, etc.&rdquo;
――
<strong>◎How to link Python and MT4</strong>
*This site is being updated, and the basic contents have also been updated.
[New page for water strider]; <a href="http://mql4.s1002.xrea.com/ai_mql4/index.html">http://mql4.s1002.xrea.com/ai_mql4/index.html</a></p>
<p><strong>◎ About MT4 (MQL4) and EA</strong>
*It&rsquo;s a little old, but I think it&rsquo;s still worth reading.
We are improving the basics of MT4 and MQL4, but before &ldquo;Build_600&rdquo; (or less)
The MQL4 code (script) currently needs a lot of modification in order to work,
Please be careful.
[Ammebo page]; <a href="http://www.green.dti.ne.jp/sdimension/mql/">http://www.green.dti.ne.jp/sdimension/mql/</a></p>
<p><strong>that&rsquo;s all</strong></p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
