<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://japan2018.github.io/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://japan2018.github.io/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://japan2018.github.io/favicon-16x16.png">

  
  <link rel="manifest" href="https://japan2018.github.io/site.webmanifest">

  
  <link rel="mask-icon" href="https://japan2018.github.io/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://japan2018.github.io/css/bootstrap.min.css" />

  
  <title>Released the Corona Candlestick Chart App for Hyogo Prefecture. | Some Title</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Released the Corona Candlestick Chart App for Hyogo Prefecture.</h1>
<p>
  <small class="text-secondary">
  
  
  Apr 22, 2020
  </small>
  

<small><code><a href="https://japan2018.github.io/tags/python">Python</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/go"> Go</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/docker"> Docker</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/vue.js"> Vue.js</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/graphql"> GraphQL</a></code></small>

</p>
<pre><code># Published service
</code></pre>
<p><a href="https://covid19-candle-hyogo.ml">https://covid19-candle-hyogo.ml</a>
The source code of GitHub is <a href="https://github.com/inadati-services/covid19-candle-hyogo.services">here</a></p>
<p>#Motivation
The published daily graph of infected persons and the cumulative graph
Those who have recovered and those who have died are not deducted
I think it only gives the feeling that we are constantly expanding.</p>
<p>As I am
What I would like to know is rather the “trend”
Is it expanding, is it ending, or is it in a balanced state?</p>
<p>The excel data of <a href="https://web.pref.hyogo.lg.jp/kk03/documents/yousei.xlsx">here</a> which is open data of Hyogo prefecture
The number of people who are hospitalized is the actual number of positive people in the prefecture.
There are times when it will be 20 people compared to the previous day,
Actually, the actual number of positive people is increasing or decreasing.</p>
<p>I also had experience with the language for developing an automated exchange trading tool called mql.
I thought that the trend of the spread of infection could be visualized by applying the candlestick chart of the exchange rate.</p>
<p>#What is a candlestick chart?
This graph is often used to analyze exchange rate and stock price movements.
Whether the price is rising or falling
It is very easy to visually understand the raising and lowering, from the use in the rice market in the Edo period to the present
The chart used.
By the way, it is from Japan.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/224153/dd1f67c7-51bd-52a8-8da6-687dd99d7e65.png" alt="011_icon.png"></p>
<p>#Container configuration
<strong>scraping-bot</strong>
Language: python
Description: Every 30 minutes, the Excel file on the Hyogo homepage is downloaded into the container.
Store data in postgreSQL</p>
<p><strong>gqlkit-server</strong>
Language: Go
Package: gqlgen
Description: GraphQL server, reading data stored in scraping-bot container from postgreSQL
Serve as GraphQL Query</p>
<p><strong>nuxt</strong>
Language: javascript
Description: receive data from GraphQL provided by gqlkit-server
Draw a candlestick chart using echarts.js.
Also, depending on the order of the values on the candlestick, the 5-day average line, and the 10-day average line.
It also displays an alert that evaluates the degree of spread.
GraphQL client uses <a href="https://github.com/gqlkit-lab/rapi">rapi</a></p>
<p><strong>Other containers</strong>
postgres
pgweb (for database confirmation)</p>
<p>#Summary
This time, the server used VPS of <a href="https://mixhost.jp/news/432">mixhost</a>.
Reception seems to be until the end of April, but when publishing corona related applications and sites
It is said that it can be used free of charge for 12 months.
Thank you</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-123456789-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
