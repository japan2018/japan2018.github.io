<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Master the comprehension | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Master the comprehension</h1>
<p>
  <small class="text-secondary">
  
  
  Nov 23, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/numpy">numpy</a></code></small>

</p>
<pre><code>#What is a comprehension
</code></pre>
<p>Notation that can be used when creating lists and dictionaries in python. Since the for loop is slow in python, comprehension can be used to make a list or dictionary faster when creating a list or dictionary.</p>
<h1 id="basic">Basic</h1>
<p>When making a list like this.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">new_list <span style="color:#f92672">=</span> [f(myiter) <span style="color:#66d9ef">for</span> myiter <span style="color:#f92672">in</span> origin_list]
</code></pre></div><p>You can create a dictionary by replacing [] with {}.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">new_dict <span style="color:#f92672">=</span> (indexes[myiter]:f(myiter) \
<span style="color:#66d9ef">for</span> myiter <span style="color:#f92672">in</span> origin_list}
</code></pre></div><p>The basic pattern is as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">[(Expression using iterator) <span style="color:#66d9ef">for</span> (iterater) <span style="color:#f92672">in</span> (source iterable object)]
</code></pre></div><p>Use conditional branch with # if</p>
<h2 id="if-only">if only</h2>
<p>If you use only one if, add it at the end.</p>
<pre><code class="language-python:" data-lang="python:">odd = [i for i in range(10) if i%2 != 0]
# [1,3,5,7,9]
</code></pre><p>At this time, if acts as a filter.</p>
<p>When using ## if else
If you also use else, put ** before * for.</p>
<pre><code class="language-python:" data-lang="python:">xx = [&quot;even&quot; if i%2==0 else &quot;odd&quot; for i in range(10)]
# ['even','odd','even','odd','even','odd','even','odd','even','odd']
</code></pre><p>The reason why we have to precede it with if is that it is a part of the ternary operator, which is different from the one we used earlier. It becomes one expression with <code> &quot;even&quot; if i%2 == 0 else &quot;odd&quot;</code>, which will be repeated with for.</p>
<p>~~ You cannot use multiple else. ~~ Elif cannot be used for multiple conditional branches. This can be achieved by using multiple if else.</p>
<h1 id="if-there-are-multiple-subscripts">If there are multiple subscripts</h1>
<h2 id="pattern-to-arrange-in-a-line">Pattern to arrange in a line</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">xx <span style="color:#f92672">=</span> [i<span style="color:#f92672">+</span>j <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> i_list <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> j_list]
</code></pre></div><h2 id="nesting-pattern">Nesting pattern</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">xx <span style="color:#f92672">=</span> [[i<span style="color:#f92672">+</span>j <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">3</span>)] <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>)]
</code></pre></div><p>If you want to use numpy operation, pass it to np.array.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">xx <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([[i<span style="color:#f92672">+</span>j <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">3</span>)] <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>)])
</code></pre></div><p>numpy.array is quite clever, so it will properly mold double, triple, and quadruple.</p>
<h2 id="pattern-to-use-zip">Pattern to use zip</h2>
<p>Line up with (0,0),(1,1),(2,2),&hellip;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">xx <span style="color:#f92672">=</span> [i<span style="color:#f92672">+</span>j <span style="color:#66d9ef">for</span> i,j <span style="color:#f92672">in</span> zip(mylist_i,mylist_j)]
</code></pre></div><h1 id="not-to-plunge-into-the-swamp">Not to plunge into the swamp</h1>
<p>If you come up to this point, you may be angry. List comprehensions have no rules for line breaks, so one line becomes long and obfuscated. So if it becomes long, be sure to insert a line break properly**.</p>
<p>In case of VS Code, if you put \ in the first line, it will be formatted nicely after that. Actually it runs with or without .</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">Absolute line <span style="color:#66d9ef">break</span> when using <span style="color:#75715e"># if</span>
xx <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;even&#34;</span> <span style="color:#66d9ef">if</span> i <span style="color:#f92672">%</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">else</span> <span style="color:#e6db74">&#34;odd&#34;</span> \
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10</span>)]

If the <span style="color:#75715e"># expression becomes long, insert a line break at the long position</span>
zz <span style="color:#f92672">=</span> (np<span style="color:#f92672">.</span>sin(xx) <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>rand(xx<span style="color:#f92672">.</span>shape) \
    <span style="color:#66d9ef">for</span> xx <span style="color:#f92672">in</span> list_xx]
</code></pre></div>
    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
