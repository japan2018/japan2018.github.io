<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://japan2018.github.io/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://japan2018.github.io/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://japan2018.github.io/favicon-16x16.png">

  
  <link rel="manifest" href="https://japan2018.github.io/site.webmanifest">

  
  <link rel="mask-icon" href="https://japan2018.github.io/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://japan2018.github.io/css/bootstrap.min.css" />

  
  <title>Can programs started using cron be made interactive? | Some Title</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Can programs started using cron be made interactive?</h1>
<p>
  <small class="text-secondary">
  
  
  Nov 7, 2019
  </small>
  

<small><code><a href="https://japan2018.github.io/tags/python">Python</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/cron">cron</a></code></small>

</p>
<pre><code>## I wanted to run an interactive program with cron
</code></pre>
<p>I&rsquo;m running a project to track the lending history of books at a certain place, and want to use the Raspberry Pi as feedback and whether the barcode was read correctly or not. I plan to manage based on ISBN, so I created a program in Python that receives the input of the barcode reader and returns the feedback &ldquo;OK if it is OK, NG otherwise&rdquo;.
There were only non-engineers at the site, and it seemed difficult to SSH from the PC used at work and the company LAN to start up,</p>
<ol>
<li>Set cron so that the program is executed at the timing of launching Raspberry Pi</li>
<li>Bar code reader for input device and Sense Hat LED for feedback</li>
</ol>
<p>Assembling the minimum configuration that I thought, this is all right&hellip;</p>
<h2 id="cant-receive-input">Can&rsquo;t receive input</h2>
<p>Before receiving the input, I found out that the program fell by emitting an EOF Error. Apparently it doesn&rsquo;t matter if there is an input device or not. EOF Error means we are trying to process the input stream without waiting, so we have no idea what to do.</p>
<h2 id="the-program-started-by-cron-is-not-the-terminal-execution">The program started by Cron is not the terminal execution</h2>
<p>After doing various research, I found the following article.
<a href="https://stackoverflow.com/questions/41879590/how-to-run-an-interactive-python-script-as-cron-job">How to run an interactive Python script as cron job?
</a></p>
<p>It may be wrong because it is a very rough understanding, but in short, when launching a program using cron, it does not run in the terminal but as a background process, so it can not receive input from the outside It seems that.
So how do you handle the standard input of the background process? I found out that it seems to be the answer when I investigated further.</p>
<p><a href="https://torutk.hatenablog.jp/entry/20090305/p1">The standard input of the process that runs in the background is&hellip;</a>(From&quot;torutkblog&quot;article)</p>
<p>In the above article, the mkfifo command is used successfully to get the standard input and standard output, but what I want to do this time is to input the Python <code>input()</code> and judge its contents&hellip; By turning such processing, I want to complete all the processing in that area in the Python program, so it seems that some more work needs to be done.
Besides, if standard input is specified by <code>/dev/null</code> at the stage of setting it in cron, it will work or not&hellip;</p>
<h2 id="is-the-standard-io-of-the-background-process-troublesome">Is the standard I/O of the background process troublesome?</h2>
<p>Although I have a feeling that my knowledge is insufficient, I have found that it is not very good to actively pass input to the background process.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-123456789-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
