<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] NumPy basics | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] NumPy basics</h1>
<p>
  <small class="text-secondary">
  
  
  Jan 30, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/numpy">numpy</a></code></small>

</p>
<pre><code>Features of #NumPy
</code></pre>
<ul>
<li>Compute multidimensional arrays all at once.</li>
</ul>
<h1 id="ndarray-multidimensional-array-object">ndarray: multidimensional array object</h1>
<ul>
<li>ndarray example</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

data <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>) <span style="color:#75715e"># random number with 2 columns and 3 rows</span>

<span style="color:#66d9ef">print</span>(data)
<span style="color:#75715e"># [[-0.4440664 -0.07889544 -0.84781375]</span>
<span style="color:#75715e"># [0.59333292 -0.03008522 1.54106015]]</span>

<span style="color:#66d9ef">print</span>(data <span style="color:#f92672">*</span> <span style="color:#ae81ff">10</span>) <span style="color:#75715e"># multiply</span>
<span style="color:#75715e"># [[-4.44066398 -0.78895438 -8.47813747]</span>
<span style="color:#75715e"># [5.93332925 -0.3008522 15.41060155]]</span>

<span style="color:#66d9ef">print</span>(data <span style="color:#f92672">+</span> data) <span style="color:#75715e"># addition</span>
<span style="color:#75715e"># [[-0.8881328 -0.15779088 -1.69562749]</span>
<span style="color:#75715e"># [1.18666585 -0.06017044 3.08212031]]</span>

<span style="color:#66d9ef">print</span>(data<span style="color:#f92672">.</span>shape) <span style="color:#75715e"># number of vertical and horizontal elements</span>
<span style="color:#75715e"># (twenty three)</span>

<span style="color:#66d9ef">print</span>(data<span style="color:#f92672">.</span>dtype) <span style="color:#75715e"># Element type</span>
<span style="color:#75715e"># float64</span>
</code></pre></div><h2 id="ndarray-generation">ndarray generation</h2>
<ul>
<li>Generate with <code>np.array(list)</code>.</li>
<li><code>np.zeros(10)</code> <code>np.zeros((3,6))</code> creates a ndarray with all elements 0.</li>
<li>Similarly, use Ê»np.ones()` to create a ndarray with all 1s</li>
<li><code>np.full()</code> is filled with the specified value.</li>
<li>In <code>np.arange(10)</code>, create a ndarray with elements 0-9 in order.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

data <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>], [<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>]]

arr <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(data) <span style="color:#75715e"># create ndarray from list</span>

<span style="color:#66d9ef">print</span>(arr)
<span style="color:#75715e"># [[1 2 3 4]</span>
<span style="color:#75715e"># [5 6 7 8]]</span>

<span style="color:#66d9ef">print</span>(arr<span style="color:#f92672">.</span>ndim) <span style="color:#75715e"># dimension</span>
<span style="color:#75715e">#2</span>

<span style="color:#66d9ef">print</span>(arr<span style="color:#f92672">.</span>shape) <span style="color:#75715e"># number of elements</span>
<span style="color:#75715e"># (twenty four)</span>
</code></pre></div><h2 id="data-type-of-ndarray">Data type of ndarray</h2>
<ul>
<li>int8, 16, 32, 64, uint8, 16, 32, 64</li>
<li>float16, 32, 64, 128</li>
<li>complex64, 128, 256</li>
<li>bool</li>
<li>object</li>
<li>string_</li>
<li>unicode_</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

arr1 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#f92672">-</span><span style="color:#ae81ff">3.7</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1.2</span>, <span style="color:#ae81ff">0.5</span>, <span style="color:#ae81ff">4.5</span>])
<span style="color:#66d9ef">print</span>(arr1)
<span style="color:#75715e"># [-3.7 -1.2 0.5 4.5]</span>

arr2 <span style="color:#f92672">=</span> arr1<span style="color:#f92672">.</span>astype(np<span style="color:#f92672">.</span>int32) <span style="color:#75715e"># cast</span>
<span style="color:#66d9ef">print</span>(arr2)
<span style="color:#75715e"># [-3 -1 0 4]</span>

arr3 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#e6db74">&#39;-3.7&#39;</span>,<span style="color:#e6db74">&#39;-1.2&#39;</span>, <span style="color:#e6db74">&#39;0.5&#39;</span>, <span style="color:#e6db74">&#39;4.5&#39;</span>], dtype<span style="color:#f92672">=</span>np<span style="color:#f92672">.</span>string_)
<span style="color:#66d9ef">print</span>(arr3)
<span style="color:#75715e"># [b&#39;-3.7&#39; b&#39;-1.2&#39; b&#39;0.5&#39; b&#39;4.5&#39;]</span>
<span style="color:#66d9ef">print</span>(arr3<span style="color:#f92672">.</span>dtype)
<span style="color:#75715e"># | S4</span>

arr4 <span style="color:#f92672">=</span> arr3<span style="color:#f92672">.</span>astype(np<span style="color:#f92672">.</span>float64) <span style="color:#75715e"># cast</span>
<span style="color:#66d9ef">print</span>(arr4)
<span style="color:#75715e"># [-3.7 -1.2 0.5 4.5]</span>
</code></pre></div><h2 id="arithmetic-operation-of-ndarray">Arithmetic operation of ndarray</h2>
<ul>
<li>Operations of the same size are calculated for the same position.</li>
<li>The operation of ndarrays with different sizes is called broadcast.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

arr1 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([[<span style="color:#ae81ff">1.</span>, <span style="color:#ae81ff">2.</span>, <span style="color:#ae81ff">3.</span>, <span style="color:#ae81ff">4.</span>], [<span style="color:#ae81ff">5.</span>, <span style="color:#ae81ff">6.</span>, <span style="color:#ae81ff">7.</span>, <span style="color:#ae81ff">8.</span>]])
<span style="color:#66d9ef">print</span>(arr1 <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span>)
<span style="color:#75715e"># [[ 1. 4. 9. 16.]</span>
<span style="color:#75715e"># [25. 36. 49. 64.]]</span>

<span style="color:#66d9ef">print</span>(arr1<span style="color:#f92672">-</span>arr1)
<span style="color:#75715e"># [[0. 0. 0. 0.]</span>
<span style="color:#75715e"># [0. 0. 0. 0.]]</span>

<span style="color:#66d9ef">print</span>(<span style="color:#ae81ff">1</span> <span style="color:#f92672">/</span> arr1)
<span style="color:#75715e"># [[1. 0.5 0.33333333 0.25]</span>
<span style="color:#75715e"># [0.2 0.16666667 0.14285714 0.125 ]]</span>

arr2 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([[<span style="color:#ae81ff">0.</span>, <span style="color:#ae81ff">4.</span>, <span style="color:#ae81ff">1.</span>, <span style="color:#ae81ff">5.</span>], [<span style="color:#ae81ff">3.</span>, <span style="color:#ae81ff">9.</span>, <span style="color:#ae81ff">4.</span>, <span style="color:#ae81ff">9.</span>]])
<span style="color:#66d9ef">print</span>(arr1 <span style="color:#f92672">&lt;</span>arr2)
<span style="color:#75715e"># [[False True False True]</span>
<span style="color:#75715e"># [False True False True]]</span>
</code></pre></div><h2 id="index-reference-and-slicing-basics">Index reference and slicing basics</h2>
<ul>
<li>Index reference cuts out a part of data.</li>
<li>A scalar can be specified for the cut out part, and the specified value will propagate to the whole cut out part. (broadcast)</li>
<li>A slice is a view, not a copy.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

arr1 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">10</span>)
<span style="color:#66d9ef">print</span>(arr1)
<span style="color:#75715e"># [0 1 2 3 4 5 6 7 8 9]</span>

<span style="color:#66d9ef">print</span>(arr1[<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">8</span>])
<span style="color:#75715e"># [5 6 7]</span>

arr1[<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">8</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>
<span style="color:#66d9ef">print</span>(arr1)
<span style="color:#75715e"># [0 1 2 3 4 12 12 12 8 9]</span>

arr_slice <span style="color:#f92672">=</span> arr1[<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">8</span>]
arr_slice[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">12345</span>

<span style="color:#66d9ef">print</span>(arr_slice)
<span style="color:#75715e"># [12 12345 12]</span>

<span style="color:#66d9ef">print</span>(arr1)
<span style="color:#75715e"># [0 1 2 3 4 12 12345 12 8 9]</span>
</code></pre></div><ul>
<li>2D slice</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">arr2d <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>], [<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>], [<span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>]]) <span style="color:#75715e"># 2D</span>
<span style="color:#66d9ef">print</span>(arr2d)
<span style="color:#75715e"># [[one two Three]</span>
<span style="color:#75715e"># [4 5 6]</span>
<span style="color:#75715e"># [7 8 9]]</span>

<span style="color:#66d9ef">print</span>(arr2d[:<span style="color:#ae81ff">2</span>]) <span style="color:#75715e"># extract vertical 0, 1st</span>
<span style="color:#75715e"># [[one two Three]</span>
<span style="color:#75715e"># [4 5 6]]</span>

<span style="color:#66d9ef">print</span>(arr2d[:<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>:]) <span style="color:#75715e"># Take out the 0th and 1st columns and the 1st and 2nd columns</span>
<span style="color:#75715e"># [[twenty three]</span>
<span style="color:#75715e"># [5 6]]</span>

<span style="color:#66d9ef">print</span>(arr2d[<span style="color:#ae81ff">1</span>, :<span style="color:#ae81ff">2</span>]) <span style="color:#75715e"># Take out the first vertical line and the 0th and first horizontal line</span>
<span style="color:#75715e"># [4 5]</span>

<span style="color:#66d9ef">print</span>(arr2d[:, :<span style="color:#ae81ff">1</span>]) <span style="color:#75715e"># Extract all 0&#39;s and 1&#39;s in the horizontal path</span>
<span style="color:#75715e"># [[1]</span>
<span style="color:#75715e">#  [Four]</span>
<span style="color:#75715e"># [7]]</span>

arr2d[:<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>:] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e"># substitute all in the range</span>
<span style="color:#66d9ef">print</span>(arr2d)
<span style="color:#75715e"># [[1 0 0]</span>
<span style="color:#75715e"># [4 0 0]</span>
<span style="color:#75715e"># [7 8 9]]</span>
</code></pre></div><h2 id="boolean-index-reference">Boolean index reference</h2>
<ul>
<li>Based on the condition of the array having 7 arrays (true/false value array), the row of the two-dimensional array of (7,4) can be fetched.</li>
<li>The number of elements of the referenced array axis and the number of elements of the boolean array must match.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

names <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#e6db74">&#39;Yamada&#39;</span>,<span style="color:#e6db74">&#39;Suzuki&#39;</span>,<span style="color:#e6db74">&#39;Sato&#39;</span>,<span style="color:#e6db74">&#39;Yamada&#39;</span>,<span style="color:#e6db74">&#39;Tanaka&#39;</span>,<span style="color:#e6db74">&#39;Tanaka&#39;</span>,<span style="color:#e6db74">&#39;Sato&#39;</span>])

data <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randn(<span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">4</span>) <span style="color:#75715e"># Create a 7-row, 4-row array with random numbers</span>
<span style="color:#66d9ef">print</span>(data)
<span style="color:#75715e"># [[-0.92866442 -0.81744986 1.11821763 -0.55440628]</span>
<span style="color:#75715e"># [-0.09511771 0.99145963 0.38475434 0.59748055]</span>
<span style="color:#75715e"># [0.0444708 -0.00381292 0.97888419 1.242504]</span>
<span style="color:#75715e"># [0.89214068 -1.0411466 0.90850611 -2.02933442]</span>
<span style="color:#75715e"># [0.78789041 -0.84593788 -0.5624772 0.32488453]</span>
<span style="color:#75715e"># [0.50153002 -0.25411512 0.30855623 -1.31825153]</span>
<span style="color:#75715e"># [-0.6596584 1.53735231 -0.37044833 1.93782111]]</span>

<span style="color:#66d9ef">print</span>(names <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Yamada&#39;</span>) <span style="color:#75715e"># if&#39;Yamada&#39; matches, returns true if 0, 4th</span>
<span style="color:#75715e"># [True False False True False False False]</span>

<span style="color:#66d9ef">print</span>(data[names <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Yamada&#39;</span>]) <span style="color:#75715e"># extract 0th and 4th from data</span>
<span style="color:#75715e"># [[-0.92866442 -0.81744986 1.11821763 -0.55440628]</span>
<span style="color:#75715e"># [0.89214068 -1.0411466 0.90850611 -2.02933442]]</span>

You can also retrieve it <span style="color:#66d9ef">with</span> mask <span style="color:#f92672">=</span> (names <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Yamada&#39;</span>) <span style="color:#f92672">|</span> (names <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Sato&#39;</span>) <span style="color:#75715e"># or</span>
<span style="color:#66d9ef">print</span>(data[(names <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Yamada&#39;</span>) <span style="color:#f92672">|</span> (names <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Sato&#39;</span>)])
<span style="color:#75715e"># [[-0.92866442 -0.81744986 1.11821763 -0.55440628]</span>
<span style="color:#75715e"># [0.0444708 -0.00381292 0.97888419 1.242504]</span>
<span style="color:#75715e"># [0.89214068 -1.0411466 0.90850611 -2.02933442]</span>
<span style="color:#75715e"># [-0.6596584 1.53735231 -0.37044833 1.93782111]]</span>

data[names <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;Yamada&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e"># 0, 4 put 0</span>
<span style="color:#66d9ef">print</span>(data)
<span style="color:#75715e"># [[ 0. 0. 0. 0.]</span>
<span style="color:#75715e"># [-0.09511771 0.99145963 0.38475434 0.59748055]</span>
<span style="color:#75715e"># [0.0444708 -0.00381292 0.97888419 1.242504]</span>
<span style="color:#75715e"># [0. 0. 0. 0.]</span>
<span style="color:#75715e"># [0.78789041 -0.84593788 -0.5624772 0.32488453]</span>
<span style="color:#75715e"># [0.50153002 -0.25411512 0.30855623 -1.31825153]</span>
<span style="color:#75715e"># [-0.6596584 1.53735231 -0.37044833 1.93782111]]</span>
</code></pre></div><h2 id="see-fancy-index">See Fancy Index</h2>
<ul>
<li>Fancy index reference is a method that uses integer array for index reference.</li>
<li>Unlike slicing, fancy index lookups always return a copy of the original data</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

arr <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">32</span>)<span style="color:#f92672">.</span>reshape(<span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">4</span>) <span style="color:#75715e">#8, create array</span>
<span style="color:#66d9ef">print</span>(arr)
<span style="color:#75715e"># [[ 0 1 2 3]</span>
<span style="color:#75715e"># [4 5 6 7]</span>
<span style="color:#75715e"># [8 9 10 11]</span>
<span style="color:#75715e"># [12 13 14 15]</span>
<span style="color:#75715e"># [16 17 18 19]</span>
<span style="color:#75715e"># [20 21 22 23]</span>
<span style="color:#75715e"># [24 25 26 27]</span>
<span style="color:#75715e"># [28 29 30 31]]</span>

<span style="color:#66d9ef">print</span>(arr[[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]]) <span style="color:#75715e"># returns 0, 4, 5, -1 rows# [[ 0 1 2 3]</span>
<span style="color:#75715e"># [16 17 18 19]</span>
<span style="color:#75715e"># [20 21 22 23]</span>
<span style="color:#75715e"># [28 29 30 31]]</span>

<span style="color:#66d9ef">print</span>(arr[[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>]]) <span style="color:#75715e"># (1,0),(5,3),(7,1),(2,2) return</span>
<span style="color:#75715e"># [4 23 29 10]</span>
</code></pre></div><h2 id="transposed-matrix-row-and-column-swap">Transposed matrix, row and column swap</h2>
<ul>
<li>Transpose of ndarray returns a special view that reconstructs the original matrix. Do not make a copy.</li>
<li>There is a method to apply <code>transpose</code> function and a method to refer to <code>T</code> which is one of the attributes of ndarray.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

arr1 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">15</span>)<span style="color:#f92672">.</span>reshape(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>) <span style="color:#75715e">#3, create array</span>
<span style="color:#66d9ef">print</span>(arr1)
<span style="color:#75715e"># [[ 0 1 2 3 4]</span>
<span style="color:#75715e"># [5 6 7 8 9]</span>
<span style="color:#75715e"># [10 11 12 13 14]]</span>

<span style="color:#66d9ef">print</span>(arr1<span style="color:#f92672">.</span>T)
<span style="color:#75715e"># [[ 0 5 10]</span>
<span style="color:#75715e"># [1 6 11]</span>
<span style="color:#75715e"># [2 7 12]</span>
<span style="color:#75715e"># [3 8 13]</span>
<span style="color:#75715e"># [4 9 14]]</span>

arr2 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(<span style="color:#ae81ff">24</span>)<span style="color:#f92672">.</span>reshape((<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)) <span style="color:#75715e"># create an array of (2,3,4)</span>
<span style="color:#66d9ef">print</span>(arr2)
<span style="color:#75715e"># [[[ 0 1 2 3]</span>
<span style="color:#75715e"># [4 5 6 7]</span>
<span style="color:#75715e"># [8 9 10 11]]</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e"># [[12 13 14 15]</span>
<span style="color:#75715e"># [16 17 18 19]</span>
<span style="color:#75715e"># [20 21 22 23]]]</span>

<span style="color:#66d9ef">print</span>(arr2<span style="color:#f92672">.</span>transpose((<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>))) <span style="color:#75715e"># Switch the order of axes to make an array of (3,2,4)</span>
<span style="color:#75715e"># [[[ 0 1 2 3]</span>
<span style="color:#75715e"># [12 13 14 15]]</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e"># [[ 4 5 6 7]</span>
<span style="color:#75715e"># [16 17 18 19]]</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e"># [[ 8 9 10 11]</span>
<span style="color:#75715e"># [20 21 22 23]]]</span>
</code></pre></div><p>#Universal function: function applied to all array elements</p>
<ul>
<li>Universal function is a function that returns the search result for each element, targeting the ndarray.</li>
<li><code>unary ufunc</code> takes one ndarray</li>
<li>Abs, fabs, sqrt, square, exp, log, log10, log2, log1p, sign, cell, floor, rint modf, isnan, isfinite, isinf, cos, sin, tan, etc.</li>
<li><code>binary ufunc</code> takes two ndarrays
-Add, subtract, multiply, divide, floor_dvide, power, maximum, fmax, minimum, fmin, mod, copysign, grater, less, equal, logical_and etc.</li>
</ul>
<p>Array oriented programming with #ndarray</p>
<ul>
<li>Display the result of <code>sqrt(x^2 + y^2)</code> for the grid point data</li>
<li><code>np.meshgrid</code> takes two one-dimensional functions and enumerates all combinations of each element.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt

points <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(<span style="color:#f92672">-</span><span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">0.01</span>) <span style="color:#75715e"># 1000 grid points</span>
xs, ys <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>meshgrid(points, points) <span style="color:#75715e"># returns all combinations</span>

z <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>sqrt(xs <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> ys <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span>)

<span style="color:#66d9ef">print</span>(z)

plt<span style="color:#f92672">.</span>imshow(z, cmap<span style="color:#f92672">=</span>plt<span style="color:#f92672">.</span>cm<span style="color:#f92672">.</span>gray)
plt<span style="color:#f92672">.</span>colorbar()
plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Image plot of $</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">sqrt{x^2 + x^2}$ for a grid of values&#34;</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><img width="504" alt="Screenshot 2020-01-27 9.07.30.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/88686/ee6b2907-fb1e-0b4f-b0a3-29c32a13cde9.png">
<h2 id="conditional-expression-in-ndarray">Conditional expression in ndarray</h2>
<ul>
<li><code>np.where()</code> returns the second argument when the first argument is True, and the third argument otherwise.
-Each argument can be either a list value or a scalar value.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt

xarr <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">1.1</span>, <span style="color:#ae81ff">1.2</span>, <span style="color:#ae81ff">1.3</span>, <span style="color:#ae81ff">1.4</span>, <span style="color:#ae81ff">1.5</span>])
yarr <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">2.1</span>, <span style="color:#ae81ff">2.2</span>, <span style="color:#ae81ff">2.3</span>, <span style="color:#ae81ff">2.4</span>, <span style="color:#ae81ff">2.5</span>])
cond <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([True, False, True, True, False])
Takes x when <span style="color:#75715e"># cond is True and y otherwise</span>
<span style="color:#75715e"># Comprehensive notation (slow)</span>
reult1 <span style="color:#f92672">=</span> [(x <span style="color:#66d9ef">if</span> c <span style="color:#66d9ef">else</span> y) <span style="color:#66d9ef">for</span> x, y, c <span style="color:#f92672">in</span> zip(xarr, yarr, cond)]
use <span style="color:#75715e">#where</span>
result2 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>where(cond, xarr,yarr)
<span style="color:#66d9ef">print</span>(result2)
<span style="color:#75715e"># [1.1 2.2 1.3 1.4 2.5]</span>
</code></pre></div><h2 id="mathematical-and-statistical-functions">Mathematical and statistical functions</h2>
<p>Specify which axis to process with <code>axis</code>
-<code>arr.sum()</code>, <code>arr.mean()</code> overall sum and average
-<code>arr.sum(axis=1)</code>, <code>arr.mean(axis=0)</code> When 2D, sum of rows and average of columns respectively</p>
<h2 id="boolean-array-function">Boolean array function</h2>
<ul>
<li>When <code>arr</code> is <code>np.array</code>, <code>(arr&gt;0).sum()</code> is the number of positive numbers (True)</li>
<li>When <code>bool=Boolean array</code>
-If <code>bools.any()</code> 1 is true, then True
-<code>bools.all()</code> True if everything is true</li>
</ul>
<h2 id="sort">sort</h2>
<ul>
<li>When <code>arr</code> is <code>np.array</code>, sort itself with <code>arr.sort()</code>. (Destructive)</li>
<li>In case of multidimensional array, specify arbitrary axis like <code>arr.sort(1)</code>.</li>
</ul>
<h2 id="aggregate-functions-unique-etc">Aggregate functions: unique, etc.</h2>
<ul>
<li><code>np.unique(arr)</code> returns the sorted result, eliminating duplicates.</li>
<li><code>np.inld(arr, [2, 3, 6])</code> is True if the list of arr contains 2,3,6, otherwise False is a list of the same length as arr. return.</li>
</ul>
<h1 id="ndarray-file-inputoutput">ndarray file input/output</h1>
<ul>
<li>Many use <code>pandas</code> to read text files and tabular data.</li>
<li>Focus on binary format here.</li>
<li>To save <code>arr</code>, save it with <code>np.save('some_array', arr)</code> without compression. The extension is automatically added with <code>.npy</code>.</li>
<li>Similarly, loading is done with <code>arr = np.load('save_array.npy')</code>.</li>
<li>Use <code>np.savez('array_archive.npz', a=arr1, b=arr2)</code> to save multiple arr without compression. <code>a</code> and <code>b</code> are the keys of the dictionary.</li>
<li>Load with <code>arch = np.load('array_archive.npz')</code>. Not <code>loadz</code>.
-Get <code>arr1</code> with <code>arch['a']</code>. Extract <code>arr2</code> with <code>arch['b']</code>.</li>
<li>Compress and save with <code>np.savez_compressed('arrays_compressed.npz', ,a=arr1, b=arr2)</code>. Reading is the same as above.</li>
</ul>
<p>#Matrix calculation</p>
<ul>
<li>To calculate the inner product. Use <code>dot</code>.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([[<span style="color:#ae81ff">1.</span>, <span style="color:#ae81ff">2.</span>, <span style="color:#ae81ff">3.</span>], [<span style="color:#ae81ff">4.</span>, <span style="color:#ae81ff">5.</span>, <span style="color:#ae81ff">6.</span>, ]])
y <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([[<span style="color:#ae81ff">6.</span>, <span style="color:#ae81ff">23.</span>], [<span style="color:#f92672">-</span><span style="color:#ae81ff">1.</span>, <span style="color:#ae81ff">7.</span>], [<span style="color:#ae81ff">8.</span>, <span style="color:#ae81ff">9.</span>]])

<span style="color:#66d9ef">print</span>(x<span style="color:#f92672">.</span>dot(y)) <span style="color:#75715e"># dot product</span>
<span style="color:#75715e"># [[ 28. 64.]</span>
<span style="color:#75715e"># [67.181.]]</span>

<span style="color:#66d9ef">print</span>(np<span style="color:#f92672">.</span>dot(x, y)) <span style="color:#75715e"># another way to write</span>
<span style="color:#75715e"># [[ 28. 64.]</span>
<span style="color:#75715e"># [67.181.]]</span>

<span style="color:#66d9ef">print</span>(x <span style="color:#960050;background-color:#1e0010">@</span> y) <span style="color:#75715e"># @ can also be used.</span>
<span style="color:#75715e"># [[ 28. 64.]</span>
<span style="color:#75715e"># [67.181.]]</span>
</code></pre></div><h1 id="pseudo-random-number-generation">Pseudo random number generation</h1>
<ul>
<li>Use <code>np.random.normal(size=(4,4))</code> to generate a random number based on the normal distribution by using normal for a 4x4 matrix.</li>
<li><code>randint</code> Returns an integer random number within the given integer range.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt

samples <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>normal(size<span style="color:#f92672">=</span>(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">4</span>))
<span style="color:#66d9ef">print</span>(samples)
<span style="color:#75715e"># [[ 1.45907882 1.78873804 -0.52480754 0.20770224]</span>
<span style="color:#75715e"># [-1.55474475 -1.67045483 -1.3589208 1.25584424]</span>
<span style="color:#75715e"># [0.90562937 -1.50742692 1.48579887 1.48081589]</span>
<span style="color:#75715e"># [1.3478] 5606 -0.20653648 0.13308665 -0.24455952]</span>
</code></pre></div><h1 id="example-random-walk">Example: Random walk</h1>
<h2 id="multiple-random-walk">Multiple random walk</h2>
<ul>
<li>Random walk, after 5000 trials, find the index that first reached 30 or -30</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt

nwalks <span style="color:#f92672">=</span> <span style="color:#ae81ff">5000</span>
nsteps <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span>

Randomly generate <span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> <span style="color:#ae81ff">1</span>
draws <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>randint(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>, size<span style="color:#f92672">=</span>(nwalks, nsteps))
<span style="color:#66d9ef">print</span>(draws)
<span style="color:#75715e"># [[1 1 1 ... 0 1 1]</span>
<span style="color:#75715e"># [1 1 0 ... 0 0 1]</span>
<span style="color:#75715e"># [0 0 1 ... 1 1 0]</span>
<span style="color:#75715e"># ...</span>
<span style="color:#75715e"># [0 0 1 ... 0 0 0]</span>
<span style="color:#75715e"># [0 0 1 ... 1 0 0]</span>
<span style="color:#75715e"># [1 0 1 ... 1 1 0]]</span>

<span style="color:#75715e">#0 and 1 split into -1 and 1</span>
steps <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>where(draws <span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
<span style="color:#66d9ef">print</span>(steps)
<span style="color:#75715e"># [[ 1 1 1 ... -1 1 1]</span>
<span style="color:#75715e"># [1 1 -1 ... -1 -1 1]</span>
<span style="color:#75715e"># [-1 -1 1 ... 1 1 -1]</span>
<span style="color:#75715e"># ...</span>
<span style="color:#75715e"># [-1 -1 1 ... -1 -1 -1]</span>
<span style="color:#75715e"># [-1 -1 1 ... 1 -1 -1]</span>
<span style="color:#75715e"># [1 -1 1 ... 1 1 -1]]</span>


<span style="color:#75715e"># Add horizontally</span>
walks <span style="color:#f92672">=</span> steps<span style="color:#f92672">.</span>cumsum(<span style="color:#ae81ff">1</span>)
<span style="color:#66d9ef">print</span>(walks)
<span style="color:#75715e"># [[ 1 2 3 ... 10 11 12]</span>
<span style="color:#75715e"># [1 2 1 ... -44 -45 -44]# [-1 -2 -1 ... -28 -27 -28]</span>
<span style="color:#75715e"># ...</span>
<span style="color:#75715e"># [-1 -2 -1 ... 6 5 4]</span>
<span style="color:#75715e"># [-1 -2 -1 ... -6 -7 -8]</span>
<span style="color:#75715e"># [1 0 1 ... 28 29 28]]</span>

<span style="color:#66d9ef">print</span>(walks<span style="color:#f92672">.</span>max())
<span style="color:#75715e">#128</span>

<span style="color:#66d9ef">print</span>(walks<span style="color:#f92672">.</span>min())
<span style="color:#75715e"># -one two Three</span>

Have you reached <span style="color:#75715e">#30? Return True/False in row units</span>
hits30 <span style="color:#f92672">=</span> (np<span style="color:#f92672">.</span>abs(walks) <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">30</span>)<span style="color:#f92672">.</span>any(<span style="color:#ae81ff">1</span>)
<span style="color:#66d9ef">print</span>(hits30)
<span style="color:#75715e"># [False False True ... True True True]</span>

Number reached <span style="color:#75715e">#30 or -30</span>
<span style="color:#66d9ef">print</span>(hits30<span style="color:#f92672">.</span>sum())
<span style="color:#75715e"># 3377</span>

Take the row that reaches <span style="color:#75715e"># 30/-30 and find the first index</span>
crossing_times <span style="color:#f92672">=</span> (np<span style="color:#f92672">.</span>abs(walks[hits30]) <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">30</span>)<span style="color:#f92672">.</span>argmax(<span style="color:#ae81ff">1</span>)
<span style="color:#66d9ef">print</span>(crossing_times)
<span style="color:#75715e"># [671 313 161 ... 307 289 89]</span>

<span style="color:#75715e">#Average</span>
<span style="color:#66d9ef">print</span>(crossing_times<span style="color:#f92672">.</span>mean())
<span style="color:#75715e">#500.09327805744744</span>

<span style="color:#75715e"># Show on graph</span>
max_row <span style="color:#f92672">=</span> walks[(walks <span style="color:#f92672">==</span> walks<span style="color:#f92672">.</span>max())<span style="color:#f92672">.</span>any(<span style="color:#ae81ff">1</span>)][<span style="color:#ae81ff">0</span>]
min_row <span style="color:#f92672">=</span> walks[(walks <span style="color:#f92672">==</span> walks<span style="color:#f92672">.</span>min())<span style="color:#f92672">.</span>any(<span style="color:#ae81ff">1</span>)][<span style="color:#ae81ff">0</span>]

plt<span style="color:#f92672">.</span>plot(max_row)
plt<span style="color:#f92672">.</span>plot(min_row)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><ul>
<li>Random walk max and min graph</li>
</ul>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/88686/a418504c-ae82-8a69-390b-61ad11c030a6.png" alt="Screenshot 2020-01-30 12.53.18.png"></p>
<p>reference</p>
<ul>
<li>Introduction to data analysis with Python 2nd edition</li>
</ul>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
