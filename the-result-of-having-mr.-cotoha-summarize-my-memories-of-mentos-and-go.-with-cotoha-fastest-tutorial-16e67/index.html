<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>The result of having Mr. COTOHA summarize My memories of Mentos and Go. With COTOHA fastest tutorial | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>The result of having Mr. COTOHA summarize My memories of Mentos and Go. With COTOHA fastest tutorial</h1>
<p>
  <small class="text-secondary">
  
  
  Feb 9, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/natural-language-processing"> natural language processing</a></code></small>


<small><code><a href="https://memotut.com/tags/colaboratory"> colaboratory</a></code></small>


<small><code><a href="https://memotut.com/tags/cotoha"> COTOHA</a></code></small>


<small><code><a href="https://memotut.com/tags/mentos"> mentos</a></code></small>

</p>
<pre><code># Memories of Mentos and Go
</code></pre>
<p>Mentos has a deep feeling.
At that time, I was participating in a Go club,
Playing a Go stone to drop the opponent&rsquo;s Go stone
He was playing &ldquo;shooting Go&rdquo;.
Heian nobles must have been entertaining,
The club president, who couldn&rsquo;t understand the naive play, went mad.
According to him, the important go stone breaks, so stop it.
Go stones cannot be fixed if they break.
Should it be eaten to destroy evidence when it breaks?
Then why not adopt &ldquo;eatable stones&rdquo; from the beginning?
Looking closely, &ldquo;Mentos&rdquo; had all the optimal conditions for a go stone.
Color, luster, shape and taste are all superior to regular Go stone.
Even if you don&rsquo;t go to a specialty store, you can restock at a convenience store.
When you get tired of the simple world of black and white,
You can change the color.
The only problem seems to be the weakness of the summer heat.
Go can capture the opponent&rsquo;s stone.
But what makes me happy just because I took it?
It just gives the game an edge.
You can eat delicious mentos.
The enthusiasm for strengthening the game of Go also appears.
I directly appealed to the president of the club.
Let&rsquo;s turn all Go stones into mentos!
Now, I can no longer see Mentos at the convenience store,
This is because my idea has raised the price of Mentos.
Oh my dear Mentos, where did you go! ?</p>
<h1 id="contents-of-this-post">Contents of this post</h1>
<ul>
<li>One day, a poem called &ldquo;<strong>Memory of Mentos and Go</strong>&rdquo; was born.
I was sad because I was told that ** I don&rsquo;t understand the meaning **.</li>
<li>~~ Great artists are often not understood by the people of the time. ~~</li>
<li><a href="https://zine.qiita.com/event/collaboration-cotoha-api/">[Qiita x COTOHA API present project]</a>, I remembered that <strong>COTOHA has a summary function</strong>.</li>
<li>By the way, at the end of <a href="https://qiita.com/youwht/items/014aa6e69657c5070593">[Now Singapore LineBot]</a>, I was thinking of touching COTOHA.</li>
<li>Well, let&rsquo;s have COTOHA read this poem and summarize it! (Great annoyance)</li>
<li>In addition, <strong>Create the fastest tutorial code that allows you to try out COTOHA&rsquo;s main functions in 5 seconds</strong></li>
<li>With COTOHA, anyone can easily do natural language processing. (Imacoco)</li>
</ul>
<p>#COTOHA read Poem</p>
<p>■ Summary result by COTOHA:</p>
<p>From here</p>
<p>Let&rsquo;s turn all Go stones into mentos!
Now, I can no longer see Mentos at the convenience store,
This is because my idea has raised the price of Mentos.</p>
<p>Up to here (new line added)</p>
<p><strong>COTOHA-san is amazing! ! (Actual feeling)</strong></p>
<h1 id="besides-summarization-function-cotoha-has-various-apis">Besides summarization function, COTOHA has various APIs</h1>
<p>**Syntactic analysis, named entity extraction, anaphora analysis, keyword extraction, **
<strong>Similarity calculation, sentence type judgment, user attribute estimation, sentiment analysis, summary</strong>
···etc.</p>
<p>Even free users can use <strong>1000 times/day</strong> for each API.</p>
<p>I want to give it a try, but it&rsquo;s a hassle to make a reference.
I wonder if there is a sample that can be moved and understood in a moment.
I wanted it, so I summarized it. (All codes are described below)</p>
<p>**After free user registration, access <a href="https://colab.research.google.com/notebooks/welcome.ipynb">Colaboratory</a>, and
** &ldquo;File&rdquo; ⇒ &ldquo;New Notebook in Python 3&rdquo; **
**⇒ Copy and execute the code of this article ⇒ You can understand all major APIs **</p>
<p>No prerequisite environment required. You can do it only with a browser,
Samples that can be used immediately and can be applied and developed.</p>
<p>Even without using Colaboratory (Google&rsquo;s free Python execution environment)
If you have Python installed,
Write the following code in one Python file,
Even if I run it with <code>python Mentos_Cotoha.py</code>,
You will get the same result immediately.</p>
<p>After registering as a user, you can try it in an instant by just copying and copying it.
Please give it a try.
<a href="https://zine.qiita.com/event/collaboration-cotoha-api/">I&rsquo;m giving a present as a project with Qiita</a> So if you touch it **Is it a chance now? **</p>
<p>Click here for free user registration.
<a href="https://api.ce-cotoha.com/contents/index.html">COTOHA API Portal</a></p>
<h1 id="cotoha-fastest-tutorial-sample-code">COTOHA fastest tutorial sample code</h1>
<p>In the Colaboratory, in the local environment,
Sample code that can be executed anywhere by just copying and copying.
(*Enter the user ID and secret key yourself)
After trying the sample,
<strong>Available as a library to make API execution easier to handle</strong>.</p>
<p>Reference: <a href="https://qiita.com/gossy5454/items/83072418fb0c5f3e269f">https://qiita.com/gossy5454/items/83072418fb0c5f3e269f</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py:Mentos_Cotoha.py" data-lang="py:Mentos_Cotoha.py"><span style="color:#f92672">import</span> os
<span style="color:#f92672">import</span> urllib.request
<span style="color:#f92672">import</span> json
<span style="color:#f92672">import</span> codecs

<span style="color:#75715e"># &#34;I tried using the COTOHA API rumored to be easy to handle natural language processing using Python&#34;</span>
<span style="color:#75715e"># https://qiita.com/gossy5454/items/83072418fb0c5f3e269f</span>
<span style="color:#75715e"># Based on the code of the above article, modified to work immediately with Colaboratory.</span>
<span style="color:#75715e"># Also, the same processing is commonized to shorten the entire code.</span>
<span style="color:#75715e"># Added sample code of multiple APIs.</span>
<span style="color:#75715e"># See below for details of this modified code.</span>
<span style="color:#75715e"># https://qiita.com/youwht/items/16e67f4ada666e679875</span>

<span style="color:#75715e"># COTOHA API operation class</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CotohaApi</span>:
  <span style="color:#75715e"># Initialization</span>
  <span style="color:#66d9ef">def</span> __init__(self, client_id, client_secret, developer_api_base_url, access_token_publish_url):
    self<span style="color:#f92672">.</span>client_id <span style="color:#f92672">=</span> client_id
    self<span style="color:#f92672">.</span>client_secret <span style="color:#f92672">=</span> client_secret
    self<span style="color:#f92672">.</span>developer_api_base_url <span style="color:#f92672">=</span> developer_api_base_url
    self<span style="color:#f92672">.</span>access_token_publish_url <span style="color:#f92672">=</span> access_token_publish_url
    self<span style="color:#f92672">.</span>getAccessToken()
  
  <span style="color:#75715e"># Get access token</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getAccessToken</span>(self):
    <span style="color:#75715e"># Specify access token acquisition URL</span>
    url <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>access_token_publish_url
    <span style="color:#75715e">#Header specification</span>
    headers<span style="color:#f92672">=</span>{
      <span style="color:#e6db74">&#34;Content-Type&#34;</span>: <span style="color:#e6db74">&#34;application/json;charset=UTF-8&#34;</span>
    }
    <span style="color:#75715e"># Request body specification</span>
    data <span style="color:#f92672">=</span> {
      <span style="color:#e6db74">&#34;grantType&#34;</span>: <span style="color:#e6db74">&#34;client_credentials&#34;</span>,
      <span style="color:#e6db74">&#34;clientId&#34;</span>: self<span style="color:#f92672">.</span>client_id,
      <span style="color:#e6db74">&#34;clientSecret&#34;</span>: self<span style="color:#f92672">.</span>client_secret
    }
    <span style="color:#75715e"># Encode request body specification in JSON</span>
    data <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>dumps(data)<span style="color:#f92672">.</span>encode()
    <span style="color:#75715e">#Request generation</span>
    req <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>Request(url, data, headers)
    <span style="color:#75715e">#Send requests and receive responses</span>
    res <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>urlopen(req)
    <span style="color:#75715e"># Get response body</span>
    res_body <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span>read()
    <span style="color:#75715e"># Decode response body from JSON</span>
    res_body <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(res_body)
    <span style="color:#75715e"># Get access token from response body</span>
    self<span style="color:#f92672">.</span>access_token <span style="color:#f92672">=</span> res_body[<span style="color:#e6db74">&#34;access_token&#34;</span>]
  
  <span style="color:#75715e">#Common processing of each API</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callCotohaApiCommon</span>(self, url, data):
    <span style="color:#75715e">#Header specification</span>
    headers<span style="color:#f92672">=</span>{
      <span style="color:#e6db74">&#34;Authorization&#34;</span>: <span style="color:#e6db74">&#34;Bearer &#34;</span><span style="color:#f92672">+</span> self<span style="color:#f92672">.</span>access_token,
      <span style="color:#e6db74">&#34;Content-Type&#34;</span>: <span style="color:#e6db74">&#34;application/json;charset=UTF-8&#34;</span>,
    }
    <span style="color:#75715e"># Encode request body specification in JSON</span>
    data <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>dumps(data)<span style="color:#f92672">.</span>encode()
    <span style="color:#75715e">#Request generation</span>
    req <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>Request(url, data, headers)
    <span style="color:#75715e">#Send requests and receive responses</span>
    Below, I added a retry process at the time of request error,
    <span style="color:#75715e"># It may be erased if there is no re-execution after leaving it for a long time.</span>
    <span style="color:#75715e"># Set retry count</span>
    CONNECTION_RETRY_COUNT <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
    <span style="color:#66d9ef">for</span> counter <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, CONNECTION_RETRY_COUNT <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
      <span style="color:#66d9ef">try</span>:
        res <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>urlopen(req)
        If you do <span style="color:#f92672">not</span> go to <span style="color:#75715e">#exception, the loop ends</span>
        <span style="color:#66d9ef">break</span>
      <span style="color:#75715e"># Processing when error occurs in request</span>
      <span style="color:#66d9ef">except</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>HTTPError <span style="color:#66d9ef">as</span> e:
        <span style="color:#75715e"># If the status code is 401 Unauthorized, get the access token again and request again</span>
        <span style="color:#66d9ef">if</span> e<span style="color:#f92672">.</span>code <span style="color:#f92672">==</span> <span style="color:#ae81ff">401</span>:
          <span style="color:#66d9ef">print</span> (<span style="color:#e6db74">&#34;[RETRY] get access token&#34;</span>)
          self<span style="color:#f92672">.</span>access_token <span style="color:#f92672">=</span> getAccessToken(self<span style="color:#f92672">.</span>client_id, self<span style="color:#f92672">.</span>client_secret)
          headers[<span style="color:#e6db74">&#34;Authorization&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Bearer &#34;</span><span style="color:#f92672">+</span> self<span style="color:#f92672">.</span>access_token
          req <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>Request(url, data, headers)
        If it <span style="color:#f92672">is</span> an error other than <span style="color:#75715e"># 401, the cause is displayed and the processing ends. Returns a blank.</span>
        <span style="color:#66d9ef">else</span>:
          <span style="color:#66d9ef">print</span> (<span style="color:#e6db74">&#34;&lt;Error&gt; &#34;</span><span style="color:#f92672">+</span> e<span style="color:#f92672">.</span>reason)
          <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>
      <span style="color:#75715e">#Because other errors are unknown, it ends.</span>
      <span style="color:#75715e"># In the case of a server error, it is good to review the URL or the argument.</span>
      <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
        <span style="color:#66d9ef">print</span>(e)
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>
    <span style="color:#75715e"># Get response body</span>
    res_body <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span>read()<span style="color:#75715e"># Decode response body from JSON</span>
    res_body <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(res_body)
    <span style="color:#75715e"># Get analysis result from response body</span>
    <span style="color:#66d9ef">return</span> res_body

  <span style="color:#75715e"># Parsing API</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callParseApi</span>(self, sentence):
    url <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>developer_api_base_url <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;nlp/v1/parse&#34;</span>
    data <span style="color:#f92672">=</span> {
        <span style="color:#e6db74">&#34;sentence&#34;</span>: sentence
    }
    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>callCotohaApiCommon(url, data)
  
  <span style="color:#75715e"># Unique expression extraction API</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callNeApi</span>(self, sentence):
    url <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>developer_api_base_url <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;nlp/v1/ne&#34;</span>
    data <span style="color:#f92672">=</span> {
        <span style="color:#e6db74">&#34;sentence&#34;</span>: sentence
    }
    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>callCotohaApiCommon(url, data)
  
  <span style="color:#75715e"># Anaphoric analysis API</span>
  <span style="color:#75715e"># document is a string / array(string) so it can be a sentence or a list of sentences</span>
  <span style="color:#75715e"># Other document parts are the same</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callCoreferenceApi</span>(self, document):
    url <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>developer_api_base_url <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;nlp/v1/coreference&#34;</span>
    data <span style="color:#f92672">=</span> {
      <span style="color:#e6db74">&#34;document&#34;</span>: document
    }
    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>callCotohaApiCommon(url, data)

  <span style="color:#75715e">#Keyword extraction API</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callKeywordApi</span>(self, document):
    url <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>developer_api_base_url <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;nlp/v1/keyword&#34;</span>
    data <span style="color:#f92672">=</span> {
      <span style="color:#e6db74">&#34;document&#34;</span>: document
    }
    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>callCotohaApiCommon(url, data)

  <span style="color:#75715e"># Similarity calculation API</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callSimilarityApi</span>(self, sentence1, sentence2):
    url <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>developer_api_base_url <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;nlp/v1/similarity&#34;</span>
    data <span style="color:#f92672">=</span> {
      <span style="color:#e6db74">&#34;s1&#34;</span>: sentence1,
      <span style="color:#e6db74">&#34;s2&#34;</span>: sentence2
    }
    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>callCotohaApiCommon(url, data)

  <span style="color:#75715e">#Sentence type judgment API</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callSentenceTypeApi</span>(self, sentence):
    url <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>developer_api_base_url <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;nlp/v1/sentence_type&#34;</span>
    data <span style="color:#f92672">=</span> {
      <span style="color:#e6db74">&#34;sentence&#34;</span>: sentence
    }
    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>callCotohaApiCommon(url, data)

  <span style="color:#75715e">#User attribute estimation API</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callUserAttributeApi</span>(self, document):
    url <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>developer_api_base_url <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;nlp/beta/user_attribute&#34;</span>
    data <span style="color:#f92672">=</span> {
      <span style="color:#e6db74">&#34;document&#34;</span>: document
    }
    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>callCotohaApiCommon(url, data)

  <span style="color:#75715e">#Sentiment analysis API</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callSentimentApi</span>(self, sentence):
    url <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>developer_api_base_url <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;nlp/v1/sentiment&#34;</span>
    data <span style="color:#f92672">=</span> {
      <span style="color:#e6db74">&#34;sentence&#34;</span>: sentence
    }
    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>callCotohaApiCommon(url, data)

  <span style="color:#75715e">#Summary API</span>
  <span style="color:#75715e"># sentence size is 5 to 5000</span>
  <span style="color:#75715e"># sent_len size is from 1 to 100</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callSummaryApi</span>(self, sentence, sent_len):
    url <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>developer_api_base_url <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;nlp/beta/summary&#34;</span>
    data <span style="color:#f92672">=</span> {
      <span style="color:#e6db74">&#34;document&#34;</span>: sentence,
      <span style="color:#e6db74">&#34;sent_len&#34;</span>: sent_len
    }
    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>callCotohaApiCommon(url, data)
  
  <span style="color:#75715e"># You can add/change APIs other than the above and options for each API in the same way.</span>

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;__main__&#39;</span>:
  <span style="color:#75715e">##### Where to write your own settings #####</span>
  <span style="color:#75715e"># It&#39;s written on the page just after registration is completed</span>
  CLIENT_ID <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Coconia Ideak&#34;</span>
  CLIENT_SECRET <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Kokoni Secret Kaku&#34;</span>
  <span style="color:#75715e">#BASE_URL does not include nlp at the end on the official page,</span>
  <span style="color:#75715e">#Because there are many people who include nlp at the end in the technical article a while ago, be careful</span>
  DEVELOPER_API_BASE_URL <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://api.ce-cotoha.com/api/dev/&#34;</span>
  ACCESS_TOKEN_PUBLISH_URL <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://api.ce-cotoha.com/v1/oauth/accesstokens&#34;</span>

  <span style="color:#75715e">##### The following usage example #####</span>
  <span style="color:#75715e"># See the reference for details on how to call each API and analysis of the response.</span>
  <span style="color:#75715e"># https://api.ce-cotoha.com/contents/reference/apireference.html</span>

  <span style="color:#75715e"># COTOHA API instance generation</span>
  cotoha_api <span style="color:#f92672">=</span> CotohaApi(CLIENT_ID, CLIENT_SECRET, DEVELOPER_API_BASE_URL, ACCESS_TOKEN_PUBLISH_URL)

  <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;■ syntax analysis&#34;</span>)
  sentence <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Out of Momomo Momomo&#34;</span>
  api_result <span style="color:#f92672">=</span> cotoha_api<span style="color:#f92672">.</span>callParseApi(sentence)
  <span style="color:#66d9ef">for</span> chunks <span style="color:#f92672">in</span> api_result[<span style="color:#e6db74">&#39;result&#39;</span>]:
    <span style="color:#66d9ef">print</span>(chunks)

  <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;■ extract unique name&#34;</span>)
  sentence <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;I ate Mentos with my mother at Tokyo Tower today&#34;</span>
  api_result <span style="color:#f92672">=</span> cotoha_api<span style="color:#f92672">.</span>callNeApi(sentence)
  <span style="color:#66d9ef">for</span> chunks <span style="color:#f92672">in</span> api_result[<span style="color:#e6db74">&#39;result&#39;</span>]:
    <span style="color:#66d9ef">print</span>(chunks)
  
  <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;■ anaphora analysis&#34;</span>)
  document <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;Taro is a friend&#34;</span>, <span style="color:#e6db74">&#34;The first candy given by his grandfather&#34;</span>, <span style="color:#e6db74">&#34;It&#39;s Mentos and I was four years old&#34;</span>]
  api_result <span style="color:#f92672">=</span> cotoha_api<span style="color:#f92672">.</span>callCoreferenceApi(document)
  <span style="color:#66d9ef">for</span> chunks <span style="color:#f92672">in</span> api_result[<span style="color:#e6db74">&#39;result&#39;</span>][<span style="color:#e6db74">&#39;coreference&#39;</span>]:
    <span style="color:#66d9ef">print</span>(chunks[<span style="color:#e6db74">&#39;referents&#39;</span>])

  <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;■keyword extraction&#34;</span>)
  document <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;Mentus Geyser&#34;</span> <span style="color:#f92672">is</span> a phenomenon <span style="color:#f92672">in</span> which carbon dioxide suddenly evaporates when bubbles of Mentos are put into a diet cola <span style="color:#f92672">in</span> a plastic bottle all at once, <span style="color:#f92672">and</span> bubbles blow up to a height of several meters at once<span style="color:#f92672">.</span>]
  api_result <span style="color:#f92672">=</span> cotoha_api<span style="color:#f92672">.</span>callKeywordApi(document)
  <span style="color:#66d9ef">for</span> chunks <span style="color:#f92672">in</span> api_result[<span style="color:#e6db74">&#39;result&#39;</span>]:
    <span style="color:#66d9ef">print</span>(chunks)

  <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;■ Similarity calculation&#34;</span>)
  sentence1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Mentos is delicious&#34;</span>
  sentence2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;I love ramen&#34;</span>
  api_result <span style="color:#f92672">=</span> cotoha_api<span style="color:#f92672">.</span>callSimilarityApi(sentence1, sentence2)
  <span style="color:#66d9ef">print</span>(api_result[<span style="color:#e6db74">&#39;result&#39;</span>][<span style="color:#e6db74">&#39;score&#39;</span>])

  <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;■ statement type determination&#34;</span>)
  sentence <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Do not answer the question with a question&#34;</span>
  api_result <span style="color:#f92672">=</span> cotoha_api<span style="color:#f92672">.</span>callSentenceTypeApi(sentence)
  <span style="color:#66d9ef">print</span>(api_result[<span style="color:#e6db74">&#39;result&#39;</span>][<span style="color:#e6db74">&#39;modality&#39;</span>])
  <span style="color:#75715e">#declarative (description)</span>
  <span style="color:#75715e">#interrogative (question)</span>
  <span style="color:#75715e">#imperative (command)</span>

  <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;■ user attribute estimation&#34;</span>)
  document <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;I can&#39;t stop quitting&#34;</span>, <span style="color:#e6db74">&#34;I can&#39;t stop hitting until you cry&#34;</span>]
  api_result <span style="color:#f92672">=</span> cotoha_api<span style="color:#f92672">.</span>callUserAttributeApi(document)
  <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;result = {}&#39;</span><span style="color:#f92672">.</span>format(api_result[<span style="color:#e6db74">&#39;result&#39;</span>]))

  <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;■ emotion analysis&#34;</span>)
  sentence <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;The taste is sweet and creamy, and I&#39;m sure that I am a special person because I get such a wonderful mentor.&#34;</span>
  api_result <span style="color:#f92672">=</span> cotoha_api<span style="color:#f92672">.</span>callSentimentApi(sentence)
  <span style="color:#75715e"># For other API results, if you want to see each result as json, do as follows.</span>
  result_formated <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>dumps(api_result, indent<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>, separators<span style="color:#f92672">=</span>(<span style="color:#e6db74">&#39;,&#39;</span>,<span style="color:#e6db74">&#39;:&#39;</span>))
  <span style="color:#66d9ef">print</span> (codecs<span style="color:#f92672">.</span>decode(result_formated,<span style="color:#e6db74">&#39;unicode-escape&#39;</span>))

  <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;■Summary&#34;</span>)
  sentence<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;&#39; Title: Mentos and Memories of Go
</span><span style="color:#e6db74">Mentos has a deep feeling.
</span><span style="color:#e6db74">At that time, I was participating in a Go club,
</span><span style="color:#e6db74">Playing a Go stone to drop the opponent&#39;s Go stone
</span><span style="color:#e6db74">He was playing &#34;shooting Go&#34;.
</span><span style="color:#e6db74">Heian nobles must have been entertaining,
</span><span style="color:#e6db74">The club president, who couldn&#39;t understand the naive play, went mad.
</span><span style="color:#e6db74">According to him, the important go stone breaks, so stop it.
</span><span style="color:#e6db74">Go stones cannot be fixed if they break.
</span><span style="color:#e6db74">Should it be eaten to destroy evidence when it breaks?
</span><span style="color:#e6db74">Then why not adopt &#34;eatable stones&#34; from the beginning?
</span><span style="color:#e6db74">Looking closely, &#34;Mentos&#34; had all the optimal conditions for a go stone.
</span><span style="color:#e6db74">Color, luster, shape and taste are all superior to regular Go stone.
</span><span style="color:#e6db74">Even if you don&#39;t go to a specialty store, you can restock at a convenience store.
</span><span style="color:#e6db74">When you get tired of the simple world of black and white,
</span><span style="color:#e6db74">You can change the color.
</span><span style="color:#e6db74">The only problem seems to be the weakness of the summer heat.
</span><span style="color:#e6db74">Go can capture the opponent&#39;s stone.
</span><span style="color:#e6db74">But what makes me happy just because I took it?
</span><span style="color:#e6db74">It just gives the game an edge.
</span><span style="color:#e6db74">You can eat delicious mentos.
</span><span style="color:#e6db74">The enthusiasm for strengthening the game of Go also appears.
</span><span style="color:#e6db74">I directly appealed to the president of the club.Let&#39;s turn all Go stones into mentos!
</span><span style="color:#e6db74">Now, I can no longer see Mentos at the convenience store,
</span><span style="color:#e6db74">This is because my idea has raised the price of Mentos.
</span><span style="color:#e6db74">Oh my dear Mentos, where did you go! ?
</span><span style="color:#e6db74">&#39;&#39;&#39;</span>
  api_result <span style="color:#f92672">=</span> cotoha_api<span style="color:#f92672">.</span>callSummaryApi(sentence, <span style="color:#ae81ff">1</span>)
  <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;result = {}&#39;</span><span style="color:#f92672">.</span>format(api_result[<span style="color:#e6db74">&#39;result&#39;</span>]))
  <span style="color:#75715e"># Mentos is a trademark or registered trademark.</span>

</code></pre></div><pre><code class="language-py:" data-lang="py:">■ Parsing
{'chunk_info': {'id': 0,'head': 1,'dep':'P','chunk_head': 0,'chunk_func': 1,'links': []},'tokens': [{'id': 0,'form':'Sumo','kana':'Sumomo','lemma':'Li','pos':'Noun','features': [],'dependency_labels' : [{'token_id': 1,'label':'case'}],'attributes': {}}, {'id': 1,'form':'also','kana':'mo', 'lemma':'mo','pos':'conjunction particle','features': [],'attributes': {}}]}
{'chunk_info': {'id': 1,'head': 3,'dep':'D','chunk_head': 0,'chunk_func': 1,'links': [{'link': 0, 'label':'other'}]},'tokens': [{'id': 2,'form':'peach','kana':'peach','lemma':'peach','pos ':'Noun','features': [],'dependency_labels': [{'token_id': 0,'label':'nmod'}, {'token_id': 3,'label':'case'}] ,'attributes': {}}, {'id': 3,'form':'also','kana':'mo','lemma':'also','pos':'continuous particle', ' features': [],'attributes': {}}]}
{'chunk_info': {'id': 2,'head': 3,'dep':'D','chunk_head': 0,'chunk_func': 1,'links': []},'tokens': [{'id': 4,'form':'peach','kana':'peach','lemma':'peach','pos':'noun','features': [],'dependency_labels ': [{'token_id': 5,'label':'case'}],'attributes': {}}, {'id': 5,'form':'no','kana':'no' ,'lemma':'no','pos':'case particles','features': ['union'],'attributes': {}}]}
{'chunk_info': {'id': 3,'head': -1,'dep':'O','chunk_head': 0,'chunk_func': 0,'links': [{'link': 1 ,'label':'other'}, {'link': 2,'label':'adjectivals'}]},'tokens': [{'id': 6,'form':'uchi','kana ':'Uchi','lemma':'Inside','pos':'Noun','features': ['Continuous'],'dependency_labels': [{'token_id': 2,'label':'nmod '}, {'token_id': 4,'label':'nmod'}],'attributes': {}}]}
■ Proper expression extraction
{'begin_pos': 2,'end_pos': 4,'form':'today','std_form':'today','class':'DAT','extended_class': ``,'source':'basic '}
{'begin_pos': 6,'end_pos': 11,'form':'Tokyo Tower','std_form':'Tokyo Tower','class':'ART','extended_class':'','source': 'basic'}
■ Anaphora analysis
[{'referent_id': 0,'sentence_id': 0,'token_id_from': 0,'token_id_to': 0,'form':'Taro'}, {'referent_id': 1,'sentence_id': 1,'token_id_from ': 0,'token_id_to': 0,'form':'he'}]
[{'referent_id': 0,'sentence_id': 1,'token_id_from': 0,'token_id_to': 2,'form':'his grandfather'}, {'referent_id': 1,'sentence_id': 2, 'token_id_from': 0,'token_id_to': 0,'form':'it'}]
■Keyword extraction
{'form':'Injection','score': 18.75872}
{'form':'Vaporized','score': 11.889}
{'form':'bubble','score': 10.9335}
{'form':'PET bottle','score': 10.38192}
{'form':'Rapid','score': 10.2795}
■ Similarity calculation
0.71831065
■Sentence type judgment
declarative
■User attribute estimation
Results = {'age': '20-29 years old','earnings':'-1M','hobby': ['MOVIE','SHOPPING'],'location':'Kanto','moving': [ 'RAILWAY'],'occupation':'company employee'}
■ Sentiment analysis
{
    &quot;result&quot;: {
        &quot;sentiment&quot;: &quot;Positive&quot;,
        &quot;score&quot;: 0.740555365045455,
        &quot;emotional_phrase&quot;: [
            {
                &quot;form&quot;: &quot;great&quot;,
                &quot;emotion&quot;: &quot;P&quot;
            },
            {
                &quot;form&quot;: &quot;sweet&quot;,
                &quot;emotion&quot;: &quot;PN&quot;
            },
            {
                &quot;form&quot;: &quot;Get&quot;,
                &quot;emotion&quot;: &quot;P&quot;
            },
            {
                &quot;form&quot;: &quot;Surely special&quot;,
                &quot;emotion&quot;: &quot;PN&quot;
            }
        ]
    },
    &quot;status&quot;: 0,
    &quot;message&quot;: &quot;OK&quot;
}
■ Summary
Result = Let's turn all Go stones into mentos! I don't see mentos at convenience stores anymore, because the price of mentos has skyrocketed with this idea.
</code></pre><h1 id="ability-to-change-aura-into-mentos">Ability to change aura into mentos</h1>
<p>While writing the article,
I may be able to materialize Mentos.</p>
<blockquote>
<p>First of all, I decided to embody Mentos, and then image training.
At first I was messing around with the actual Mentos all day long. Anyway, it&rsquo;s around the clock.
Close your eyes and check the feel, or copy hundreds or thousands of mentos,
For a long time, just look and lick, make noise and sniff,
My teacher told me to do nothing except play with Mentos.
After a while I started dreaming of Mentos every night
At that point, I was given the actual mentos.
Then you will be able to see Mentos by hallucination.
As the days go by, the illusionary mentor feels real.
You can hear the sound of weight, coldness, and scratches.
It wasn&rsquo;t a hallucination before I knew it, but the mentos that came to life naturally came out.
Other than that, it&rsquo;s probably the same as Gong. Anyway, it’s all about every day.</p>
</blockquote>
<p>~~ It&rsquo;s better than training to embody Gorine&rsquo;s gorilla ~~</p>
<p>If you say it with a person or a futakoto&hellip;</p>
<pre><code class="language-py:Embodiment" data-lang="py:Embodiment">sentence=''' First, I decided to embody Mentos, so I have to practice images.
At first I was messing around with the actual mentos all day long. Anyway, it's around the clock.
You can close your eyes and check the texture, or copy hundreds or thousands of mentos.
For a while, just look at it, lick it, make noises and sniff it,
My teacher told me to do nothing except play with Mentos.
After a while I started dreaming of Mentos every night
At that point the actual mentos were picked up.
Then you will be able to see Mentos by hallucination.
And as the days go by, the illusionary mentor feels real.
You can hear the sound of weight and coldness.
It wasn't a hallucination before I knew it, but the mentos that came to life naturally came out.
Other than that, it's probably the same as Gong. Anyway, it’s all about every day.
'''
api_result = cotoha_api.callSummaryApi(sentence, 1)
print('result = {}'.format(api_result['result']))

api_result = cotoha_api.callSummaryApi(sentence, 2)
print('result = {}'.format(api_result['result']))
</code></pre><pre><code class="language-py:" data-lang="py:">Result = It wasn't just hallucinations, but mentos that naturally embodied.
Result = At first I was messing around with the actual mentos all day long. It wasn't a hallucination before I knew it, but the mentos that came to life naturally came out.
</code></pre><h1 id="reference-link">Reference link</h1>
<p>◇Demonstration of parsing and anaphora analysis
<a href="https://api.ce-cotoha.com/demo?query=It">https://api.ce-cotoha.com/demo?query=It</a> wasn&rsquo;t just hallucinations, but mentos that naturally embodied came out.
◇API reference
<a href="https://api.ce-cotoha.com/contents/reference/apireference.html">https://api.ce-cotoha.com/contents/reference/apireference.html</a>
◇ Kotohaichiban Yumei Pheasant
<a href="https://qiita.com/Harusugi/items/f499e8707b36d0f570c4">https://qiita.com/Harusugi/items/f499e8707b36d0f570c4</a>
◇COTOHA API portal (free registration here)
<a href="https://api.ce-cotoha.com/contents/index.html">https://api.ce-cotoha.com/contents/index.html</a>
◇ Link to COTOHA community, Slack, etc.https://api.ce-cotoha.com/contents/community.html</p>
<p>#Postscript</p>
<p>&ldquo;I often feel depressed the next morning after talking too much.&rdquo;</p>
<p>Look, it looks a lot like</p>
<p>The next morning I wrote Poem.</p>
<p>I crumpled the paper and throw it,</p>
<p>It was mentos.</p>
<p>End.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
