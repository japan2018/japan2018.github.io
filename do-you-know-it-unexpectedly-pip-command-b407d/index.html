<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Do you know it unexpectedly? pip command | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Do you know it unexpectedly? pip command</h1>
<p>
  <small class="text-secondary">
  
  
  Dec 2, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/pip">pip</a></code></small>


<small><code><a href="https://memotut.com/tags/python3">Python3</a></code></small>

</p>
<pre><code>Introducing frequently used commands to complicated commands for each use case.
</code></pre>
<h1 id="case-1-dependency-care">Case 1. Dependency care</h1>
<p>The script doesn&rsquo;t work because of a package dependency issue&hellip;</p>
<p>(1) Check for dependency issues.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip check
<span style="color:#75715e"># If the package dependencies are okay,</span>
<span style="color:#75715e"># No broken requirements found.</span>
<span style="color:#75715e"># Is output.</span>
</code></pre></div><p>(2) After confirming the required version of the package, confirm the available version.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install &lt;package&gt;<span style="color:#f92672">==</span>
<span style="color:#75715e"># ERROR: Could not find a version that satisfies the requirement &lt;package&gt;== (...</span>
An error <span style="color:#75715e"># is output and you can check the available package versions.</span>
</code></pre></div><p>(3) Specify the version and install</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install &lt;package&gt;<span style="color:#f92672">==</span>&lt;version&gt;

<span style="color:#75715e">#If you want to be up to date</span>
$ pip install -U &lt;package&gt;
<span style="color:#75715e"># If you want to be up to date with a version below</span>
$ pip install -U <span style="color:#e6db74">&#34;&lt;package&gt; &lt;&lt;version&gt;&#34;</span> <span style="color:#75715e"># using the inequality &lt;.</span>
</code></pre></div><h2 id="check-installed-package-dependencies">Check installed package dependencies</h2>
<p>Use <code>show</code> to see the dependencies along with the package details.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip show &lt;package&gt;
</code></pre></div><p>The <code>pipdeptree</code> package can be used to display dependencies including version information.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install pipdeptree

<span style="color:#75715e"># Show the package and its version required by &lt;package&gt;.</span>
$ pipdeptree -p &lt;packgage&gt;
<span style="color:#75715e"># Display the packages that require &lt;package&gt; and the required version.</span>
$ pipdeptree -r -p &lt;packgage&gt;
</code></pre></div><h2 id="details-of-package-not-installed--dependency-check">Details of package not installed &amp; dependency check</h2>
<p>If you ask <a href="https://en.wikipedia.org/wiki/Python_Package_Index">PyPi</a> as follows, you can find out the details of the packages not installed.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> request
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#75715e"># import for output formatting</span>

package <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&lt;package&gt;&#39;</span>
version <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&lt;version&gt;&#39;</span>
url <span style="color:#f92672">=</span> f<span style="color:#e6db74">&#39;https://pypi.org/pypi/{package}/{version}/json&#39;</span>
<span style="color:#75715e"># If you don&#39;t specify a version</span>
<span style="color:#75715e"># url = f&#39;https://pypi.org/pypi/{package}/json&#39;</span>

json <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(url)<span style="color:#f92672">.</span>json()
pprint(json[<span style="color:#e6db74">&#39;info&#39;</span>])
</code></pre></div><p>You can check the packages required by the specified package at the following.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pprint(json[<span style="color:#e6db74">&#39;info&#39;</span>][<span style="color:#e6db74">&#39;requires_dist&#39;</span>])
</code></pre></div><h1 id="case-2-install-the-package-in-offline-environment">Case 2. Install the package in offline environment</h1>
<p>I want to do <code>pip install &lt;package&gt;</code> at the connection destination with <code>ssh</code>, but the connection destination is offline!</p>
<p>(1) First, go online and download the required package directly under <code>./src</code> (if you want to specify the version, use <code>&lt;package&gt;==&lt;version&gt;</code>).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip download -d ./src &lt;package&gt;
<span style="color:#75715e"># or</span>
$ pip download -d ./src -r requirements.txt
</code></pre></div><p>(2) Transfer <code>./src</code> with <code>scp</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ scp -r -C ./src &lt;user&gt;@&lt;host&gt;:&lt;path&gt;

<span style="color:#75715e"># If the capacity is large, send it compressed.</span>
$ tar czf src.tar.gz src
$ scp -C ./src.tar.gz &lt;user&gt;@&lt;host&gt;:&lt;path&gt;
</code></pre></div><p>(3) After connecting with <code>ssh</code>, go into the <code>src</code> directory. Installation is complete with the following command!</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install &lt;package <span style="color:#f92672">(</span>file name<span style="color:#f92672">)</span>&gt; <span style="color:#75715e"># Install one by one from the current directory.</span>
<span style="color:#75715e"># or</span>
$ pip install ./* <span style="color:#75715e"># Install all at once.</span>

If you have compressed <span style="color:#75715e"># src, decompress it in advance.</span>
$ tar xzf src.tar.gz
</code></pre></div><h2 id="about-pip-download">About <code>pip download</code></h2>
<p>Download the source package.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip download -d ./src --no-binary :all: &lt;package&gt;
</code></pre></div><p>Download the binary package by specifying the version and platform.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip download -d ./src --only-binary :all: --platform &lt;platform&gt; --python-version &lt;python_version&gt; --implementation &lt;implementation&gt; --abi &lt;abi&gt; &lt;package&gt;
</code></pre></div><p>Below is a reference page.</p>
<ul>
<li><a href="https://pip.pypa.io/en/stable/reference/pip_download/">pip download — pip 19.3.1 documentation</a></li>
<li><a href="https://github.com/pypa/pip/issues/6121">pip download &ndash;platform &ndash;python-version does not work for some packages · Issue #6121 · pypa/pip</a></li>
</ul>
<h1 id="case-3-change-the-save-destination-of-pip-install">Case 3. Change the save destination of <code>pip install</code></h1>
<p>I&rsquo;d like to try out a package, but I don&rsquo;t want to pollute global and local pips. It&rsquo;s not as good as using a virtual environment&hellip;</p>
<p>(1) Specify the directory and install the package.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install -t &lt;dir&gt; &lt;package&gt;
</code></pre></div><p>(2) By adding the following line to the script, the package directly under <code>&lt;dir&gt;</code> can be used.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> sys
sys<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>append(dirpath)

<span style="color:#75715e">#How to specify the path 1</span>
<span style="color:#f92672">import</span> os
dirpath <span style="color:#f92672">=</span> sys<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>append(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>dirname(__file__),<span style="color:#e6db74">&#39;relative path of &lt;dir&gt;&#39;</span>))
<span style="color:#75715e">#How to specify the path 2</span>
<span style="color:#f92672">from</span> pathlib <span style="color:#f92672">import</span> Path
dirpath <span style="color:#f92672">=</span> sys<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>append(str((Path(__file__)<span style="color:#f92672">.</span>parent<span style="color:#f92672">/</span><span style="color:#e6db74">&#39;relative path of &lt;dir&gt;&#39;</span>)<span style="color:#f92672">.</span>resolve()))
<span style="color:#75715e">#How to specify the path 3</span>
dirpath <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;absolute path of &lt;dir&gt;&#39;</span>
</code></pre></div><p>You can execute it by writing a relative path to <code>dirpath</code>, but when calling the written script from another script, you need to use <code>__file__</code> or specify <code>dirpath</code> with an absolute path.</p>
<p>(3) Delete the directory when the package is no longer needed.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ rm -r &lt;dir&gt;
</code></pre></div><h2 id="i-want-to-try-different-versions-of-installed-packages">I want to try different versions of installed packages</h2>
<p>If you run the script in the directory <code>&lt;dir&gt;</code> where you installed the package, the packages in <code>&lt;dir&gt;</code> will be imported first.</p>
<p>If you run the script outside of <code>&lt;dir&gt;</code> and want to use another version of a package that is already installed globally or locally, add the following line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">sys<span style="color:#f92672">.</span>path <span style="color:#f92672">=</span> sys<span style="color:#f92672">.</span>path[::<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</code></pre></div><p>Packages are read preferentially from the first path in <code>sys.path</code>. By adding a new path and reversing the list, the added path can be read with the highest priority.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
