<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Answers and impressions of 100 language processing knocks-Part 1 | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Answers and impressions of 100 language processing knocks-Part 1</h1>
<p>
  <small class="text-secondary">
  
  
  Nov 30, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/natural-language-processing"> natural language processing</a></code></small>


<small><code><a href="https://memotut.com/tags/language-processing-100-knocks"> language processing 100 knocks</a></code></small>

</p>
<pre><code>advent calendar The first day, but write something easy to write without any special feeling
</code></pre>
<h2 id="this-is">this is</h2>
<p>I have written <a href="http://www.cl.ecei.tohoku.ac.jp/nlp100/">100 knocks of language processing</a>,soIwillwriteeachanswerandimpression(currently11/30PM20:30Sothepartthatcanbewrittenisthefirstpart)</p>
<h2 id="assumptions">Assumptions</h2>
<ul>
<li>Environment
-<a href="https://github.com/sh05/training/blob/master/docker/Dockerfile">Link of Dockerfile</a>(includingunrelatedones)</li>
<li>Ability
-I have touched mecab and gensim without knowing anything</li>
<li>How to solve
-For the time being, I solved it myself, and I checked the question every 10 questions by annoying
-There is also a part to put two answers</li>
<li>Excuse
-Correction of wrong answer noticed during compilation is not in time</li>
<li>Thanks
-It is very appreciated as a self-taught person who goes through the darkness to release these teaching materials</li>
</ul>
<h2 id="reflection">Reflection</h2>
<p>I was re-reading the code myself to draw this article, so it was a pseudo code review</p>
<ul>
<li><code>&quot;</code> and <code>'</code> are mixed</li>
<li>r of row and l of line are mixed</li>
</ul>
<p>Many improvements have been found, etc.</p>
<h2 id="main-story">Main story</h2>
<h3 id="chapter-1-preparedness">Chapter 1: Preparedness</h3>
<h4 id="00-string-reverse-order">00 String reverse order</h4>
<blockquote>
<p>Get the string in which the characters of the string &ldquo;stressed&rdquo; are arranged in reverse order (from the end to the beginning).</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 00</span>
smt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;stressed&#34;</span>
ans <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(smt)):
    ans <span style="color:#f92672">+=</span> smt[<span style="color:#f92672">-</span>i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
<span style="color:#66d9ef">print</span>(ans)
</code></pre></div><p>I didn&rsquo;t know how to write ↓</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 00</span>
smt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;stressed&#34;</span>
smt[::<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</code></pre></div><p>In other words, it was <code>list[start:stop:step]</code></p>
<h4 id="01-patatokkasee">01 &ldquo;Patatokkasee&rdquo;</h4>
<blockquote>
<p>Take out the 1st, 3rd, 5th, and 7th characters of the character string &ldquo;patatokukashi&rdquo; to obtain a concatenated character string.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 1</span>
smt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;patatokkasee&#34;</span>
<span style="color:#e6db74">&#39;&#39;</span><span style="color:#f92672">.</span>join([smt[i] <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(smt)) <span style="color:#66d9ef">if</span> i <span style="color:#f92672">%</span><span style="color:#ae81ff">2</span><span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>])
</code></pre></div><p>I did not know at this point, so I will rewrite this too ↓</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 1</span>
smt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;patatokkasee&#34;</span>
smt[::<span style="color:#ae81ff">2</span>]
</code></pre></div><h4 id="02-patrol-car--taxi--pattokka-see">02 &ldquo;Patrol Car&rdquo; + &ldquo;Taxi&rdquo; = &ldquo;Pattokka See&rdquo;</h4>
<blockquote>
<p>Connect the letters &ldquo;Patrol car&rdquo; and &ldquo;Taxi&rdquo; alternately from the beginning to obtain the character string &ldquo;Patatokukashi&rdquo;.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 2</span>
smt1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;police car&#34;</span>
smt2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Taxi&#34;</span>
<span style="color:#e6db74">&#39;&#39;</span><span style="color:#f92672">.</span>join([p <span style="color:#f92672">+</span> t <span style="color:#66d9ef">for</span> p, t <span style="color:#f92672">in</span> zip(smt1, smt2)])
</code></pre></div><p>There is something rugged</p>
<h4 id="03-pi">03 Pi</h4>
<blockquote>
<p>Break down the sentence &ldquo;Now I need a drink, alcoholic of course, after the heavy lectures involving quantum mechanics.&rdquo; into words, and create a list in which the number of (alphabet) characters in each word is arranged in order of appearance from the beginning.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 3</span>
smt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Now I need a drink, alcoholic of course, after the heavy lectures involving quantum mechanics.&#34;</span>
[len(w)<span style="color:#f92672">-</span>w<span style="color:#f92672">.</span>count(<span style="color:#e6db74">&#39;,&#39;</span>)<span style="color:#f92672">-</span>w<span style="color:#f92672">.</span>count(<span style="color:#e6db74">&#39;.&#39;</span>) <span style="color:#66d9ef">for</span> w <span style="color:#f92672">in</span> smt<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;&#39;</span>)]
</code></pre></div><p>I wanted to write it well using <code>isalpha()</code>, but I could not do double loop in comprehension notation well and made this a temporary solution</p>
<h4 id="04-element-symbol">04 Element symbol</h4>
<blockquote>
<p>&ldquo;Hi He Lied Because Boron Could Not Oxidize Fluorine. New Nations Might Also Sign Peace Security Clause. Arthur King Can.&rdquo; is decomposed into words, and 1, 5, 6, 7, 8, 9, 15, 16, The 19th word is the first character, and the other words are the first two characters. An associative array (dictionary type or map type) from the extracted character string to the word position (the number of words from the beginning) Create.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## Four</span>
smt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hi He Lied Because Boron Could Not Oxidize Fluorine. New Nations Might Also Sign Peace Security Clause. Arthur King Can.&#34;</span>
dic <span style="color:#f92672">=</span> {}
target_index <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">16</span>, <span style="color:#ae81ff">19</span>]
<span style="color:#66d9ef">for</span> i, w <span style="color:#f92672">in</span> enumerate(smt<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;&#39;</span>)):
    <span style="color:#66d9ef">if</span> i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">in</span> target_index:
        dic[i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> w[<span style="color:#ae81ff">0</span>]
    <span style="color:#66d9ef">else</span>:
        dic[i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> w[:<span style="color:#ae81ff">2</span>]
dic
</code></pre></div><p>Is it okay to hit the target? Is it okay to divide by if? Or suspicious demon is too bad, but proceed as it is</p>
<h4 id="05-n-gram">05 n-gram</h4>
<blockquote>
<p>Create a function that creates an n-gram from the given sequence (string, list, etc.). Use this function to get the word bi-gram and the character bi-gram from the sentence &ldquo;I am an NLPer&rdquo;.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## Five</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_n_gram</span>(n, smt):
    words <span style="color:#f92672">=</span> smt<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;&#39;</span>)
    <span style="color:#66d9ef">return</span> [smt[i:i<span style="color:#f92672">+</span>n] <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(smt)<span style="color:#f92672">-</span>n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)], [<span style="color:#e6db74">&#39;&#39;</span><span style="color:#f92672">.</span>join(words[i:i<span style="color:#f92672">+</span>n]) <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(words) <span style="color:#f92672">-</span>n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)]

get_n_gram(<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#34;I am an NLPer&#34;</span>)
</code></pre></div><p>I thought that I was able to write well with slices ~ I think it&rsquo;s better to separate words from letters</p>
<h4 id="06-set">06 set</h4>
<blockquote>
<p>Find the sets of character bi-grams contained in &ldquo;paraparaparadise&rdquo; and &ldquo;paragraph&rdquo; as X and Y, respectively, and find the union, intersection, and difference sets of X and Y. Furthermore, check whether the bi-gram&rsquo;se&rsquo; is included in X and Y.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 6</span>
smt1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;paraparaparadise&#34;</span>
smt2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;paragraph&#34;</span>
X <span style="color:#f92672">=</span> set()
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(smt1)<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
    X<span style="color:#f92672">.</span>add(smt1[i:i<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>])
Y <span style="color:#f92672">=</span> set()
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(smt2)<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
    Y<span style="color:#f92672">.</span>add(smt2[i:i<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>])
    
<span style="color:#66d9ef">print</span>(X <span style="color:#f92672">|</span> Y)
<span style="color:#66d9ef">print</span>(X <span style="color:#f92672">&amp;</span> Y)
<span style="color:#66d9ef">print</span>(X<span style="color:#f92672">-</span>Y)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;se&#39;</span> <span style="color:#f92672">in</span> (X <span style="color:#f92672">and</span> Y))
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;se&#39;</span> <span style="color:#f92672">in</span> (X <span style="color:#f92672">or</span> Y))
</code></pre></div><p>I&rsquo;ll call it with a comprehension,
I reconfirmed that the set can eliminate duplicates, and when I want a unique one from the list, it may be a set or an ant</p>
<h4 id="07-template-generation">07 Template generation</h4>
<blockquote>
<p>Implement a function that receives the arguments x, y, z and returns the string &ldquo;y is z at x&rdquo;. Furthermore, confirm the execution result by setting x=12, y=“temperature”, z=22.4.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 7</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_template</span>(x, y, z):
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;{} when {} is {}&#34;</span><span style="color:#f92672">.</span>format(x, y, z)

get_template(<span style="color:#ae81ff">12</span>,<span style="color:#e6db74">&#39;Temperature&#39;</span>, <span style="color:#ae81ff">22.4</span>)
</code></pre></div><p>This was done because I used it normally, but I often forget how to specify the position with {0} etc.</p>
<h4 id="08-ciphertext">08 Ciphertext</h4>
<blockquote>
<p>Implement the function cipher that converts each character of the given string according to the following specifications.
If lowercase letters, replace with (219-character code)
Other characters are output as is
Use this function to encrypt/decrypt English messages.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 8</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Coder</span>:
    <span style="color:#66d9ef">def</span> __init__():
        <span style="color:#66d9ef">pass</span>
    
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">encode</span>(smt):
        code <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(smt)):
            <span style="color:#66d9ef">if</span> smt[i] <span style="color:#f92672">.</span>isalpha() <span style="color:#f92672">and</span> smt[i]<span style="color:#f92672">.</span>islower():
                code <span style="color:#f92672">+=</span> chr(<span style="color:#ae81ff">219</span><span style="color:#f92672">-</span>ord(smt[i]))
            <span style="color:#66d9ef">else</span>:
                code <span style="color:#f92672">+=</span> smt[i]
        <span style="color:#66d9ef">return</span> code
    
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">decode</span>(code):
        stm <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(code)):
            <span style="color:#66d9ef">if</span> code[i] <span style="color:#f92672">.</span>isalpha() <span style="color:#f92672">and</span> code[i]<span style="color:#f92672">.</span>islower():
                smt <span style="color:#f92672">+=</span> chr(<span style="color:#ae81ff">219</span><span style="color:#f92672">-</span>ord(code[i]))
            <span style="color:#66d9ef">else</span>:
                smt <span style="color:#f92672">+=</span> code[i]
        <span style="color:#66d9ef">return</span> smt

coder <span style="color:#f92672">=</span> Coder
smt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;I couldn&#39;t believe that&#34;</span>
code <span style="color:#f92672">=</span> coder<span style="color:#f92672">.</span>encode(smt)
desmt <span style="color:#f92672">=</span> coder<span style="color:#f92672">.</span>encode(code)
<span style="color:#66d9ef">print</span>(smt)
<span style="color:#66d9ef">print</span>(code)
<span style="color:#66d9ef">print</span>(desmt)
</code></pre></div><p>It was so bad that I misunderstood the cipher as a coder until this moment, and it was a function instead of a class.
And I will forget the character code no matter how many times I look it up, so I want to summarize it next time</p>
<h4 id="09-typoglycemia">09 Typoglycemia</h4>
<blockquote>
<p>For a word string separated by spaces, keep the first and last characters of each word, and create a program that rearranges the order of the other characters randomly. However, words with a length of 4 or less are not sorted. Give an appropriate English sentence (for example, &ldquo;I couldn&rsquo;t believe that I could actually understand what I was reading :the phenomenal power of the human mind .&quot;) and confirm the execution result.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 9</span>
<span style="color:#f92672">import</span> random
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">feel_typoglycemia</span>(smt):
    typogly <span style="color:#f92672">=</span> []
    <span style="color:#66d9ef">for</span> w <span style="color:#f92672">in</span> smt<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;&#39;</span>):
        <span style="color:#66d9ef">if</span> len(w) <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">4</span>:
            typogly<span style="color:#f92672">.</span>append(w)
        <span style="color:#66d9ef">else</span>:
            mid <span style="color:#f92672">=</span> list(w)[<span style="color:#ae81ff">1</span>:<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
            random<span style="color:#f92672">.</span>shuffle(mid)
            typogly<span style="color:#f92672">.</span>append(w[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> <span style="color:#e6db74">``</span><span style="color:#f92672">.</span>join(mid) <span style="color:#f92672">+</span> w[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
    <span style="color:#66d9ef">return</span><span style="color:#e6db74">&#39;&#39;</span><span style="color:#f92672">.</span>join(typogly)smt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;I couldn&#39;t believe that I could actually understand what I was reading :the phenomenal power of the human mind .&#34;</span>
feel_typoglycemia(smt)
</code></pre></div><p>Removed only the beginning and end of the slice, mixed, and attached
I don&rsquo;t know the origin of the function name because I don&rsquo;t remember it at the time, but I don&rsquo;t have a plan to release it, so I think I attached it because of the feelings at that time.</p>
<h3 id="chapter-2-unix-command-basics">Chapter 2: UNIX Command Basics</h3>
<p>I was convinced that the command was confirmed by the title, but the UNIX command was only for confirming the execution result of the program.</p>
<blockquote>
<p>hightemp.txt is a file in which the record of the highest temperature in Japan is stored in the tab delimited format of &ldquo;prefecture&rdquo; &ldquo;point&rdquo; &ldquo;°C&rdquo; &ldquo;day&rdquo;. Create a program that performs the following processing and execute hightemp.txt as an input file. In addition, execute the same processing with the UNIX command and check the execution result of the program.</p>
</blockquote>
<h4 id="10-line-count">10 line count</h4>
<blockquote>
<p>Count the number of lines. Use the wc command for confirmation.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#75715e">## Ten</span>
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./hightemp.txt&#39;</span>,) <span style="color:#66d9ef">as</span> f:
    <span style="color:#66d9ef">print</span>(len([r <span style="color:#66d9ef">for</span> r <span style="color:#f92672">in</span> f<span style="color:#f92672">.</span>read()<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>) <span style="color:#66d9ef">if</span> r <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> <span style="color:#e6db74">``</span>])))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e">## Ten</span>
cat hightemp.txt | wc -l
</code></pre></div><p>I think r is from row, but after this I will mix with l of line</p>
<h4 id="11-replace-tabs-with-spaces">11 Replace tabs with spaces</h4>
<blockquote>
<p>Replace each tab character with one space character. Use the sed command, tr command, or expand command for confirmation.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 11</span>
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./hightemp.txt&#39;</span>,) <span style="color:#66d9ef">as</span> f:
    <span style="color:#66d9ef">print</span>([r<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span>,<span style="color:#e6db74">&#39;&#39;</span>) <span style="color:#66d9ef">for</span> r <span style="color:#f92672">in</span> f<span style="color:#f92672">.</span>read()<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>) <span style="color:#66d9ef">if</span> r <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> <span style="color:#e6db74">``</span>]))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e">## 11</span>
cat hightemp.txt | sed <span style="color:#e6db74">&#34;s/\t/\ /g&#34;</span>
<span style="color:#75715e">## 11</span>
cat hightemp.txt | tr <span style="color:#e6db74">&#34;\t&#34;</span> <span style="color:#e6db74">&#34;\ &#34;</span>
<span style="color:#75715e">## 11</span>
expand -t <span style="color:#ae81ff">1</span> hightemp.txt
</code></pre></div><p>I found out that sed is a vim friend, so tr and expand were learning.</p>
<h4 id="12-save-the-first-column-in-col1txt-and-the-second-column-in-col2txt">12 Save the first column in col1.txt and the second column in col2.txt</h4>
<blockquote>
<p>Save the file with the first column extracted from each row as col1.txt and the second column extracted as col2.txt. Use the cut command for confirmation.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 12</span>
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./hightemp.txt&#39;</span>,) <span style="color:#66d9ef">as</span> f:
    table <span style="color:#f92672">=</span> [r <span style="color:#66d9ef">for</span> r <span style="color:#f92672">in</span> f<span style="color:#f92672">.</span>read()<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>) <span style="color:#66d9ef">if</span> r <span style="color:#f92672">is</span> <span style="color:#f92672">not</span><span style="color:#e6db74">&#39;&#39;</span>]
    
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;col1.txt&#39;</span>, mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;w&#39;</span>) <span style="color:#66d9ef">as</span> f:
    <span style="color:#66d9ef">for</span> t <span style="color:#f92672">in</span> table:
        f<span style="color:#f92672">.</span>write(t<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span>)[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;col2.txt&#39;</span>, mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;w&#39;</span>) <span style="color:#66d9ef">as</span> f:
    <span style="color:#66d9ef">for</span> t <span style="color:#f92672">in</span> table:
        f<span style="color:#f92672">.</span>write(t<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span>)[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e">## 12</span>
cat hightemp.txt | sed <span style="color:#e6db74">&#34;s/\t/\ /g&#34;</span> | cut -f <span style="color:#ae81ff">1</span> -d <span style="color:#e6db74">&#34;&#34;</span>&gt; col1.txt
cat hightemp.txt | sed <span style="color:#e6db74">&#34;s/\t/\ /g&#34;</span> | cut -f <span style="color:#ae81ff">2</span> -d <span style="color:#e6db74">&#34;&#34;</span>&gt; col2.txt
</code></pre></div><p>I didn&rsquo;t understand the image of vertical operation</p>
<h4 id="13-merge-col1txt-and-col2txt">13 Merge col1.txt and col2.txt</h4>
<p>Combine the col1.txt and col2.txt created in &gt;12 and create a text file in which the first and second columns of the original file are tab-separated. Use the paste command for confirmation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 13</span>
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;cols.txt&#39;</span>, mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;w&#39;</span>) <span style="color:#66d9ef">as</span> c:
    <span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;col1.txt&#39;</span>) <span style="color:#66d9ef">as</span> f:
        <span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;col2.txt&#39;</span>) <span style="color:#66d9ef">as</span> ff:
            r1 <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>readline()
            r2 <span style="color:#f92672">=</span> ff<span style="color:#f92672">.</span>readline()
            c<span style="color:#f92672">.</span>write(r1<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74">``</span>) <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> r2)
            <span style="color:#66d9ef">while</span> r1:
                <span style="color:#66d9ef">while</span> r2:
                    r1 <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>readline()
                    r2 <span style="color:#f92672">=</span> ff<span style="color:#f92672">.</span>readline()
                    c<span style="color:#f92672">.</span>write(r1<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74">``</span>) <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> r2)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e">## 13</span>
paste col1.txt col2.txt &gt;cols.txt
cat cols.txt
</code></pre></div><p>Feeling of bleeding from f and ff
paste was learning</p>
<h4 id="14-output-n-lines-from-the-beginning">14 Output N lines from the beginning</h4>
<blockquote>
<p>Receive the natural number N by means such as a command line argument and display only the first N lines of the input. Use the head command for confirmation.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 14</span>
n <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./hightemp.txt&#39;</span>) <span style="color:#66d9ef">as</span> f:
    lines <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read()
<span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> lines<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)[:n]:
    <span style="color:#66d9ef">print</span>(l)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">head -n <span style="color:#ae81ff">5</span> hightemp.txt
</code></pre></div><p>I am forgetting the command line argument part, so it is a clear mistake, I will add something using <code>sys.argv</code></p>
<h4 id="15-print-the-last-n-lines">15 print the last N lines</h4>
<blockquote>
<p>Receive the natural number N by means such as a command line argument and display only the last N lines of the input. Use the tail command for confirmation.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 15</span>
n <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./hightemp.txt&#39;</span>) <span style="color:#66d9ef">as</span> f:
    lines <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read()
<span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> lines<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)[<span style="color:#f92672">-</span>n:]:
    <span style="color:#66d9ef">print</span>(l)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e">## 15</span>
tail -n <span style="color:#ae81ff">5</span> hightemp.txt
</code></pre></div><p>Similarly, since I forgot the command line argument part, it is a clear wrong answer, I will add the one using <code>sys.argv</code>.</p>
<h4 id="16-split-n-files">16 split N files</h4>
<blockquote>
<p>Receive the natural number N by means such as a command line argument, and divide the input file into N lines. Realize the same processing with the split command.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 16</span>
<span style="color:#f92672">import</span> math
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./hightemp.txt&#39;</span>) <span style="color:#66d9ef">as</span> f:
    obj <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read()
lines <span style="color:#f92672">=</span> [l <span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> obj<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)]
n <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
ni <span style="color:#f92672">=</span> math<span style="color:#f92672">.</span>ceil(len(lines) <span style="color:#f92672">/</span> n)
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>, len(lines), ni):
    j <span style="color:#f92672">=</span> i <span style="color:#f92672">+</span> ni
    <span style="color:#66d9ef">print</span>(len(lines[i:j]))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e">## 16</span>
split -n <span style="color:#ae81ff">5</span> hightemp.txt
</code></pre></div><p>Similarly, since I forgot the command line argument part, it is a clear wrong answer, I will add the one using <code>sys.argv</code>.</p>
<h4 id="17-the-difference-in-the-character-string-in-the-first-column">17 The difference in the character string in the first column</h4>
<blockquote>
<p>Find the type of character string in the first column (set of different character strings). Use the sort and uniq commands for confirmation.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 17</span>
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./hightemp.txt&#39;</span>) <span style="color:#66d9ef">as</span> f:
    obj <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read()
set(row<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span>)[<span style="color:#ae81ff">0</span>] <span style="color:#66d9ef">for</span> row <span style="color:#f92672">in</span> obj<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>) <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> row <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;&#39;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e">## 17</span>
cat hightemp.txt | sed <span style="color:#e6db74">&#34;s/\t/\ /g&#34;</span> | cut -f <span style="color:#ae81ff">1</span> -d <span style="color:#e6db74">&#34;&#34;</span> | sort | uniq
</code></pre></div><p>It&rsquo;s the first time I&rsquo;ve connected with a pipe like this so I knew the pleasure of One Liner</p>
<h4 id="18-sort-each-row-in-descending-numerical-order-in-the-third-column">18 Sort each row in descending numerical order in the third column</h4>
<blockquote>
<p>Arrange each line in reverse order of the numbers in the third column (Note: rearrange the contents of each line without changing them). Use the sort command for confirmation (this problem does not have to match the result when executed with the command).</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 18</span>
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./hightemp.txt&#39;</span>) <span style="color:#66d9ef">as</span> f:
    obj <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read()
rows <span style="color:#f92672">=</span> [row <span style="color:#66d9ef">for</span> row <span style="color:#f92672">in</span> obj<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>) <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> row <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;&#39;</span>]
sorted(rows, key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> x: <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">*</span> float(x<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span>)[<span style="color:#ae81ff">2</span>]))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e">## 18</span>
cat hightemp.txt | sed <span style="color:#e6db74">&#34;s/\t/\ /g&#34;</span> | sort -r -k <span style="color:#ae81ff">3</span> -t <span style="color:#e6db74">&#34;&#34;</span>
</code></pre></div><p>I needed a cast to float</p>
<h4 id="19-obtain-the-appearance-frequency-of-the-character-string-in-the-first-column-of-each-line-and-arrange-them-in-descending-order-of-appearance-frequency">19 Obtain the appearance frequency of the character string in the first column of each line, and arrange them in descending order of appearance frequency.</h4>
<blockquote>
<p>Find the frequency of occurrence of the character string in the first column of each line, and display them in descending order. Use the cut, uniq, sort commands for confirmation.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 19</span>
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./hightemp.txt&#39;</span>) <span style="color:#66d9ef">as</span> f:
    obj <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read()
    
rows <span style="color:#f92672">=</span>[row<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span>)[<span style="color:#ae81ff">0</span>] <span style="color:#66d9ef">for</span> row <span style="color:#f92672">in</span> obj<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>) <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> row <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;&#39;</span>]
c_dic<span style="color:#f92672">=</span> {}
<span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> set(rows):
    c_dic[k] <span style="color:#f92672">=</span> rows<span style="color:#f92672">.</span>count(k)
sorted(c_dic<span style="color:#f92672">.</span>items(), key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> x: <span style="color:#f92672">-</span>x[<span style="color:#ae81ff">1</span>])
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e">## 19</span>
cat hightemp.txt | sed <span style="color:#e6db74">&#34;s/\t/\ /g&#34;</span> | cut -f <span style="color:#ae81ff">1</span> -d <span style="color:#e6db74">&#34;&#34;</span> | sort | uniq -c | sort -rn -k <span style="color:#ae81ff">3</span> -t <span style="color:#e6db74">&#34;&#34;</span>
</code></pre></div><p>It is a remorse to be r or row</p>
<h3 id="chapter-3-regular-expressions">Chapter 3: Regular expressions</h3>
<blockquote>
<p>There is a file jawiki-country.json.gz that exports Wikipedia articles in the following format.
Information of one article is stored in JSON format per line
In each row, the article name is stored in the &ldquo;title&rdquo; key and the article body is stored in the &ldquo;text&rdquo; key dictionary object, and that object is written in JSON format.
The whole file is compressed with gzip
Create a program that performs the following processing.</p>
</blockquote>
<p>There is a feeling that I passed through without using regular expressions too much</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">wget http://www.cl.ecei.tohoku.ac.jp/nlp100/data/jawiki-country.json.gz
</code></pre></div><p>I ran it on the juypter notebook, so I added a!</p>
<h4 id="20-read-json-dataread-the-json-file-of-the-wikipedia-article-and-display-the-article-text-for-uk-in-questions-21-29-do-this-for-the-article-body-extracted-here">20 Read JSON data&gt;Read the JSON file of the Wikipedia article and display the article text for &ldquo;UK&rdquo;. In questions 21-29, do this for the article body extracted here.</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 20</span>
<span style="color:#f92672">import</span> json<span style="color:#f92672">,</span> gzip
<span style="color:#66d9ef">with</span> gzip<span style="color:#f92672">.</span>open(<span style="color:#e6db74">&#39;jawiki-country.json.gz&#39;</span>,<span style="color:#e6db74">&#39;rt&#39;</span>) <span style="color:#66d9ef">as</span> f:
    obj <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(f<span style="color:#f92672">.</span>readline())
    <span style="color:#66d9ef">while</span>(obj):
        <span style="color:#66d9ef">try</span>:
            obj <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(f<span style="color:#f92672">.</span>readline())
            <span style="color:#66d9ef">if</span> obj[<span style="color:#e6db74">&#39;title&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;UK&#34;</span>:
                <span style="color:#66d9ef">break</span>
        <span style="color:#66d9ef">except</span>:
            obj <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>readline()
</code></pre></div><p>I didn&rsquo;t know gzip completely, so I learned</p>
<h4 id="21-extract-lines-containing-category-name">21 Extract lines containing category name</h4>
<blockquote>
<p>Extract the line declaring the category name in the article.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## twenty one</span>
<span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> obj[<span style="color:#e6db74">&#39;text&#39;</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>):
    <span style="color:#66d9ef">if</span><span style="color:#e6db74">&#39;Category&#39;</span> <span style="color:#f92672">in</span> l:
        <span style="color:#66d9ef">print</span>(l)
</code></pre></div><p>Might be more strict conditions</p>
<h4 id="22-category-name-extraction">22 Category name extraction</h4>
<blockquote>
<p>Extract article category names (by name, not by line).</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## twenty two</span>
<span style="color:#f92672">import</span> re
head_pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\[\[Category:&#39;</span>
tail_pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\|?\*?\]\]&#39;</span>
<span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> obj[<span style="color:#e6db74">&#39;text&#39;</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>):
    <span style="color:#66d9ef">if</span><span style="color:#e6db74">&#39;Category&#39;</span> <span style="color:#f92672">in</span> l:
        l <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>sub(head_pattern, <span style="color:#e6db74">``</span>, l)
        <span style="color:#66d9ef">print</span>(re<span style="color:#f92672">.</span>sub(tail_pattern, <span style="color:#e6db74">``</span>, l))
</code></pre></div><p>I wrote it ruggedly</p>
<h4 id="23-section-structure">23 Section structure</h4>
<blockquote>
<p>Display the section name included in the article and its level (eg 1 if &ldquo;== section name ==&rdquo;).</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## twenty three</span>
pattern <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;==&#39;</span>
<span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> obj[<span style="color:#e6db74">&#39;text&#39;</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>):
    <span style="color:#66d9ef">if</span> pattern <span style="color:#f92672">in</span> l:
        pat_by_sec <span style="color:#f92672">=</span> <span style="color:#e6db74">``</span><span style="color:#f92672">.</span>join([<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;=&#39;</span> <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(int(l<span style="color:#f92672">.</span>count(<span style="color:#e6db74">&#39;=&#39;</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span> ))])
        sec <span style="color:#f92672">=</span> len(pat_by_sec)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
        tab <span style="color:#f92672">=</span> <span style="color:#e6db74">``</span><span style="color:#f92672">.</span>join([<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span> <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(sec<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)])
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;{}{}. {}&#39;</span><span style="color:#f92672">.</span>format(tab, sec, l<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;=&#39;</span>, <span style="color:#e6db74">``</span>)))
</code></pre></div><p>I want to indent with tabs when displaying it, but it is a little detour</p>
<h4 id="24-file-reference-extraction">24 File reference extraction</h4>
<blockquote>
<p>Extract all media files referenced in the article.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## twenty four</span>
<span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> obj[<span style="color:#e6db74">&#39;text&#39;</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>):
    <span style="color:#66d9ef">if</span><span style="color:#e6db74">&#39;file&#39;</span> <span style="color:#f92672">in</span> l:
        <span style="color:#66d9ef">print</span>(l<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;:&#39;</span>)[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;|&#39;</span>)[<span style="color:#ae81ff">0</span>])
</code></pre></div><p>A more strict if statement may be good here too</p>
<h4 id="25-template-extraction">25 Template extraction</h4>
<blockquote>
<p>Extract the field name and value of the &ldquo;basic information&rdquo; template contained in the article and store it as a dictionary object.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## twenty five</span>
<span style="color:#f92672">import</span> re
pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;= &#39;</span>
basic_info <span style="color:#f92672">=</span> {}
<span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> obj[<span style="color:#e6db74">&#39;text&#39;</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>):
    <span style="color:#66d9ef">if</span> pattern <span style="color:#f92672">in</span> l:
        basic_info[l<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39; =&#39;</span>)[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;|&#39;</span>, <span style="color:#e6db74">``</span>)] <span style="color:#f92672">=</span> l<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39; =&#39;</span>)[<span style="color:#ae81ff">1</span>]
basic_info
</code></pre></div><p>It is unlikely that you will often connect methods during text processing</p>
<h4 id="26-removal-of-emphasis-markup">26 Removal of emphasis markup</h4>
<p>When processing &gt;25, remove the MediaWiki emphasis markup (weak emphasis, emphasis, strong emphasis) from the template value and convert it to text (reference: Markup Quick Reference).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 26</span>
<span style="color:#f92672">import</span> re
pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;= &#39;</span>
basic_info <span style="color:#f92672">=</span> {}
<span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> obj[<span style="color:#e6db74">&#39;text&#39;</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>):
    <span style="color:#66d9ef">if</span> pattern <span style="color:#f92672">in</span> l:
        basic_info[l<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39; =&#39;</span>)[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;|&#39;</span>, <span style="color:#e6db74">``</span>)] <span style="color:#f92672">=</span> l<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39; =&#39;</span>)[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\&#39;</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74">``</span>)
basic_info
</code></pre></div><p>I started thinking that I would like to proceed hard-coded hard without demanding versatility in text processing.</p>
<h4 id="27-removal-of-internal-links">27 Removal of internal links</h4>
<p>In addition to the processing of &gt;26, remove the MediaWiki internal link markup from the template value and convert it to text (reference: Markup quick reference table).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 27</span>
<span style="color:#f92672">import</span> re
pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;= &#39;</span>
med_link <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\[|\]&#39;</span>

basic_info <span style="color:#f92672">=</span> {}
<span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> obj[<span style="color:#e6db74">&#39;text&#39;</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>):
    <span style="color:#66d9ef">if</span> pattern <span style="color:#f92672">in</span> l:
        val <span style="color:#f92672">=</span> l<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39; =&#39;</span>)[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\&#39;</span><span style="color:#e6db74">&#39;</span>,<span style="color:#e6db74">&#39;&#39;</span>)
        val <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>sub(med_link, <span style="color:#e6db74">``</span>, val)
        basic_info[l<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39; =&#39;</span>)[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;|&#39;</span>, ))] <span style="color:#f92672">=</span> val
basic_info
</code></pre></div><p>I was making occasional revisions while watching the output</p>
<h4 id="28-mediawiki-markup-removal">28 MediaWiki markup removal</h4>
<p>In addition to processing &gt;27, remove MediaWiki markup from template values as much as possible and format basic country information.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 28</span>
<span style="color:#f92672">import</span> re
pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;= &#39;</span>
med_link <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\[|\]&#39;</span>
strong <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\{|\}&#39;</span>
tag <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;\&lt;+.*\&gt;&#39;</span>

basic_info <span style="color:#f92672">=</span> {}
<span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> obj[<span style="color:#e6db74">&#39;text&#39;</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>):
    <span style="color:#66d9ef">if</span> pattern <span style="color:#f92672">in</span> l:
        val <span style="color:#f92672">=</span> l<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39; =&#39;</span>)[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\&#39;</span><span style="color:#e6db74">&#39;</span>,<span style="color:#e6db74">&#39;&#39;</span>)
        val <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>sub(med_link, <span style="color:#e6db74">``</span>, val)
        val <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>sub(strong, <span style="color:#e6db74">``</span>, val)
        val <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>sub(tag, <span style="color:#e6db74">``</span>, val)
        basic_info[l<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39; =&#39;</span>)[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;|&#39;</span>, ))] <span style="color:#f92672">=</span> val
basic_info
</code></pre></div><p>I gave up faster because it was &ldquo;as much as possible&rdquo;</p>
<h4 id="29-get-the-url-of-the-flag-image">29 Get the URL of the flag image</h4>
<blockquote>
<p>Use the contents of the template to get the URL of the flag image. (Hint: Call imageinfo of MediaWiki API to convert file reference to URL)</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 29</span>
<span style="color:#f92672">import</span> requests
S <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>Session()
URL <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://en.wikipedia.org/w/api.php&#34;</span>
PARAMS <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;action&#34;</span>: <span style="color:#e6db74">&#34;query&#34;</span>,
    <span style="color:#e6db74">&#34;format&#34;</span>: <span style="color:#e6db74">&#34;json&#34;</span>,
    <span style="color:#e6db74">&#34;prop&#34;</span>: <span style="color:#e6db74">&#34;imageinfo&#34;</span>,
    <span style="color:#e6db74">&#34;iiprop&#34;</span>: <span style="color:#e6db74">&#34;url&#34;</span>,
    <span style="color:#e6db74">&#34;titles&#34;</span>: <span style="color:#e6db74">&#34;File:&#34;</span> <span style="color:#f92672">+</span> basic_info[<span style="color:#e6db74">&#39;flag image&#39;</span>]
}

R <span style="color:#f92672">=</span> S<span style="color:#f92672">.</span>get(url<span style="color:#f92672">=</span>URL, params<span style="color:#f92672">=</span>PARAMS)
DATA <span style="color:#f92672">=</span> R<span style="color:#f92672">.</span>json()
PAGES <span style="color:#f92672">=</span> DATA[<span style="color:#e6db74">&#34;query&#34;</span>][<span style="color:#e6db74">&#34;pages&#34;</span>]
<span style="color:#66d9ef">for</span> k, v <span style="color:#f92672">in</span> PAGES<span style="color:#f92672">.</span>items():
    <span style="color:#66d9ef">for</span> kk, vv <span style="color:#f92672">in</span> v<span style="color:#f92672">.</span>items():
        <span style="color:#66d9ef">if</span> kk <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;imageinfo&#39;</span>:
            <span style="color:#66d9ef">print</span>(vv[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;url&#39;</span>])
</code></pre></div><p>I hit api with reference to the reference code</p>
<h3 id="chapter-4-morphological-analysis">Chapter 4: Morphological analysis</h3>
<blockquote>
<p>Perform a morphological analysis of the sentence (neko.txt) of Natsume Soseki&rsquo;s novel &ldquo;I am a cat&rdquo; using MeCab, and save the result in a file called neko.txt.mecab. Use this file to implement the program corresponding to the following questions.
For problems 37, 38, 39, use matplotlib or Gnuplot.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">wget http://www.cl.ecei.tohoku.ac.jp/nlp100/data/neko.txt
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> MeCab
t <span style="color:#f92672">=</span> MeCab<span style="color:#f92672">.</span>Tagger()
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./neko.txt&#39;</span>) <span style="color:#66d9ef">as</span> f:
    text <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read()
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./neko.txt.mecab&#39;</span>, mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;w&#39;</span>) <span style="color:#66d9ef">as</span> f:
    f<span style="color:#f92672">.</span>write(t<span style="color:#f92672">.</span>parse(text))
</code></pre></div><p>Until now, the analysis result was not saved, but was analyzed in a series of processing.
This operation seems to be better, so learn</p>
<h4 id="30-read-morphological-analysis-results">30 Read morphological analysis results</h4>
<blockquote>
<p>Implement a program that reads the morphological analysis results (neko.txt.mecab). However, each morpheme is stored in a mapping type with the surface type (surface), basic form (base), part-of-speech (pos), and part-of-speech subclassification 1 (pos1) as keys, and one sentence is expressed as a list of morphemes (mapping type). Get it. For the rest of Chapter 4, use the program you created here.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 30</span>
doc <span style="color:#f92672">=</span> []
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./neko.txt.mecab&#39;</span>) <span style="color:#66d9ef">as</span> f:
    token_list <span style="color:#f92672">=</span> []
    token <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>readline()
    <span style="color:#66d9ef">while</span>(<span style="color:#e6db74">&#39;EOS&#39;</span> <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> token):
        dic <span style="color:#f92672">=</span> {}
        dic[<span style="color:#e6db74">&#39;surface&#39;</span>] <span style="color:#f92672">=</span> token<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span>)[<span style="color:#ae81ff">0</span>]
        dic[<span style="color:#e6db74">&#39;base&#39;</span>] <span style="color:#f92672">=</span> token<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span>)[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;,&#39;</span>)[<span style="color:#f92672">-</span><span style="color:#ae81ff">3</span>]
        dic[<span style="color:#e6db74">&#39;pos&#39;</span>] <span style="color:#f92672">=</span> token<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span>)[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;,&#39;</span>)[<span style="color:#ae81ff">0</span>]
        dic[<span style="color:#e6db74">&#39;pos1&#39;</span>] <span style="color:#f92672">=</span> token<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span>)[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;,&#39;</span>)[<span style="color:#ae81ff">1</span>]
        token <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>readline()
        <span style="color:#66d9ef">if</span> dic[<span style="color:#e6db74">&#39;surface&#39;</span>] <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;. &#39;</span>:
            doc<span style="color:#f92672">.</span>append(token_list)
            token_list <span style="color:#f92672">=</span> []
            <span style="color:#66d9ef">continue</span>
        token_list<span style="color:#f92672">.</span>
</code></pre></div><p>It may be better to store the return value of <code>token.split('\t')</code> once</p>
<h4 id="31-verb">31 verb</h4>
<blockquote>
<p>Extract all surface forms of the verb.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 31</span>
<span style="color:#66d9ef">for</span> s <span style="color:#f92672">in</span> doc:
    <span style="color:#66d9ef">for</span> t <span style="color:#f92672">in</span> s:<span style="color:#66d9ef">if</span> t[<span style="color:#e6db74">&#39;pos&#39;</span>] <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;verb&#39;</span>:
            <span style="color:#66d9ef">print</span>(t[<span style="color:#e6db74">&#39;surface&#39;</span>])
</code></pre></div><p>If it is now, definitely write <code>[t['surface'] for t in s if t['pos'] =='verb']</code></p>
<h4 id="32-verb-form">32 verb form</h4>
<blockquote>
<p>Extract all the original forms of the verb.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 32</span>
<span style="color:#66d9ef">for</span> s <span style="color:#f92672">in</span> doc:
    <span style="color:#66d9ef">for</span> t <span style="color:#f92672">in</span> s:
        <span style="color:#66d9ef">if</span> t[<span style="color:#e6db74">&#39;pos&#39;</span>] <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;verb&#39;</span>:
            <span style="color:#66d9ef">print</span>(t[<span style="color:#e6db74">&#39;base&#39;</span>])
</code></pre></div><p>Also <code>[t['base'] for t in s if t['pos'] =='verb']</code></p>
<h4 id="33-sahen-noun">33 Sahen noun</h4>
<blockquote>
<p>Extract all the nouns of the odd connection.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 33</span>
<span style="color:#66d9ef">for</span> s <span style="color:#f92672">in</span> doc:
    <span style="color:#66d9ef">for</span> t <span style="color:#f92672">in</span> s:
        <span style="color:#66d9ef">if</span> t[<span style="color:#e6db74">&#39;pos1&#39;</span>] <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;sa change connection&#39;</span>:
            <span style="color:#66d9ef">print</span>(t[<span style="color:#e6db74">&#39;base&#39;</span>])
</code></pre></div><p>Similarly <code>[t['base'] for t in s if t['pos1'] =='Sahen noun']</code></p>
<h4 id="34-a-of-b">34 &ldquo;A of B&rdquo;</h4>
<blockquote>
<p>Extract a noun phrase in which two nouns are connected by &ldquo;no&rdquo;.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 34</span>
<span style="color:#66d9ef">for</span> s <span style="color:#f92672">in</span> doc:
    <span style="color:#66d9ef">for</span> i, t <span style="color:#f92672">in</span> enumerate(s):
        <span style="color:#66d9ef">if</span> t[<span style="color:#e6db74">&#39;surface&#39;</span>] <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;of&#39;</span> <span style="color:#f92672">and</span> i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">!=</span> len(s):
            <span style="color:#66d9ef">if</span> s[i <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#e6db74">&#39;pos&#39;</span>] <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;noun&#39;</span> <span style="color:#f92672">and</span> s[i <span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][<span style="color:#e6db74">&#39;pos&#39;</span>] <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;noun&#39;</span>:
                <span style="color:#66d9ef">print</span>(s[i <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#e6db74">&#39;surface&#39;</span>] <span style="color:#f92672">+</span> t[<span style="color:#e6db74">&#39;base&#39;</span>] <span style="color:#f92672">+</span> s[i <span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][<span style="color:#e6db74">&#39;surface&#39;</span>])
</code></pre></div><p>As there is no sentence starting with the morpheme &ldquo;no&rdquo;, take care not to let the index pop out behind</p>
<blockquote>
<p>Assuming there is no sentence starting with the morpheme &ldquo;no&rdquo;</p>
</blockquote>
<p>Maybe not good</p>
<h4 id="35-concatenation-of-nouns">35 Concatenation of nouns</h4>
<blockquote>
<p>Extract the concatenation of nouns (nouns that appear consecutively) with the longest match.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 35</span>
<span style="color:#75715e">## 35</span>
max_list <span style="color:#f92672">=</span> []
tmp <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
max_len <span style="color:#f92672">=</span> len(tmp)
<span style="color:#66d9ef">for</span> s <span style="color:#f92672">in</span> doc:
    <span style="color:#66d9ef">for</span> i, t <span style="color:#f92672">in</span> enumerate(s):
        <span style="color:#66d9ef">if</span> t[<span style="color:#e6db74">&#39;pos&#39;</span>] <span style="color:#f92672">==</span><span style="color:#e6db74">&#39;noun&#39;</span>:
                tmp <span style="color:#f92672">+=</span> t[<span style="color:#e6db74">&#39;surface&#39;</span>]
        <span style="color:#66d9ef">else</span>:
            <span style="color:#66d9ef">if</span> len(tmp) <span style="color:#f92672">==</span> max_len:
                max_list<span style="color:#f92672">.</span>append(tmp)
            <span style="color:#66d9ef">elif</span> len(tmp) <span style="color:#f92672">&gt;</span>max_len:
                max_list <span style="color:#f92672">=</span> []
                max_list<span style="color:#f92672">.</span>append(tmp)
                max_len <span style="color:#f92672">=</span> len(tmp)
            tmp <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>
<span style="color:#66d9ef">print</span>(len(max_list[<span style="color:#ae81ff">0</span>]))
<span style="color:#66d9ef">print</span>(max_list)
</code></pre></div><p>It was 30 letters in English words</p>
<h4 id="36-word-frequency">36 Word frequency</h4>
<blockquote>
<p>Find the words that appear in the sentence and their frequencies, and arrange them in descending order of frequency of occurrence.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 36</span>
base_list <span style="color:#f92672">=</span> []
count_dic <span style="color:#f92672">=</span> {}
<span style="color:#66d9ef">for</span> s <span style="color:#f92672">in</span> doc:
    <span style="color:#66d9ef">for</span> t <span style="color:#f92672">in</span> s:
        base_list<span style="color:#f92672">.</span>append(t[<span style="color:#e6db74">&#39;base&#39;</span>])
<span style="color:#66d9ef">for</span> word <span style="color:#f92672">in</span> set(base_list):
    count_dic[word] <span style="color:#f92672">=</span> base_list<span style="color:#f92672">.</span>count(word)
sorted(count_dic<span style="color:#f92672">.</span>items(), key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> x: <span style="color:#f92672">-</span>x[<span style="color:#ae81ff">1</span>])
</code></pre></div><p>It looks like <code>base_list = [t['base'] for s in doc for t in s]</code></p>
<h4 id="37-top-10-words-by-frequency">37 Top 10 words by frequency</h4>
<blockquote>
<p>Display the 10 most frequently occurring words and their frequencies with a graph (eg bar graph).</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 37</span>
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt
<span style="color:#f92672">import</span> japanize_matplotlib
<span style="color:#f92672">%</span>matplotlib inline
n <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
labels <span style="color:#f92672">=</span> [i[<span style="color:#ae81ff">0</span>] <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> sorted(count_dic<span style="color:#f92672">.</span>items(), key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> x: <span style="color:#f92672">-</span>x[<span style="color:#ae81ff">1</span>])[:n]]
score <span style="color:#f92672">=</span> [i[<span style="color:#ae81ff">1</span>] <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> sorted(count_dic<span style="color:#f92672">.</span>items(), key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> x: <span style="color:#f92672">-</span>x[<span style="color:#ae81ff">1</span>])[:n]]

plt<span style="color:#f92672">.</span>bar(labels, score)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><p>If I was addicted to setting the font for displaying Japanese in matplotlib and I was disappointed, I found a good thing called japanize-matplotlib</p>
<h4 id="38-histogram">38 Histogram</h4>
<blockquote>
<p>Draw a histogram of the frequency of occurrence of words (a bar graph showing the number of types of words with the frequency of occurrence on the horizontal axis and the frequency of occurrence on the vertical axis).</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 38</span>
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt
<span style="color:#f92672">import</span> japanize_matplotlib
<span style="color:#f92672">%</span>matplotlib inline
all_score <span style="color:#f92672">=</span> [i[<span style="color:#ae81ff">1</span>] <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> sorted(count_dic<span style="color:#f92672">.</span>items(), key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> x: <span style="color:#f92672">-</span>x[<span style="color:#ae81ff">1</span>])]
plt<span style="color:#f92672">.</span>hist(all_score, range(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">100</span>));
</code></pre></div><p>From here, make a face familiar with sorting dictionary lists</p>
<h4 id="39-zipfs-law">39 Zipf&rsquo;s Law</h4>
<blockquote>
<p>Plot a log-log graph with the frequency of occurrence of words as the horizontal axis and the frequency of occurrence as the vertical axis.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">## 39</span>
<span style="color:#f92672">import</span> math
log_idx <span style="color:#f92672">=</span> [math<span style="color:#f92672">.</span>log(i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(count_dic<span style="color:#f92672">.</span>values()))]
log_all_score <span style="color:#f92672">=</span> [math<span style="color:#f92672">.</span>log(i[<span style="color:#ae81ff">1</span>]) <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> sorted(count_dic<span style="color:#f92672">.</span>items(), key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> x: <span style="color:#f92672">-</span>x[<span style="color:#ae81ff">1</span>])]
plt<span style="color:#f92672">.</span>scatter(log_idx, log_all_score, range(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">100</span>));
</code></pre></div><p>I didn&rsquo;t know it, so I was surprised to see the output
I used math instead of numpy</p>
<h2 id="end">end</h2>
<p>Is it okay to post a problem like this, if it is no, I will erase it immediately
If you have a community such as seminars, it seems good that you decide 10 questions each week and review them as a whole
I want to put together the last in the advent calendar~</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
