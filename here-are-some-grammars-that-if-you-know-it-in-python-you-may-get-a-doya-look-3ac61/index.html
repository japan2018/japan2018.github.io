<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Here are some grammars that if you know it in Python you may get a doya look | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Here are some grammars that if you know it in Python you may get a doya look</h1>
<p>
  <small class="text-secondary">
  
  
  Apr 22, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/python3">Python3</a></code></small>

</p>
<pre><code>I will introduce the python grammar that you may be able to do a drooling face if you know mainly new features.
</code></pre>
<h2 id="1-assignment-expression">1. Assignment expression</h2>
<p>New syntax added from python3.8. It&rsquo;s good to know something new.
An assignment expression can be written with the syntax <code>:=</code>, and conditional expressions and assignment statements can be used at the same time.</p>
<p>For example, the following common conditional expressions</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">text <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Hello New Expression!!&#39;</span>
text_length <span style="color:#f92672">=</span> len(text)
<span style="color:#66d9ef">if</span> text_length<span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">10</span>:
    <span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#34;String is too long!!({text_length} length, expected &lt;= 10)&#34;</span>)
</code></pre></div><p>It is possible to write abbreviated as follows using <code>:=</code>.
You can see that the part of <code>if (text_length := len(text)) &gt;10:</code> serves both as an assignment and a conditional expression.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">text <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Hello New Expression!!&#39;</span>
<span style="color:#66d9ef">if</span> (text_length :<span style="color:#f92672">=</span> len(text)) <span style="color:#f92672">&gt;</span><span style="color:#ae81ff">10</span>:
    <span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#34;String is too long!!({text_length} length, expected &lt;= 10)&#34;</span>)
</code></pre></div><p>refs
Assignment expression: <a href="https://www.python.org/dev/peps/pep-0572/">https://www.python.org/dev/peps/pep-0572/</a></p>
<h2 id="2-comprehensive-notation-other-than-list">2. Comprehensive notation other than list</h2>
<p>I think a common comprehension is to generate a list like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">numbers <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>]
dubble_numbers <span style="color:#f92672">=</span> [x<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> numbers]
<span style="color:#66d9ef">print</span>(dubble_numbers)
<span style="color:#75715e">#[2, 4, 6]</span>
</code></pre></div><p>It&rsquo;s rarely used, but there are comprehensions for dictionaries, sets, and generators. This is a doya face point.</p>
<ul>
<li>Dictionary comprehension</li>
</ul>
<p>If you write a key-value like <code>x:x*2</code> in <code>{}</code>, a dictionary will be created.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">numbers <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>]
dubble_number_dict <span style="color:#f92672">=</span> {x:x<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> numbers}
<span style="color:#66d9ef">print</span>(dubble_number_dict)
<span style="color:#75715e">#{1: 2, 2: 4, 3: 6}</span>
</code></pre></div><ul>
<li>Set comprehension notation</li>
</ul>
<p>If you write only value like <code>x</code> in <code>{}</code>, a set will be generated.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">numbers <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>]
dubble_number_set <span style="color:#f92672">=</span> {x <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> numbers}
<span style="color:#66d9ef">print</span>(dubble_number_set)
<span style="color:#75715e"># set([1, 2, 3])</span>
</code></pre></div><ul>
<li>Generator expression</li>
</ul>
<p>If you write it like a list comprehension in <code>()</code>, a generator will be generated instead of tuple.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">numbers <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>]
dubble_number_generator <span style="color:#f92672">=</span> (x <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> numbers)
<span style="color:#66d9ef">print</span>(dubble_number_generator)
<span style="color:#75715e"># &lt;generator object &lt;genexpr&gt; at 0x10d7779b0&gt;</span>
</code></pre></div><p>refs
Data structure: <a href="https://docs.python.org/3.9/tutorial/datastructures.html">https://docs.python.org/3.9/tutorial/datastructures.html</a></p>
<h2 id="3-type-hints">3. Type hints</h2>
<p>Since python3.5 it is possible to declare (exactly annotate) types in your code like in statically typed languages.
Although I feel that the advantages of the dynamically typed language have been abandoned, I think that many people are conservatively worried if the type is not explicitly declared when it comes to complicated development.
Precautions when using
-Assigning the same value as comment out or different type does not cause an error.
-Since it does not have a type check function as a standard function, it is used with tools.
It would be nice to be able to explain this area with a quick look.</p>
<p>The specific source code is as follows.
Maintainability is improved, but the point is that it is an extension function of comments and is not checked at runtime.
<code>text: str = 123 # Assignment int</code> also passes without error.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">greeting</span>(name: str) <span style="color:#f92672">-&gt;</span> str:
    <span style="color:#66d9ef">return</span> f<span style="color:#e6db74">&#39;Hello {name}&#39;</span>

text: str <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Python!!&#39;</span>
<span style="color:#66d9ef">print</span>(greeting(text))
<span style="color:#75715e"># Hello Python!!</span>

text: str <span style="color:#f92672">=</span> <span style="color:#ae81ff">123</span> <span style="color:#75715e"># Assignment int</span>
<span style="color:#66d9ef">print</span>(greeting(text)) <span style="color:#75715e"># No error</span>
<span style="color:#75715e"># Hello 123</span>
</code></pre></div><p>The standard does not provide a check tool, so you need to use an external tool.
Probably the most famous one is <code>mypy</code>. <a href="http://www.mypy-lang.org/">http://www.mypy-lang.org/</a></p>
<p>There are other rules such as how to declare user-defined classes with type hints, but I will omit them here.</p>
<p>refs:
Type hints: <a href="https://docs.python.org/3.9/library/typing.html">https://docs.python.org/3.9/library/typing.html</a></p>
<h2 id="4-dataclass">4. dataclass</h2>
<p>This is a data object added from python3.7.
This is a doya face function that is useful when defining an interface when developing a web system.
It&rsquo;s a good level to update to python3.7 to use this, and I like it.</p>
<ul>
<li>Declare class with <code>@dataclass</code> decorator.</li>
<li>Simplified the redundant writing using special methods such as <code>__init__</code> until now. (Correctly the decorator creates a special method)</li>
</ul>
<p>A concrete example of usage is as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">from</span> dataclasses <span style="color:#f92672">import</span> dataclass,asdict,astuple

<span style="color:#a6e22e">@dataclass</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>:
    name: str
    age: int <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">greeting</span>(self) <span style="color:#f92672">-&gt;</span> str:
        <span style="color:#66d9ef">return</span> f<span style="color:#e6db74">&#34;My name is {self.name}, {self.age} years old.&#34;</span>

tanaka <span style="color:#f92672">=</span> Person(<span style="color:#e6db74">&#39;tanaka&#39;</span>,<span style="color:#ae81ff">18</span>)
<span style="color:#66d9ef">print</span>(tanaka<span style="color:#f92672">.</span>greeting())
<span style="color:#75715e"># My name is tanaka, 18 years old.</span>

baby <span style="color:#f92672">=</span> Person(<span style="color:#e6db74">&#39;taro&#39;</span>) <span style="color:#75715e"># Use default value</span>
<span style="color:#66d9ef">print</span>(baby<span style="color:#f92672">.</span>greeting())
<span style="color:#75715e"># My name is taro, 0 years old.</span>

<span style="color:#66d9ef">print</span>(asdict(baby)) <span style="color:#75715e"># To dict object</span>
<span style="color:#75715e"># {&#39;name&#39;:&#39;taro&#39;,&#39;age&#39;: 0}</span>

<span style="color:#66d9ef">print</span>(astuple(baby)) <span style="color:#75715e"># To tuple object</span>
<span style="color:#75715e"># (&#39;taro&#39;, 0)</span>
</code></pre></div><p>There are also functions such as making it an immutable object and extending initialization processing by <code>__post_init__</code>, but I will omit it here.</p>
<p>refs:
dataclass: <a href="https://docs.python.org/3/library/dataclasses.html">https://docs.python.org/3/library/dataclasses.html</a></p>
<h2 id="5-f-string">5. f string</h2>
<p>It is a string template added from python3.6.</p>
<p>It is simpler and more advanced than the existing string methods <code>format()</code> and <code>% operator</code>.
Specifically, put <code>f&quot;&quot;</code> at the beginning of the character string and use it as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">a,b <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span>,<span style="color:#ae81ff">2000</span>
<span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#39;a is {a},b is {b}&#39;</span>)
<span style="color:#75715e"># a is 1000,b is 2000</span>

<span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#39;sum of ab is {a+b}&#39;</span>) <span style="color:#75715e"># can be calculated</span>
<span style="color:#75715e"># sum of ab is 3000</span>

<span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#39;a: {a:,}&#39;</span>) <span style="color:#75715e"># separated by comma</span>
<span style="color:#75715e"># a: 1,000</span>
</code></pre></div><p>As mentioned above, the point that you can do calculations within the character string and the point that flexible formatting is possible are the points where you can do it.</p>
<p>In addition, the function has been expanded from python3.8 for debugging variables.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">a,b <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span>,<span style="color:#ae81ff">2000</span>
<span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#39;a={a},b={b}&#39;</span>) <span style="color:#75715e"># before 3.8</span>
<span style="color:#75715e"># a=1000,b=2000</span>

<span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#39;{a=},{b=}&#39;</span>) <span style="color:#75715e"># after 3.8</span>
<span style="color:#75715e"># a=1000,b=2000</span>
</code></pre></div><p>By inserting <code>=</code> after the variable, you can see that both the value and the name of the variable are output.</p>
<p>refs:
Format: <a href="https://docs.python.org/3/tutorial/inputoutput.html">https://docs.python.org/3/tutorial/inputoutput.html</a>
Debuggable: <a href="https://docs.python.org/3/whatsnew/3.8.html#f-strings-support-for-self-documenting-expressions-and-debugging">https://docs.python.org/3/whatsnew/3.8.html#f-strings-support-for-self-documenting-expressions-and-debugging</a></p>
<h2 id="summary">Summary</h2>
<p>While working in the field, I think that it is difficult to use the past debts such as python2 and it is difficult to use, but I am excited about new functions and want to repair with a doggy face.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
