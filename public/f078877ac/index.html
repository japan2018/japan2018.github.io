<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] How to build Python and Jupyter execution environment with VS Code | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] How to build Python and Jupyter execution environment with VS Code</h1>
<p>
  <small class="text-secondary">
  
  
  Mar 30, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/jupyter">Jupyter</a></code></small>


<small><code><a href="https://memotut.com/tags/datascience">DataScience</a></code></small>


<small><code><a href="https://memotut.com/tags/anaconda">Anaconda</a></code></small>


<small><code><a href="https://memotut.com/tags/vscode">VSCode</a></code></small>

</p>
<pre><code>I have summarized how to build Python and Jupyter execution environment with VS Code. I use Anaconda.
</code></pre>
<p>Also, I think that many people who analyze data with Python use Jupyter notebook and Jupyter Lab from their browsers. VS Code is also recommended for such people.</p>
<p>Also, this article is part of the article <a href="https://qiita.com/SolKul/items/9208163c79dc4002733c">How to create a Python package using VS Code</a>.</p>
<p>We will proceed on the assumption that Anaconda has been downloaded. (Install VScode separately when installing Anaconda)</p>
<p>Also, I think that the screen display may differ depending on the version of each software. In that case, please investigate appropriately.</p>
<p>#Environment
||| Remarks|
|:&mdash;-:|:&mdash;&mdash;:|:&mdash;&mdash;:|
|OS|Windows10||
|conda|4.8.3|Anaconda Prompt <code>conda -V</code>|
|Anaconda|2020.02|Anaconda Prompt <code>conda list anaconda</code>|
|Python|3.8.2||
|VSCode|1.43.2||</p>
<p>Also, I will use Kaggle&rsquo;s Titanic data as an example, but you do not need to prepare it because you can build a Python execution environment with VS Code without data.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/140e9b92-a19f-740c-3f1c-6b8270ce2625.png" alt="00titanic_Explorer.png"></p>
<p>#Install VS Code
Please install <a href="https://azure.microsoft.com/ja-jp/products/visual-studio-code">VS Code</a>. Basically, I think it&rsquo;s okay to click [Next] without thinking anything.</p>
<p>For details on VS Code, see this article. If you have any questions or are confused, if you read this article first, you will be able to grasp the whole picture and deal with the trouble.
<a href="https://www.atmarkit.co.jp/ait/articles/1507/10/news028.html">How to use Visual Studio Code, basic &ldquo;ki&rdquo;</a></p>
<p>Launching a virtual environment with # Anaconda
Launch Anaconda Prompt,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">conda create -n favorite environment name python<span style="color:#f92672">=</span>Python version
</code></pre></div><p>Please start the virtual environment with.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/d2c7dbb9-0016-54e7-bd2d-d90307587ead.png" alt="01create_env.png"></p>
<p>This time, the environment name is <code>titanic</code>.
Then start the virtual environment.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">conda activate titanic
</code></pre></div><p>Install the required modules from here. Let&rsquo;s install <code>pandas</code> as an example.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">conda install pandas
</code></pre></div><p>Try running Python code with #VSCode
Now try running Python in VS Code. Launch VS Code by searching for VS Code in the Start Menu.</p>
<p>As a flow</p>
<ul>
<li>Install Pytho extension</li>
<li>Write a program</li>
<li>Prepare Python execution environment</li>
<li>Run the program</li>
</ul>
<p>It will be the flow. I will explain in order.</p>
<h2 id="install-pytho-extension">Install Pytho extension</h2>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/6a29adad-5ce2-8083-ddf9-2a03ef160a0b.png" alt="07InstallPythonExtension.png">
First, when VS Code opens, ① Click Extensions from the left sidebar and search for <code>python</code>. And ③ Install Pytho extension made by Microsoft.</p>
<h2 id="writing-a-program">Writing a program</h2>
<p>Open the folder and write the actual program.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/4d406226-fdde-34d5-8f24-a9c1b05d8c3b.jpeg" alt="02OpenFolder.jpg">
Select <code>File</code>&gt;<code>Open Folder</code> from the menu bar on VS Code and open the folder where you want to create the program.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/0a110aa6-1018-841e-95a5-8c381bad35cd.png" alt="05NewFile.png">
Open the folder and create a test py file.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/e8ccdeaa-d1c3-7d1c-4493-8aeb12c827f2.png" alt="06TestCode.png">
Create a suitable program. It is a program that reads and displays training data.
If there is no data</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Hello&#39;</span>)
</code></pre></div><p>You can use a suitable program such as. Let&rsquo;s run this program on python.</p>
<h2 id="prepare-python-execution-environment">Prepare Python execution environment</h2>
<h3 id="change-the-execution-environment-to-command-prompt">Change the execution environment to Command Prompt</h3>
<p>Change the execution environment (Terminal) in VS Code to Command Prompt.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/03ad10a3-6b04-b3ec-a288-09e7d36bd4f5.png" alt="08NewTerminal.png">
Then select <code>Terminal</code>&gt;<code>New Terminal</code> from the menu bar above.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/588f4341-9da6-c15c-21ec-d2759cbffe29.png" alt="09NewTerminalMoza.png"></p>
<p>Then the terminal opens at the bottom of the window.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/942b12bd-5395-bb5c-7a48-ae425fbcc101.png" alt="10SelectDefaultShell.png"></p>
<p>Next, select &ldquo;Select Default Shell&rdquo; from the pull-down menu of &ldquo;1:bash&rdquo; (display name may be different) at the upper right of this terminal.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/2735b9cb-2783-654e-76ef-564d708b44ff.png" alt="11SelectCMD.png"></p>
<p>Then, you can select the terminal type from the top like the image above, so select &ldquo;Command Proom pt&rdquo;.</p>
<p>This changes because Python cannot be executed if Terminal is bash or PowerShell. (May be only for Windows)</p>
<h3 id="set-the-python-interpreter">Set the Python interpreter.</h3>
<p>Next, set up an interpreter (execution environment) for executing Python code.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/c468b5fc-7823-4a7c-5267-ff17b54e22bd.png" alt="12PythonSelectInterpreter.png"></p>
<p>①Press <code>Ctrl</code>+<code>Shift</code>+<code>P</code>, open the VS Code command palette, and search for ②<code>python select</code>. Then select ③ <code>Python Select Interpreter</code>.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/440bf14c-927c-c171-0b78-626c59d6a678.png" alt="13Interpreters.png">
Then select the environment of &ldquo;Favorite environment name&rdquo; created earlier. In this case, it is <code>titanic:conda</code>.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/756ccaaa-8f48-7d17-6b20-d8d0b2cf1bf9.png" alt="14Setting.json.png">
Then a <code>json</code> file called <code>.vscode&gt;setting.json</code> will be created in the folder as shown above. The file contains the location of <code>python.exe</code> in the specified environment.</p>
<p><strong>Environment name of Anaconda does not appear in Python interpreter</strong></p>
<p>However, even if you perform the same operation, I think that the environment name of Anaconda may not appear in the Python interpreter. This may be caused by changing the installation location of Anaconda from the default.</p>
<p>In that case, please set the environment variable PATH etc. referring to the following articles.</p>
<p><a href="https://blog.beachside.dev/entry/2017/12/25/000000">Building Python debugging environment for Anaconda with VS Code (Visual Studio Code)</a></p>
<p>Also, VSCode may not be able to search the Python interpreter on the PC, so restart VSCode, wait a few seconds, and then try selecting <code>Python Select Interpreter</code> again.</p>
<h3 id="set-python-execution-settings">Set Python execution settings</h3>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/08923ab7-3662-c341-f1af-ed40c0126121.png" alt="15DebugRun.png"></p>
<p>① With python code (here <code>test.py</code>) open in VS Code, ② Select <code>Run</code> in the left sidebar and ③ select <code>create a launch.json file</code>.<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/73724cd7-6000-42ac-fee2-988973a71b81.png" alt="16DebugConfig.png">
Select <code>Python File</code> in <code>Debug Configuration</code>.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/3b8c21b4-ce1a-6550-c3a6-476e5adaf461.png" alt="17LaunchJson.png">
Then a <code>json</code> file called <code>.vscode&gt;launch.json</code> will be created in the folder as shown above. This file contains the Python execution settings.</p>
<h2 id="run-the-program">Run the program</h2>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/712b174e-ec07-e542-7d1c-e95751b7919b.png" alt="18SelectTestpy.png">
With the code you want to run (<code>test.py</code> here) open, you can run it by pressing the <code>F5</code> key.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/f43a5c42-110f-1acd-1264-39a61074ef6b.png" alt="19DebugError.png">
However, I think that an error will occur as shown in the above figure at the first execution.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/7fb2176f-03d0-394d-ddbc-935d7fac727c.png" alt="20StopDebug.png">
In that case, click the red square button (Stop) that appears when you execute it to stop the execution.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/8f4e0ff8-d2dc-61a0-6a81-7bb1aef838c7.png" alt="21ActivateEnv.png"></p>
<p>When you stop the execution, you can see that the environment switches to your own environment (<code>titanic</code> this time) as shown above.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/d5c2f8e2-64f2-1e22-f8f4-0a96c1af6596.png" alt="22SuccessRun.png">
If you press the <code>F5</code> key again in this state, the code can be executed as shown in the above figure and the contents of the training data are output.</p>
<p>Now that the configuration file has been created and configuration is complete, you can run Python by simply pressing the <code>F5</code> key in VS Code.</p>
<h1 id="leverage-debugging">Leverage debugging</h1>
<p>Python execution of VSCode has various functions.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/b8f34803-14d2-0d32-5cd8-3737f103f4e6.png" alt="23BreakPoint.png">
Rewrite <code>test.py</code> to display the shape of the training data as shown above. Then press the <code>F9</code> key on the 6th line which says <code>print(train_shape)</code>. Then you will see a red dot at the left end of this line. This is called a <strong>breakpoint</strong>. And if you press the <code>F5</code> key in this state to execute,</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/173c04b3-99f4-6949-169a-6bfdcfa2aae9.png" alt="24Debug.png">
As shown in the figure above, execution is paused at the 6th line, and the variable declared at that time (<code>train_shape</code> here) is displayed in the left sidebar. By using breakpoints in this way, I think that program bug elimination (=<strong>debugging</strong>) will progress.</p>
<p>There are various other functions as well, so please read the articles below and check each one.</p>
<p><a href="https://www.atmarkit.co.jp/ait/articles/1806/05/news023.html">Easily debug Python code with VS Code! ! (1/4)</a></p>
<p>#Run Jupyter Notebook
However, when analyzing data, I often use Jupyter Notebook, which makes it easy to visualize the data. You can even run Jupyter with VS Code!</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/1bd6f16b-84ca-9035-629c-4e5ad8e88cd2.png" alt="30InstalJupyter.png"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">conda install jupyter
</code></pre></div><p>First, install Jupyter in your environment (this time <code>titanic</code>) with Anaconda Prompt.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/8825f216-e9ac-bb9f-30d8-9c9c2e4d9942.png" alt="31SelectInterpreterJupyter.png"></p>
<p>Then, in VS Code, press ①<code>Ctrl</code>+<code>Shift</code>+<code>P</code> to open the VS Code command palette and enter ②<code>python select interpreter</code>. Then select ③<code>python select interpreter to start jupyter server</code></p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/440bf14c-927c-c171-0b78-626c59d6a678.png" alt="13Interpreters.png">
Then select the environment of &ldquo;favorite environment name&rdquo; (<code>titanic:conda</code> in this case) as before.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/b993d40f-77e0-b2ce-670e-9ebc45924872.png" alt="32CreateIpynb.png">
Then create an <code>ipynb</code> file to run Jupyter.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/276baba2-8a0d-56bb-6fb9-d1ddb08f4f55.png" alt="33JupyterUpperRight.png">
When you open this <code>ipynb</code> file, make sure that the environment name in the upper right is the specified environment. If the environment name is different, click here and specify the environment again.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/466677/9e9a612f-bd84-1621-0eb2-ebaf9f3b7215.png" alt="34RunJupyter.png">
You can now run Jupyter.</p>
<p>However, Jupiter of VS Code is unstable and often does not work. In that case, just use Jupyter from your browser as usual.</p>
<h1 id="at-the-end">At the end</h1>
<p>So far, I have explained it for a long time, but honestly, I think that there is little merit to use VS Code for data analysis if it is just this.</p>
<p>In fact, you can do the same with Jupyter Notebook and variable inspector of nbextensions.</p>
<p>When combined with the Python packaging described in <a href="https://qiita.com/SolKul/items/9208163c79dc4002733c">How to create a Python package using VS Code</a>, various advantages can be seen. Thank you for reading this article.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
