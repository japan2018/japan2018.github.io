<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Will COTOHA exceed humans? Challenge the Japanese test! | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Will COTOHA exceed humans? Challenge the Japanese test!</h1>
<p>
  <small class="text-secondary">
  
  
  Mar 13, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/natural-language-processing"> natural language processing</a></code></small>


<small><code><a href="https://memotut.com/tags/machine-learning"> machine learning</a></code></small>


<small><code><a href="https://memotut.com/tags/cotoha"> COTOHA</a></code></small>

</p>
<pre><code>What is # COTOHA API
</code></pre>
<p>The following are the main things you can do with APIs that process natural language and voice provided by NTT Communications.</p>
<ul>
<li>Parsing</li>
<li>Named entity extraction</li>
<li>Proper noun (company name) correction</li>
<li>Anaphora analysis</li>
<li>Keyword extraction</li>
<li>Similarity judgment</li>
<li>Sentence type judgment</li>
<li>User attribute estimation</li>
<li>Stagnation removal</li>
<li>Voice recognition error detection</li>
<li>Sentiment analysis</li>
<li>voice recognition</li>
<li>Speech synthesis</li>
<li>wrap up</li>
</ul>
<p>For details, see <a href="https://api.ce-cotoha.com/contents/index.html">here</a>
This time, I tried the Japanese test using the similarity judgment.</p>
<p>#What is Japanese language test?
This is a test run by the Japanese Language Proficiency Committee to measure your comprehensive Japanese ability.
There are 7 items of kanji, notation, honorifics, meaning of words, vocabulary, grammar, general
This time, I will try the synonym problem of vocabulary from the example published on <a href="https://www.nihongokentei.jp/check/">here</a>.</p>
<h1 id="challenge-the-japanese-test">Challenge the Japanese test</h1>
<p>The code used is as follows.
After inputting the number of choices and questions, each score and final answer are output.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:kentei.py" data-lang="python:kentei.py"><span style="color:#75715e"># -*- coding: utf-8 -*-</span>
<span style="color:#f92672">import</span> os
<span style="color:#f92672">import</span> json
<span style="color:#f92672">import</span> requests
<span style="color:#f92672">import</span> pickle

CLIENT_ID <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;XXX&#39;</span>
CLIENT_SECRET <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;XXX&#39;</span>
API_BASE_URL <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;https://api.ce-cotoha.com/api/dev/nlp/&#39;</span>
ACCESS_TOKEN_PUBLISH_URL <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;https://api.ce-cotoha.com/v1/oauth/accesstokens&#39;</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_access_token</span>():
    headers <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;Content-Type&#39;</span>:<span style="color:#e6db74">&#39;application/json&#39;</span>,
               <span style="color:#e6db74">&#39;charset&#39;</span>:<span style="color:#e6db74">&#39;UTF-8&#39;</span>,}
    data <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;grantType&#39;</span>:<span style="color:#e6db74">&#39;client_credentials&#39;</span>,
            <span style="color:#e6db74">&#39;clientId&#39;</span>:CLIENT_ID,
            <span style="color:#e6db74">&#39;clientSecret&#39;</span>:CLIENT_SECRET}
    data <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>dumps(data)
    response <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>post(ACCESS_TOKEN_PUBLISH_URL, headers<span style="color:#f92672">=</span>headers, data<span style="color:#f92672">=</span>data)
    response <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(response<span style="color:#f92672">.</span>text)
    <span style="color:#66d9ef">return</span> response[<span style="color:#e6db74">&#39;access_token&#39;</span>]

<span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>isfile(<span style="color:#e6db74">&#39;./ACCESS_TOKEN.pickle&#39;</span>):
    ACCESS_TOKEN <span style="color:#f92672">=</span> get_access_token()
    <span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;ACCESS_TOKEN.pickle&#39;</span>, mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;wb&#39;</span>) <span style="color:#66d9ef">as</span> f:
        pickle<span style="color:#f92672">.</span>dump(ACCESS_TOKEN, f)
<span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;ACCESS_TOKEN.pickle&#39;</span>, mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;rb&#39;</span>) <span style="color:#66d9ef">as</span> f:
    ACCESS_TOKEN <span style="color:#f92672">=</span> pickle<span style="color:#f92672">.</span>load(f)

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">similarity</span>(s1,s2):
    <span style="color:#66d9ef">global</span> ACCESS_TOKEN
    headers <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;Content-Type&#39;</span>:<span style="color:#e6db74">&#39;application/json&#39;</span>,
               <span style="color:#e6db74">&#39;charset&#39;</span>:<span style="color:#e6db74">&#39;UTF-8&#39;</span>,
               <span style="color:#e6db74">&#39;Authorization&#39;</span>:<span style="color:#e6db74">&#39;Bearer&#39;</span> <span style="color:#f92672">+</span>ACCESS_TOKEN}
    data <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;s1&#39;</span>:s1,
            <span style="color:#e6db74">&#39;s2&#39;</span>:s2}
    data<span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>dumps(data)
    response <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>post(API_BASE_URL<span style="color:#f92672">+</span><span style="color:#e6db74">&#39;v1/similarity&#39;</span>, headers<span style="color:#f92672">=</span>headers, data<span style="color:#f92672">=</span>data)
    response <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(response<span style="color:#f92672">.</span>text)
    <span style="color:#66d9ef">if</span> response[<span style="color:#e6db74">&#39;status&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">99998</span>:
        ACCESS_TOKEN <span style="color:#f92672">=</span> get_access_token()
        <span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;ACCESS_TOKEN.pickle&#39;</span>, mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;wb&#39;</span>) <span style="color:#66d9ef">as</span> f:
            pickle<span style="color:#f92672">.</span>dump(ACCESS_TOKEN, f)
        <span style="color:#66d9ef">return</span> similarity(a,b)
    <span style="color:#66d9ef">return</span> response[<span style="color:#e6db74">&#39;result&#39;</span>][<span style="color:#e6db74">&#39;score&#39;</span>]


<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:

    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Please enter the word in question&#39;</span>)
    question_word<span style="color:#f92672">=</span> str(input())
    best_score <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Please enter your choice&#39;</span>)
    words <span style="color:#f92672">=</span> list(map(str, input()<span style="color:#f92672">.</span>split()))
    score <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> len(words)
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(words)):
        score[i] <span style="color:#f92672">=</span> similarity(question_word, words[i])
        <span style="color:#66d9ef">if</span> best_score <span style="color:#f92672">&lt;</span>score[i]:
            best_score <span style="color:#f92672">=</span> score[i]
            ans <span style="color:#f92672">=</span> words[i]

    <span style="color:#66d9ef">print</span>(<span style="color:#f92672">*</span>score)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Answer:&#39;</span>, ans)
</code></pre></div><h2 id="first-try-the-6th-level">First try the 6th level</h2>
<p>The Japanese proficiency test starts from level 7, but there was no vocabulary problem in level 7, so I will start from level 6.</p>
<pre><code>$python3 kentei.py
Please enter the word in question
Daytime
Please enter a choice
Afternoon noon daytime
0.9147314 0.5557229 0.96075547
Answer: daytime
</code></pre><p>COTOHA answered &ldquo;Japan and China&rdquo; and was correct. “Afternoon” has a relatively high score, but “Daytime” has a very high similarity of 0.96.</p>
<h2 id="challenge-to-level-5">Challenge to Level 5</h2>
<pre><code>$python3 kentei.py
Please enter the word in question
Youth
Please enter a choice
Adult youth student
0.3319944 0.9027622 0.87224585
Answer: Youth
</code></pre><p>Answer &ldquo;Youth&rdquo; and it is correct!</p>
<h2 id="challenge-the-4th-level">Challenge the 4th level</h2>
<p>There were 3 synonym questions published in 4th grade. Since it is a big deal, I will try to solve all.</p>
<pre><code>$python3 kentei.py
Please enter the word in question
Meekness
Please enter a choice
Warmth and warmth
0.9725942 0.13772435 0.41027611
Answer: warm

$python3 kentei.py
Please enter the word in question
Homeland
Please enter a choice
Country of origin, homeland
0.39822352 0.55082643 0.95943063
Answer: home country

$python3 kentei.py
Please enter the word in question
Crumble
Please enter a choice
Noisy details Hirataku
0.05732418 0.059113827 0.133314
Answer: Hirata
</code></pre><p>The model answers were &ldquo;gentleness&rdquo;, &ldquo;homeland&rdquo;, and &ldquo;details&rdquo; in that order.
This is COTOHA&rsquo;s first incorrect answer in the third question of level 4. (But I don&rsquo;t use &ldquo;Musubi&rdquo; rarely.)
2/3 Correct answer to challenge 3rd grade</p>
<h2 id="challenge-3rd-level">Challenge 3rd level</h2>
<pre><code>$python3 kentei.py
Please enter the word in question
Arrogant
Please enter a choice
Grandeur great grandeur
0.2001897 0.6117739 0.99001247
Answer: arrogant
</code></pre><p>Answering &ldquo;honory&rdquo; with an overwhelming score, it is a correct answer.
I think that arrogance is also difficult, but COTOHA is amazing&hellip;</p>
<h2 id="challenge-the-second-grade">Challenge the second grade</h2>
<pre><code>$python3 kentei.py
Please enter the word in question
familiarity
Please enter a choice
Affiliation Affection Affection
0.05732418 0.05732418 0.05732418 0.05732418
Answer: Serious
</code></pre><p>I don&rsquo;t even know how to read the word that is the problem, but unfortunately it&rsquo;s an incorrect answer because of &ldquo;serious&rdquo;!
I think&hellip; <strong>All scores are the same</strong>.
I do not anticipate that this will happen, and if the code I posted earlier had a score higher than the previous options, I was updating the answer, so it is the same score as this time. The very first one has been output.</p>
<pre><code class="language-Partial" data-lang="Partial">score[i] = similarity(question_word, words[i])
if best_score &lt;score[i]:
    best_score = score[i]
</code></pre><p>COTOHA is also in a situation where there is no choice but to roll a pencil due to the difficulty.</p>
<h2 id="finally-challenge-to-the-first-grade">Finally challenge to the first grade</h2>
<p>I&rsquo;ve come this far</p>
<pre><code>python3 kentei.py
Please enter the word in question
There is no margin
Please enter a choice
No error, no shortage, no stress, no complaints
0.99806935 0.99449587 0.9970721 0.9951513
Answer: no error
</code></pre><p>I don&rsquo;t even have words anymore, but unfortunately the correct answer is &ldquo;There is no shortage&rdquo; and it is incorrect!
Level 1 is quite difficult&hellip;</p>
<p>#Summary
This time, I challenged the Japanese language test using COTOHA API!
Since I have only solved a few questions in the example, it is 〇! I can&rsquo;t say that, but I think that the similarity of general words was quite good.
We pray for the further growth of COTOHA API so that we can clear the 1st grade problem in the future!</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
