<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] What is mahjong in the Python library? ? | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] What is mahjong in the Python library? ?</h1>
<p>
  <small class="text-secondary">
  
  
  Jan 19, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/library"> library</a></code></small>


<small><code><a href="https://memotut.com/tags/mahjong"> mahjong</a></code></small>

</p>
<pre><code># &quot;Mahjong&quot;
</code></pre>
<p>Did you know that Python has a library called &ldquo;<strong>mahjong</strong>&rdquo;?</p>
<p>↓ Python library &ldquo;<strong>mahjong</strong>&rdquo;
<a href="https://pypi.org/project/mahjong/">https://pypi.org/project/mahjong/</a></p>
<p>As the name implies, this library is a <strong>Mahjong</strong> library!
(English translation of mahjong is &ldquo;mahjong&rdquo;)</p>
<p>This time, I tried to put together the contents of the above URL and actually use it!</p>
<p>#Library details
In a word, what mahjong can do</p>
<p>&ldquo;<strong>Mahjong hands calculation</strong>&rdquo;
In other words, you can do mahjong hand calculation.</p>
<p>Let&rsquo;s read the Project description part in the URL article!</p>
<blockquote>
<p>Python2.7 and 3.5+ are supported.
We support the Japanese version of mahjong only (riichi mahjong).</p>
</blockquote>
<p>If you are using the latest version of Python, there should be no problem.
And it is written that it only supports reach mahjong in Japan.</p>
<p>Chinese mahjong has more roles than Japanese reach mahjong,
It&rsquo;s complicated because Friten is okay&hellip;</p>
<p>##Riichi mahjong hands calculation</p>
<blockquote>
<p>This library can calculate hand cost (han, fu with details, yaku, and scores) for riichi mahjong(Japanese version).</p>
</blockquote>
<p>With this library, you can calculate the reach mahjong&rsquo;s &ldquo;** number **&rdquo;, &ldquo;** number of marks (including details) **&rdquo;, &ldquo;** role **&rdquo;, &ldquo;** score **&rdquo; That&rsquo;s right!</p>
<p>Great&hellip; It would be horribly hard to implement normally&hellip;</p>
<p>Furthermore, it seems that it also supports the following rule changes as an option.
(Simplified the contents of the table described.)</p>
<ol>
<li>Eating tongue (with or without)</li>
<li>Red Dora (Yes or No)</li>
<li>Double Yakuman (with or without)</li>
<li>Counting Yakuman (13 or more and 3 or more times triple or 13 or more and 13 or more, 26 or more and double)</li>
<li>Rounded up manganese (with or without)</li>
<li>Pinfu (20 tranches or 30 tranches)</li>
<li>Pinfutsumo (with or without the +2 mark of Tsumo)</li>
<li>Ren Ho (5 tunes or usefulness)</li>
<li>Daisharin, Daichikurin, Daisuurin (with or without)</li>
</ol>
<p>I am surprised that it supports quite a few options.</p>
<p>Counting Yakuman and Pinfu are complicated,
If you don&rsquo;t touch it, you can follow the basic rules.</p>
<blockquote>
<p>The code was validated on tenhou.net phoenix replays in total on 11,120,125 hands.
So, we can say that our hand calculator works the same way that tenhou.net hand calculation.</p>
</blockquote>
<p>And this library has <strong>11,120,125</strong> pieces of Agari from the famous Mahjong game &ldquo;<em>Tempo</em>*&rdquo;.
It seems you have confirmed!</p>
<p>You can use a library that can realize the same calculation as Tenho for free&hellip;</p>
<p>I tried using #mahjong!</p>
<p>Let&rsquo;s try various things!</p>
<p>First, prepare!
If Python is the latest, there is no problem!
Like any other library</p>
<p><code>pip install mahjong</code></p>
<p>And you&rsquo;re ready to go!</p>
<p>Let&rsquo;s try to calculate it now!</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#Calculation</span>
<span style="color:#f92672">from</span> mahjong.hand_calculating.hand <span style="color:#f92672">import</span> HandCalculator
<span style="color:#75715e"># Mahjong tiles</span>
<span style="color:#f92672">from</span> mahjong.tile <span style="color:#f92672">import</span> TilesConverter
<span style="color:#75715e">#Role, option rule</span>
<span style="color:#f92672">from</span> mahjong.hand_calculating.hand_config <span style="color:#f92672">import</span> HandConfig, OptionalRules
<span style="color:#75715e">#Squeal</span>
<span style="color:#f92672">from</span> mahjong.meld <span style="color:#f92672">import</span> Meld
<span style="color:#75715e"># Wind (place &amp; self)</span>
<span style="color:#f92672">from</span> mahjong.constants <span style="color:#f92672">import</span> EAST, SOUTH, WEST, NORTH

Create an instance of <span style="color:#75715e">#HandCalculator (calculation class)</span>
calculator <span style="color:#f92672">=</span> HandCalculator()

<span style="color:#75715e">#For result output</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">print_hand_result</span>(hand_result):
     <span style="color:#75715e">#Number of transliterations</span>
     <span style="color:#66d9ef">print</span>(hand_result<span style="color:#f92672">.</span>han, hand_result<span style="color:#f92672">.</span>fu)
     <span style="color:#75715e">#Points (For Tsumoigari [Left: Parental Run, Right: Child Goal], For Ronagali [Left: Gunner Goal, Right: 0])</span>
     <span style="color:#66d9ef">print</span>(hand_result<span style="color:#f92672">.</span>cost[<span style="color:#e6db74">&#39;main&#39;</span>], result<span style="color:#f92672">.</span>cost[<span style="color:#e6db74">&#39;additional&#39;</span>])
     <span style="color:#75715e">#Role</span>
     <span style="color:#66d9ef">print</span>(hand_result<span style="color:#f92672">.</span>yaku)
     <span style="color:#75715e">#Details of number of marks</span>
     <span style="color:#66d9ef">for</span> fu_item <span style="color:#f92672">in</span> hand_result<span style="color:#f92672">.</span>fu_details:
          <span style="color:#66d9ef">print</span>(fu_item)
     <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;&#39;</span>)

</code></pre></div><p>After that, information such as Agari shape
<code>caluculator.estimate_hand_value()</code>
You can calculate it by giving it as an argument to!</p>
<p>The argument of <code>caluculator.estimate_hand_value()</code> is
・Tiles (<strong>Mahjong tiles Agari shape</strong>)
・Win_tile(<strong>Agari tile</strong>)
・Melds (<strong>Crying</strong>)
・Dora_indicators(<strong>dora</strong>)</p>
<ul>
<li>There is config (<strong>option</strong>).
<a href="https://github.com/MahjongRepository/mahjong/blob/master/mahjong/hand_calculating/hand.py">https://github.com/MahjongRepository/mahjong/blob/master/mahjong/hand_calculating/hand.py</a></li>
</ul>
<h2 id="example-1-ron-or-tsumo">Example 1 (Ron or Tsumo)</h2>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/217886/71e2067b-2d7b-6768-74d5-dde3fa142c63.jpeg" alt="IMG_3852.jpg">
<strong>If Ron&rsquo;s Aga</strong>
Player: Child
3 transliteration 40 marks Shooter: 5200 points
Role: Tanyao, Sanshokukou</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:example01_ron.py" data-lang="python:example01_ron.py">
<span style="color:#75715e"># Agari (man=mans, pin=pins, sou=swords, honors=characters)</span>
tiles <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;234555&#39;</span>, pin<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;555&#39;</span>, sou<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;22555&#39;</span>)

<span style="color:#75715e"># Agari tile (5 of Swords)</span>
win_tile <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(sou<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;5&#39;</span>)[<span style="color:#ae81ff">0</span>]

<span style="color:#75715e"># Cry (none)</span>
melds <span style="color:#f92672">=</span> None

<span style="color:#75715e"># Dora (none)</span>
dora_indicators <span style="color:#f92672">=</span> None

<span style="color:#75715e"># Option (none)</span>
config <span style="color:#f92672">=</span> None

<span style="color:#75715e">#Calculation</span>
result <span style="color:#f92672">=</span> calculator<span style="color:#f92672">.</span>estimate_hand_value(tiles, win_tile, melds, dora_indicators, config)
print_hand_result(result)

Result output
<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">3</span> <span style="color:#ae81ff">40</span>
<span style="color:#ae81ff">5200</span> <span style="color:#ae81ff">0</span>
[Tanyao, Sanshoku Doukou]
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">30</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;base&#39;</span>} <span style="color:#75715e"># Menzenron</span>
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">4</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;closed_pon&#39;</span>} <span style="color:#75715e"># memorization</span>
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">4</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;closed_pon&#39;</span>} <span style="color:#75715e"># memorization</span>
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">2</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;open_pon&#39;</span>} <span style="color:#75715e">#</span>
</code></pre></div><p><strong>If you are angry with Tsumo</strong>
Player: Child
6 transliteration 40 marks Parent: 6000 points, child 3000 points
Roles: Menzentsumo, Tan Yao, San Ankou, Sanshoukou</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:example01_tsumo.py" data-lang="python:example01_tsumo.py"><span style="color:#75715e">#Agari type (same as above)</span>
tiles <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;234555&#39;</span>, pin<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;555&#39;</span>, sou<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;22555&#39;</span>)

<span style="color:#75715e">#Agari tile (same as above)</span>
win_tile <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(sou<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;5&#39;</span>)[<span style="color:#ae81ff">0</span>]

<span style="color:#75715e"># Cry (none)</span>
melds <span style="color:#f92672">=</span> None

<span style="color:#75715e"># Dora (none)</span>
dora_indicators <span style="color:#f92672">=</span> None

<span style="color:#75715e"># Option (Add Tsumo, False if Ron)</span>
config <span style="color:#f92672">=</span> HandConfig(is_tsumo<span style="color:#f92672">=</span>True)

<span style="color:#75715e">#Calculation</span>
result <span style="color:#f92672">=</span> calculator<span style="color:#f92672">.</span>estimate_hand_value(tiles, win_tile, melds, dora_indicators, config)
print_hand_result(result)

Output result
<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">6</span> <span style="color:#ae81ff">40</span>
<span style="color:#ae81ff">6000</span> <span style="color:#ae81ff">3000</span>
[Menzen Tsumo, Tanyao, San Ankou, Sanshoku Doukou]
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">20</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;base&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">4</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;closed_pon&#39;</span>} <span style="color:#75715e"># memorization</span>
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">4</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;closed_pon&#39;</span>} <span style="color:#75715e"># memorization</span>
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">4</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;closed_pon&#39;</span>} <span style="color:#75715e"># memorization</span>
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">2</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;tsumo&#39;</span>} <span style="color:#75715e"># Tsumo</span>
</code></pre></div><p>The difference between Ron and Tsumo is
It is an argument of <code>caluculator.estimate_hand_value()</code>
Whether or not there is <code>config=HandConfig(is_tsumo=True)</code> in <code>config</code> (option).</p>
<p>Besides Tsumo,
・Reach → →is_riichi<code>・Ippatsu → → is_ippatsu</code>
・Rinshan Kaihou → <code>is_rinshan</code>
・Chankan → <code>is_chankan</code>
・High Tay → <code>is_haitei</code>
・Houtei → <code>is_houtei</code>
・Double reach→<code>is_daburu_riichi</code>
・Sinking manganese → <code>is_nagashi_mangan</code>
・Tenho → → is_tenhou<code>・Renho → → is_renhou</code>
・Chiho → → is_chiihou`</p>
<p>Exists, it can be set by doing the same as <code>is_tsumo=True</code>.</p>
<h2 id="example-2-dora-wind">Example 2 (dora, wind)</h2>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/217886/7e2991f2-098d-e1e8-c66b-f608475bcfab.jpeg" alt="IMG_3853.jpg"></p>
<p><strong>If the wind is east and the wind is south,</strong>
Player: Child, Self-wind: South
4 transliteration 40 marks Gunner: 8000 points
Roles: Reach, Yakhai (self-wind), Dora 2</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:example02_south.py" data-lang="python:example02_south.py"><span style="color:#75715e">#Agari (honors=1: east, 2: south, 3: west, 4: north, 5: white, 6: leprosy, 7: middle)tiles = TilesConverter.string_to_136_array(man=&#39;677889&#39;, pin=&#39;88&#39;, sou=&#39;456&#39;, honors=&#39;222&#39;)</span>

<span style="color:#75715e">#Agari tile (Manz 8)</span>
win_tile <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;8&#39;</span>)[<span style="color:#ae81ff">0</span>]

<span style="color:#75715e"># Cry (none)</span>
melds <span style="color:#f92672">=</span> None

<span style="color:#75715e"># Dora (display tile, back Dora)</span>
dora_indicators <span style="color:#f92672">=</span> [
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(pin<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;7&#39;</span>)[<span style="color:#ae81ff">0</span>],
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(sou<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;9&#39;</span>)[<span style="color:#ae81ff">0</span>],
]

<span style="color:#75715e">#Option (reach, self-wind, wind)</span>
config <span style="color:#f92672">=</span> HandConfig(is_riichi<span style="color:#f92672">=</span>True, player_wind<span style="color:#f92672">=</span>SOUTH, round_wind<span style="color:#f92672">=</span>EAST)

<span style="color:#75715e">#Calculation</span>
result <span style="color:#f92672">=</span> calculator<span style="color:#f92672">.</span>estimate_hand_value(tiles, win_tile,melds,dora_indicators, config)
print_hand_result(result)

<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">4</span> <span style="color:#ae81ff">40</span>
<span style="color:#ae81ff">8000</span> <span style="color:#ae81ff">0</span>
[Riichi, Yakuhai (wind of place), Dora <span style="color:#ae81ff">2</span>]
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">30</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;base&#39;</span>} <span style="color:#75715e"># Menzenron</span>
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">8</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;closed_terminal_pon&#39;</span>} <span style="color:#75715e"># Yaochu tile</span>
</code></pre></div><p><strong>If the wind is east and the own wind is east</strong>
Player: Parent, Self-wind: East
3 transliteration 40 marks Gunner: 7700 points
Role: Reach, Dora 2</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:example02_east.py" data-lang="python:example02_east.py"><span style="color:#75715e">#Agari (honors=1: east, 2: south, 3: west, 4: north, 5: white, 6: leprosy, 7: middle)</span>
tiles <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;677889&#39;</span>, pin<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;88&#39;</span>, sou<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;456&#39;</span>, honors<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;222&#39;</span>)

<span style="color:#75715e">#Agari tile (Manz 8)</span>
win_tile <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;8&#39;</span>)[<span style="color:#ae81ff">0</span>]

<span style="color:#75715e"># Cry (none)</span>
melds <span style="color:#f92672">=</span> None

<span style="color:#75715e"># Dora (display tile, back Dora)</span>
dora_indicators <span style="color:#f92672">=</span> [
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(pin<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;7&#39;</span>)[<span style="color:#ae81ff">0</span>],
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(sou<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;9&#39;</span>)[<span style="color:#ae81ff">0</span>],
]

<span style="color:#75715e">#Option (reach, self-wind, wind)</span>
config <span style="color:#f92672">=</span> HandConfig(is_riichi<span style="color:#f92672">=</span>True, player_wind<span style="color:#f92672">=</span>EAST, round_wind<span style="color:#f92672">=</span>EAST)

<span style="color:#75715e">#Calculation</span>
result <span style="color:#f92672">=</span> calculator<span style="color:#f92672">.</span>estimate_hand_value(tiles, win_tile,melds,dora_indicators, config)
print_hand_result(result)

<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">3</span> <span style="color:#ae81ff">40</span>
<span style="color:#ae81ff">7700</span> <span style="color:#ae81ff">0</span>
[Riichi, Dora <span style="color:#ae81ff">2</span>]
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">30</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;base&#39;</span>} <span style="color:#75715e"># Menzenron</span>
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">8</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;closed_terminal_pon&#39;</span>} <span style="color:#75715e"># Yaochu tile</span>
</code></pre></div><p>Dora can be set by writing display tiles in <code>dora_indicators</code>.</p>
<p>Self-wind is <code>config_</code>player_wind<code>, place wind is in </code>config<code> </code>round_wind<code>It can be set by specifying </code>EAST<code>(east),</code>SOUTH<code>(south),</code>WEST<code>(west), and</code>NORTH<code>(north). In other words, you can set a player as a parent by setting</code>player_wind=EAST`.</p>
<h2 id="example-3-squeal-option-rule-red-dora">Example 3 (Squeal, Option Rule, Red Dora)</h2>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/217886/c32870fc-1472-fe50-72c2-252ac06d14d5.jpeg" alt="IMG_3856.jpg">
<strong>In the case of Linshan Kaihou</strong>
Player: Child
3 transliteration 40 marks Parent: 2600 points, Child: 1300 points
Roles: Rinshan Kaihou, Tan Yao, Red Dora 1</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:example03_rinshan.py" data-lang="python:example03_rinshan.py"><span style="color:#75715e"># Agari type (0 or r is used for red Dora (any order is OK), changed to has_aka_dora=True)</span>
tiles <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;022246&#39;</span>, pin<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;333&#39;</span>, sou<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;33567&#39;</span>, has_aka_dora<span style="color:#f92672">=</span>True)

<span style="color:#75715e">#Agari tile (6 of Manz)</span>
win_tile <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;6&#39;</span>)[<span style="color:#ae81ff">0</span>]

<span style="color:#75715e"># Cry (Chi: CHI, Pong: PON, Kang: KAN (True: Min Kang, False: An Kang), Kakan: CHANKAN, Nukidora: NUKI)</span>
melds <span style="color:#f92672">=</span> [
    Meld(Meld<span style="color:#f92672">.</span>KAN, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;2222&#39;</span>), False),
    Meld(Meld<span style="color:#f92672">.</span>PON, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(pin<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;333&#39;</span>)),
    Meld(Meld<span style="color:#f92672">.</span>CHI, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(sou<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;567&#39;</span>))
]

<span style="color:#75715e"># Dora (none)</span>
dora_indicators <span style="color:#f92672">=</span> None

<span style="color:#75715e"># Option (add Tsumo, Rinshan Kaihou, Eating tongue, Red Dora rule)</span>
config <span style="color:#f92672">=</span> HandConfig(is_tsumo<span style="color:#f92672">=</span>True,is_rinshan<span style="color:#f92672">=</span>True, options<span style="color:#f92672">=</span>OptionalRules(has_open_tanyao<span style="color:#f92672">=</span>True, has_aka_dora<span style="color:#f92672">=</span>True))

<span style="color:#75715e">#Calculation</span>
result <span style="color:#f92672">=</span> calculator<span style="color:#f92672">.</span>estimate_hand_value(tiles, win_tile,melds,dora_indicators, config)
print_hand_result(result)

<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">3</span> <span style="color:#ae81ff">40</span>
<span style="color:#ae81ff">2600</span> <span style="color:#ae81ff">1300</span>
[Rinshan Kaihou, Tanyao, Aka Dora <span style="color:#ae81ff">1</span>]
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">20</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;base&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">16</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;closed_kan&#39;</span>} <span style="color:#75715e"># KAN</span>
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">2</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;open_pon&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">2</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;tsumo&#39;</span>}
</code></pre></div><p><strong>For Ron Agari</strong>
Player: Child
2 transliteration 40 marks Shooter: 2600 points
Role: Tan Yao, Red Dora 1</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:example03_ron.py" data-lang="python:example03_ron.py"><span style="color:#75715e"># Agari type (same as above)</span>
tiles <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;022246&#39;</span>, pin<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;333&#39;</span>, sou<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;33567&#39;</span>, has_aka_dora<span style="color:#f92672">=</span>True)

<span style="color:#75715e">#Agari tile (same as above)</span>
win_tile <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;6&#39;</span>)[<span style="color:#ae81ff">0</span>]

<span style="color:#75715e"># Cry (same as above)</span>
melds <span style="color:#f92672">=</span> [
    Meld(Meld<span style="color:#f92672">.</span>KAN, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;2222&#39;</span>), False),
    Meld(Meld<span style="color:#f92672">.</span>PON, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(pin<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;333&#39;</span>)),
    Meld(Meld<span style="color:#f92672">.</span>CHI, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(sou<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;567&#39;</span>))
]

<span style="color:#75715e"># Dora (none)</span>
dora_indicators <span style="color:#f92672">=</span> None

<span style="color:#75715e"># Option (Add eating tongue and red drum rule)</span>
config <span style="color:#f92672">=</span> HandConfig(options<span style="color:#f92672">=</span>OptionalRules(has_open_tanyao<span style="color:#f92672">=</span>True, has_aka_dora<span style="color:#f92672">=</span>True))

<span style="color:#75715e">#Calculation</span>
result <span style="color:#f92672">=</span> calculator<span style="color:#f92672">.</span>estimate_hand_value(tiles, win_tile,melds,dora_indicators, config)
print_hand_result(result)

<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">2</span> <span style="color:#ae81ff">40</span>
<span style="color:#ae81ff">2600</span> <span style="color:#ae81ff">0</span>
[Tanyao, Aka Dora <span style="color:#ae81ff">1</span>]
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">20</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;base&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">16</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;closed_kan&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">2</span>,<span style="color:#e6db74">&#39;reason&#39;</span>:<span style="color:#e6db74">&#39;open_pon&#39;</span>}
</code></pre></div><p>Even if <code>is_tsumo=True</code> is added because of eating,
There is no Tsumo in the role, and there is Tanyao properly.</p>
<p>If it contains a red Dora,
Don&rsquo;t forget to set it to Agari and Option respectively!</p>
<p>Other optional rules besides eating tongue and red dora,
It can be set with <code>HandConfig(options)</code> in <code>config</code>.</p>
<p>・Double Yakuman → <code>has_double_yakuman(T or F)</code>
・Count Yakman → kazoe_limit(kazoe_limit = HandConfig.KAZOE_LIMITED, HandConfig.KAZOE_SANBAIMAN, HandConfig.KAZOE_NO_LIMIT)<code>・Round up manganese → </code>kiriage(T or F)<code>・Pinfu: →</code>fu_for_open_pinfu(T or F)<code>・Pinfutsumo → → fu_for_pinfu_tsumo(T or F)</code>
・Renho: →<code>renhou_as_yakuman(T or F)</code>
・Daisharin → <code>has_daisharin(T or F)</code>
・Daichikurin &amp; Daisurin → <code>has_daisharin_other_suits(T or F)</code></p>
<p>##Example 4 (Chinitsu, Yakuman counting, Saki)
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/217886/ff79b010-70f7-a972-42b5-129c703b7479.jpeg" alt="IMG_3900.jpg"></p>
<p>** When Yakuman has 13 or more inversion (normal counting Yakuman) **
Player: Child
29 transcription 80 parent: 16000 points, child: 8000 points
Roles: Rinshan Kaihou, Toy Toy, San Angler, Sankants, Chinitsu, Red 1, Dora 16</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:example04_limited.py" data-lang="python:example04_limited.py"><span style="color:#75715e"># Agari type (has_aka_dora is not required if there is only one type of tile)</span>
tiles <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;22244455777999&#39;</span>)

<span style="color:#75715e">#Agari tile (Manz&#39;s red 5, but the meaning is the same as ordinary Manz&#39;s 5)</span>
win_tile <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;5&#39;</span>)[<span style="color:#ae81ff">0</span>]

<span style="color:#75715e"># Cry (Daiminkan: true, Ankan: False)melds = [</span>
    Meld(Meld<span style="color:#f92672">.</span>KAN, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;7777&#39;</span>), False),
    Meld(Meld<span style="color:#f92672">.</span>KAN, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;2222&#39;</span>), False),
    Meld(Meld<span style="color:#f92672">.</span>KAN, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;9999&#39;</span>), True)
]

<span style="color:#75715e">#ドラ(表示牌を枚数分だけ)</span>
dora_indicators <span style="color:#f92672">=</span> [
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;1&#39;</span>)[<span style="color:#ae81ff">0</span>],
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;1&#39;</span>)[<span style="color:#ae81ff">0</span>],
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;6&#39;</span>)[<span style="color:#ae81ff">0</span>],
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;8&#39;</span>)[<span style="color:#ae81ff">0</span>],
]

<span style="color:#75715e">#オプション(OptionalRulesのkazoe_limitをKAZOE_NO_LIMITへ, 赤がある場合はここで設定)</span>
config <span style="color:#f92672">=</span> HandConfig(is_tsumo<span style="color:#f92672">=</span>True,is_rinshan<span style="color:#f92672">=</span>True,options<span style="color:#f92672">=</span>OptionalRules(kazoe_limit<span style="color:#f92672">=</span>HandConfig<span style="color:#f92672">.</span>KAZOE_LIMITED, has_aka_dora<span style="color:#f92672">=</span>True))

<span style="color:#75715e">#計算</span>
result <span style="color:#f92672">=</span> calculator<span style="color:#f92672">.</span>estimate_hand_value(tiles, win_tile,melds,dora_indicators, config)
print_hand_result(result)

<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">29</span> <span style="color:#ae81ff">80</span>
<span style="color:#ae81ff">16000</span> <span style="color:#ae81ff">8000</span>
[Rinshan Kaihou, Toitoi, San Ankou, San Kantsu, Chinitsu, Dora <span style="color:#ae81ff">16</span>, Aka Dora <span style="color:#ae81ff">1</span>]
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">20</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;base&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">16</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;closed_kan&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">16</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;closed_kan&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">16</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;open_terminal_kan&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;closed_pon&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;pair_wait&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;tsumo&#39;</span>}
</code></pre></div><p><strong>13翻以上をサンバイマンとする場合</strong>
プレイヤー：子
29翻80符　親:12000点, 子:6000点
役:リンシャンカイホウ, トイトイ, サンアンコウ, サンカンツ, チンイツ, 赤1, ドラ16</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:example04_sanbaiman.py" data-lang="python:example04_sanbaiman.py"><span style="color:#75715e">#アガリ形(上に同じ)</span>
tiles <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;22244455777999&#39;</span>)

<span style="color:#75715e">#アガリ牌(上に同じ)</span>
win_tile <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;5&#39;</span>)[<span style="color:#ae81ff">0</span>]

<span style="color:#75715e">#鳴き(上に同じ)</span>
melds <span style="color:#f92672">=</span> [
    Meld(Meld<span style="color:#f92672">.</span>KAN, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;7777&#39;</span>), False),
    Meld(Meld<span style="color:#f92672">.</span>KAN, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;2222&#39;</span>), False),
    Meld(Meld<span style="color:#f92672">.</span>KAN, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;9999&#39;</span>), True)
]

<span style="color:#75715e">#ドラ(上に同じ)</span>
dora_indicators <span style="color:#f92672">=</span> [
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;1&#39;</span>)[<span style="color:#ae81ff">0</span>],
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;1&#39;</span>)[<span style="color:#ae81ff">0</span>],
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;6&#39;</span>)[<span style="color:#ae81ff">0</span>],
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;8&#39;</span>)[<span style="color:#ae81ff">0</span>],
]

<span style="color:#75715e">#オプション(OptionalRulesのkazoe_limitをKAZOE_SANBAIMANへ)</span>
config <span style="color:#f92672">=</span> HandConfig(is_tsumo<span style="color:#f92672">=</span>True,is_rinshan<span style="color:#f92672">=</span>True,options<span style="color:#f92672">=</span>OptionalRules(kazoe_limit<span style="color:#f92672">=</span>HandConfig<span style="color:#f92672">.</span>KAZOE_SANBAIMAN, has_aka_dora<span style="color:#f92672">=</span>True))

<span style="color:#75715e">#計算</span>
result <span style="color:#f92672">=</span> calculator<span style="color:#f92672">.</span>estimate_hand_value(tiles, win_tile,melds,dora_indicators, config)
print_hand_result(result)

<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">29</span> <span style="color:#ae81ff">80</span>
<span style="color:#ae81ff">12000</span> <span style="color:#ae81ff">6000</span>
[Rinshan Kaihou, Toitoi, San Ankou, San Kantsu, Chinitsu, Dora <span style="color:#ae81ff">16</span>, Aka Dora <span style="color:#ae81ff">1</span>]
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">20</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;base&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">16</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;closed_kan&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">16</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;closed_kan&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">16</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;open_terminal_kan&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;closed_pon&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;pair_wait&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;tsumo&#39;</span>}
</code></pre></div><p><strong>13翻以上をヤクマン,26翻以上をダブルヤクマンとする場合</strong>
プレイヤー：子
29翻80符　親:32000点, 子:16000点
役:リンシャンカイホウ, トイトイ, サンアンコウ, サンカンツ, チンイツ, 赤1, ドラ16</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:example04_no_limit.py" data-lang="python:example04_no_limit.py"><span style="color:#75715e">#アガリ形(上に同じ)</span>
tiles <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;22244455777999&#39;</span>)

<span style="color:#75715e">#アガリ牌(上に同じ)</span>
win_tile <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;5&#39;</span>)[<span style="color:#ae81ff">0</span>]

<span style="color:#75715e">#鳴き(上に同じ)</span>
melds <span style="color:#f92672">=</span> [
    Meld(Meld<span style="color:#f92672">.</span>KAN, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;7777&#39;</span>), False),
    Meld(Meld<span style="color:#f92672">.</span>KAN, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;2222&#39;</span>), False),
    Meld(Meld<span style="color:#f92672">.</span>KAN, TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;9999&#39;</span>), True)
]

<span style="color:#75715e">#ドラ(上に同じ)</span>
dora_indicators <span style="color:#f92672">=</span> [
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;1&#39;</span>)[<span style="color:#ae81ff">0</span>],
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;1&#39;</span>)[<span style="color:#ae81ff">0</span>],
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;6&#39;</span>)[<span style="color:#ae81ff">0</span>],
    TilesConverter<span style="color:#f92672">.</span>string_to_136_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;8&#39;</span>)[<span style="color:#ae81ff">0</span>],
]

<span style="color:#75715e">#オプション(OptionalRulesのkazoe_limitをKAZOE_NO_LIMITへ)</span>
config <span style="color:#f92672">=</span> HandConfig(is_tsumo<span style="color:#f92672">=</span>True,is_rinshan<span style="color:#f92672">=</span>True,options<span style="color:#f92672">=</span>OptionalRules(kazoe_limit<span style="color:#f92672">=</span>HandConfig<span style="color:#f92672">.</span>KAZOE_NO_LIMIT, has_aka_dora<span style="color:#f92672">=</span>True))

<span style="color:#75715e">#計算</span>
result <span style="color:#f92672">=</span> calculator<span style="color:#f92672">.</span>estimate_hand_value(tiles, win_tile,melds,dora_indicators, config)
print_hand_result(result)

<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">29</span> <span style="color:#ae81ff">80</span>
<span style="color:#ae81ff">32000</span> <span style="color:#ae81ff">16000</span>
[Rinshan Kaihou, Toitoi, San Ankou, San Kantsu, Chinitsu, Dora <span style="color:#ae81ff">16</span>, Aka Dora <span style="color:#ae81ff">1</span>]
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">20</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;base&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">16</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;closed_kan&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">16</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;closed_kan&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">16</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;open_terminal_kan&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;closed_pon&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;pair_wait&#39;</span>}
{<span style="color:#e6db74">&#39;fu&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;reason&#39;</span>: <span style="color:#e6db74">&#39;tsumo&#39;</span>}
</code></pre></div><p>おまけで、咲さんのようなアガリ形です。
チンイツに赤ドラが含まれている場合は、
<code>Tiles</code>(アガリ形)に<code>has_aka_dora=True</code>は必要なく
<code>config</code>(オプション)のみで大丈夫です。
(<code>Tiles</code>に<code>has_aka_dora=True</code>があるとエラーを返されます。)</p>
<p><code>dora_indicators</code>(ドラ)には、表示されている牌を表示されている枚数分だけ追加しましょう。</p>
<p>##シャンテン数
mahjongは手計算だけではなく、
シャンテン数も計算することができます！</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:example04_shanten.py" data-lang="python:example04_shanten.py"><span style="color:#75715e">#シャンテン数</span>
<span style="color:#f92672">from</span> mahjong.shanten <span style="color:#f92672">import</span> Shanten

<span style="color:#75715e">#Shanten(シャンテン数計算用クラス)のインスタンスを生成</span>
shanten <span style="color:#f92672">=</span> Shanten()

<span style="color:#75715e">#手牌14枚</span>
tiles <span style="color:#f92672">=</span> TilesConverter<span style="color:#f92672">.</span>string_to_34_array(man<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;13569&#39;</span>, pin<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;123459&#39;</span>, sou<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;443&#39;</span>)

<span style="color:#75715e">#計算</span>
result <span style="color:#f92672">=</span> shanten<span style="color:#f92672">.</span>calculate_shanten(tiles)
<span style="color:#66d9ef">print</span>(result)

<span style="color:#75715e">#結果</span>
<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">2</span>
</code></pre></div><p>#まとめ
今回、自分用の備忘録としてまとめてみました。
説明が不足している部分はほとんど補えたのではないでしょうか。
(ヌキドラや特殊なオプションルールは試していませんがw)</p>
<p>このライブラリは、麻雀大好き人間としてはたまりませんね！(笑)
このライブラリを用いて、また新たな麻雀アプリの開発ができたらと思います。</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
