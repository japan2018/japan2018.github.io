<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://japan2018.github.io/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://japan2018.github.io/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://japan2018.github.io/favicon-16x16.png">

  
  <link rel="manifest" href="https://japan2018.github.io/site.webmanifest">

  
  <link rel="mask-icon" href="https://japan2018.github.io/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://japan2018.github.io/css/bootstrap.min.css" />

  
  <title>[Machine learning] Use WordNet to mechanically extract similar words | Some Title</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Machine learning] Use WordNet to mechanically extract similar words</h1>
<p>
  <small class="text-secondary">
  
  
  Feb 23, 2020
  </small>
  

<small><code><a href="https://japan2018.github.io/tags/python">Python</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/natural-language-processing"> Natural Language Processing</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/nlp"> NLP</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/wordnet"> WordNet</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/thesaurus"> Thesaurus</a></code></small>

</p>
<pre><code>#Outline of natural language processing
</code></pre>
<p>Before touching on WordNet, let me briefly touch on natural language processing.
In order for a machine to understand sentences in natural language processing, the following morphological analysis, syntactic analysis, semantic analysis, and contextual analysis are required in order.</p>
<h3 id="morphological-analysis">Morphological analysis</h3>
<p>It is the work of dividing from natural language text data without annotations of information into columns of morphemes (the smallest unit that has meaning in the language) based on information such as the grammar of the target language and the part of speech of words called a dictionary.</p>
<p>For example, morphological analysis of &ldquo;Waiting&rdquo; is as follows.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/573779/4f2d5241-f21e-6f96-793f-70058906f039.png" alt="morph.png"></p>
<p>Reference: wikipedia</p>
<p>MeCab is a typical morphological analysis tool.</p>
<h3 id="parsing">Parsing</h3>
<p>If it is a natural language, it is a procedure to clarify it by dividing it into morphemes and diagramming the relationships.</p>
<p>For example, the following two syntaxes can be considered when there is a sentence &ldquo;Beautiful watermill&rsquo;s maiden&rdquo;.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/573779/065afa66-2449-c5a7-f739-4983bfde4aed.png" alt="b1.png"></p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/573779/190559ba-715c-b683-088e-f7c15d3fed29.png" alt="b2.png"></p>
<p>Reference: wikipedia</p>
<p>We will analyze what kind of connections there are based on the information of the surrounding morphemes.
Cabocha is a typical analysis tool.</p>
<h3 id="semantic-analysis">Semantic analysis</h3>
<p>This is a procedure for giving knowledge to a machine. For example, if you have the following sentence:</p>
<p>&ldquo;High Mt. Fuji and the sea are beautiful&rdquo;</p>
<p>It&rsquo;s expensive for humans, but you can easily see which word it depends on.
Even if there is &ldquo;high Mt. Fuji,&rdquo; there is no &ldquo;high sea,&rdquo; and you can intuitively judge. However, since the machine has no knowledge, it cannot judge that the &ldquo;high sea&rdquo; is strange.</p>
<p>#What is WordNet</p>
<p>A type of thesaurus. A thesaurus that classifies and organizes words according to upper/lower relations, partial/whole relations, synonymous relations, synonymous relations, etc. It is a systematic representation of how each word is related and is used in the semantic analysis described above.</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/573779/87e7eb4d-c0e6-ff51-f486-3a2b0f48382d.png" alt="wordnet.png"></p>
<p>For example, in the case of &ldquo;on-road bike&rdquo;, the superordinate concept that includes &ldquo;on-road bike&rdquo; is &ldquo;motorcycle&rdquo; or &ldquo;vehicle&rdquo;, and as a subordinate concept, the types of bikes such as &ldquo;naked&rdquo; and &ldquo;american&rdquo; are represented. Note that &ldquo;scooter&rdquo; and &ldquo;off-road bike&rdquo; written in parallel with &ldquo;bike&rdquo; can be considered as similar terms.</p>
<h1 id="use">Use</h1>
<p>These have already been put together so that they can be handled by the program, and can be downloaded from the following. It is published in sqlite and can be read using sql.</p>
<ul>
<li>
<p>Http://compling.hss.ntu.edu.sg/wnja/</p>
</li>
<li>
<p>table and column list</p>
</li>
</ul>
<pre><code>pos_def ('pos', lang', def')
link_def ('link', lang','def')
synset_def ('synset','lang','def', sid')
synset_ex ('synset','lang','def','sid')
synset ('synset','pos','name','src')
synlink ('synset1', synset2','link','src')
ancestor ('synset1','synset2','hops')
sense ('synset' ,'wordid','lang','rank','lexid','freq','src')
word ('wordid','lang','lemma','pron','pos')
variant ('varid','wordid','lang','lemma','vartype')
xlink ('synset','resource','xref','misc','confidence')
</code></pre><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/573779/64f7f04c-1cc6-178e-da9d-12046fe50c0e.png" alt="column.png"></p>
<p>#Program</p>
<h3 id="confirmation-1-confirm-each-table-column">Confirmation 1: Confirm each table column</h3>
<ul>
<li>Source</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">import</span> sqlite3
conn <span style="color:#f92672">=</span> sqlite3<span style="color:#f92672">.</span>connect(<span style="color:#e6db74">&#34;wnjpn.db&#34;</span>)

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">chk_table</span>():
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;&#34;</span>)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;###word table info&#34;</span>)
    cur <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">&#34;select count(*) from word&#34;</span>)
    <span style="color:#66d9ef">for</span> row <span style="color:#f92672">in</span> cur:
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;word num:&#34;</span> <span style="color:#f92672">+</span>str(row[<span style="color:#ae81ff">0</span>]))

    cur <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">&#34;select name from sqlite_master where type=&#39;table&#39;&#34;</span>)
    <span style="color:#66d9ef">for</span> row <span style="color:#f92672">in</span> cur:
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;=======================================&#34;</span>)
        <span style="color:#66d9ef">print</span>(row[<span style="color:#ae81ff">0</span>])
        cur <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">&#34;PRAGMA TABLE_INFO(&#34;</span><span style="color:#f92672">+</span>row[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;)&#34;</span>)
        <span style="color:#66d9ef">for</span> row <span style="color:#f92672">in</span> cur:
            <span style="color:#66d9ef">print</span>(row)

<span style="color:#66d9ef">if</span> __name__<span style="color:#f92672">==</span><span style="color:#e6db74">&#34;__main__&#34;</span>:
    chk_table()

</code></pre></div><ul>
<li>Result 1</li>
</ul>
<pre><code>###word table info
word num: 249121
========================================
pos_def
(0,'pos','text', 0, None, 0)
(1,'lang','text', 0, None, 0)
(2,'def','text', 0, None, 0)
========================================
link_def
(0,'link','text', 0, None, 0)
(1,'lang','text', 0, None, 0)
(2,'def','text', 0, None, 0)
========================================
synset_def
(0,'synset','text', 0, None, 0)
(1,'lang','text', 0, None, 0)
(2,'def','text', 0, None, 0)
(3,'sid','text', 0, None, 0)
========================================
synset_ex
(0,'synset','text', 0, None, 0)
(1,'lang','text', 0, None, 0)
(2,'def','text', 0, None, 0)
(3,'sid','text', 0, None, 0)
========================================
synset
(0,'synset','text', 0, None, 0)
(1,'pos','text', 0, None, 0)
(2,'name','text', 0, None, 0)
(3,'src','text', 0, None, 0)
========================================
synlink
(0,'synset1','text', 0, None, 0)
(1,'synset2','text', 0, None, 0)
(2,'link','text', 0, None, 0)
(3,'src','text', 0, None, 0)
========================================
ancestor
(0,'synset1','text', 0, None, 0)
(1,'synset2','text', 0, None, 0)
(2,'hops','int', 0, None, 0)
========================================
sense
(0,'synset','text', 0, None, 0)
(1,'wordid','integer', 0, None, 0)
(2,'lang','text', 0, None, 0)
(3,'rank','text', 0, None, 0)
(4,'lexid','integer', 0, None, 0)
(5,'freq','integer', 0, None, 0)
(6,'src','text', 0, None, 0)
========================================
word
(0,'wordid','integer', 0, None, 1)
(1,'lang','text', 0, None, 0)
(2,'lemma','text', 0, None, 0)
(3,'pron','text', 0, None, 0)
(4,'pos','text', 0, None, 0)
========================================
variant
(0,'varid','integer', 0, None, 1)
(1,'wordid','integer', 0, None, 0)
(2,'lang','text', 0, None, 0)
(3,'lemma','text', 0, None, 0)
(4,'vartype','text', 0, None, 0)
========================================
xlink
(0,'synset','text', 0, None, 0)
(1,'resource','text', 0, None, 0)
(2,'xref','text', 0, None, 0)
(3,'misc','text', 0, None, 0)
(4,'confidence','text', 0, None, 0)

</code></pre><h3 id="confirmation-2-confirm-the-registered-words-japanese">Confirmation 2: Confirm the registered words (Japanese)</h3>
<ul>
<li>Source```Python
import sqlite3
conn = sqlite3.connect(&ldquo;wnjpn.db&rdquo;)</li>
</ul>
<p>def chk_word():
#cur = conn.execute(&ldquo;select * from word limit 240000&rdquo;)
cur = conn.execute(&ldquo;select * from word where lang='jpn&rsquo; limit 240000&rdquo;)
for row in cur:
print(row)</p>
<p>if __name__==&rdquo;<strong>main</strong>&quot;:
chk_word()</p>
<pre><code>

- Result 2
Show only part

</code></pre><p>(249100,&lsquo;jpn&rsquo;,&lsquo;soup plate&rsquo;, None,&lsquo;n&rsquo;)
(249101,&lsquo;jpn&rsquo;,&lsquo;defer&rsquo;, None,&lsquo;v&rsquo;)
(249102,&lsquo;jpn&rsquo;,&lsquo;astringent&rsquo;, None,&lsquo;n&rsquo;)
(249103,&lsquo;jpn&rsquo;,&lsquo;property&rsquo;, None,&lsquo;n&rsquo;)
(249104,&lsquo;jpn&rsquo;,&lsquo;Alborg&rsquo;, None,&lsquo;n&rsquo;)
(249105,&lsquo;jpn&rsquo;,&lsquo;back side&rsquo;, None,&lsquo;n&rsquo;)
(249106,&lsquo;jpn&rsquo;,&lsquo;repair&rsquo;, None,&lsquo;n&rsquo;)
(249107,&lsquo;jpn&rsquo;,&lsquo;convenience&rsquo;, None,&lsquo;n&rsquo;)
(249108,&lsquo;jpn&rsquo;,&lsquo;convenience&rsquo;, None,&lsquo;a&rsquo;)
(249109,&lsquo;jpn&rsquo;,&lsquo;Vyrus&rsquo;, None,&lsquo;n&rsquo;)
(249110,&lsquo;jpn&rsquo;,&lsquo;Old fashioned&rsquo;, None,&lsquo;a&rsquo;)
(249111,&lsquo;jpn&rsquo;,&lsquo;compassion&rsquo;, None,&lsquo;n&rsquo;)
(249112,&lsquo;jpn&rsquo;,&lsquo;compassion&rsquo;, None,&lsquo;a&rsquo;)
(249113,&lsquo;jpn&rsquo;,&lsquo;super sentence&rsquo;, None,&lsquo;n&rsquo;)
(249114,&lsquo;jpn&rsquo;,&lsquo;sexually transmitted disease&rsquo;, None,&lsquo;n&rsquo;)
(249115,&lsquo;jpn&rsquo;,&lsquo;mayu ink&rsquo;, None,&lsquo;n&rsquo;)
(249116,&lsquo;jpn&rsquo;,&lsquo;hemline&rsquo;, None,&lsquo;n&rsquo;)
(249117,&lsquo;jpn&rsquo;,&lsquo;outbred&rsquo;, None,&lsquo;a&rsquo;)
(249118,&lsquo;jpn&rsquo;,&lsquo;Science equipment&rsquo;, None,&lsquo;n&rsquo;)
(249119,&lsquo;jpn&rsquo;,&lsquo;backslide&rsquo;, None,&lsquo;v&rsquo;)
(249120,&lsquo;jpn&rsquo;,&lsquo;Repeat&rsquo;, None,&lsquo;v&rsquo;)
(249121,&lsquo;jpn&rsquo;,&lsquo;will&rsquo;, None,&lsquo;n&rsquo;)</p>
<pre><code>

### Confirm 3: Extract synonyms

-  Source

```Python
import sqlite3
conn = sqlite3.connect(&quot;wnjpn.db&quot;)


def main(word):
    print(&quot;&quot;)
    print(&quot;&quot;)
    print(&quot;## input: [&quot;,word,&quot;]&quot;)
    print(&quot;&quot;)


    #Check if the word exists in Wordnet
    cur = conn.execute(&quot;select wordid from word where lemma='%s'&quot; %word)
    word_id = 99999999
    for row in cur:
        word_id = row[0]
    if word_id==99999999:
        print(&quot;&quot;%s&quot; is not exist&quot; %word)
        return

    #Get the concept
    cur = conn.execute(&quot;select synset from sense where wordid='%s'&quot; %word_id)
    synsets = []
    for row in cur:
        synsets.append(row[0])
    print(synsets)

    #Display of words included in concept
    for synset in synsets:
        cur1 = conn.execute(&quot;select name from synset where synset='%s'&quot; %synset)
        for row1 in cur1:
            print(&quot;## Concept: %s&quot; %(row1[0]))
        cur2 = conn.execute(&quot;select def from synset_def where (synset='%s' and lang='jpn')&quot; %synset)
        for row2 in cur2:
            print(&quot;## Meaning: %s&quot; %(row2[0]))

        cur3 = conn.execute(&quot;select wordid from sense where (synset='%s' and wordid!=%s)&quot; %(synset,word_id))
        for i,row3 in enumerate(cur3):
            target_word_id = row3[0]
            cur3_1 = conn.execute(&quot;select lemma from word where wordid=%s&quot; %target_word_id)
            for row3_1 in cur3_1:
                print(&quot;synonym&quot;+str(i+1)+&quot;: %s&quot; %(row3_1[0]))

        print()

if __name__==&quot;__main__&quot;:
    word=&quot;car&quot;
    main(word)

</code></pre><ul>
<li>Result 3</li>
</ul>
<pre><code>## Input: [Car]

['03791235-n', '02958343-n']
## Concept: motor_vehicle
## Meaning: A vehicle with self-propelled wheels that does not run on rails
Synonyms 1: motor_vehicle
Synonyms 2: automotive_vehicle
Synonyms 3: Motor Vehicle

## Concept: auto
## Meaning: 4-wheeled car
## Meaning: usually propelled by an internal combustion engine
Synonyms 1: auto
Synonyms 2: motorcar
Synonyms 3: machine
Synonyms 4: car
Synonyms 5: automobile
Synonyms 6: automobile
Synonyms 7: Automobile
Synonyms 8: Car
Synonyms 9: Passenger Car
Synonyms 10: Automobile
Synonyms 11: Motor Car

</code></pre><p>After inputting &ldquo;car&rdquo; as a flow of extracting similar words, first trace the words &ldquo;motor_vehicle&rdquo; and &ldquo;auto&rdquo;, which are superordinate concepts of cars, and extract the words under them to find words that are parallel to &ldquo;car&rdquo;. I am taking it out.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-123456789-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
