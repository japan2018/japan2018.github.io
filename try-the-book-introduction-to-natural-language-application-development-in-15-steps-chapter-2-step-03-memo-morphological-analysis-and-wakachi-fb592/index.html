<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://japan2018.github.io/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://japan2018.github.io/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://japan2018.github.io/favicon-16x16.png">

  
  <link rel="manifest" href="https://japan2018.github.io/site.webmanifest">

  
  <link rel="mask-icon" href="https://japan2018.github.io/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://japan2018.github.io/css/bootstrap.min.css" />

  
  <title>Try the book Introduction to Natural Language Application Development in 15 Steps-Chapter 2 Step 03 Memo Morphological Analysis and Wakachi | Some Title</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Try the book Introduction to Natural Language Application Development in 15 Steps-Chapter 2 Step 03 Memo Morphological Analysis and Wakachi</h1>
<p>
  <small class="text-secondary">
  
  
  Jan 20, 2020
  </small>
  

<small><code><a href="https://japan2018.github.io/tags/python">Python</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/natural-language-processing"> natural language processing</a></code></small>

</p>
<pre><code># Content
</code></pre>
<p>This is a memo for yourself when reading <a href="https://www.amazon.co.jp/dp/4865941320">Introduction to Natural Language Processing Application</a>.
This time in Chapter 2, Step 03, I will write down my point.</p>
<p>#Preparation</p>
<ul>
<li>Personal Mac PC: MacOS Mojave version 10.14.6</li>
<li>docker version: Both Client and Server version 19.03.2</li>
</ul>
<p>Chapter overview
Understand the operation of MeCab and try tuning.
We will also check morphological analyzers other than MeCab.</p>
<p>#03.1 MeCab</p>
<h2 id="dictionary">dictionary</h2>
<p>Written by MeCab is based on a dictionary.
The information obtained from the morphological analysis using MeCab in the dictionary depends on what information is registered in the dictionary, and the registered information differs depending on the dictionary.</p>
<table>
<thead>
<tr>
<th>Dictionary name</th>
<th>Contents</th>
</tr>
</thead>
<tbody>
<tr>
<td>IPAdic</td>
<td>・Dictionaries officially recommended by MeCab<br>・Based on data called IPA corpus</td>
</tr>
<tr>
<td>UniDic</td>
<td>・UniDic based on data<br>・The unit to be divided is small and close to strict &ldquo;morphological analysis&rdquo;</td>
</tr>
<tr>
<td>jumandic</td>
<td>-MeCab transplant of MeCab, a dictionary used by JUMAN, which is different from MeCab <br>-Based on the data of Kyoto corpus<br>-Meta information such as representative notation is added</td>
</tr>
<tr>
<td>ipadic-NEologd</td>
<td>-The number of words is greatly expanded based on the IPA dictionary<br>-The vocabulary is expanded frequently by crawling words from the Internet, and the ability to respond to new words is very high <br>・** It is recommended to perform normalization as a preprocessing **</td>
</tr>
<tr>
<td>unidic-NEologd</td>
<td>-Like the ipadic-NEologd, a dictionary with word expansion based on UniDic</td>
</tr>
</tbody>
</table>
<h2 id="ipadic-install-and-run-neologd">ipadic-Install and run NEologd</h2>
<p>As a difference between IPAdic and ipadic-NEologd, for example, the analysis of the word &ldquo;Deep Learning&rdquo; (a relatively new word) is different.</p>
<ul>
<li>IPAdic: divided by &ldquo;Deep&rdquo; and &ldquo;Learning&rdquo;</li>
<li>ipadic-NEologd: Treated by 1 word of &ldquo;Deep Learning&rdquo;</li>
</ul>
<h2 id="mecab-morphological-analysis-operation">MeCab morphological analysis operation</h2>
<p>The dictionary holds not only information about morphemes such as execution results, but also various information below.</p>
<ul>
<li>Occurrence cost of each word</li>
<li>Left context ID for each word</li>
<li>Right context ID for each word</li>
<li>Concatenation cost for each context ID combination</li>
</ul>
<p>The analysis result is the combination that minimizes the combination of the occurrence cost and the connection cost for the given sentence. (In the example below, the cost of dividing &ldquo;I love Higashi Osaka&rdquo; is (minimum), so this is the analysis result.)</p>
<pre><code class="language-bash:" data-lang="bash:"># When splitting with &quot;I love Higashi Osaka&quot;
Concatenation cost between sentence head and “Higashi Osaka”
&quot;Higashi Osaka&quot; Occurrence Cost
Connection cost between &quot;Higashi Osaka&quot; and &quot;I love you&quot;
&quot;Love&quot; Occurrence Cost
&quot;I love you&quot; and the end of sentence connection cost

# When splitting with “I like Tokyo University, Osaka University”
Concatenation cost between sentence head and “Higashi Osaka”
The cost of &quot;Tokyo University&quot;
Connection cost between &quot;The University of Tokyo&quot; and &quot;Osaka University&quot;
Occurrence cost of &quot;Osaka University&quot;
Connection cost between &quot;Osaka Univ.&quot; and &quot;I like&quot;
&quot;Like&quot; occurrence cost
&quot;I love you&quot; and the end of sentence connection cost
</code></pre><h1 id="032-modify-mecab-dictionary">03.2 Modify MeCab dictionary</h1>
<p>If you don&rsquo;t get the results you expect from the existing dictionary, tune it yourself.</p>
<ul>
<li>Add new words</li>
<li>Adjustment of morphological analysis</li>
</ul>
<h2 id="build-mecab-dictionary">Build MeCab dictionary</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Convert source file encoding to UTF-8</span>
$ nkf --overwrite -Ew ./mecab-ipadic-2.7.0-20070801/*

<span style="color:#75715e"># Build dictionary</span>
$ mkdir build
$ <span style="color:#66d9ef">$(</span>mecab-config --libexecdir<span style="color:#66d9ef">)</span>/mecab-dict-index -d ./mecab-ipadic-2.7.0-20070801 -o build -f utf8 -t utf8
copy $ cp mecab-ipadic-2.7.0-20070801/dicrc ./build/. <span style="color:#75715e"># dicrc</span>
</code></pre></div><p>nkf is an abbreviation for &ldquo;Network Kanji Filter&rdquo;.</p>
<h1 id="add-new-words">Add new words</h1>
<pre><code class="language-bash:" data-lang="bash:">#Surface Form, Left Context ID, Right Context ID, Occurrence Cost, Part of Speech, Part of Speech Subclassification 1, Part of Speech Subclassification 2, Part of Speech Subclassification 3, Conjugate, Conjugate, Prototype, Yomi, Pronunciation

#If you want to add natural language processing
Natural language processing, 1288,1288,0, noun, proper noun, general, *,*,*, shigengengosori, shizengengoshori, shizengengoshori
</code></pre><h1 id="adjust-morphological-analysis">Adjust morphological analysis</h1>
<ol>
<li>Adjust the connection cost
2. Find the context ID of the target word from .csv
3. Modify the concatenation cost of the target context ID in matrix.def</li>
<li>Adjust the occurrence cost
3. Correct the occurrence cost of the target word in .csv</li>
</ol>
<p>However, be careful** when modifying the above cost, as it may affect the results other than the intended part.</p>
<p>There seems to be a method of automatically adjusting the cost, but it seems that there is a tendency that the impact range can be suppressed to a smaller extent by manually adjusting the cost of the part you want to correct **.</p>
<h1 id="033-various-morphological-analyzers">03.3 Various morphological analyzers</h1>
<p>Understand the outline of morphological analyzers other than MeCab.</p>
<table>
<thead>
<tr>
<th>Morphological analyzer</th>
<th>Contents</th>
</tr>
</thead>
<tbody>
<tr>
<td>MeCab</td>
<td>-Dictionary-based <br>-Dictionary contains information on words, occurrence costs, and concatenation costs-Both execution speed is fast-A dictionary is stored in an external file, so it is necessary Can be customized according to</td>
</tr>
<tr>
<td>JUMAN++</td>
<td>-Relatively new morphological analyzer using neural network<br>-Considering not only grammatical correctness but also word meaning<br>-Consideration of information of all words before a certain word <br>-Compatible with notational fluctuations <br>-Many advantages over MeCab, but slower execution speed</td>
</tr>
<tr>
<td>KyTea</td>
<td>-SVM predicts whether a certain character and the next character are word delimiters based on several characters before and after it.<br>- Python wrapper is provided by a third party.</td>
</tr>
<tr>
<td>Janome</td>
<td>· Written only in Python <br> · Built-in IPA dictionary and provided API that can be handled from Python <br> · Slow execution speed <br> · Limited choice of dictionaries Ru</td>
</tr>
<tr>
<td>SudachiPy</td>
<td>・ Morphological analysis for Java Sudachi Python bindings<br></td>
</tr>
<tr>
<td>Esanpy(Kuromoji)</td>
<td>・Kuromoji is a morphological analyzer implemented in Java.<br>・When used from Python, it passes through Esanpy.</td>
</tr>
</tbody>
</table>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-123456789-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
