<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] Practice! ! Introduction to Python types (Type Hints) | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] Practice! ! Introduction to Python types (Type Hints)</h1>
<p>
  <small class="text-secondary">
  
  
  May 24, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>

</p>
<pre><code>## Introduction
</code></pre>
<p>Are you using Python&rsquo;s Type Hints?
Since Python is a dynamically typed language, some may find it advantageous to be able to code without explicitly adding type information.
The opinion is correct, but I think it&rsquo;s also true that you can make the coding more bug-free by specifying the type explicitly.
This article covers introductory to intermediate types of Python types.
We hope you helped improve your Python skills.</p>
<h2 id="notes">Notes</h2>
<p>Python&rsquo;s static type analysis requires a library called mypy, but I will not explain how to use mypy or how to install it.</p>
<h2 id="step-1-basic-variable-type-immutable">Step 1: Basic variable type [Immutable]</h2>
<p>The way to write the variable type is as follows.</p>
<pre><code>&lt;variable name&gt;:&lt;type&gt;
&lt;variable name&gt;:&lt;type&gt; = &lt;initial value&gt;
</code></pre><p>The actual usage is as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test: int <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>
test2: bool <span style="color:#f92672">=</span> True
test3: str <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Hello&#39;</span>
test4: float <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.12</span>

test <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;hello&#39;</span> <span style="color:#75715e"># mypy error</span>
</code></pre></div><p>I have a variable called test defined as an int, but when I try to assign a string, an error occurs in mypy.
I get a **mypy error, but the code itself is fine to run. **</p>
<h2 id="step-2-basic-variable-type-mutable">Step 2: Basic variable type [mutable]</h2>
<p>Next, we will look at dictionary and array types.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test5: list <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
test6: dict <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;taro&#39;</span>}

test5 <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span> <span style="color:#75715e"># mypy error</span>
test6 <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Name&#39;</span> <span style="color:#75715e"># mypy error</span>
</code></pre></div><p>Since test5 is defined as an array and test6 is defined as a dictionary, if you try to assign any other value, a mypy error will occur.
The above type definitions are fine, but for arrays and dictionaries it is recommended to use typing List and Dict.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> List, Dict

test7: List[int] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>] can be narrowed down to the array of <span style="color:#75715e">#int</span>
test8: Dict[str, str] <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;taro&#39;</span>} <span style="color:#75715e"># dictionary keys and values can be narrowed to str only</span>
</code></pre></div><p>For test5 and test6, you can only define the type of whether it is an array or a dictionary.
However, in the case of test7 and test8, it is possible to specify more detailed types such as an int array, a dictionary where keys and values are str.
Basically, we recommend using this.</p>
<h2 id="step-3-allow-multiple-types">Step 3: Allow multiple types</h2>
<p>I think there are many situations where you want to allow int and str for a variable.
In that case, use Union.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> Union

test9: Union[int, str] <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span> Allow <span style="color:#75715e"># int and str</span>
test9 <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Name&#39;</span> <span style="color:#75715e"># OK</span>
test9 <span style="color:#f92672">=</span> bool <span style="color:#75715e"># mypy error</span>
</code></pre></div><p>I defined test9 as a variable that allows int and str, so when I try to assign the value of bool, I get a mypy error.</p>
<h2 id="step-4-function-type">Step 4: Function type</h2>
<h3 id="basic-form">basic form</h3>
<p>The basic form of the function type is as follows.</p>
<pre><code>def &lt;function name&gt; (&lt;variable name&gt;:&lt;type&gt;) -&gt; &lt;return type&gt;:
    ...
</code></pre><p>The actual usage is as follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(x: int, y: int) <span style="color:#f92672">-&gt;</span> int:
    <span style="color:#66d9ef">return</span> x <span style="color:#f92672">+</span> y
</code></pre></div><h3 id="tips-use-float-instead-of-unionintfloat-when-both-int-and-float-are-expected">[Tips] Use float instead of Union[int,float] when both int and float are expected</h3>
<p>Actually, even if you assign an int value or variable to a variable defined with float, mypy error does not occur.
You may define it with Union[int,float], but it is recommended that you define it with float because the code will be cleaner.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">If both <span style="color:#75715e">#int and float are expected in #variable, type them with float</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(x: float, y: float) <span style="color:#f92672">-&gt;</span> float:
    <span style="color:#66d9ef">return</span> x <span style="color:#f92672">+</span> y

a: int <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
add(a, <span style="color:#ae81ff">2</span>) <span style="color:#75715e"># OK</span>
</code></pre></div><h3 id="if-the-function-has-no-return-value">If the function has no return value</h3>
<p>It is often the case that there is no function return value.
In that case, set the return type as None.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">log_print</span>(number: int) <span style="color:#f92672">-&gt;</span> None:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;value is {}&#39;</span><span style="color:#f92672">.</span>format(number))

b <span style="color:#f92672">=</span> log_print(<span style="color:#ae81ff">12</span>) <span style="color:#75715e"># mypy error</span>
</code></pre></div><p>If you try to assign the return value of a function that has no return value to the variable b, you will get a mypy error.</p>
<h2 id="step-5-use-optional-to-allow-none">Step 5: Use Optional to allow None</h2>
<p>If you use the get method on a dictionary, it will return the corresponding value if the key exists in the dictionary, or None if the key does not exist.
In that case, you can define a type that accepts the value +None in Union, but using Optional allows you to write the code neatly.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> Optional

test10: Dict[str, str] <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;taro&#39;</span>}
test11: Optional[str] <span style="color:#f92672">=</span> test10<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;name&#39;</span>) <span style="color:#75715e"># str+None is allowed</span>
test11 <span style="color:#f92672">=</span> test10<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;age&#39;</span>) <span style="color:#75715e"># None returns</span>
</code></pre></div><p>In the above case, test11 can be defined as a type that accepts str and None.</p>
<h2 id="step-6-define-a-more-detailed-dictionary-type-typeddict">Step 6: Define a more detailed dictionary type [TypedDict]</h2>
<p>I think that the dictionary type is often used in coding.
I have already introduced that you can narrow down the types of keys and values using the typing Dict, but it is possible to narrow down further.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> TypedDict

Movie <span style="color:#f92672">=</span> TypedDict(<span style="color:#e6db74">&#39;Movie&#39;</span>, {<span style="color:#e6db74">&#39;name&#39;</span>: str,<span style="color:#e6db74">&#39;year&#39;</span>: int})

movie: Movie <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;Blade Runner&#39;</span>,<span style="color:#e6db74">&#39;year&#39;</span>: <span style="color:#ae81ff">1982</span>}
movie[<span style="color:#e6db74">&#39;age&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span> <span style="color:#75715e"># mypy error</span>
<span style="color:#66d9ef">print</span>(movie<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;author&#39;</span>)) <span style="color:#75715e"># mypy error</span>
</code></pre></div><p>By writing as above, it is possible to define the type that the type of Movie is the key value of name is str and the value of the year key is int.
If you try to add or reference data with a key that is of course not defined, you will get a mypy error.</p>
<ul>
<li>The above reference method <code>from typing import TypedDict</code> is valid only for Python 3.8 or later.
For earlier versions, use <code>from typing_extensions import TypedDict</code>.</li>
</ul>
<h2 id="step-7-class-type-definition">Step 7: Class type definition</h2>
<p>There&rsquo;s nothing more about classes than we&rsquo;ve seen so far.
It is possible to assign types to member variables and member functions.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> dataclasses <span style="color:#f92672">import</span> dataclass

<span style="color:#a6e22e">@dataclass</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span>:
    name: str
    student_number: str

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">print_information</span>(self) <span style="color:#f92672">-&gt;</span> None:
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Name: {}, Student Number: {}&#39;</span><span style="color:#f92672">.</span>format(self<span style="color:#f92672">.</span>name, self<span style="color:#f92672">.</span>student_number))


taro <span style="color:#f92672">=</span> Student(<span style="color:#e6db74">&#39;taro&#39;</span>, <span style="color:#e6db74">&#39;1234&#39;</span>)
taro<span style="color:#f92672">.</span>print_information()
<span style="color:#66d9ef">print</span>(taro<span style="color:#f92672">.</span>age) <span style="color:#75715e"># mypy error</span>
</code></pre></div><p>Regarding the above code, naturally there is no member variable called age defined in the Student class, so an error occurs.</p>
<h2 id="step-8-about-any">Step 8: About Any</h2>
<p>If you add Any, type consistency is ignored.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> Any

Can be defined <span style="color:#66d9ef">as</span> a variable that accepts any type by adding <span style="color:#75715e"># Any</span>
test12: Any <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;taro&#39;</span>,<span style="color:#e6db74">&#39;age&#39;</span>: <span style="color:#ae81ff">12</span>}
test12 <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Hello&#39;</span> <span style="color:#75715e"># No mypy Error</span>
</code></pre></div><p>Using Any not only allows you to assign any value to that variable, but it also causes various problems.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> Any
test13: int <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
test13 <span style="color:#f92672">=</span> test12 <span style="color:#75715e">#Any defined variable can be assigned to any variable</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">sub</span>(x: float, y: float) <span style="color:#f92672">-&gt;</span> float:
    <span style="color:#66d9ef">return</span> x<span style="color:#f92672">-</span>y

test14: Any <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Hello&#39;</span>
sub(test14, <span style="color:#ae81ff">12.1</span>) <span style="color:#75715e"># allows a string even though it shouldn&#39;t be</span>
</code></pre></div><p>If you define a variable with Any, the type check such as when using it as an argument of a function is ignored when assigning that variable to another variable.
Therefore, using Any is strictly prohibited because it may cause unexpected behavior.
I think it&rsquo;s better not to write a type definition than to use Any.</p>
<h2 id="bonus-type-alias">Bonus: Type alias</h2>
<p>It is possible to give an alias to a type though it is not used very often.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#Alias type</span>
UserData <span style="color:#f92672">=</span> Dict[str, Union[str, List[Dict[str, str]]]]

hanako: UserData <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#39;user-id&#39;</span>: <span style="color:#e6db74">&#39;1234&#39;</span>,
    <span style="color:#e6db74">&#39;belongings&#39;</span>: [{<span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#e6db74">&#39;12&#39;</span>,<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;PC&#39;</span>}, {<span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#e6db74">&#39;23&#39;</span>,<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;Tablet&#39;</span>}],
}
</code></pre></div><h2 id="finally">Finally</h2>
<p>This article covered basic to intermediate content.
Although there are more difficult contents besides the contents dealt with this time, I think that the contents dealt with this time are not enough for normal coding.
As for Python types, mypy&rsquo;s reference is easy to understand in detail, so I think you should refer to it.
<a href="https://mypy.readthedocs.io/en/latest/cheat_sheet_py3.html">mypy Type hints cheat sheet</a>
We hope that you can help us with your coding.
Then (<em>^▽^</em>)</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
