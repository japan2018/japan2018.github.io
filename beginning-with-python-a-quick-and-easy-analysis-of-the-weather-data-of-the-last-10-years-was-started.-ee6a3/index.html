<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>Beginning with Python, a quick and easy analysis of the weather data of the last 10 years was started. | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Beginning with Python, a quick and easy analysis of the weather data of the last 10 years was started.</h1>
<p>
  <small class="text-secondary">
  
  
  Dec 13, 2019
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/matplotlib">matplotlib</a></code></small>


<small><code><a href="https://memotut.com/tags/pandas">pandas</a></code></small>


<small><code><a href="https://memotut.com/tags/python3">Python3</a></code></small>


<small><code><a href="https://memotut.com/tags/googlecolaboratory">GoogleColaboratory</a></code></small>

</p>
<pre><code>#Introduction
</code></pre>
<p>I recently started studying Python. Since I&rsquo;m sorry, I&rsquo;d like to make a post that will be useful for those who are new to Python like me. Since I have never written Python, this time I would like to do a simple data analysis while understanding the syntax of python and what kind of library it has.</p>
<p>Reference book:
[Immediately usable! Can be practiced in work! How to create AI/machine learning/deep learning apps with Python](<a href="https://www.amazon.co.jp/%E3%81%99%E3%81%90%E3%81%AB%E4%BD%BF%E3%81%88%E3%82%8B-%E6%A5%AD%E5%8B%99%E3%81%A7%E5%AE%9F%E8%B7%B5%E3%81%A7%E3%81%8D%E3%82%8B-Python%E3%81%AB%E3%82%88%E3%82%8B-AI%E3%83%BB%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92%E3%83%BB%E6%B7%B1%E5%B1%A4%E5%AD%A6%E7%BF%92%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%81%A4%E3%81%8F%E3%82%8A%E6%96(%B9-%E3%82%AF%E3%82%B8%E3%83%A9%E9%A3%9B%E8%A1%8C%E6%9C%BA/dp/4802611641)">https://www.amazon.co.jp/%E3%81%99%E3%81%90%E3%81%AB%E4%BD%BF%E3%81%88%E3%82%8B-%E6%A5%AD%E5%8B%99%E3%81%A7%E5%AE%9F%E8%B7%B5%E3%81%A7%E3%81%8D%E3%82%8B-Python%E3%81%AB%E3%82%88%E3%82%8B-AI%E3%83%BB%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92%E3%83%BB%E6%B7%B1%E5%B1%A4%E5%AD%A6%E7%BF%92%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%81%A4%E3%81%8F%E3%82%8A%E6%96(%B9-%E3%82%AF%E3%82%B8%E3%83%A9%E9%A3%9B%E8%A1%8C%E6%9C%BA/dp/4802611641)</a></p>
<p>#Procedures &amp; preparation
<strong>Execution environment</strong>
Google Colaboratory</p>
<ul>
<li>You can access the python library without having to pip install the library.</li>
<li>It&rsquo;s free, and you can execute code immediately with a Google account, without having to worry about installation and other tasks.</li>
</ul>
<p>** Library to use **</p>
<ul>
<li>urllib</li>
<li>panda</li>
<li>matplotlib</li>
</ul>
<h1 id="implementation">Implementation</h1>
<p>First of all, prepare the data necessary for the analysis.</p>
<h3 id="data-preparation">Data preparation</h3>
<p>Download the dataset from the following URL to analyze the meteorological data. You can download it directly, but let&rsquo;s install it using the library called urllib.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">Access the function called urlretrieve <span style="color:#f92672">from</span> <span style="color:#75715e">#urllib</span>
<span style="color:#f92672">from</span> urllib.request <span style="color:#f92672">import</span> urlretrieve
Prepare a variable called <span style="color:#75715e"># filename. Name the file tempreture.csv</span>
filename <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tempreture.csv&#34;</span>
specify <span style="color:#75715e">#url</span>
url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://raw.githubusercontent.com/kujirahand/mlearn-sample/master/tenki2006-2016/kion10y.csv&#34;</span>
Load the <span style="color:#75715e">#url and save the data as a file named tempreture.csv described in the above line</span>
urlretrieve(url, filename)
</code></pre></div><h3 id="display-the-acquired-data-next">Display the acquired data next</h3>
<p>Pandas is a library for efficient data analysis in Python. Pandas makes it easy to perform data analysis tasks such as loading data, displaying statistics, and graphing.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">When importing <span style="color:#f92672">and</span> using <span style="color:#75715e">#pandas, it is common to write pd, so let&#39;s call it pd.</span>
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#75715e"># Use read_csv() to see the contents of the csv file we got earlier</span>
pd<span style="color:#f92672">.</span>read_csv(filename)
</code></pre></div><p>After running, I found that the data is 4018 rows x 6 columns.</p>
<img width="358" alt="Screenshots 2019-12-13 16.10.33.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/427895/e988d0a6-3527-9d62-d174-64cf954a8aa9.png">
<h3 id="check-the-average-temperature">Check the average temperature</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#75715e">#[Last 10 years data is made into a dictionary and easy to program]</span>

history <span style="color:#f92672">=</span> {}
<span style="color:#75715e"># Get index and data of each line. Same as enumurate function in other languages</span>
<span style="color:#66d9ef">for</span> i, row <span style="color:#f92672">in</span> df<span style="color:#f92672">.</span>iterrows():
  <span style="color:#75715e"># Substitute temperature for each day</span>
  month, day, tempreture <span style="color:#f92672">=</span> (int(row[<span style="color:#e6db74">&#39;month&#39;</span>]), int(row[<span style="color:#e6db74">&#39;day&#39;</span>]), float(row[<span style="color:#e6db74">&#39;temperature&#39;</span>]))
  Make the <span style="color:#75715e"># key something like &#34;12/25&#34;</span>
  key <span style="color:#f92672">=</span> str(month) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/&#34;</span> <span style="color:#f92672">+</span> str(day)
  <span style="color:#75715e"># Make judgment so that the same key does not overlap</span>
  <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span>(key <span style="color:#f92672">in</span> history): history[key] <span style="color:#f92672">=</span> []
  <span style="color:#75715e"># Add to history if not duplicate</span>
  history[key] <span style="color:#f92672">+=</span> [tempreture]

<span style="color:#75715e"># [Calculate average value]</span>

average <span style="color:#f92672">=</span> {}
<span style="color:#75715e"># loop history and get key</span>
<span style="color:#66d9ef">for</span> key <span style="color:#f92672">in</span> history:
  <span style="color:#75715e"># Add the calculated average value to key by linking it to the key</span>
  average[key] <span style="color:#f92672">=</span> sum(history[key]) <span style="color:#f92672">/</span> len(history[key])
  result <span style="color:#f92672">=</span> average[key]
  <span style="color:#75715e"># print(&#34;{0}: {1}&#34;.format(key, result))</span>
</code></pre></div><h3 id="check-the-average-temperature-on-a-certain-day">Check the average temperature on a certain day</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> math

<span style="color:#75715e"># type check function (to prevent accepting anything other than character strings)</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">isString</span>(date):
  <span style="color:#66d9ef">return</span> type(date) <span style="color:#f92672">is</span> str

<span style="color:#75715e">#Get average value of specified date from dictionary type average</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getTempreture</span>(date):
  <span style="color:#66d9ef">if</span> isString(date):
    <span style="color:#66d9ef">return</span> average[date]

tempreture <span style="color:#f92672">=</span> getTempreture(<span style="color:#e6db74">&#34;12/25&#34;</span>)
value <span style="color:#f92672">=</span> round(tempreture)
type conversion <span style="color:#f92672">from</span> <span style="color:#75715e">#int to string</span>
<span style="color:#66d9ef">print</span>(str(value)<span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;It is degree&#34;</span>)
</code></pre></div><h3 id="try-drawing">Try drawing</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Import matplotlib to draw the graph</span>
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt

<span style="color:#75715e">#Process to divide temperature data by month</span>
tempreture_per_month <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;month&#39;</span>])[<span style="color:#e6db74">&#39;temperature&#39;</span>]
<span style="color:#75715e"># Sum the divided temperature data for each month and divide it by the number of data for each month</span>
average_tempreture <span style="color:#f92672">=</span> tempreture_per_month<span style="color:#f92672">.</span>sum() <span style="color:#f92672">/</span> tempreture_per_month<span style="color:#f92672">.</span>count()
<span style="color:#75715e"># draw</span>
average_tempreture<span style="color:#f92672">.</span>plot()
</code></pre></div><p>I was able to draw.
<img width="411" alt="Screenshots 2019-12-13 16.31.31.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/427895/531dc0af-9be9-81a0-c9cf-579f6622faf5.png"></p>
<p>#Remarks</p>
<ul>
<li>It is recommended that beginners start with Google Colaboratory because it can save you the work of installation etc.</li>
<li>I was able to easily manipulate and draw data than I thought, and I learned the greatness of the python library</li>
</ul>
<p>I&rsquo;ve never touched python since it&rsquo;s my first time, so I don&rsquo;t know much about it yet, but I will continue to learn so that I can perform advanced analysis gradually.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
