<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] Draw a knot interactively with Plotly (Python) | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] Draw a knot interactively with Plotly (Python)</h1>
<p>
  <small class="text-secondary">
  
  
  Feb 7, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/math"> math</a></code></small>


<small><code><a href="https://memotut.com/tags/plotly"> plotly</a></code></small>


<small><code><a href="https://memotut.com/tags/interactive"> interactive</a></code></small>


<small><code><a href="https://memotut.com/tags/knot"> knot</a></code></small>

</p>
<pre><code>Draw a knot interactively with #Plotly (Python)
</code></pre>
<h2 id="1first-of-all">1.First of all</h2>
<p>This time, I will plot a knot in Plotly on a three-dimensional space. I hope it will help you with your learning.</p>
<p>You can do something like â†“.</p>
<p class="codepen" data-height="560" data-theme-id="light" data-default-tab="result" data-user="mitawaut" data-slug-hash="dyoyxKW" style= "height: 560px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title= "dyoyxKW">
  <span>See the Pen <a href="https://codepen.io/mitawaut/pen/dyoyxKW">
  dyoyxKW</a> by Sota Misawa (<a href="https://codepen.io/mitawaut">@mitawaut</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>
<p><a href="https://github.com/MitawaUT/knot_plot">Source (GitHub)</a></p>
<h2 id="2-review">2. Review</h2>
<p>Make a minimal review of how to draw the knot.</p>
<p><strong>Knot</strong> (knot) is $S^1$ embedded piecewise linearly in $S^3$. Since $S^3$ can be regarded as $\mathbb{R}^3\cup \{\infty \}$, if the embedded $S^1$ does not include $\infty$, then $\ You can think of it as $S^1$ embedded in mathbb{R}^3$.</p>
<p>A famous method of expressing a knot is a knot along the two-dimensional torus surface $\mathbb{T}^2$. Consider as a torus a closed surface defined by the following map:
$$\mathbb{T}^2 :[-\pi ,\pi]^2 \ni (\phi,\ \theta)\longmapsto \bigl(\cos \phi \ (3+\cos \theta),\ \sin \phi \ (3+\cos \theta),\ -\sin \theta \bigr)\in \mathbb{R}^3$$</p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/400446/c9657ff2-1fd2-78ac-9311-59f77eeec6b5.png" alt="torus.png"></p>
<p>With a closed curve on $\mathbb{T}^2$, using two pairs of integers $(n,\m)$ (expanding the domain of $\mathbb{T}^2$ appropriately),
$$
T(n,\ m) :[-\pi ,\pi]\ni t \longmapsto \mathbb{T}^2(nt,\ mt) \in \mathbb{R}^3$$</p>
<p>Consider what is represented as. This can be thought of as a knot. The following theorem is known for this.</p>
<p><strong>Theorem.</strong> For any nontrivial knot $K$ contained in $\mathbb{T}^2$, there exists a pair of disjoint integers $(n,\ m)$ and $K $ Is the same as $T(n,\ m)$.</p>
<p>From this theorem, we try to illustrate $T(n,\ m)$ as a knot expression. The figure of $T(2,\ 3)$ is shown below.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/400446/36873b92-4fb4-fa66-eb82-5c149082ebfc.png" alt="knot_on_torus.png"></p>
<p>##3. Implementation
5 minutes from here is the beginning of cooking. I recommend jupyter notebook because it uses ipywidgets.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text:requirements.txt" data-lang="text:requirements.txt">ipython==7.12.0
numpy==1.18.1
plotly==4.4.1
</code></pre></div><p>The goal is to allow ipywidgets to manipulate $n,\m$. First, import what you need.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#75715e"># import modules</span>
<span style="color:#f92672">import</span> plotly.offline <span style="color:#f92672">as</span> offline
<span style="color:#f92672">import</span> plotly.graph_objs <span style="color:#f92672">as</span> go
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">from</span> ipywidgets <span style="color:#f92672">import</span> interactive, VBox, widgets
<span style="color:#f92672">from</span> IPython.display <span style="color:#f92672">import</span> display

offline<span style="color:#f92672">.</span>init_notebook_mode(connected<span style="color:#f92672">=</span>True)
</code></pre></div><p>Next we also define $\mathbb{T}^2$ and $T(n,\m)$. Again, this is just a straightforward implementation of the above discussion.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># functions</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">torus</span>(p, t):
    x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>cos(p) <span style="color:#f92672">*</span> (<span style="color:#ae81ff">3</span> <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>cos(t))
    y <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>sin(p) <span style="color:#f92672">*</span> (<span style="color:#ae81ff">3</span> <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>cos(t))
    z <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>np<span style="color:#f92672">.</span>sin(t)
    <span style="color:#66d9ef">return</span> (x, y, z)

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">knot</span>(n, m):
    theta <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>linspace(<span style="color:#f92672">-</span>np<span style="color:#f92672">.</span>pi, np<span style="color:#f92672">.</span>pi, <span style="color:#ae81ff">1000</span>)
    p, t <span style="color:#f92672">=</span> n<span style="color:#f92672">*</span>theta, m<span style="color:#f92672">*</span>theta
    <span style="color:#66d9ef">return</span> torus(p, t)
</code></pre></div><p>Then just plot. The initial value is set to $(m,\ m) = (2,\ 3)$, and the slide bar range is set to $n$ :-10~10, $m$ :0~10.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>FigureWidget()
scatt <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_scatter3d()

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">update</span>(n<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, m<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>):
    <span style="color:#66d9ef">with</span> fig<span style="color:#f92672">.</span>batch_update():
        (cx, cy, cz) <span style="color:#f92672">=</span> knot(n, m)
        scatt<span style="color:#f92672">.</span>data[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>x<span style="color:#f92672">=</span>cx
        scatt<span style="color:#f92672">.</span>data[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>y<span style="color:#f92672">=</span>cy
        scatt<span style="color:#f92672">.</span>data[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>z<span style="color:#f92672">=</span>cz
        scatt<span style="color:#f92672">.</span>data[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lines&#39;</span>
        scatt<span style="color:#f92672">.</span>data[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>line<span style="color:#f92672">=</span>dict(
                    width<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>,
                    color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;green&#39;</span>)

vb <span style="color:#f92672">=</span> VBox((fig, interactive(update, n<span style="color:#f92672">=</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">1</span>), m<span style="color:#f92672">=</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">1</span>))))
display(vb)
</code></pre></div><p>If the following message is displayed and the knot changes as you mess with the slide bar, you are successful.
<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/400446/4f7bb030-e4b5-17a2-d62b-d91ef2952460.png" alt="knot_2_3.png"></p>
<h2 id="4-finally">4. Finally</h2>
<p>If you don&rsquo;t see it, check the version around ipython. ~~ I thought that it was awkward that the first post was a few minutes of quality, so I created an extra section such as review ~ ~</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
