<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://memotut.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://memotut.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://memotut.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://memotut.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://memotut.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://memotut.com/css/bootstrap.min.css" />

  
  <title>[Python] [Python] I tried Poetry for the first time &amp; I was moved from Pipenv to poetry | Memo Tut</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>[Python] [Python] I tried Poetry for the first time &amp; I was moved from Pipenv to poetry</h1>
<p>
  <small class="text-secondary">
  
  
  Jan 17, 2020
  </small>
  

<small><code><a href="https://memotut.com/tags/python">Python</a></code></small>


<small><code><a href="https://memotut.com/tags/poetry">Poetry</a></code></small>

</p>
<pre><code>## Motivation
</code></pre>
<p>I recently tried poetry because the installation of pipenv is quite slow.
I will summarize what I found after trying it all the way through. I&rsquo;m using Pipenv, so compare it with that.
Please refer to <a href="https://python-poetry.org/docs/">Official Doc</a>,becauseIdon&rsquo;tdescribethepackagerelatedcommands(build,publish&hellip;) or detailed functions.</p>
<h2 id="about-poetry">About Poetry</h2>
<p>Poetry is a Python package management tool. Like Pipenv, it resolves dependencies and installs and uninstalls packages,
The poetry.lock file allows other users to install the package with the right version and dependencies.
A virtual environment can be used and packaging is possible.</p>
<h2 id="environment">Environment</h2>
<ul>
<li>CentOS 7.6.1810</li>
<li>pyenv 1.2.14-8-g0e7cfc3b</li>
<li>poetry 1.0.2</li>
</ul>
<p>Python uses the one installed with pyenv.</p>
<ul>
<li>Python 3.7.4 (pyenv global)</li>
</ul>
<h2 id="introduction">Introduction</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python
</code></pre></div><p>PATH is entered in <code>~./bash_profile</code> and poetry starts up.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry -V
Poetry version 1.0.2
</code></pre></div><h2 id="poetry-settings">Poetry settings</h2>
<ul>
<li>PIPENV_VENV_IN_PROJECT</li>
</ul>
<p>In case of pipenv, environment variable was used to set the <code>.venv</code> folder in the project.</p>
<pre><code class="language-bash:Pipenv" data-lang="bash:Pipenv">$ export PIPENV_VENV_IN_PROJECT=1
$ pipenv install...
</code></pre><p>In case of poetry, configure from <code>poetry config</code>.
You can check the current settings with the <code>--list</code> option. By default <code>virtualenvs.in-project=false</code>.</p>
<pre><code class="language-bash:poetry" data-lang="bash:poetry">$ poetry config --list
cache-dir = &quot;/home/user/.cache/pypoetry&quot;
virtualenvs.create = true
virtualenvs.in-project = false
virtualenvs.path = &quot;{cache-dir}/virtualenvs&quot; # /home/user/.cache/pypoetry/virtualenvs
</code></pre><p>Change settings.</p>
<pre><code class="language-bash:" data-lang="bash:">$ poetry config virtualenvs.in-project true
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry config --list
cache-dir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/home/user/.cache/pypoetry&#34;</span>
virtualenvs.create <span style="color:#f92672">=</span> true
virtualenvs.in-project <span style="color:#f92672">=</span> true
virtualenvs.path <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;{cache-dir}/virtualenvs&#34;</span> <span style="color:#75715e"># /home/user/.cache/pypoetry/virtualenvs</span>
</code></pre></div><h2 id="project-start">Project start</h2>
<h3 id="generate-template">Generate template</h3>
<p>Start the project with <code>poetry new</code> and a template will be generated.
The following is <a href="https://python-poetry.org/docs/cli/#new">official Doc</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry new my-package
Created package my_package in my-package
</code></pre></div><pre><code class="language-bash:" data-lang="bash:">my-package
├── pyproject.toml
├── README.rst
├── my_package
│ └── __init__.py
└── tests
    ├── __init__.py
    └── test_my_package.py
</code></pre><p>The generated <code>pyproject.toml</code> is as follows. It seems that pytest is automatically included in dev-dependencies.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml:pyproject.toml" data-lang="toml:pyproject.toml">[<span style="color:#a6e22e">tool</span>.<span style="color:#a6e22e">poetry</span>]
<span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;my-package&#34;</span>
<span style="color:#a6e22e">version</span> = <span style="color:#e6db74">&#34;0.1.0&#34;</span>
<span style="color:#a6e22e">description</span> = <span style="color:#e6db74">&#34;&#34;</span>
<span style="color:#a6e22e">authors</span> = [<span style="color:#e6db74">&#34;Your Name &lt;you@example.com&gt;&#34;</span>]

[<span style="color:#a6e22e">tool</span>.<span style="color:#a6e22e">poetry</span>.<span style="color:#a6e22e">dependencies</span>]
<span style="color:#a6e22e">python</span> = <span style="color:#e6db74">&#34;^3.7&#34;</span>

[<span style="color:#a6e22e">tool</span>.<span style="color:#a6e22e">poetry</span>.<span style="color:#a6e22e">dev</span><span style="color:#960050;background-color:#1e0010">-</span><span style="color:#a6e22e">dependencies</span>]
<span style="color:#a6e22e">pytest</span> = <span style="color:#e6db74">&#34;^5.2&#34;</span>

[<span style="color:#a6e22e">build</span><span style="color:#960050;background-color:#1e0010">-</span><span style="color:#a6e22e">system</span>]
<span style="color:#a6e22e">requires</span> = [<span style="color:#e6db74">&#34;poetry&gt;=0.12&#34;</span>]
<span style="color:#a6e22e">build</span><span style="color:#960050;background-color:#1e0010">-</span><span style="color:#a6e22e">backend</span> = <span style="color:#e6db74">&#34;poetry.masonry.api&#34;</span>
</code></pre></div><p>However, it is difficult to use my_package directory in my-package. You can change the directory name in the package with the <code>--name</code> option.</p>
<ul>
<li><code>--name</code> option</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry new my-package --name app
Created package app in my-package
</code></pre></div><pre><code class="language-bash:" data-lang="bash:">my-package
├── pyproject.toml
├── README.rst
├── app
│ └── __init__.py
└── tests
    ├── __init__.py
    └── test_my_package.py
</code></pre><ul>
<li><code>--src</code> option</li>
</ul>
<p>It seems that there is also a <code>--src</code> option, but it seems to be extra complicated and should not be used.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry new --src my-package
</code></pre></div><pre><code class="language-bash:" data-lang="bash:">├── pyproject.toml
├── README.rst
├── src
│ └── my_package
│ └── __init__.py
└── tests
    ├── __init__.py
    └── test_my_package.py
</code></pre><h3 id="generate-pyprojecttoml">Generate <code>pyproject.toml</code></h3>
<p>If you don&rsquo;t need a template, you can create only <code>pyproject.toml</code> with <code>poetry init</code>.
Interactively determine the contents of <code>pyproject.toml</code> like <code>npm init</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry init

Package name <span style="color:#f92672">[{</span>folder_name<span style="color:#f92672">}]</span>:
Version <span style="color:#f92672">[</span>0.1.0<span style="color:#f92672">]</span>:
Description <span style="color:#f92672">[]</span>:
Author <span style="color:#f92672">[</span>None, n to skip<span style="color:#f92672">]</span>: n
License <span style="color:#f92672">[]</span>:
Compatible Python versions <span style="color:#f92672">[</span>^3.7<span style="color:#f92672">]</span>:

Would you like to define your main dependencies interactively? <span style="color:#f92672">(</span>yes/no<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>yes<span style="color:#f92672">]</span> no
Would you like to define your dev dependencies <span style="color:#f92672">(</span>require-dev<span style="color:#f92672">)</span> interactively <span style="color:#f92672">(</span>yes/no<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>yes<span style="color:#f92672">]</span> no
Generated file

<span style="color:#f92672">[</span>tool.poetry<span style="color:#f92672">]</span>
name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;new_ais&#34;</span>
version <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0.1.0&#34;</span>
description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
authors <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;Your Name &lt;you@example.com&gt;&#34;</span><span style="color:#f92672">]</span>

<span style="color:#f92672">[</span>tool.poetry.dependencies<span style="color:#f92672">]</span>
python <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;^3.7&#34;</span>

<span style="color:#f92672">[</span>tool.poetry.dev-dependencies<span style="color:#f92672">]</span>

<span style="color:#f92672">[</span>build-system<span style="color:#f92672">]</span>
requires <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;poetry&gt;=0.12&#34;</span><span style="color:#f92672">]</span>
build-backend <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;poetry.masonry.api&#34;</span>

Do you confirm generation? <span style="color:#f92672">(</span>yes/no<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>yes<span style="color:#f92672">]</span> yes
</code></pre></div><p>If you do not enter anything for the package name, it becomes the folder name there. Enter y/n for Author and dependencies. This will create <code>pyproject.toml</code> in the current directory.</p>
<p>If you use it like Pipenv, it seems easier to start with init.</p>
<h2 id="install">install</h2>
<p><code>poetry install</code> resolves dependencies from <code>pyproject.toml</code> created above and installs required packages as well as <code>pipenv install</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry new myapp
$ cd myapp
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry install
reating virtualenv myapp in /home/user/workspace/poetry/myapp/.venv
Updating dependencies
Resolving dependencies... <span style="color:#f92672">(</span>0.5s<span style="color:#f92672">)</span>

Writing lock file

Package operations: <span style="color:#ae81ff">11</span> installs, <span style="color:#ae81ff">0</span> updates, <span style="color:#ae81ff">0</span> removals

  -Installing more-itertools <span style="color:#f92672">(</span>8.1.0<span style="color:#f92672">)</span>
  -Installing zipp <span style="color:#f92672">(</span>1.0.0<span style="color:#f92672">)</span>
  -Installing importlib-metadata <span style="color:#f92672">(</span>1.4.0<span style="color:#f92672">)</span>
  -Installing pyparsing <span style="color:#f92672">(</span>2.4.6<span style="color:#f92672">)</span>
  -Installing six <span style="color:#f92672">(</span>1.14.0<span style="color:#f92672">)</span>
  -Installing attrs <span style="color:#f92672">(</span>19.3.0<span style="color:#f92672">)</span>
  -Installing packaging <span style="color:#f92672">(</span>20.0<span style="color:#f92672">)</span>
  -Installing pluggy <span style="color:#f92672">(</span>0.13.1<span style="color:#f92672">)</span>
  -Installing py <span style="color:#f92672">(</span>1.8.1<span style="color:#f92672">)</span>
  -Installing wcwidth <span style="color:#f92672">(</span>0.1.8<span style="color:#f92672">)</span>
  -Installing pytest <span style="color:#f92672">(</span>5.3.2<span style="color:#f92672">)</span>
  -Installing myapp <span style="color:#f92672">(</span>0.1.0<span style="color:#f92672">)</span>
</code></pre></div><p>When you do install, a <code>poetry.lock</code> file is created and you can see the dependencies.</p>
<ul>
<li>
<p><code>--no-root</code> option</p>
<p>poetry installs myapp by default. To avoid this, install with the <code>--no-root</code> option.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry install --no-root
</code></pre></div></li>
<li>
<p><code>--no-dev</code> option</p>
<p>If you don&rsquo;t install dev-dependencies, you can use <code>--no-dev</code> option.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry install --no-dev
</code></pre></div></li>
</ul>
<h2 id="add">add</h2>
<p>Install the package. Note that unlike Pipenv, it is add.
Locking is faster than pipenv.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry add django<span style="color:#f92672">==</span>2.2.8
</code></pre></div><p>For dev-dependencies, the <code>--dev(-D)</code> option.</p>
<pre><code class="language-bash$" data-lang="bash$"></code></pre><p>If you use the <code>--dry-run</code> option, you can see what will be installed without installing.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry add django --dry-run
Using version ^3.0.2 <span style="color:#66d9ef">for</span> django

Updating dependencies
Resolving dependencies... <span style="color:#f92672">(</span>0.4s<span style="color:#f92672">)</span>

Package operations: <span style="color:#ae81ff">4</span> installs, <span style="color:#ae81ff">0</span> updates, <span style="color:#ae81ff">0</span> removals, <span style="color:#ae81ff">13</span> skipped

  -Skipping more-itertools <span style="color:#f92672">(</span>8.1.0<span style="color:#f92672">)</span> Already installed
  -Skipping zipp <span style="color:#f92672">(</span>1.0.0<span style="color:#f92672">)</span> Already installed
  -Skipping importlib-metadata <span style="color:#f92672">(</span>1.4.0<span style="color:#f92672">)</span> Already installed
  -Skipping pyparsing <span style="color:#f92672">(</span>2.4.6<span style="color:#f92672">)</span> Already installed
  -...
</code></pre></div><h2 id="update">update</h2>
<p>When updating a package installed in a project</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry update
</code></pre></div><p>Update individually</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry update requests django
</code></pre></div><p>As with add, you can see the contents of the update with the <code>--dry-run</code> option.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry update --dry-run
Updating dependencies
Resolving dependencies... <span style="color:#f92672">(</span>0.4s<span style="color:#f92672">)</span>

No dependencies to install or update

  -Skipping more-itertools <span style="color:#f92672">(</span>8.1.0<span style="color:#f92672">)</span> Already installed
  -Skipping zipp <span style="color:#f92672">(</span>1.0.0<span style="color:#f92672">)</span> Already installed
  -Skipping importlib-metadata <span style="color:#f92672">(</span>1.4.0<span style="color:#f92672">)</span> Already installed
  -Skipping pyparsing <span style="color:#f92672">(</span>2.4.6<span style="color:#f92672">)</span> Already installed
  -Skipping six <span style="color:#f92672">(</span>1.14.0<span style="color:#f92672">)</span> Already installed
  -Skipping atomicwrites <span style="color:#f92672">(</span>1.3.0<span style="color:#f92672">)</span> Not needed <span style="color:#66d9ef">for</span> the current environment
  -...
</code></pre></div><h2 id="remove">remove</h2>
<p>Remove installed packages.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry remove flask
</code></pre></div><p>Note that the package installed in dev-dependencies needs the <code>--dev(-D)</code> option.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry add flake8 -D

$ poetry remove flake8 <span style="color:#75715e"># failed</span>
<span style="color:#f92672">[</span>ValueError<span style="color:#f92672">]</span>
Package flake8 not found

$ poetry remove flake8 -D <span style="color:#75715e"># OK</span>
</code></pre></div><p>You can also use the <code>--dry-run</code> option with remove.</p>
<h2 id="show">show</h2>
<p>List available packages.
Features like an enhanced version of <code>pip list</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry show
asgiref 3.2.3 ASGI specs, helper code, and ada...
attrs 19.3.0 Classes Without Boilerplate
django 3.0.2 A high-level Python Web framewor...
entrypoints 0.3 Discover and load entry points f...
flake8 3.7.9 the modular source code checker:...
importlib-metadata 1.4.0 Read metadata from Python packages
mccabe 0.6.1 McCabe checker, plugin <span style="color:#66d9ef">for</span> flake8
more-itertools 8.1.0 More routines <span style="color:#66d9ef">for</span> operating on i...
packaging 20.0 Core utilities <span style="color:#66d9ef">for</span> Python packages
pluggy 0.13.1 plugin and hook calling mechanis...
...
</code></pre></div><p>You can also display information about packages.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry show django
name: django
version: 3.0.2
description: A high-level Python Web framework that
            encourages rapid development and clean, pragmatic
            design.

dependencies
 -asgiref &gt;<span style="color:#f92672">=</span>3.2,&lt;4.0
 -pytz *
 -sqlparse &gt;<span style="color:#f92672">=</span>0.2.2
</code></pre></div><ul>
<li>
<p><code>--tree</code> option</p>
<p>You can view the dependencies in a tree structure. A function similar to <code>pipenv graph</code>. Actually, it is easy to see because it is colored output.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry show --tree
django 3.0.2 A high-level Python Web framework that encourages rapid development and clean, pragmatic design.
├── asgiref &gt;<span style="color:#f92672">=</span>3.2,&lt;4.0
├── pytz *
└── sqlparse &gt;<span style="color:#f92672">=</span>0.2.2
flake8 3.7.9 the modular source code checker: pep8, pyflakes and co
├── entrypoints &gt;<span style="color:#f92672">=</span>0.3.0,&lt;0.4.0
├── mccabe &gt;<span style="color:#f92672">=</span>0.6.0,&lt;0.7.0
├── pycodestyle &gt;<span style="color:#f92672">=</span>2.5.0,&lt;2.6.0
└── pyflakes &gt;<span style="color:#f92672">=</span>2.1.0,&lt;2.2.0
...
</code></pre></div></li>
<li>
<p><code>--latest(-l)</code> option</p>
<p>Show latest version.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry show --latest
asgiref 3.2.3 3.2.3 ASGI specs, helper code, a...
attrs 19.3.0 19.3.0 Classes Without Boilerplate
django 3.0.2 3.0.2 A high-level Python Web fr...
entrypoints 0.3 0.3 Discover and load entry po...
flake8 3.7.9 3.7.9 the modular source code ch...
importlib-metadata 1.4.0 1.4.0 Read metadata from Python ...
</code></pre></div></li>
<li>
<p><code>--outdated(-o)</code> option</p>
<p>View old versions of packages.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry show -o
django 2.2.4 3.0.2 A high-level Python Web framework that e...
</code></pre></div></li>
</ul>
<h2 id="lock">lock</h2>
<p>Lock the dependency specified in <code>pyproject.toml</code>. (Do not install)
<code>poetry.lock</code> is generated.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry lock
</code></pre></div><h2 id="env">env</h2>
<p>Virtual environment related commands. 3.7.4 etc. should be specified in the [python] part.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry env info <span style="color:#75715e"># Information about the current virtual environment</span>
$ poetry env list <span style="color:#75715e"># Virtual environment list</span>
$ poetry env remove &lt;python&gt; <span style="color:#75715e"># remove virtual environment</span>
$ poetry env use &lt;python&gt; <span style="color:#75715e"># activate or create virtual environment</span>
</code></pre></div><p>In my environment, when <code>virtualenvs.in-project=true</code>, it was not displayed in list and remove did not work either.
It&rsquo;s a good idea to delete .venv/.</p>
<h2 id="shell">shell</h2>
<p>Launch a shell in the virtual environment. Equivalent to <code>pipenv shell</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry shell
</code></pre></div><h2 id="scripts">scripts</h2>
<p>You can execute the script by writing the following in <code>pyproject.toml</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml:pyproject.toml" data-lang="toml:pyproject.toml">[<span style="color:#a6e22e">tool</span>.<span style="color:#a6e22e">poetry</span>.<span style="color:#a6e22e">scripts</span>]
<span style="color:#a6e22e">start</span> = <span style="color:#e6db74">&#34;script:main&#34;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:script.py" data-lang="python:script.py"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Run script with poetry!&#34;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ poetry run start
Run script with poetry!
</code></pre></div><p>Even if you do not enter the virtual environment, if you execute it from the script, it will be executed in the virtual environment.</p>
<h4 id="argument-handling">argument handling</h4>
<p>As far as I can see the [scripts execution code] of poetry (<a href="https://github.com/python-poetry/poetry/blob/master/poetry/console/commands/run.py),">https://github.com/python-poetry/poetry/blob/master/poetry/console/commands/run.py),</a> it seems that arguments cannot be passed.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python:poetry/console/commands/run.py" data-lang="python:poetry/console/commands/run.py">    <span style="color:#75715e"># poetry script execution code</span>
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">run_script</span>(self, script, args):
        <span style="color:#66d9ef">if</span> isinstance(script, dict):
            script <span style="color:#f92672">=</span> script[<span style="color:#e6db74">&#34;callable&#34;</span>]

        module, callable_ <span style="color:#f92672">=</span> script<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#34;:&#34;</span>)

        src_in_sys_path <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;sys.path.append(&#39;src&#39;); &#34;</span><span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>_module<span style="color:#f92672">.</span>is_in_src() <span style="color:#66d9ef">else</span> <span style="color:#e6db74">&#34;&#34;</span>

        cmd <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;python&#34;</span>, <span style="color:#e6db74">&#34;-c&#34;</span>]

        cmd <span style="color:#f92672">+=</span> [
            <span style="color:#e6db74">&#34;import sys; &#34;</span>
            <span style="color:#e6db74">&#34;from importlib import import_module; &#34;</span>
            <span style="color:#e6db74">&#34;sys.argv = {!r}; {}&#34;&#34;import_module(&#39;{}&#39;).{}()&#34;</span><span style="color:#f92672">.</span>format(args, src_in_sys_path, module, callable_) <span style="color:#75715e"># execute</span>
        ]

        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>env<span style="color:#f92672">.</span>execute(<span style="color:#f92672">*</span>cmd)
</code></pre></div><p>With the above script settings, since <code>import_module('script').main()</code> is executed, there is no part to pass the argument in the first place.
Pipenv often registered <code>start = &quot;python manage.py runserver 0.0.0.0:8000&quot;</code>, so I was in trouble.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml:pyproject.toml" data-lang="toml:pyproject.toml">[<span style="color:#a6e22e">tool</span>.<span style="color:#a6e22e">poetry</span>.<span style="color:#a6e22e">scripts</span>]
<span style="color:#a6e22e">start</span> = <span style="color:#e6db74">&#34;manage:main&#34;</span>
</code></pre></div><p>Then, if you set <code>poetry run start runserver 0.0.0.0:8000</code>, it will work. .. ..</p>
<h2 id="remarks">Remarks</h2>
<ul>
<li>
<p>Good (compared to pipenv)
install, add, remove, lock is faster (important) than Pipenv, and it is good because the display on the console is easy to see.
The functions equivalent to <code>pip list</code> and <code>pipenv graph</code> are fairly easy to see.</p>
</li>
<li>
<p>Perfect (compared to pipenv)
Cooperation with venv. It is as easy to use as Pipenv.
(I am worried about the operation at the time of venv in project)
It seems that there is no function that you can pyenv install from pipenv, but it is okay because it is not such a frequently used one.</p>
</li>
<li>
<p>Bad (compared to pipenv)
After all it is the script part. There were a lot of issues, so I&rsquo;m awaiting improvement.
I feel that there are many options. Just remember.</p>
</li>
</ul>
<p>Based on the above points, it seems that you will continue to use poetry.
If you want to say luxury, you should know whether it is dev with <code>poetry show</code>.</p>
<h2 id="reference">Reference</h2>
<ul>
<li>Poetry-Python dependency management and packaging made easy
<a href="https://python-poetry.org/docs/">https://python-poetry.org/docs/</a></li>
</ul>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-169005401-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
