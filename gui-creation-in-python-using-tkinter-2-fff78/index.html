<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.72.0" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://japan2018.github.io/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://japan2018.github.io/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://japan2018.github.io/favicon-16x16.png">

  
  <link rel="manifest" href="https://japan2018.github.io/site.webmanifest">

  
  <link rel="mask-icon" href="https://japan2018.github.io/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://japan2018.github.io/css/bootstrap.min.css" />

  
  <title>GUI creation in python using tkinter 2 | Some Title</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Posts</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    
    <a href="/index.xml">RSS</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>GUI creation in python using tkinter 2</h1>
<p>
  <small class="text-secondary">
  
  
  Feb 9, 2020
  </small>
  

<small><code><a href="https://japan2018.github.io/tags/python">Python</a></code></small>


<small><code><a href="https://japan2018.github.io/tags/tkinter">Tkinter</a></code></small>

</p>
<pre><code>## Overview
</code></pre>
<p><a href="https://qiita.com/snowp/items/1c15533038b8c4d2447c">Continued from last time</a>
Last time I confirmed that the application started up for the time being, but I tried adding various missing parts such as prevention of double startup</p>
<h2 id="things-necessary">Things necessary</h2>
<ul>
<li>python 3.7.2</li>
<li>pandas</li>
<li>numpy</li>
</ul>
<h2 id="location">Location</h2>
<p>It is available on github.
<a href="https://github.com/snowpff14/etcresource/tree/master/pythonGui">https://github.com/snowpff14/etcresource/tree/master/pythonGui</a></p>
<h2 id="processing-content">Processing content</h2>
<p>See <a href="https://qiita.com/snowp/items/1c15533038b8c4d2447c">previous</a> for the rough part.</p>
<ul>
<li>I called a thread to move the process, but it was in a state where I could call it many times because there was no lock. So, this time, I&rsquo;m trying to get a lock and give a message if I can&rsquo;t get it.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">doExecute</span>(self):
        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>lock<span style="color:#f92672">.</span>acquire(blocking<span style="color:#f92672">=</span>FALSE):
            <span style="color:#66d9ef">if</span> messagebox<span style="color:#f92672">.</span>askokcancel(<span style="color:#e6db74">&#39;Pre-execution confirmation&#39;</span>,<span style="color:#e6db74">&#39;Do you want to execute the process?&#39;</span>):
                self<span style="color:#f92672">.</span>progressValue<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
                self<span style="color:#f92672">.</span>progressStatusBar<span style="color:#f92672">.</span>configure(value<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>progressValue)
                self<span style="color:#f92672">.</span>progressBar<span style="color:#f92672">.</span>configure(maximum<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>,value<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
                self<span style="color:#f92672">.</span>progressBar<span style="color:#f92672">.</span>start(<span style="color:#ae81ff">100</span>)
                th <span style="color:#f92672">=</span> threading<span style="color:#f92672">.</span>Thread(target<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>_executer)
                th<span style="color:#f92672">.</span>start()
            <span style="color:#66d9ef">else</span>:
                self<span style="color:#f92672">.</span>lock<span style="color:#f92672">.</span>release()
        <span style="color:#66d9ef">else</span>:
            messagebox<span style="color:#f92672">.</span>showwarning(<span style="color:#e6db74">&#39;Error&#39;</span>,<span style="color:#e6db74">&#39;Processing in progress&#39;</span>)

</code></pre></div><ul>
<li>It is set in bold and in red on a white background to make it stand out when displaying the processing status on a label.
The place called <code>PL.TLabel</code> is an item that can be set arbitrarily. This is specified when defining the label in the latter stage.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">        labelStyle<span style="color:#f92672">=</span>ttk<span style="color:#f92672">.</span>Style()
        labelStyle<span style="color:#f92672">.</span>configure(<span style="color:#e6db74">&#39;PL.TLabel&#39;</span>,font<span style="color:#f92672">=</span>(<span style="color:#e6db74">&#39;Helvetica&#39;</span>,<span style="color:#ae81ff">10</span>,<span style="color:#e6db74">&#39;bold&#39;</span>),background<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;white&#39;</span>,foreground<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;red&#39;</span>)
        self<span style="color:#f92672">.</span>progressMsgBox<span style="color:#f92672">=</span>ttk<span style="color:#f92672">.</span>Label(content,textvariable<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>progressMsg,width<span style="color:#f92672">=</span><span style="color:#ae81ff">70</span>,style<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;PL.TLabel&#39;</span>)
        self<span style="color:#f92672">.</span>progressMsg<span style="color:#f92672">.</span>set(<span style="color:#e6db74">&#39;waiting for processing&#39;</span>)
</code></pre></div><ul>
<li>The message is changed on the way to show the progress of the process and the progress bar is advanced. This time, there is not much change because it is before and after the screen operation is started, but if there are multiple steps, you can see the state of the screen by updating each time.
The following receives the message and progress displayed by the caller.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">progressSequence</span>(self,msg,sequenceValue<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>):
        self<span style="color:#f92672">.</span>progressMsg<span style="color:#f92672">.</span>set(msg)
        self<span style="color:#f92672">.</span>progressValue<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>progressValue<span style="color:#f92672">+</span>sequenceValue
        self<span style="color:#f92672">.</span>progressStatusBar<span style="color:#f92672">.</span>configure(value<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>progressValue)

</code></pre></div><ul>
<li>You can call the process by calling the <code>after</code> method of the screen element as shown below. The display area is updated by <code>root.update_idletasks()</code> in order to change the screen after executing the process.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">        self<span style="color:#f92672">.</span>progressMsgBox<span style="color:#f92672">.</span>after(<span style="color:#ae81ff">10</span>,self<span style="color:#f92672">.</span>progressSequence(<span style="color:#e6db74">&#39;Processing in progress&#39;</span>, sequenceValue<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>))
        root<span style="color:#f92672">.</span>update_idletasks()

</code></pre></div><ul>
<li>Progress bar is specified when creating screen element
<ul>
<li><code>indeterminate</code> is a bar that is always moving to indicate that the process is moving</li>
<li><code>determinate</code> is used to show how much progress has been made in the overall progress.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">        self<span style="color:#f92672">.</span>progressBar<span style="color:#f92672">=</span>ttk<span style="color:#f92672">.</span>Progressbar(content,orient<span style="color:#f92672">=</span>HORIZONTAL,length<span style="color:#f92672">=</span><span style="color:#ae81ff">140</span>,mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;indeterminate&#39;</span>)
        self<span style="color:#f92672">.</span>progressBar<span style="color:#f92672">.</span>configure(maximum<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>,value<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)

        self<span style="color:#f92672">.</span>progressStatusBar<span style="color:#f92672">=</span>ttk<span style="color:#f92672">.</span>Progressbar(content,orient<span style="color:#f92672">=</span>HORIZONTAL,length<span style="color:#f92672">=</span><span style="color:#ae81ff">140</span>,mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;determinate&#39;</span>)
</code></pre></div><ul>
<li>In case of <code>determinate</code> progress bar, set value to <code>value</code> and proceed accordingly (maximum value 100 and set according to the situation)</li>
<li>The <code>indeterminate</code> progress bar starts with <code>start</code> and stops with <code>stop</code></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">                self<span style="color:#f92672">.</span>progressValue<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
                self<span style="color:#f92672">.</span>progressStatusBar<span style="color:#f92672">.</span>configure(value<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>progressValue)
                self<span style="color:#f92672">.</span>progressBar<span style="color:#f92672">.</span>configure(maximum<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>,value<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
                self<span style="color:#f92672">.</span>progressBar<span style="color:#f92672">.</span>start(<span style="color:#ae81ff">100</span>)
</code></pre></div><ul>
<li>If you want to pass an argument to the function set in the button, pass it by lambda or use partial.
The following uses partial so you can pass arguments before launching.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">preparation</span>(self,logfilename):
        self<span style="color:#f92672">.</span>_executer<span style="color:#f92672">=</span>partial(self<span style="color:#f92672">.</span>execute,logfilename)

</code></pre></div><p>For the time being this time.
If you can do something a little more, I will make a continuation.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-123456789-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
